import { isEmpty } from 'lodash-es';
export class SalesData {
    offers;
    constructor(salesData) {
        Object.assign(this, salesData);
    }
    hasOffers() {
        return !isEmpty(this.offers);
    }
    setOffers(offers) {
        this.offers = offers;
    }
    getOffers() {
        return this.offers;
    }
    flatten() {
        if (!this.offers) {
            return this;
        }
        const offers = this.offers.flatMap((offer) => SalesDataOffer.flattenSalesDataOffer(offer));
        const salesData = new SalesData();
        salesData.setOffers(offers);
        return salesData;
    }
}
export class SalesDataOffer {
    id;
    type;
    offers;
    amountOfLimitedSims;
    static flattenSalesDataOffer(salesDataOffer) {
        const salesDataOfferWithoutOffers = Object.assign(new SalesDataOffer(), salesDataOffer, {
            offers: [],
        });
        return [salesDataOfferWithoutOffers].concat((salesDataOffer?.offers ?? []).flatMap((offer) => SalesDataOffer.flattenSalesDataOffer(offer)));
    }
    static of(id, type, offers) {
        const salesDataOffer = new SalesDataOffer();
        salesDataOffer.id = id;
        salesDataOffer.type = type;
        salesDataOffer.offers = offers;
        return salesDataOffer;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2FsZXMtZGF0YS5tb2RlbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9zYWxlcy9tb2RlbHMvc2FsZXMtZGF0YS5tb2RlbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sV0FBVyxDQUFDO0FBU3BDLE1BQU0sT0FBTyxTQUFTO0lBQ1osTUFBTSxDQUFtQjtJQUVqQyxZQUFZLFNBQXFCO1FBQy9CLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQ2pDLENBQUM7SUFFRCxTQUFTO1FBQ1AsT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDL0IsQ0FBQztJQUVELFNBQVMsQ0FBQyxNQUF3QjtRQUNoQyxJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztJQUN2QixDQUFDO0lBRUQsU0FBUztRQUNQLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUNyQixDQUFDO0lBRUQsT0FBTztRQUNMLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDakIsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO1FBQ0QsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxLQUFxQixFQUFFLEVBQUUsQ0FBQyxjQUFjLENBQUMscUJBQXFCLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUMzRyxNQUFNLFNBQVMsR0FBYyxJQUFJLFNBQVMsRUFBRSxDQUFDO1FBQzdDLFNBQVMsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDNUIsT0FBTyxTQUFTLENBQUM7SUFDbkIsQ0FBQztDQUNGO0FBRUQsTUFBTSxPQUFPLGNBQWM7SUFDekIsRUFBRSxDQUFTO0lBQ1gsSUFBSSxDQUFnQjtJQUNwQixNQUFNLENBQW9CO0lBQzFCLG1CQUFtQixDQUFVO0lBRTdCLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxjQUE4QjtRQUN6RCxNQUFNLDJCQUEyQixHQUFtQixNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksY0FBYyxFQUFFLEVBQUUsY0FBYyxFQUFFO1lBQ3RHLE1BQU0sRUFBRSxFQUFFO1NBQ1gsQ0FBQyxDQUFDO1FBQ0gsT0FBTyxDQUFDLDJCQUEyQixDQUFDLENBQUMsTUFBTSxDQUN6QyxDQUFDLGNBQWMsRUFBRSxNQUFNLElBQUksRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBcUIsRUFBRSxFQUFFLENBQUMsY0FBYyxDQUFDLHFCQUFxQixDQUFDLEtBQUssQ0FBQyxDQUFDLENBQy9HLENBQUM7SUFDSixDQUFDO0lBRUQsTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUFVLEVBQUUsSUFBbUIsRUFBRSxNQUF5QjtRQUNsRSxNQUFNLGNBQWMsR0FBbUIsSUFBSSxjQUFjLEVBQUUsQ0FBQztRQUM1RCxjQUFjLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQztRQUN2QixjQUFjLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUMzQixjQUFjLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztRQUMvQixPQUFPLGNBQWMsQ0FBQztJQUN4QixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc0VtcHR5IH0gZnJvbSAnbG9kYXNoLWVzJztcbmltcG9ydCB7IFNhbGVzRGF0YVR5cGUgfSBmcm9tICcuL3NhbGVzLWRhdGEudHlwZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmF3U2FsZXNEYXRhIHtcbiAgcHJvZHVjdHM6IHN0cmluZ1tdO1xuICBvcHRpb25zOiBzdHJpbmdbXTtcbiAgb3B0aW5zOiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGNsYXNzIFNhbGVzRGF0YSB7XG4gIHByaXZhdGUgb2ZmZXJzOiBTYWxlc0RhdGFPZmZlcltdO1xuXG4gIGNvbnN0cnVjdG9yKHNhbGVzRGF0YT86IFNhbGVzRGF0YSkge1xuICAgIE9iamVjdC5hc3NpZ24odGhpcywgc2FsZXNEYXRhKTtcbiAgfVxuXG4gIGhhc09mZmVycygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gIWlzRW1wdHkodGhpcy5vZmZlcnMpO1xuICB9XG5cbiAgc2V0T2ZmZXJzKG9mZmVyczogU2FsZXNEYXRhT2ZmZXJbXSkge1xuICAgIHRoaXMub2ZmZXJzID0gb2ZmZXJzO1xuICB9XG5cbiAgZ2V0T2ZmZXJzKCk6IFNhbGVzRGF0YU9mZmVyW10ge1xuICAgIHJldHVybiB0aGlzLm9mZmVycztcbiAgfVxuXG4gIGZsYXR0ZW4oKTogU2FsZXNEYXRhIHtcbiAgICBpZiAoIXRoaXMub2ZmZXJzKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgY29uc3Qgb2ZmZXJzID0gdGhpcy5vZmZlcnMuZmxhdE1hcCgob2ZmZXI6IFNhbGVzRGF0YU9mZmVyKSA9PiBTYWxlc0RhdGFPZmZlci5mbGF0dGVuU2FsZXNEYXRhT2ZmZXIob2ZmZXIpKTtcbiAgICBjb25zdCBzYWxlc0RhdGE6IFNhbGVzRGF0YSA9IG5ldyBTYWxlc0RhdGEoKTtcbiAgICBzYWxlc0RhdGEuc2V0T2ZmZXJzKG9mZmVycyk7XG4gICAgcmV0dXJuIHNhbGVzRGF0YTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgU2FsZXNEYXRhT2ZmZXIge1xuICBpZDogc3RyaW5nO1xuICB0eXBlOiBTYWxlc0RhdGFUeXBlO1xuICBvZmZlcnM/OiBTYWxlc0RhdGFPZmZlcltdO1xuICBhbW91bnRPZkxpbWl0ZWRTaW1zPzogbnVtYmVyO1xuXG4gIHN0YXRpYyBmbGF0dGVuU2FsZXNEYXRhT2ZmZXIoc2FsZXNEYXRhT2ZmZXI6IFNhbGVzRGF0YU9mZmVyKTogU2FsZXNEYXRhT2ZmZXJbXSB7XG4gICAgY29uc3Qgc2FsZXNEYXRhT2ZmZXJXaXRob3V0T2ZmZXJzOiBTYWxlc0RhdGFPZmZlciA9IE9iamVjdC5hc3NpZ24obmV3IFNhbGVzRGF0YU9mZmVyKCksIHNhbGVzRGF0YU9mZmVyLCB7XG4gICAgICBvZmZlcnM6IFtdLFxuICAgIH0pO1xuICAgIHJldHVybiBbc2FsZXNEYXRhT2ZmZXJXaXRob3V0T2ZmZXJzXS5jb25jYXQoXG4gICAgICAoc2FsZXNEYXRhT2ZmZXI/Lm9mZmVycyA/PyBbXSkuZmxhdE1hcCgob2ZmZXI6IFNhbGVzRGF0YU9mZmVyKSA9PiBTYWxlc0RhdGFPZmZlci5mbGF0dGVuU2FsZXNEYXRhT2ZmZXIob2ZmZXIpKVxuICAgICk7XG4gIH1cblxuICBzdGF0aWMgb2YoaWQ6IHN0cmluZywgdHlwZTogU2FsZXNEYXRhVHlwZSwgb2ZmZXJzPzogU2FsZXNEYXRhT2ZmZXJbXSk6IFNhbGVzRGF0YU9mZmVyIHtcbiAgICBjb25zdCBzYWxlc0RhdGFPZmZlcjogU2FsZXNEYXRhT2ZmZXIgPSBuZXcgU2FsZXNEYXRhT2ZmZXIoKTtcbiAgICBzYWxlc0RhdGFPZmZlci5pZCA9IGlkO1xuICAgIHNhbGVzRGF0YU9mZmVyLnR5cGUgPSB0eXBlO1xuICAgIHNhbGVzRGF0YU9mZmVyLm9mZmVycyA9IG9mZmVycztcbiAgICByZXR1cm4gc2FsZXNEYXRhT2ZmZXI7XG4gIH1cbn1cbiJdfQ==