import { ConfigConstants } from '@telenet/ng-lib-config';
import { OcapiAuthenticationProvider, OpenidAuthenticationProvider } from '../providers';
import { JWTAuthenticationService, TransparentAuthenticationService } from '../services';
const extractJwtParameter = (urlService) => {
    return urlService.getHashParameter('jwt') || urlService.getRequestParamValue('jwt', '');
};
export const authenticationProviderFactory = (urlService, configService) => {
    const jwtParameter = extractJwtParameter(urlService);
    if ((configService.getConfig(ConfigConstants.AUTH_PROVIDER) === OcapiAuthenticationProvider.PROVIDER_TYPE ||
        urlService.getRequestParamValue('loginFlow', '') === 'oktaLogin') &&
        !jwtParameter) {
        return new OcapiAuthenticationProvider();
    }
    return new OpenidAuthenticationProvider();
};
export const authenticationServiceFactory = (urlService) => {
    const jwtParameter = extractJwtParameter(urlService);
    if (jwtParameter) {
        return new JWTAuthenticationService();
    }
    else {
        return new TransparentAuthenticationService();
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXV0aGVudGljYXRpb24uZmFjdG9yeS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9saWIvc2VydmljZXMvYXV0aGVudGljYXRpb24vZmFjdG9yeS9hdXRoZW50aWNhdGlvbi5mYWN0b3J5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxlQUFlLEVBQWlCLE1BQU0sd0JBQXdCLENBQUM7QUFDeEUsT0FBTyxFQUEwQiwyQkFBMkIsRUFBRSw0QkFBNEIsRUFBRSxNQUFNLGNBQWMsQ0FBQztBQUVqSCxPQUFPLEVBQUUsd0JBQXdCLEVBQUUsZ0NBQWdDLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFHekYsTUFBTSxtQkFBbUIsR0FBRyxDQUFDLFVBQXNCLEVBQVUsRUFBRTtJQUM3RCxPQUFPLFVBQVUsQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsSUFBSSxVQUFVLENBQUMsb0JBQW9CLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQzFGLENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLDZCQUE2QixHQUFHLENBQzNDLFVBQXNCLEVBQ3RCLGFBQTRCLEVBQ0osRUFBRTtJQUMxQixNQUFNLFlBQVksR0FBRyxtQkFBbUIsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUNyRCxJQUNFLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxlQUFlLENBQUMsYUFBYSxDQUFDLEtBQUssMkJBQTJCLENBQUMsYUFBYTtRQUNuRyxVQUFVLENBQUMsb0JBQW9CLENBQUMsV0FBVyxFQUFFLEVBQUUsQ0FBQyxLQUFLLFdBQVcsQ0FBQztRQUNuRSxDQUFDLFlBQVksRUFDYixDQUFDO1FBQ0QsT0FBTyxJQUFJLDJCQUEyQixFQUFFLENBQUM7SUFDM0MsQ0FBQztJQUNELE9BQU8sSUFBSSw0QkFBNEIsRUFBRSxDQUFDO0FBQzVDLENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLDRCQUE0QixHQUFHLENBQUMsVUFBc0IsRUFBeUIsRUFBRTtJQUM1RixNQUFNLFlBQVksR0FBRyxtQkFBbUIsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUVyRCxJQUFJLFlBQVksRUFBRSxDQUFDO1FBQ2pCLE9BQU8sSUFBSSx3QkFBd0IsRUFBRSxDQUFDO0lBQ3hDLENBQUM7U0FBTSxDQUFDO1FBQ04sT0FBTyxJQUFJLGdDQUFnQyxFQUFFLENBQUM7SUFDaEQsQ0FBQztBQUNILENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbmZpZ0NvbnN0YW50cywgQ29uZmlnU2VydmljZSB9IGZyb20gJ0B0ZWxlbmV0L25nLWxpYi1jb25maWcnO1xuaW1wb3J0IHsgQXV0aGVudGljYXRpb25Qcm92aWRlciwgT2NhcGlBdXRoZW50aWNhdGlvblByb3ZpZGVyLCBPcGVuaWRBdXRoZW50aWNhdGlvblByb3ZpZGVyIH0gZnJvbSAnLi4vcHJvdmlkZXJzJztcbmltcG9ydCB7IFVybFNlcnZpY2UgfSBmcm9tICdAdGVsZW5ldC9uZy1saWItcGFnZSc7XG5pbXBvcnQgeyBKV1RBdXRoZW50aWNhdGlvblNlcnZpY2UsIFRyYW5zcGFyZW50QXV0aGVudGljYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMnO1xuaW1wb3J0IHsgQXV0aGVudGljYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi4vbW9kZWxzJztcblxuY29uc3QgZXh0cmFjdEp3dFBhcmFtZXRlciA9ICh1cmxTZXJ2aWNlOiBVcmxTZXJ2aWNlKTogc3RyaW5nID0+IHtcbiAgcmV0dXJuIHVybFNlcnZpY2UuZ2V0SGFzaFBhcmFtZXRlcignand0JykgfHwgdXJsU2VydmljZS5nZXRSZXF1ZXN0UGFyYW1WYWx1ZSgnand0JywgJycpO1xufTtcblxuZXhwb3J0IGNvbnN0IGF1dGhlbnRpY2F0aW9uUHJvdmlkZXJGYWN0b3J5ID0gKFxuICB1cmxTZXJ2aWNlOiBVcmxTZXJ2aWNlLFxuICBjb25maWdTZXJ2aWNlOiBDb25maWdTZXJ2aWNlXG4pOiBBdXRoZW50aWNhdGlvblByb3ZpZGVyID0+IHtcbiAgY29uc3Qgand0UGFyYW1ldGVyID0gZXh0cmFjdEp3dFBhcmFtZXRlcih1cmxTZXJ2aWNlKTtcbiAgaWYgKFxuICAgIChjb25maWdTZXJ2aWNlLmdldENvbmZpZyhDb25maWdDb25zdGFudHMuQVVUSF9QUk9WSURFUikgPT09IE9jYXBpQXV0aGVudGljYXRpb25Qcm92aWRlci5QUk9WSURFUl9UWVBFIHx8XG4gICAgICB1cmxTZXJ2aWNlLmdldFJlcXVlc3RQYXJhbVZhbHVlKCdsb2dpbkZsb3cnLCAnJykgPT09ICdva3RhTG9naW4nKSAmJlxuICAgICFqd3RQYXJhbWV0ZXJcbiAgKSB7XG4gICAgcmV0dXJuIG5ldyBPY2FwaUF1dGhlbnRpY2F0aW9uUHJvdmlkZXIoKTtcbiAgfVxuICByZXR1cm4gbmV3IE9wZW5pZEF1dGhlbnRpY2F0aW9uUHJvdmlkZXIoKTtcbn07XG5cbmV4cG9ydCBjb25zdCBhdXRoZW50aWNhdGlvblNlcnZpY2VGYWN0b3J5ID0gKHVybFNlcnZpY2U6IFVybFNlcnZpY2UpOiBBdXRoZW50aWNhdGlvblNlcnZpY2UgPT4ge1xuICBjb25zdCBqd3RQYXJhbWV0ZXIgPSBleHRyYWN0Snd0UGFyYW1ldGVyKHVybFNlcnZpY2UpO1xuXG4gIGlmIChqd3RQYXJhbWV0ZXIpIHtcbiAgICByZXR1cm4gbmV3IEpXVEF1dGhlbnRpY2F0aW9uU2VydmljZSgpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXcgVHJhbnNwYXJlbnRBdXRoZW50aWNhdGlvblNlcnZpY2UoKTtcbiAgfVxufTtcbiJdfQ==