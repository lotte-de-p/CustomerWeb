import { Validators } from '@angular/forms';
export class VatNumberValidator extends Validators {
    static isValidVatNumber(control) {
        let value = control.value;
        if (value === null || value === ' ') {
            return { required: true };
        }
        value = value.replace(/\./g, '');
        value = value.replace(/^[a-zA-z]{2}/, '');
        // Check if there are 10 digits
        if (!((Math.log(value) * Math.LOG10E + 1) | 0)) {
            return { invalidVatNumber: value };
        }
        const part1 = Number(value.substring(0, 8));
        const part2 = Number(value.substring(8, 10));
        if (part2 !== 97 - (part1 % 97)) {
            return { invalidVatNumber: value };
        }
        return null;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmF0LW51bWJlci52YWxpZGF0b3IuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvdmFsaWRhdG9ycy92YXQtbnVtYmVyLnZhbGlkYXRvci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQXFDLFVBQVUsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRS9FLE1BQU0sT0FBTyxrQkFBbUIsU0FBUSxVQUFVO0lBQ2hELE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxPQUF3QjtRQUM5QyxJQUFJLEtBQUssR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDO1FBRTFCLElBQUksS0FBSyxLQUFLLElBQUksSUFBSSxLQUFLLEtBQUssR0FBRyxFQUFFLENBQUM7WUFDcEMsT0FBTyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQztRQUM1QixDQUFDO1FBRUQsS0FBSyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ2pDLEtBQUssR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLGNBQWMsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUUxQywrQkFBK0I7UUFDL0IsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUMvQyxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsS0FBSyxFQUFFLENBQUM7UUFDckMsQ0FBQztRQUVELE1BQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVDLE1BQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBRTdDLElBQUksS0FBSyxLQUFLLEVBQUUsR0FBRyxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDO1lBQ2hDLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxLQUFLLEVBQUUsQ0FBQztRQUNyQyxDQUFDO1FBQ0QsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBYnN0cmFjdENvbnRyb2wsIFZhbGlkYXRpb25FcnJvcnMsIFZhbGlkYXRvcnMgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5cbmV4cG9ydCBjbGFzcyBWYXROdW1iZXJWYWxpZGF0b3IgZXh0ZW5kcyBWYWxpZGF0b3JzIHtcbiAgc3RhdGljIGlzVmFsaWRWYXROdW1iZXIoY29udHJvbDogQWJzdHJhY3RDb250cm9sKTogVmFsaWRhdGlvbkVycm9ycyB8IG51bGwge1xuICAgIGxldCB2YWx1ZSA9IGNvbnRyb2wudmFsdWU7XG5cbiAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09ICcgJykge1xuICAgICAgcmV0dXJuIHsgcmVxdWlyZWQ6IHRydWUgfTtcbiAgICB9XG5cbiAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL1xcLi9nLCAnJyk7XG4gICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9eW2EtekEtel17Mn0vLCAnJyk7XG5cbiAgICAvLyBDaGVjayBpZiB0aGVyZSBhcmUgMTAgZGlnaXRzXG4gICAgaWYgKCEoKE1hdGgubG9nKHZhbHVlKSAqIE1hdGguTE9HMTBFICsgMSkgfCAwKSkge1xuICAgICAgcmV0dXJuIHsgaW52YWxpZFZhdE51bWJlcjogdmFsdWUgfTtcbiAgICB9XG5cbiAgICBjb25zdCBwYXJ0MSA9IE51bWJlcih2YWx1ZS5zdWJzdHJpbmcoMCwgOCkpO1xuICAgIGNvbnN0IHBhcnQyID0gTnVtYmVyKHZhbHVlLnN1YnN0cmluZyg4LCAxMCkpO1xuXG4gICAgaWYgKHBhcnQyICE9PSA5NyAtIChwYXJ0MSAlIDk3KSkge1xuICAgICAgcmV0dXJuIHsgaW52YWxpZFZhdE51bWJlcjogdmFsdWUgfTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cbiJdfQ==