import { AbstractBaseComponent } from './abstract-base.component';
const TIMEOUT = 800;
export class AbstractCardComponent extends AbstractBaseComponent {
    elementRef;
    document;
    constructor(elementRef, document) {
        super();
        this.elementRef = elementRef;
        this.document = document;
    }
    hideCard() {
        setTimeout(() => {
            this.parentCardElement?.dispatchEvent(new CustomEvent('card:hide', { bubbles: true }));
        }, TIMEOUT);
    }
    showSimpleCard() {
        setTimeout(() => {
            this.parentCardElement?.dispatchEvent(new CustomEvent('card:show-simple-view', { bubbles: true }));
        }, TIMEOUT);
    }
    hideSimpleCard() {
        setTimeout(() => {
            this.parentCardElement?.dispatchEvent(new CustomEvent('card:hide-simple-view', { bubbles: true }));
        }, TIMEOUT);
    }
    showCardWithData(data) {
        setTimeout(() => {
            this.parentCardElement?.dispatchEvent(new CustomEvent('card:show-data', { bubbles: true, detail: data }));
        }, TIMEOUT);
    }
    updateCardTarget(url) {
        setTimeout(() => {
            this.parentCardElement?.dispatchEvent(new CustomEvent('card:updateTarget', { bubbles: true, detail: url }));
        }, TIMEOUT);
    }
    processClick(url) {
        setTimeout(() => {
            this.parentCardElement?.dispatchEvent(new CustomEvent('card:click', { bubbles: true, detail: { url: url } }));
        }, TIMEOUT);
    }
    get parentCardElement() {
        const cardElement = this.elementRef.nativeElement;
        return (cardElement?.closest('[data-tg-cmp-dashboard-card-instance-id]') ||
            cardElement?.closest('[data-component-instance-id]'));
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWJzdHJhY3QtY2FyZC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvbGliL3BhZ2UvY29tbW9uL2Fic3RyYWN0LWNhcmQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBRWxFLE1BQU0sT0FBTyxHQUFHLEdBQUcsQ0FBQztBQUVwQixNQUFNLE9BQWdCLHFCQUFzQixTQUFRLHFCQUFxQjtJQUUzRDtJQUNBO0lBRlosWUFDWSxVQUFzQixFQUN0QixRQUFtQjtRQUU3QixLQUFLLEVBQUUsQ0FBQztRQUhFLGVBQVUsR0FBVixVQUFVLENBQVk7UUFDdEIsYUFBUSxHQUFSLFFBQVEsQ0FBVztJQUcvQixDQUFDO0lBRUQsUUFBUTtRQUNOLFVBQVUsQ0FBQyxHQUFHLEVBQUU7WUFDZCxJQUFJLENBQUMsaUJBQWlCLEVBQUUsYUFBYSxDQUFDLElBQUksV0FBVyxDQUFDLFdBQVcsRUFBRSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDekYsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ2QsQ0FBQztJQUVELGNBQWM7UUFDWixVQUFVLENBQUMsR0FBRyxFQUFFO1lBQ2QsSUFBSSxDQUFDLGlCQUFpQixFQUFFLGFBQWEsQ0FBQyxJQUFJLFdBQVcsQ0FBQyx1QkFBdUIsRUFBRSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDckcsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ2QsQ0FBQztJQUVELGNBQWM7UUFDWixVQUFVLENBQUMsR0FBRyxFQUFFO1lBQ2QsSUFBSSxDQUFDLGlCQUFpQixFQUFFLGFBQWEsQ0FBQyxJQUFJLFdBQVcsQ0FBQyx1QkFBdUIsRUFBRSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDckcsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ2QsQ0FBQztJQUVELGdCQUFnQixDQUFJLElBQU87UUFDekIsVUFBVSxDQUFDLEdBQUcsRUFBRTtZQUNkLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxhQUFhLENBQUMsSUFBSSxXQUFXLENBQUMsZ0JBQWdCLEVBQUUsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDNUcsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ2QsQ0FBQztJQUVELGdCQUFnQixDQUFDLEdBQVc7UUFDMUIsVUFBVSxDQUFDLEdBQUcsRUFBRTtZQUNkLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxhQUFhLENBQUMsSUFBSSxXQUFXLENBQUMsbUJBQW1CLEVBQUUsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDOUcsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ2QsQ0FBQztJQUVELFlBQVksQ0FBQyxHQUFXO1FBQ3RCLFVBQVUsQ0FBQyxHQUFHLEVBQUU7WUFDZCxJQUFJLENBQUMsaUJBQWlCLEVBQUUsYUFBYSxDQUFDLElBQUksV0FBVyxDQUFDLFlBQVksRUFBRSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ2hILENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUNkLENBQUM7SUFFRCxJQUFZLGlCQUFpQjtRQUMzQixNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLGFBQWEsQ0FBQztRQUNsRCxPQUFPLENBQ0wsV0FBVyxFQUFFLE9BQU8sQ0FBQywwQ0FBMEMsQ0FBQztZQUNoRSxXQUFXLEVBQUUsT0FBTyxDQUFDLDhCQUE4QixDQUFDLENBQ3JELENBQUM7SUFDSixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFbGVtZW50UmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBYnN0cmFjdEJhc2VDb21wb25lbnQgfSBmcm9tICcuL2Fic3RyYWN0LWJhc2UuY29tcG9uZW50JztcblxuY29uc3QgVElNRU9VVCA9IDgwMDtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFic3RyYWN0Q2FyZENvbXBvbmVudCBleHRlbmRzIEFic3RyYWN0QmFzZUNvbXBvbmVudCB7XG4gIHByb3RlY3RlZCBjb25zdHJ1Y3RvcihcbiAgICBwcm90ZWN0ZWQgZWxlbWVudFJlZjogRWxlbWVudFJlZixcbiAgICBwcm90ZWN0ZWQgZG9jdW1lbnQ/OiBEb2N1bWVudFxuICApIHtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgaGlkZUNhcmQoKTogdm9pZCB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnBhcmVudENhcmRFbGVtZW50Py5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnY2FyZDpoaWRlJywgeyBidWJibGVzOiB0cnVlIH0pKTtcbiAgICB9LCBUSU1FT1VUKTtcbiAgfVxuXG4gIHNob3dTaW1wbGVDYXJkKCk6IHZvaWQge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5wYXJlbnRDYXJkRWxlbWVudD8uZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2NhcmQ6c2hvdy1zaW1wbGUtdmlldycsIHsgYnViYmxlczogdHJ1ZSB9KSk7XG4gICAgfSwgVElNRU9VVCk7XG4gIH1cblxuICBoaWRlU2ltcGxlQ2FyZCgpOiB2b2lkIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMucGFyZW50Q2FyZEVsZW1lbnQ/LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdjYXJkOmhpZGUtc2ltcGxlLXZpZXcnLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xuICAgIH0sIFRJTUVPVVQpO1xuICB9XG5cbiAgc2hvd0NhcmRXaXRoRGF0YTxUPihkYXRhOiBUKTogdm9pZCB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnBhcmVudENhcmRFbGVtZW50Py5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnY2FyZDpzaG93LWRhdGEnLCB7IGJ1YmJsZXM6IHRydWUsIGRldGFpbDogZGF0YSB9KSk7XG4gICAgfSwgVElNRU9VVCk7XG4gIH1cblxuICB1cGRhdGVDYXJkVGFyZ2V0KHVybDogc3RyaW5nKTogdm9pZCB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnBhcmVudENhcmRFbGVtZW50Py5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnY2FyZDp1cGRhdGVUYXJnZXQnLCB7IGJ1YmJsZXM6IHRydWUsIGRldGFpbDogdXJsIH0pKTtcbiAgICB9LCBUSU1FT1VUKTtcbiAgfVxuXG4gIHByb2Nlc3NDbGljayh1cmw6IHN0cmluZyk6IHZvaWQge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5wYXJlbnRDYXJkRWxlbWVudD8uZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2NhcmQ6Y2xpY2snLCB7IGJ1YmJsZXM6IHRydWUsIGRldGFpbDogeyB1cmw6IHVybCB9IH0pKTtcbiAgICB9LCBUSU1FT1VUKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0IHBhcmVudENhcmRFbGVtZW50KCk6IEVsZW1lbnQge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQ7XG4gICAgcmV0dXJuIChcbiAgICAgIGNhcmRFbGVtZW50Py5jbG9zZXN0KCdbZGF0YS10Zy1jbXAtZGFzaGJvYXJkLWNhcmQtaW5zdGFuY2UtaWRdJykgfHxcbiAgICAgIGNhcmRFbGVtZW50Py5jbG9zZXN0KCdbZGF0YS1jb21wb25lbnQtaW5zdGFuY2UtaWRdJylcbiAgICApO1xuICB9XG59XG4iXX0=