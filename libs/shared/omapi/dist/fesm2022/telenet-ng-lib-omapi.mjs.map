{"version":3,"file":"telenet-ng-lib-omapi.mjs","sources":["../../src/lib/constants/omapi.constants.ts","../../src/lib/constants/omapi-characteristic.enum.ts","../../src/lib/constants/omapi-family.constants.ts","../../src/lib/constants/language.enum.ts","../../src/lib/constants/product.constant.ts","../../src/lib/constants/product-price-type.enum.ts","../../src/lib/constants/product-characteristic.enum.ts","../../src/lib/constants/sofy-combo-products.constants.ts","../../src/lib/enums/chars.enum.ts","../../src/lib/constants/fiber-products.constants.ts","../../src/lib/models/omapi-product.model.ts","../../src/lib/models/omapi-product.testfactory.ts","../../src/lib/interfaces/omapi-family.testfactory.ts","../../src/lib/interfaces/raw-omapi-product.interface.testfactory.ts","../../src/lib/models/omapi-premium.model.ts","../../src/lib/mappers/omapi-premium.mapper.ts","../../src/lib/mappers/omapi-product.mapper.ts","../../src/lib/utils/omapi-family.utils.ts","../../src/lib/utils/omapi.utils.ts","../../src/lib/services/cache/omapi-cache.service.ts","../../src/lib/services/omapi-product.service.ts","../../src/lib/services/omapi-enrich.service.ts","../../src/lib/services/omapi-family.service.ts","../../src/lib/services/omapi-premium.service.ts","../../src/telenet-ng-lib-omapi.ts"],"sourcesContent":["export enum OmapiServiceSpecificationLabelKey {\n  MOBILE_INTERNET_UNLIMITED_SHARED_SPEC = 'spec.mobileinternet.volume.unlimited.shared',\n  FIXED_INTERNET_DL_SPEED = 'spec.fixedinternet.speed.download',\n  FIXED_INTERNET_DL_VOLUME_UNLIMITED = 'spec.fixedinternet.volume.download.fup',\n  FIXED_INTERNET_DL_VOLUME_CAP = 'spec.fixedinternet.volume.download.cap',\n  SPEC_BUNDLE_MAX_MOBILE_LINES = 'spec.bundle.mobile.maxlines',\n}\n\nexport enum OmapiServiceType {\n  FIXED_INTERNET = 'FIXED_INTERNET',\n  FIXED_CALLING = 'FIXED_CALLING',\n  MOBILE_INTERNET = 'MOBILE_INTERNET',\n  MOBILE_CALLING = 'MOBILE_CALLING',\n  GENERAL = 'GENERAL',\n  DTV = 'DTV',\n  ATV = 'ATV',\n  TV = 'TV',\n}\n\nexport enum OmapiConstituentType {\n  DTV = 'dtv',\n  INTERNET = 'internet_line',\n  MOBILE = 'mobile_line',\n}\nexport enum OmapiProductTierEnum {\n  LOW = 'Low',\n  MID = 'Mid',\n  HIGH = 'High',\n}\n\nexport enum OmapiLegacyProducts {\n  WHOP = '71',\n  WHOPPA = '70',\n}\n\nexport enum OmapiDarwinProducts {\n  STREAMING_SERVICE_CONTAINER = 'STRM0001',\n  NETFLIX_PREMIUM_ADDON = 'STRM0006',\n  NETFLIX_STANDARD = 'STRM0005',\n}\n\nexport enum OmapiProductType {\n  PRODUCT = 'PRODUCT',\n  BUNDLE = 'BUNDLE',\n  E_SIM = 'E_SIM',\n}\n\nexport enum OmapiSubCategoryEnum {\n  NETFLIX = 'Netflix',\n}\n","export enum OmapiCharacteristicEnum {\n  PRODUCT_GROUP = 'productGroup',\n  PRODUCT_SUB_GROUP = 'productSubGroup',\n  PRODUCT_LEVEL = 'productLevel',\n  PRODUCT_TIER = 'productTier',\n  CONSTITUENTS = 'constituents',\n  ESIM_AVAILABLE = 'esimAvailable',\n}\n\nexport enum OmapiProductGroupEnum {\n  FMC = 'FMC',\n}\n\nexport enum OmapiProductSubGroupEnum {\n  CONNECT5 = 'C5',\n  CONNECT5_SOHO = 'C5 SOHO',\n  KLIK = 'KLIK',\n}\n","export enum OmapiFamilyProductType {\n  MOBILE = 'mobile',\n  ENTERTAINMENT = 'entertainment',\n  FIXED_TELEPHONY = 'fixedTelephony',\n}\n\nexport class OmapiFamilyConstants {\n  static readonly FAMILY_PRODUCT_TYPES = [\n    OmapiFamilyProductType.MOBILE,\n    OmapiFamilyProductType.ENTERTAINMENT,\n    OmapiFamilyProductType.FIXED_TELEPHONY,\n  ];\n}\n\nexport enum OmapiFamilyTierEnum {\n  FURIOUS = 'furious',\n  FAST = 'fast',\n  KLIK = 'klik',\n  ONE = 'ONE',\n  ONE_UP = 'ONEup',\n}\n\nexport type OmapiMobileDataKey = 'limited' | 'unlimited';\n","export enum LanguageEnum {\n  NL = 'nl',\n  FR = 'fr',\n  EN = 'en',\n}\n","export class ProductConstants {\n  static WEIGHT = 'weight';\n  static API_VERSION_V1 = 'v1';\n  static UNLIMITED = 'UNLIMITED';\n  static MOBILE_CALLING = 'MOBILE_CALLING';\n  static MOBILE_INTERNET = 'MOBILE_INTERNET';\n  static MOBILE_LINE = 'mobile_line';\n  static MOBILE_MONETARY = 'MOBILE_MONETARY';\n  static FIXED_CALLING = 'FIXED_CALLING';\n  static FIXED_INTERNET = 'FIXED_INTERNET';\n  static FEATURE = 'FEATURE';\n  static INTERNET = 'INTERNET';\n  static GENERAL = 'GENERAL';\n  static TV = 'TV';\n  static DTV = 'DTV';\n  static MINUTES = 'MINUTES';\n  static MIN = 'MIN';\n  static FUP = 'FUP';\n  static VOICE = ['voice', 'call-to-other-networks'];\n  static DATA = ['data', 'mobile-data'];\n  static EPC_LIST_TO_SHOW_RATE = ['PREPAID-MOBILE', 'BASE0000'];\n  static OMAPI_CATEGORY_BASE_PRO = 'BASE-PRO';\n  static OMAPI_CATEGORY_BASE_PRO_VOICE = 'BASE-PRO-VOICE';\n  static OMAPI_CATEGORY_PRE_PAID_MOBILE = 'PREPAID-MOBILE';\n  static OMAPI_CATEGORY_POST_PAID_MOBILE = 'POST-PAID-MOBILE';\n  static CONTEXT_PRODUCTS = '/products';\n  static PRODUCT_TYPE_BUNDLE = 'bundle';\n  static PRODUCT_TYPE_TELEPHONE = 'telephone';\n  static PRODUCT_TYPE_MOBILE = 'mobile';\n  static PRODUCT_TYPE_DTV = 'dtv';\n  static PRODUCT_TYPE_INTERNET = 'internet';\n  static TELEPHONE_RANK = '4';\n  static MOBILE_RANK = '5';\n  static DTV_RANK = '3';\n  static INTERNET_RANK = '2';\n  static BUNDLE_RANK = '1';\n  static PRODUCT_TYPE = '/type';\n}\n","export enum ProductPriceTypeEnum {\n  RECURRENT = 'RECURRENT',\n  ONE_TIME = 'ONE-TIME',\n  OMAPI_RECURRENT_CHARGE = 'Recurrent Charge',\n  OMAPI_NON_RECURRENT_CHARGE = 'Non Recurrent Charge',\n}\n","export enum ProductCharacteristicEnum {\n  PRODUCT_GROUP = 'productGroup',\n  PRODUCT_LEVEL = 'productLevel',\n  PRODUCT_TIER = 'productTier',\n  MAX_MOBILE_LINES = 'maxMobileLines',\n  SHARED_MOBILE_DATA = 'sharedMobileData',\n}\n","import { RawOmapiProductInterfaceData } from '../interfaces/raw-omapi-product.interface';\n\nexport const SofyComboProducts: RawOmapiProductInterfaceData[] = [\n  {\n    productid: '22792_46948',\n    producttype: 'BUNDLE',\n    services: [\n      {\n        servicetype: 'FIXED_CALLING',\n        experience: {\n          experiencetype: 'CALL',\n        },\n        specifications: undefined,\n      },\n    ],\n    customercategories: undefined,\n    category: undefined,\n    subcategory: undefined,\n    visible: false,\n    shortdescription: undefined,\n    rates: undefined,\n    visibilityrules: undefined,\n    unlimited: false,\n    priceType: undefined,\n    salesofferingid: '',\n    externalProductCode: '',\n    labelkey: '',\n    apps: undefined,\n    weight: 10,\n    localizedcontent: [\n      {\n        locale: 'nl',\n        name: 'Vaste Telefonie + Phone2Go',\n        logo: '',\n      },\n      {\n        locale: 'fr',\n        name: 'Téléphonie Fixe + Phone2Go',\n        logo: '',\n      },\n    ],\n  },\n];\n","export enum CharsEnum {\n  HIDE_ADD_BUTTON_WHEN_PACK_ACTIVE = 'hideaddbuttonwhenpackactive',\n  MUTUALLY_EXCLUSIVE_TO_CONTENT_PACK = 'mutuallyexclusivetocontentpack',\n  CALL_CONTENT_PACK_DISCOUNTED_PRICE_API = 'callcontentpackdicsountedpriceapi',\n  UPGRADABLE_TO = 'upgradableto',\n  INTERNET_USAGE_LIMIT = 'internet_usage_limit',\n  INTERNET_USAGE_INITIAL_THRESHOLD = 'internet_usage_initial_threshold',\n  INTERNET_USAGE_ALERT_THRESHOLD = 'internet_usage_alert_threshold',\n  IS_EXTERNAL_CONTENT_PACK = 'isExternalContentPack',\n  PRODUCT_TIER = 'producttier',\n}\n","export const FiberProducts: string[] = [\n  'INTF0201',\n  'YUP10004',\n  'INTF0203',\n  'YUP10005',\n  'FREU0001',\n  'FRPH0001',\n  'TWOP0017',\n  'TWOP0015',\n  'WIGO1000',\n  'YUPW1000',\n  'WIGO1001',\n  'YUPW1001',\n  'WIGO1004',\n  'WIGO1006',\n  'YUPW1006',\n  'WIGO1009',\n  'YUPW1009',\n  'TWOP0016',\n  'YUP2P005',\n  'TWOP0014',\n  'YUP2P006',\n  'WIGO1015',\n  'YUPW1015',\n  'WIGO1025',\n  'WIGO1040',\n  'YUPW1040',\n  'WIGO10S3',\n  'YUPW10S3',\n  'WIGU1001',\n  'YUP2P007',\n  'C5FA0011',\n  'C5FA0012',\n  'C5FA0013',\n  'C5FA0014',\n  'C5FA0015',\n  'YUPC5021',\n  'YUPC5022',\n  'YUPC5023',\n  'YUPC5024',\n  'YUPC5025',\n  'C5FU0011',\n  'C5FU0012',\n  'C5FU0013',\n  'C5FU0014',\n  'C5FU0015',\n  'YUPC5026',\n  'YUPC5027',\n  'YUPC5028',\n  'YUPC5029',\n  'YUPC5030',\n  'BINT0005',\n  'BINT0006',\n  'DITV0103',\n  'FREU0101',\n  'BUND0113',\n  'BUND0114',\n  'KLIK0008',\n  'KLIK0009',\n  'KLIK0010',\n  'KLIK0011',\n  'KLIK0012',\n  'KLIK0013',\n  'KLIK0014',\n  'KLIK0009',\n];\n","import { RateInterface } from '../interfaces/rate.interface';\nimport { VisibilityRulesInterface } from '../interfaces/visibilityrules.interface';\nimport { ServiceInterface } from '../interfaces/service.interface';\nimport { SpecificationInterface } from '../interfaces/specification.interface';\nimport { SubCategoryInterface } from '../interfaces/sub-category.interface';\nimport { LocalizedContentInterface } from '../interfaces/localized-content.interface';\nimport { ShortDescriptionInterface } from '../interfaces/short-description.interface';\nimport { LocalizedContentNamesInterface } from '../interfaces/localized-content-names.interface';\n\nimport {\n  RawOmapiConstituentInterface,\n  UsageLimitsInterface,\n  UsageNotificationsInterface,\n} from '../interfaces/raw-omapi-product.interface';\nimport { CharsInterface } from '../interfaces/chars.interface';\nimport { CharsEnum } from '../enums/chars.enum';\nimport { CharacteristicsInterface } from '../interfaces/characteristics.interface';\nimport { each, includes, isEmpty, isObject, some, sortBy, uniq } from 'lodash-es';\nimport {\n  OmapiCharacteristicEnum,\n  OmapiProductGroupEnum,\n  OmapiProductSubGroupEnum,\n} from '../constants/omapi-characteristic.enum';\nimport {\n  OmapiDarwinProducts,\n  OmapiLegacyProducts,\n  OmapiProductTierEnum,\n  OmapiProductType,\n  OmapiServiceSpecificationLabelKey,\n  OmapiServiceType,\n  OmapiSubCategoryEnum,\n} from '../constants/omapi.constants';\nimport { ConstituentInterface } from '../interfaces/constituent.interface';\nimport { ProductConstants } from '../constants/product.constant';\nimport { ProductCharacteristicEnum } from '../constants/product-characteristic.enum';\nimport { ProductPriceTypeEnum } from '../constants/product-price-type.enum';\nimport { FiberProducts } from '../constants/fiber-products.constants';\n\nexport class OmapiProduct {\n  productId?: string;\n  isYupProduct?: boolean;\n  salesOfferingId?: string;\n  externalProductCode?: string;\n  productType?: string;\n  categories?: string[];\n  internalCategory?: string;\n  customerCategories?: string[];\n  subCategory?: SubCategoryInterface;\n  labelKey?: string;\n  visible?: boolean;\n  family?: string;\n  weight?: number;\n  services?: ServiceInterface[];\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  apps: any;\n  characteristics?: CharacteristicsInterface | unknown;\n  localizedContent?: LocalizedContentInterface[];\n  shortDescription?: ShortDescriptionInterface;\n  rates?: RateInterface[];\n  visibilityRules?: VisibilityRulesInterface;\n  unlimited?: boolean;\n  priceType?: string;\n  specifications?: SpecificationInterface[];\n  name?: string;\n  maxCount?: string;\n  eligibleForDiscount?: boolean;\n  unlimitedInternet?: boolean;\n  logo?: string;\n  usageBasedRatePlan?: boolean;\n  requiresInstallation?: boolean;\n  usageLimits?: UsageLimitsInterface;\n  usagenotifications?: UsageNotificationsInterface;\n  productConstituents?: RawOmapiConstituentInterface[];\n  chars?: CharsInterface[];\n  imageUrl?: string;\n  brand?: string;\n  extraAtHomeDelivery?: boolean;\n  isPreOrder?: boolean;\n  isBackOrder?: boolean;\n  preOrderDescriptionLabel?: string;\n  backOrderDescriptionLabel?: string;\n  isExternalContentPack?: string;\n  isEligibleForAutoPause?: boolean;\n  isEligibleForPauseProfile?: boolean;\n  isEligibleForSettinglimits?: boolean;\n  isFPBProduct?: boolean;\n\n  constructor() {\n    this.setInternalCategory();\n  }\n\n  priceInclVat(): number | undefined {\n    return (this.characteristics as CharacteristicsInterface)?.priceInclVat;\n  }\n\n  price(exclVAT: boolean): number | undefined {\n    return exclVAT\n      ? (this.characteristics as CharacteristicsInterface)?.priceExclVat\n      : (this.characteristics as CharacteristicsInterface)?.priceInclVat;\n  }\n\n  getLocalizedContentNames(): LocalizedContentNamesInterface {\n    const localizedContentNames = {} as LocalizedContentNamesInterface;\n\n    if (!isEmpty(this.localizedContent)) {\n      this.localizedContent?.forEach((item) => {\n        localizedContentNames[item.locale as keyof LocalizedContentNamesInterface] = item.name;\n      });\n    }\n    return localizedContentNames;\n  }\n\n  hasCategory(searchCategory: string): boolean | undefined {\n    return (\n      !isEmpty(this.categories) &&\n      this.categories?.some((category) => {\n        return category.toUpperCase() === searchCategory.toUpperCase();\n      })\n    );\n  }\n\n  setInternalCategory() {\n    switch (true) {\n      case this.hasCategory(ProductConstants.OMAPI_CATEGORY_PRE_PAID_MOBILE):\n        this.internalCategory = ProductConstants.OMAPI_CATEGORY_PRE_PAID_MOBILE;\n        break;\n      case this.hasCategory(ProductConstants.OMAPI_CATEGORY_BASE_PRO):\n      case this.hasCategory(ProductConstants.OMAPI_CATEGORY_BASE_PRO_VOICE):\n      case this.hasCategory(ProductConstants.OMAPI_CATEGORY_POST_PAID_MOBILE):\n      default:\n        this.internalCategory = ProductConstants.OMAPI_CATEGORY_POST_PAID_MOBILE;\n    }\n  }\n\n  hasSpecifications(): boolean {\n    return !isEmpty(this.specifications);\n  }\n\n  updateRates(): void {\n    this.rates?.forEach((rate) => {\n      rate.type = this.formatRateType(rate.type);\n      rate.isTypeData = includes(ProductConstants.DATA, rate.type);\n      rate.isTypeVoice = includes(ProductConstants.VOICE, rate.type);\n    });\n  }\n\n  isShowRates(): boolean {\n    return some(ProductConstants.EPC_LIST_TO_SHOW_RATE, (searchCategoryName: string) => {\n      return this.hasCategory(searchCategoryName) || this.externalProductCode === searchCategoryName;\n    });\n  }\n\n  getSortedSpecifications(): SpecificationInterface[] {\n    const specifications: SpecificationInterface[] = [];\n    each(this.services, (service: ServiceInterface) => {\n      each(service.specifications, (specification: SpecificationInterface) => {\n        let updatedSpecification = Object.assign({}, specification);\n        updatedSpecification.serviceType = service.serviceType;\n        updatedSpecification.id = this.productId;\n        updatedSpecification = this.setSpecifications(updatedSpecification);\n        specifications.push(updatedSpecification);\n      });\n    });\n    return this.getSortedListByWeight(specifications);\n  }\n\n  updateSpecifications(): void {\n    this.specifications?.forEach((specification) => {\n      if (specification.id === this.productId) {\n        this.setSpecifications(specification);\n      }\n    });\n  }\n\n  public getEsimCharacteristicValue(): boolean {\n    return this.getCharacteristic(OmapiCharacteristicEnum.ESIM_AVAILABLE);\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  getCharacteristic(key: string): any {\n    // eslint-disable-next-line no-prototype-builtins\n    if (isObject(this.characteristics) && this.characteristics.hasOwnProperty(key)) {\n      return (this.characteristics as CharacteristicsInterface)?.[key as keyof CharacteristicsInterface];\n    }\n    return null;\n  }\n\n  getMaxMobileLines(): string {\n    let maxMobileLines = this.getCharacteristic(ProductCharacteristicEnum.MAX_MOBILE_LINES);\n\n    if (!maxMobileLines) {\n      const maxLinesSpecification = this.getServiceSpecificationByLabelKey(\n        OmapiServiceSpecificationLabelKey.SPEC_BUNDLE_MAX_MOBILE_LINES,\n        OmapiServiceType.GENERAL\n      );\n      maxMobileLines = maxLinesSpecification?.value || null;\n    }\n    return maxMobileLines;\n  }\n\n  getSharedMobileData(): string {\n    const sharedMobileData = this.getCharacteristic(ProductCharacteristicEnum.SHARED_MOBILE_DATA);\n    return sharedMobileData && sharedMobileData.value;\n  }\n\n  hasUnlimitedCalling(): boolean | undefined {\n    return (\n      this.services &&\n      this.services.some((service) => {\n        return (\n          service.serviceType.toUpperCase() === ProductConstants.MOBILE_CALLING &&\n          service.specifications?.some((specification) => {\n            return (\n              specification.unit &&\n              specification.unit.toUpperCase() === ProductConstants.MINUTES &&\n              specification.value &&\n              specification.value.toUpperCase() === ProductConstants.UNLIMITED\n            );\n          })\n        );\n      })\n    );\n  }\n\n  hasUnlimitedMobileInternet(): boolean | undefined {\n    return this.getConstituent(ProductConstants.MOBILE_LINE)\n      ?.productInfo?.services?.find((service) => service?.serviceType === ProductConstants.MOBILE_INTERNET)\n      ?.specifications?.some((s) => s.value === ProductConstants.FUP);\n  }\n\n  hasUnlimitedFixedInternet(): boolean {\n    return (this.characteristics as CharacteristicsInterface)?.serviceCategory === ProductConstants.FUP;\n  }\n\n  hasUnlimitedInternetBasedOnLabelKey(): boolean | undefined {\n    return this.services\n      ?.find((s) => s?.serviceType === ProductConstants.MOBILE_INTERNET)\n      ?.specifications?.some(\n        (s) => s.labelKey === OmapiServiceSpecificationLabelKey.MOBILE_INTERNET_UNLIMITED_SHARED_SPEC\n      );\n  }\n\n  isWigo(): boolean {\n    return this.isFmc() && this.getProductSubGroup() === '';\n  }\n\n  isFmc(): boolean {\n    return this.getProductGroup() === OmapiProductGroupEnum.FMC;\n  }\n\n  hasServiceType(serviceType: string): boolean {\n    return some(this.services, (service) => {\n      return service.serviceType.toUpperCase() === serviceType;\n    });\n  }\n\n  isBundle(): boolean {\n    return this.productType === 'BUNDLE';\n  }\n\n  isFiber(): boolean {\n    return !!this.externalProductCode && FiberProducts.includes(this.externalProductCode);\n  }\n\n  getLogoUrl = (): string => {\n    if (this.logo) {\n      return this.logo;\n    } else if (this.labelKey) {\n      const key = this.normalizeKey(this.labelKey);\n      return '/content/dam/www-telenet-be/img/self-service/products/' + key + '.png';\n    }\n    return '';\n  };\n\n  normalizeKey = (key: string): string => {\n    if (key) {\n      return key\n        .replace(/ /g, '-')\n        .replace(/\\./g, '-')\n        .replace(/[^0-9a-zA-Z_-]/g, '')\n        .toLowerCase();\n    }\n    return '';\n  };\n\n  public getProductLevel(): string {\n    return this.getCharacteristic(OmapiCharacteristicEnum.PRODUCT_LEVEL);\n  }\n\n  public getProductTier(): string {\n    return this.getCharacteristic(OmapiCharacteristicEnum.PRODUCT_TIER);\n  }\n\n  public getConstituents(): ConstituentInterface[] {\n    return this.getCharacteristic(OmapiCharacteristicEnum.CONSTITUENTS) || [];\n  }\n\n  getConstituent(type: string): ConstituentInterface | undefined {\n    if (this.getConstituents()) {\n      const [constituent] = this.getConstituents().filter(\n        (result: ConstituentInterface) => result.type === this.normalizeKey(type)\n      );\n      return constituent;\n    }\n    return undefined;\n  }\n\n  getServiceSpecificationByLabelKey(labelKey: string, serviceType?: string): SpecificationInterface | undefined {\n    if (this.services) {\n      const service = serviceType\n        ? this.services.find((specService) => specService.serviceType === serviceType)\n        : this.services[0];\n\n      return (\n        service &&\n        service.specifications &&\n        service.specifications.find((specification: SpecificationInterface) => {\n          return specification.labelKey === this.normalizeKey(labelKey);\n        })\n      );\n    }\n    return undefined;\n  }\n\n  getBillingCycle(): string {\n    switch (this.priceType) {\n      case ProductPriceTypeEnum.OMAPI_NON_RECURRENT_CHARGE:\n        return ProductPriceTypeEnum.ONE_TIME;\n      case ProductPriceTypeEnum.OMAPI_RECURRENT_CHARGE:\n      default:\n        return ProductPriceTypeEnum.RECURRENT;\n    }\n  }\n\n  isWhop(): boolean {\n    return this.productId === OmapiLegacyProducts.WHOP;\n  }\n\n  isWhoppa(): boolean {\n    return this.productId === OmapiLegacyProducts.WHOPPA;\n  }\n\n  isConnect5(): boolean {\n    return this.getProductSubGroup() === OmapiProductSubGroupEnum.CONNECT5;\n  }\n\n  isConnect5Soho(): boolean {\n    return (\n      this.getProductSubGroup() === OmapiProductSubGroupEnum.CONNECT5_SOHO ||\n      this.getProductSubGroup() === OmapiProductSubGroupEnum.KLIK\n    );\n  }\n\n  isHighTier(): boolean {\n    return this.getCharacteristic('productTier') === OmapiProductTierEnum.HIGH;\n  }\n\n  getGroupNameLabel(): string | undefined {\n    const { productGroup, productSubGroup, productTier, productSegment } = this\n      .characteristics as CharacteristicsInterface;\n    if (productGroup && productTier && productSegment) {\n      return [productGroup, productSubGroup, productTier, productSegment]\n        .filter((productName) => productName !== '')\n        .map((productName) => productName?.toLowerCase())\n        .map((productName) => productName?.replace(/\\s+/g, '').trim())\n        .join('-');\n    }\n\n    return this.services?.map((service) => service?.serviceType?.toLowerCase()).join('-');\n  }\n\n  getUniqOutOfBundlesLimits(): string[] {\n    let limits: string[] = [];\n    if (this.usageLimits) {\n      each(this.usageLimits.outOfBundle.limits, (limit) => {\n        limits = [...limits, ...limit.values];\n      });\n    }\n\n    return uniq(limits);\n  }\n\n  hasCharKey(key?: CharsEnum): boolean {\n    const charValue = this.fetchCharKey(key);\n    return Boolean(charValue);\n  }\n\n  getCharValue(key: CharsEnum | null): string[] {\n    if (!key) {\n      return [];\n    }\n    const charValue = this.fetchCharKey(key);\n    return (charValue && charValue.values) || [];\n  }\n\n  getCharUnit(key: CharsEnum): string | undefined {\n    const charValue = this.fetchCharKey(key);\n    return charValue && charValue.unit;\n  }\n\n  fetchCharKey(key?: CharsEnum): CharsInterface | undefined {\n    return this.chars && this.chars.find((char) => char.key === key);\n  }\n\n  getInternetUsageNotificationThresholds(): unknown {\n    return this.usagenotifications?.internet;\n  }\n\n  private getProductGroup(): string {\n    return this.getCharacteristic(OmapiCharacteristicEnum.PRODUCT_GROUP);\n  }\n\n  getProductSubGroup(): string {\n    return this.getCharacteristic(OmapiCharacteristicEnum.PRODUCT_SUB_GROUP);\n  }\n\n  isStreamingServiceContainer(): boolean {\n    return this.productId === OmapiDarwinProducts.STREAMING_SERVICE_CONTAINER;\n  }\n\n  isNetflixPremiumAddon(): boolean {\n    return this.productId === OmapiDarwinProducts.NETFLIX_PREMIUM_ADDON;\n  }\n\n  isANetflixProduct(): boolean {\n    return OmapiSubCategoryEnum.NETFLIX === this.subCategory?.name;\n  }\n\n  isNetflixStandard(): boolean {\n    return this.productId === OmapiDarwinProducts.NETFLIX_STANDARD;\n  }\n\n  isDarwinProduct() {\n    const STARTS_WITH_NUMBER = /^\\d/;\n    return (this.productId && !this.productId.match(STARTS_WITH_NUMBER)) || false;\n  }\n\n  isESim(): boolean {\n    return this.productType === OmapiProductType.E_SIM;\n  }\n\n  private getSortedListByWeight(list: SpecificationInterface[]): SpecificationInterface[] {\n    return sortBy(list, ProductConstants.WEIGHT);\n  }\n\n  private formatRateType(type: string) {\n    return type && type.toLowerCase().replace(/ /g, '-');\n  }\n\n  private setSpecifications(specification: SpecificationInterface): SpecificationInterface {\n    specification.showUnit = false;\n    specification.isValue = false;\n    specification.isMonetary = false;\n    specification.isRange = false;\n    specification.isAsterisk = false;\n\n    if (specification.unit && specification.unit.toUpperCase() === ProductConstants.MINUTES) {\n      specification.unit = ProductConstants.MIN;\n    }\n\n    switch (specification.serviceType) {\n      case ProductConstants.MOBILE_CALLING:\n        return this.setSpecificationsForMobileCalling(specification);\n      case ProductConstants.MOBILE_INTERNET:\n        return this.setSpecificationsForMobileInternet(specification);\n      case ProductConstants.MOBILE_MONETARY:\n        return this.setSpecificationsForMobileMonetary(specification);\n      case ProductConstants.FIXED_CALLING:\n      case ProductConstants.TV:\n      case ProductConstants.DTV:\n        return this.setSpecificationsForFixedVoiceAndTv(specification);\n      case ProductConstants.INTERNET:\n      case ProductConstants.FIXED_INTERNET:\n        return this.setSpecificationsForInternet(specification);\n      case ProductConstants.GENERAL:\n      case ProductConstants.FEATURE:\n        return specification;\n      default:\n        console.error(`Specification not implemented: ${specification?.serviceType}`);\n        return specification;\n    }\n  }\n\n  private setSpecificationsForMobileCalling(specification: SpecificationInterface): SpecificationInterface {\n    specification.showUnit = true;\n    specification.isValue = true;\n    if (specification.value && specification.value.toUpperCase() === ProductConstants.UNLIMITED) {\n      specification.isAsterisk = true;\n      specification.showUnit = false;\n    }\n\n    if (specification.minValue && specification.maxValue) {\n      specification.isValue = false;\n      specification.isAsterisk = false;\n      specification.isRange = true;\n      specification.showUnit = true;\n    }\n    return specification;\n  }\n\n  private setSpecificationsForMobileInternet(specification: SpecificationInterface): SpecificationInterface {\n    specification.showUnit = true;\n    specification.isValue = true;\n\n    if (specification.value && specification.value.toUpperCase().indexOf(ProductConstants.UNLIMITED) > -1) {\n      specification.isAsterisk = true;\n      specification.showUnit = false;\n    }\n\n    if (specification.minValue && specification.maxValue) {\n      specification.isValue = false;\n      specification.showUnit = true;\n      specification.isRange = true;\n    }\n    return specification;\n  }\n\n  private setSpecificationsForMobileMonetary(specification: SpecificationInterface): SpecificationInterface {\n    specification.showUnit = false;\n    specification.isMonetary = true;\n    specification.isValue = false;\n    return specification;\n  }\n\n  private setSpecificationsForFixedVoiceAndTv(specification: SpecificationInterface): SpecificationInterface {\n    specification.isValue = true;\n    specification.showUnit = true;\n    specification.isMonetary = false;\n    return specification;\n  }\n\n  private setSpecificationsForInternet(specification: SpecificationInterface): SpecificationInterface {\n    if (specification.value && specification.value.toUpperCase() === ProductConstants.UNLIMITED) {\n      specification.isAsterisk = true;\n      specification.showUnit = false;\n    } else {\n      specification.showUnit = true;\n    }\n    specification.isValue = true;\n    specification.isMonetary = false;\n\n    return specification;\n  }\n}\n","import { LocalizedContentInterface } from '../interfaces/localized-content.interface';\nimport { OmapiProduct } from './omapi-product.model';\nimport { SubCategoryInterface } from '../interfaces/sub-category.interface';\n\nexport interface OmapiProductTestFactoryProps {\n  name?: string;\n  productType?: string;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  characteristics?: any;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  productConstituents?: any;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  services?: any;\n  productId?: string;\n  weight?: number;\n  localizedContent?: LocalizedContentInterface[];\n  logo?: string;\n  subCategory?: SubCategoryInterface;\n}\n\nexport class OmapiProductTestfactory {\n  static build(properties: OmapiProductTestFactoryProps = {}): OmapiProduct {\n    const omapiProduct = new OmapiProduct();\n\n    omapiProduct.name = properties.name || 'Wigo';\n    omapiProduct.productType = properties.productType || 'OTHER';\n    omapiProduct.characteristics = properties.characteristics || {};\n    omapiProduct.productConstituents = properties.productConstituents || {};\n    omapiProduct.services = properties.services || [];\n    omapiProduct.productId = properties.productId || '123';\n    omapiProduct.weight = properties.weight || 1;\n    omapiProduct.localizedContent = properties.localizedContent || [];\n    omapiProduct.externalProductCode = '95465432165';\n    omapiProduct.logo = properties.logo;\n    omapiProduct.subCategory = properties.subCategory;\n    return omapiProduct;\n  }\n}\n","import * as Factory from 'factory.ts';\nimport {\n  OmapiFamily,\n  OmapiFamilyOptin,\n  OmapiFamilyOption,\n  OmapiFamilyTier,\n  OmapiMobileData,\n  OmapiProductInfo,\n} from './omapi-family.interface';\nimport { OmapiProductTestfactory } from '../models/omapi-product.testfactory';\n\nexport const omapiMobileDataFactory = Factory.Sync.makeFactory<OmapiMobileData>({\n  omapiId: '456',\n  productInfo: OmapiProductTestfactory.build(),\n  key: 'limited',\n});\n\nexport const omapiProductInfoFactory = Factory.Sync.makeFactory<OmapiProductInfo>({\n  omapiId: '456',\n  productInfo: OmapiProductTestfactory.build(),\n  mobileData: [],\n});\n\nexport const omapiFamilyOptinFactory = Factory.Sync.makeFactory<OmapiFamilyOptin>({\n  key: 'fixed_telephony',\n  omapiId: '37785',\n  mobileId: '36860',\n});\n\nexport const omapiFamilyOptionFactory = Factory.Sync.makeFactory<OmapiFamilyOption>({\n  type: 'mobile',\n  key: 'international_calling',\n  omapiId: 'BERU0001',\n  productInfo: OmapiProductTestfactory.build(),\n  parents: [],\n});\n\nexport const omapiFamilyTierFactory = Factory.Sync.makeFactory<OmapiFamilyTier>({\n  key: 'name',\n  omapiId: '123',\n  productInfo: OmapiProductTestfactory.build(),\n  mobile: [omapiProductInfoFactory.build({ omapiId: '567' }), omapiProductInfoFactory.build({ omapiId: '568' })],\n  entertainment: [omapiProductInfoFactory.build({ omapiId: '789' }), omapiProductInfoFactory.build({ omapiId: '780' })],\n  fixedTelephony: [omapiProductInfoFactory.build({ omapiId: '121' })],\n  optins: [omapiFamilyOptinFactory.build()],\n  options: [omapiFamilyOptionFactory.build()],\n});\n\nexport const omapiFamilyFactory = Factory.Sync.makeFactory<OmapiFamily>({\n  tiers: [omapiFamilyTierFactory.build()],\n});\n\nconst KLIK_2_LIM = 'm-klik-2-lim';\nconst ENTERTAINMENT_1 = 'entertainment-id-1';\nexport const omapiKlikFamily = () => {\n  return omapiFamilyFactory.build({\n    tiers: [\n      omapiFamilyTierFactory.build({\n        key: 'klik',\n        omapiId: KLIK_2_LIM,\n        entertainment: [omapiProductInfoFactory.build({ omapiId: ENTERTAINMENT_1 })],\n        mobile: [\n          omapiProductInfoFactory.build({\n            omapiId: 'm-klik-1-lim',\n            productInfo: OmapiProductTestfactory.build({ characteristics: { maxMobileLines: 1 } }),\n            mobileData: [\n              { omapiId: 'm-klik-1-lim', key: 'limited' } as OmapiMobileData,\n              { omapiId: 'm-klik-1-unl', key: 'unlimited' } as OmapiMobileData,\n            ],\n          }),\n          omapiProductInfoFactory.build({\n            omapiId: KLIK_2_LIM,\n            productInfo: OmapiProductTestfactory.build({ characteristics: { maxMobileLines: 1 } }),\n            mobileData: [\n              { omapiId: KLIK_2_LIM, key: 'limited' } as OmapiMobileData,\n              { omapiId: 'm-klik-2-unl', key: 'unlimited' } as OmapiMobileData,\n            ],\n          }),\n        ],\n        optins: [],\n      }),\n    ],\n  });\n};\n\nconst THRILL_1 = 'm-thrill-1';\nconst THRILL_2 = 'm-thrill-2';\nconst THRILL_3 = 'm-thrill-3';\nexport const omapiConnectFiveFamily = () => {\n  return omapiFamilyFactory.build({\n    tiers: [\n      omapiFamilyTierFactory.build({\n        key: 'chill',\n        omapiId: 'm-chill-1',\n        entertainment: [\n          omapiProductInfoFactory.build({ omapiId: ENTERTAINMENT_1 }),\n          omapiProductInfoFactory.build({ omapiId: 'entertainment-id-2' }),\n        ],\n        mobile: [\n          omapiProductInfoFactory.build({\n            omapiId: 'm-chill-1',\n            productInfo: OmapiProductTestfactory.build({ characteristics: { maxMobileLines: 1 } }),\n          }),\n          omapiProductInfoFactory.build({\n            omapiId: 'm-chill-2',\n            productInfo: OmapiProductTestfactory.build({ characteristics: { maxMobileLines: 2 } }),\n          }),\n          omapiProductInfoFactory.build({\n            omapiId: 'm-chill-3',\n            productInfo: OmapiProductTestfactory.build({ characteristics: { maxMobileLines: 3 } }),\n          }),\n        ],\n        optins: [\n          omapiFamilyOptinFactory.build({\n            key: 'fixed_telephony',\n            omapiId: 'o-chill-1-ft',\n            mobileId: 'm-chill-1',\n          }),\n          omapiFamilyOptinFactory.build({\n            key: 'fixed_telephony',\n            omapiId: 'o-chill-2-ft',\n            mobileId: 'm-chill-2',\n          }),\n          omapiFamilyOptinFactory.build({\n            key: 'fixed_telephony',\n            omapiId: 'o-chill-3-ft',\n            mobileId: 'm-chill-3',\n          }),\n          omapiFamilyOptinFactory.build({\n            key: 'data_sim',\n            omapiId: 'o-chill-1-ds',\n            mobileId: 'm-chill-1',\n          }),\n          omapiFamilyOptinFactory.build({\n            key: 'data_sim',\n            omapiId: 'o-chill-2-ds',\n            mobileId: 'm-chill-2',\n          }),\n          omapiFamilyOptinFactory.build({\n            key: 'data_sim',\n            omapiId: 'o-chill-3-ds',\n            mobileId: 'm-chill-3',\n          }),\n        ],\n      }),\n      omapiFamilyTierFactory.build({\n        key: 'thrill',\n        omapiId: THRILL_1,\n        entertainment: [\n          omapiProductInfoFactory.build({ omapiId: ENTERTAINMENT_1 }),\n          omapiProductInfoFactory.build({ omapiId: 'entertainment-id-2' }),\n        ],\n        mobile: [\n          omapiProductInfoFactory.build({\n            omapiId: THRILL_1,\n            productInfo: OmapiProductTestfactory.build({ characteristics: { maxMobileLines: 1 } }),\n          }),\n          omapiProductInfoFactory.build({\n            omapiId: THRILL_2,\n            productInfo: OmapiProductTestfactory.build({ characteristics: { maxMobileLines: 2 } }),\n          }),\n          omapiProductInfoFactory.build({\n            omapiId: THRILL_3,\n            productInfo: OmapiProductTestfactory.build({ characteristics: { maxMobileLines: 3 } }),\n          }),\n        ],\n        optins: [\n          omapiFamilyOptinFactory.build({\n            key: 'fixed_telephony',\n            omapiId: 'o-thrill-1-ft',\n            mobileId: THRILL_1,\n          }),\n          omapiFamilyOptinFactory.build({\n            key: 'fixed_telephony',\n            omapiId: 'o-thrill-2-ft',\n            mobileId: THRILL_2,\n          }),\n          omapiFamilyOptinFactory.build({\n            key: 'fixed_telephony',\n            omapiId: 'o-thrill-3-ft',\n            mobileId: THRILL_3,\n          }),\n          omapiFamilyOptinFactory.build({\n            key: 'data_sim',\n            omapiId: 'o-thrill-1-ds',\n            mobileId: THRILL_1,\n          }),\n          omapiFamilyOptinFactory.build({\n            key: 'data_sim',\n            omapiId: 'o-thrill-2-ds',\n            mobileId: THRILL_2,\n          }),\n          omapiFamilyOptinFactory.build({\n            key: 'data_sim',\n            omapiId: 'o-thrill-3-ds',\n            mobileId: THRILL_3,\n          }),\n        ],\n      }),\n    ],\n  });\n};\n","import { Sync } from 'factory.ts';\nimport { RawOmapiProductInterfaceData } from './raw-omapi-product.interface';\n\nexport const rawOmapiProductTestFactory = Sync.makeFactory<RawOmapiProductInterfaceData>({\n  category: [],\n  unlimited: false,\n  priceType: 'Non Recurrent Charge',\n  requiresInstallation: false,\n  usageBasedRatePlan: false,\n  productid: '9155501914465272430',\n  labelkey: 'Discount Telenet Customer Price',\n  salesofferingid: 'test',\n  externalProductCode: 'test',\n  producttype: 'test',\n  weight: 1,\n  apps: [],\n  services: [],\n  customercategories: [\n    'All',\n    'Residential',\n    'Production Test Business',\n    'Internal',\n    'Production Test',\n    'Event/Demo',\n    'Business',\n  ],\n  visible: false,\n  localizedcontent: [\n    {\n      locale: 'nl',\n      name: 'Korting Telenet Klantenprijs',\n      logo: 'https://customerzone.prd.base.be/content/dam/www-base-be/img/self-service/products/discount-telenet-customer-price1.png',\n    },\n    {\n      locale: 'fr',\n      name: 'Réduction Prix Client Telenet',\n      logo: 'https://customerzone.prd.base.be/content/dam/www-base-be/img/self-service/products/discount-telenet-customer-price2.png',\n    },\n    {\n      locale: 'en',\n      name: 'Discount Telenet Customer Price',\n      logo: 'https://customerzone.prd.base.be/content/dam/www-base-be/img/self-service/products/discount-telenet-customer-price3.png',\n    },\n  ],\n  isYupProduct: false,\n  isEligibleForPauseProfile: false,\n  isEligibleForAutoPause: false,\n  isEligibleForSettinglimits: false,\n  isFPBProduct: false,\n});\n","import { DetailsInterface } from '../interfaces/details.interface';\n\nexport class OmapiPremium {\n  premiumSerivceId?: string;\n  details?: DetailsInterface[];\n}\n","import { Injectable } from '@angular/core';\nimport { DetailsInterface, RawDetailsInterface, RawOmapiPremiumInterface } from '../interfaces';\nimport { MapperInterface } from '@telenet/ng-lib-shared';\nimport { OmapiPremium } from '../models';\nimport dayjs from 'dayjs';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class OmapiPremiumMapper implements MapperInterface<RawOmapiPremiumInterface, OmapiPremium> {\n  toModel(rawResponse: RawOmapiPremiumInterface): OmapiPremium {\n    return this.createOmapiPremium(rawResponse);\n  }\n\n  private createOmapiPremium(rawResponse: RawOmapiPremiumInterface): OmapiPremium {\n    const omapiPremium = new OmapiPremium();\n    if (rawResponse.serviceDetails) {\n      omapiPremium.premiumSerivceId = rawResponse.serviceDetails.premiumSerivceId || '';\n      omapiPremium.details = rawResponse.serviceDetails.details.map((detail) => this.mapPremiumDetails(detail));\n    }\n    return omapiPremium;\n  }\n\n  private mapPremiumDetails(rawDetails: RawDetailsInterface): DetailsInterface {\n    const details = {} as DetailsInterface;\n\n    details.serviceType = rawDetails.serviceType;\n    details.serviceStatus = rawDetails.serviceStatus;\n    details.serviceDescription = rawDetails.serviceDescription;\n    if (rawDetails.serviceConfirmedDate) {\n      details.serviceConfirmedDate = this.convertDate(rawDetails.serviceConfirmedDate);\n    }\n    if (rawDetails.serviceEndDate) {\n      details.serviceEndDate = this.convertDate(rawDetails.serviceEndDate);\n    }\n    details.premium = rawDetails.premium;\n    details.fixOrMobile = rawDetails.fixOrMobile;\n    if (rawDetails.priceStartDate) {\n      details.priceStartDate = this.convertDate(rawDetails.priceStartDate);\n    }\n    if (rawDetails.priceEndDate) {\n      details.priceEndDate = this.convertDate(rawDetails.priceEndDate);\n    }\n    details.sendSms = this.covertPrice(rawDetails.sendSms);\n    details.receiveSms = this.covertPrice(rawDetails.receiveSms);\n    details.sendMms = this.covertPrice(rawDetails.sendMms);\n    details.receiveMms = this.covertPrice(rawDetails.receiveMms);\n    details.callPerMinute = this.covertPrice(rawDetails.callPerMinute);\n    details.callPerSecond = this.covertPrice(rawDetails.callPerSecond);\n    details.setUpCost = rawDetails.setUpCost;\n    if (rawDetails.contentProviderStartDate) {\n      details.contentProviderStartDate = this.convertDate(rawDetails.contentProviderStartDate);\n    }\n    if (rawDetails.contentProviderEndDate) {\n      details.contentProviderEndDate = this.convertDate(rawDetails.contentProviderEndDate);\n    }\n    details.contentProviderName = rawDetails.contentProviderName;\n    details.contentProviderStreet = rawDetails.contentProviderStreet;\n    details.contentProviderPostalCode = rawDetails.contentProviderPostalCode;\n    details.contentProviderCity = rawDetails.contentProviderCity;\n    details.contentProviderCountry = rawDetails.contentProviderCountry;\n    details.customerCareTelephoneOrEmail = rawDetails.customerCareTelephoneOrEmail;\n    details.customerCareUrl = rawDetails.customerCareUrl;\n\n    return details;\n  }\n\n  covertPrice(rawPrice: string): string | undefined {\n    if (rawPrice) {\n      return rawPrice.split('/')[0];\n    }\n    return undefined;\n  }\n\n  convertDate(rawDate: string): string {\n    return dayjs(rawDate, 'YYYYMMDD').format('DD/MM/YYYY');\n  }\n}\n","import { OmapiProduct } from '../models/omapi-product.model';\nimport {\n  RawCharacteristicsInterface,\n  RawConstituentInterface,\n  RawLocalizedContentInterface,\n  RawOmapiConstituentInterface,\n  RawOmapiProductInterface,\n  RawOmapiProductInterfaceData,\n  RawRateInterface,\n  RawServiceInterface,\n  RawShortDescriptionInterface,\n  RawSpecificationInterface,\n  RawSubCategoryInterface,\n  UnitValueInterface,\n} from '../interfaces/raw-omapi-product.interface';\nimport { RateInterface } from '../interfaces/rate.interface';\nimport { VisibilityRulesInterface } from '../interfaces/visibilityrules.interface';\nimport { SubCategoryInterface } from '../interfaces/sub-category.interface';\nimport { ShortDescriptionInterface } from '../interfaces/short-description.interface';\nimport { ExperienceInterface, ServiceInterface } from '../interfaces/service.interface';\nimport { SpecificationInterface } from '../interfaces/specification.interface';\nimport { LocalizedContentInterface } from '../interfaces/localized-content.interface';\nimport { CharacteristicsInterface } from '../interfaces/characteristics.interface';\nimport { Injectable } from '@angular/core';\nimport { LanguageService, NormalizationService } from '@telenet/ng-lib-page';\nimport { CharsEnum } from '../enums/chars.enum';\nimport { CharsInterface } from '../interfaces/chars.interface';\nimport { isEmpty } from 'lodash-es';\nimport { ConstituentInterface } from '../interfaces/constituent.interface';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class OmapiProductMapper {\n  constructor(\n    private readonly languageService: LanguageService,\n    private readonly normalizationService: NormalizationService\n  ) {}\n\n  readonly ignoredDarwinSpecifications: string[] = ['sharedmobiledata', 'max_mobile_lines'];\n\n  toModel(rawOmapiProduct?: RawOmapiProductInterface): OmapiProduct {\n    return this.createOmapiProduct(rawOmapiProduct);\n  }\n\n  private createOmapiProduct(rawOmapiProduct?: RawOmapiProductInterface): OmapiProduct {\n    const omapiProduct = new OmapiProduct();\n    const rawOmapiProductData = rawOmapiProduct && rawOmapiProduct.product;\n    if (rawOmapiProductData) {\n      this.mapOmapiData(omapiProduct, rawOmapiProductData);\n\n      const contentForLocale = this.getContentForLocale(rawOmapiProductData.localizedcontent);\n\n      if (contentForLocale) {\n        omapiProduct.name = contentForLocale.name;\n        omapiProduct.logo = contentForLocale.logo;\n      }\n\n      if (rawOmapiProductData.usageLimits) {\n        omapiProduct.usageLimits = rawOmapiProductData.usageLimits;\n      }\n      if (rawOmapiProductData.usagenotifications) {\n        omapiProduct.usagenotifications = rawOmapiProductData.usagenotifications;\n      }\n      if (rawOmapiProductData.constituents) {\n        omapiProduct.productConstituents = this.createOmapiConstituents(rawOmapiProductData.constituents);\n      }\n      if (omapiProduct.isDarwinProduct()) {\n        this.correctDarwinCharacteristics(omapiProduct, rawOmapiProductData);\n      }\n    }\n    return omapiProduct;\n  }\n\n  private mapOmapiData(omapiProduct: OmapiProduct, rawOmapiProductData: RawOmapiProductInterfaceData) {\n    omapiProduct.productId = (rawOmapiProductData.productid && rawOmapiProductData.productid.toString()) || undefined;\n    omapiProduct.isYupProduct = rawOmapiProductData.isYupProduct;\n    omapiProduct.salesOfferingId = rawOmapiProductData.salesofferingid;\n    omapiProduct.externalProductCode = rawOmapiProductData.externalProductCode;\n    omapiProduct.productType = rawOmapiProductData.producttype && rawOmapiProductData.producttype.toUpperCase();\n    omapiProduct.categories = this.normalizationService.normalizeList(rawOmapiProductData.category);\n    omapiProduct.customerCategories = this.normalizationService.normalizeList(rawOmapiProductData.customercategories);\n    omapiProduct.subCategory = this.createSubCategory(rawOmapiProductData.subcategory);\n    omapiProduct.labelKey = rawOmapiProductData.labelkey;\n    omapiProduct.visible = rawOmapiProductData.visible;\n    omapiProduct.family = rawOmapiProductData.family;\n    omapiProduct.weight = rawOmapiProductData.weight;\n    omapiProduct.services = this.createServices(rawOmapiProductData.services);\n    omapiProduct.apps = this.createApps(rawOmapiProductData.apps);\n    omapiProduct.localizedContent = this.createLocalizedContents(rawOmapiProductData.localizedcontent);\n    omapiProduct.shortDescription = this.createShortDescription(rawOmapiProductData.shortdescription);\n    omapiProduct.rates = this.createRates(rawOmapiProductData.rates);\n    omapiProduct.visibilityRules = this.createVisibilityRules(rawOmapiProductData.visibilityrules);\n    omapiProduct.unlimited = rawOmapiProductData.unlimited;\n    omapiProduct.eligibleForDiscount = this.hasDiscount(rawOmapiProductData.characteristics);\n    omapiProduct.unlimitedInternet = rawOmapiProductData.unlimitedInternet;\n    omapiProduct.priceType = rawOmapiProductData.priceType;\n    omapiProduct.characteristics = this.getCharacteristics(rawOmapiProductData.characteristics);\n    omapiProduct.usageBasedRatePlan = rawOmapiProductData.usageBasedRatePlan;\n    omapiProduct.requiresInstallation = rawOmapiProductData.requiresInstallation;\n    omapiProduct.maxCount = rawOmapiProductData.maxCount;\n    omapiProduct.chars = rawOmapiProductData.characteristics ? this.getChars(rawOmapiProductData.characteristics) : [];\n    omapiProduct.isExternalContentPack = this.hasExternalContentPack(omapiProduct.chars);\n    omapiProduct.isEligibleForSettinglimits = rawOmapiProductData.isEligibleForSettinglimits;\n    omapiProduct.isEligibleForAutoPause = rawOmapiProductData.isEligibleForAutoPause;\n    omapiProduct.isEligibleForPauseProfile = rawOmapiProductData.isEligibleForPauseProfile;\n    omapiProduct.isFPBProduct = rawOmapiProductData.isFPBProduct;\n  }\n\n  private hasExternalContentPack(chars?: CharsInterface[]): string | undefined {\n    let charObject = {} as CharsInterface | undefined;\n    if (!isEmpty(chars)) {\n      charObject = chars?.find((char: CharsInterface) => {\n        return char.key === CharsEnum.IS_EXTERNAL_CONTENT_PACK;\n      });\n    }\n    return !isEmpty(charObject) && !isEmpty(charObject?.values) ? charObject?.values?.[0] : 'false';\n  }\n\n  private hasDiscount(rawChars?: RawCharacteristicsInterface): boolean {\n    const discountChar =\n      rawChars &&\n      rawChars.elementarycharacteristics &&\n      rawChars.elementarycharacteristics.find((char) => char.key === CharsEnum.CALL_CONTENT_PACK_DISCOUNTED_PRICE_API);\n    if (discountChar) {\n      return JSON.parse(discountChar.value.split(',')[0]);\n    }\n    return false;\n  }\n\n  private getContentForLocale(\n    rawLocalizedContents?: RawLocalizedContentInterface[]\n  ): LocalizedContentInterface | undefined {\n    return (\n      rawLocalizedContents &&\n      rawLocalizedContents.find((localizedContent) => {\n        return localizedContent.locale === this.languageService.getLanguage();\n      })\n    );\n  }\n\n  private createLocalizedContents(rawLocalizedContents: RawLocalizedContentInterface[]): LocalizedContentInterface[] {\n    return (\n      rawLocalizedContents &&\n      rawLocalizedContents.map((rawLocalizedContent) => {\n        return this.createLocalizedContent(rawLocalizedContent);\n      })\n    );\n  }\n\n  private createOmapiConstituents(\n    rawOmapiConstituents: RawOmapiConstituentInterface[]\n  ): RawOmapiConstituentInterface[] {\n    return (\n      rawOmapiConstituents &&\n      rawOmapiConstituents.map((rawOmapiConstituent) => {\n        return rawOmapiConstituent;\n      })\n    );\n  }\n\n  private createLocalizedContent(rawLocalizedContent: RawLocalizedContentInterface): LocalizedContentInterface {\n    const localizedContent = {} as LocalizedContentInterface;\n    localizedContent.locale = rawLocalizedContent.locale;\n    localizedContent.name = rawLocalizedContent.name;\n    localizedContent.logo = rawLocalizedContent.logo;\n    return localizedContent;\n  }\n\n  private createServices(rawServices: RawServiceInterface[]): ServiceInterface[] {\n    return (\n      rawServices &&\n      rawServices.map((rawService) => {\n        return this.createService(rawService);\n      })\n    );\n  }\n\n  private createService(rawService: RawServiceInterface): ServiceInterface {\n    const service = {} as ServiceInterface;\n    service.serviceType = rawService.servicetype;\n    service.specifications = this.createSpecifications(rawService.specifications);\n    if (rawService.experience) {\n      service.experience = {} as ExperienceInterface;\n      service.experience.experienceType = rawService.experience.experiencetype;\n    }\n    return service;\n  }\n\n  private createSpecifications(rawSpecifications?: RawSpecificationInterface[]): SpecificationInterface[] | undefined {\n    return (\n      rawSpecifications &&\n      rawSpecifications\n        .filter((spec) => !this.ignoredDarwinSpecifications.includes(spec.labelkey))\n        .map((rawSpecification) => {\n          return this.createSpecification(rawSpecification);\n        })\n    );\n  }\n\n  private createSpecification(rawSpecification: RawSpecificationInterface): SpecificationInterface {\n    const specification = {} as SpecificationInterface;\n    specification.labelKey = this.normalizationService.normalizeKey(rawSpecification.labelkey);\n    specification.unit = rawSpecification.unit;\n    specification.disclaimerLocalizedContent = rawSpecification.disclaimerlocalizedcontent\n      ? this.getContentForLocale(rawSpecification.disclaimerlocalizedcontent)\n      : undefined;\n    specification.value = rawSpecification.value;\n    specification.minValue = rawSpecification.minvalue;\n    specification.maxValue = rawSpecification.maxvalue;\n    specification.visible = rawSpecification.visible;\n    specification.weight = rawSpecification.weight;\n    specification.productType = rawSpecification.grouping;\n    specification.localizedContent = this.getContentForLocale(rawSpecification.localizedcontent);\n    return specification;\n  }\n\n  private createRate(rawRate: RawRateInterface): RateInterface {\n    const rate = {} as RateInterface;\n    rate.type = this.normalizationService.normalizeKey(rawRate.type);\n    rate.unit = rawRate.unit;\n    rate.cost = rawRate.cost;\n    rate.currency = rawRate.currency;\n    return rate;\n  }\n\n  private createRates(rawRates?: RawRateInterface[]): RateInterface[] | undefined {\n    return (\n      rawRates &&\n      rawRates.map((rawRate) => {\n        return this.createRate(rawRate);\n      })\n    );\n  }\n\n  private createApps(rawApps: unknown): unknown {\n    return rawApps;\n  }\n\n  private createShortDescription(rawShortDescription?: RawShortDescriptionInterface): ShortDescriptionInterface {\n    const shortDescription = {} as ShortDescriptionInterface;\n    if (rawShortDescription) {\n      shortDescription.localizedContent = this.getContentForLocale(rawShortDescription.localizedcontent);\n    }\n    return shortDescription;\n  }\n\n  private createSubCategory(rawSubCategory?: RawSubCategoryInterface): SubCategoryInterface {\n    const subCategory = {} as SubCategoryInterface;\n    if (rawSubCategory) {\n      subCategory.name = rawSubCategory.name;\n      subCategory.weight = rawSubCategory.weight;\n      subCategory.mutualExclusion = rawSubCategory.mutualexclusion;\n      subCategory.localizedContent = this.createLocalizedContents(rawSubCategory.localizedcontent);\n      subCategory.localizedName = this.getContentForLocale(rawSubCategory.localizedcontent)\n        ? this.getContentForLocale(rawSubCategory.localizedcontent)?.name\n        : undefined;\n    }\n    return subCategory;\n  }\n\n  // to do create the createCharacteristics with the same convention as these other methods\n  // need to continue working on this\n  private getCharacteristics(rawOmapiCharacteristics?: RawCharacteristicsInterface): CharacteristicsInterface {\n    const characteristics = {} as CharacteristicsInterface;\n    if (rawOmapiCharacteristics) {\n      characteristics.serviceCategory = rawOmapiCharacteristics.service_category;\n      characteristics.detailedScale = this.getValueUnit(rawOmapiCharacteristics.detailed_scale);\n      characteristics.productGroup = rawOmapiCharacteristics.productgroup;\n      characteristics.productSubGroup = rawOmapiCharacteristics.productsubgroup\n        ? rawOmapiCharacteristics.productsubgroup\n        : '';\n      characteristics.productSegment = rawOmapiCharacteristics.productsegment;\n      characteristics.priceInclVat = this.getFloatValue(rawOmapiCharacteristics.salespricevatincl);\n      characteristics.priceExclVat = this.getFloatValue(rawOmapiCharacteristics.salespricevatexcl);\n      characteristics.rentalPriceInclVat = this.getFloatValue(rawOmapiCharacteristics.rentalpricevatincl);\n      characteristics.rentalPriceExclVat = this.getFloatValue(rawOmapiCharacteristics.rentalpricevatexcl);\n      characteristics.sharedMobileData = rawOmapiCharacteristics.sharedmobiledata;\n      characteristics.sharedMobileDataUnlimited = rawOmapiCharacteristics.sharedmobiledata_unlimited\n        ? this.getValueUnit(rawOmapiCharacteristics.sharedmobiledata_unlimited)\n        : undefined;\n      characteristics.activationSalesOfferingId = rawOmapiCharacteristics.activationsalesofferingid;\n      characteristics.maxIncludedDataReminders = rawOmapiCharacteristics.max_mobile_includeddata_reminders;\n      characteristics.maxMobileOutOfBundleReminders = rawOmapiCharacteristics.max_mobile_outofbundle_reminders;\n      characteristics.maxMobileLines = rawOmapiCharacteristics.max_mobile_lines;\n      characteristics.recipientsMandatory = rawOmapiCharacteristics.huwrecipientsmandatory === '1';\n      characteristics.deviceType = rawOmapiCharacteristics.devicetype;\n      characteristics.isSellable = rawOmapiCharacteristics.is_sellable;\n      characteristics.weightNl = this.getIntegerValue(rawOmapiCharacteristics.weightnl);\n      characteristics.weightFr = this.getIntegerValue(rawOmapiCharacteristics.weightfr);\n      characteristics.productTier = this.getProductTier(rawOmapiCharacteristics);\n      characteristics.productLevel = rawOmapiCharacteristics.productlevel;\n      characteristics.prices = rawOmapiCharacteristics.prices ? rawOmapiCharacteristics.prices : undefined;\n      characteristics.constituents = rawOmapiCharacteristics.constituents\n        ? this.createConstituents(rawOmapiCharacteristics.constituents)\n        : undefined;\n      characteristics.esimAvailable = rawOmapiCharacteristics.esimAvailable;\n    }\n    return characteristics;\n  }\n\n  private correctDarwinCharacteristics(\n    omapiProduct: OmapiProduct,\n    rawOmapiProduct: RawOmapiProductInterfaceData\n  ): void {\n    if (rawOmapiProduct.services && !!rawOmapiProduct.services.length) {\n      this.correctSharedMobileData(omapiProduct, rawOmapiProduct.services);\n      this.correctMaxMobileLines(omapiProduct, rawOmapiProduct.services);\n    }\n  }\n\n  private correctSharedMobileData(omapiProduct: OmapiProduct, services: RawServiceInterface[]): void {\n    const mobileInternet = services\n      .filter((service) => service.servicetype === 'MOBILE_INTERNET')\n      .flatMap((service) => service.specifications)\n      .find((spec) => spec?.labelkey === 'sharedmobiledata');\n\n    if (mobileInternet) {\n      (omapiProduct.characteristics as CharacteristicsInterface).sharedMobileData = {\n        value: mobileInternet.value,\n        unit: mobileInternet.unit,\n      };\n    }\n  }\n\n  private correctMaxMobileLines(omapiProduct: OmapiProduct, services: RawServiceInterface[]): void {\n    const maxMobileLines = services\n      .filter((service) => service.servicetype === 'GENERAL')\n      .flatMap((service) => service.specifications)\n      .find((spec) => spec?.labelkey === 'max_mobile_lines');\n\n    if (maxMobileLines) {\n      (omapiProduct.characteristics as CharacteristicsInterface).maxMobileLines = maxMobileLines.value;\n    }\n  }\n\n  private getProductTier(rawOmapiCharacteristics: RawCharacteristicsInterface): string | undefined {\n    if (!rawOmapiCharacteristics.producttier) {\n      return rawOmapiCharacteristics.elementarycharacteristics\n        ?.filter((el) => el.key === CharsEnum.PRODUCT_TIER)\n        .map((e) => e.value)\n        .shift();\n    }\n    return rawOmapiCharacteristics.producttier;\n  }\n\n  private getFloatValue(property: UnitValueInterface | undefined): number | undefined {\n    return property ? parseFloat(property.value) : undefined;\n  }\n\n  private getIntegerValue(property: string | undefined): number | undefined {\n    return property ? parseInt(property) : undefined;\n  }\n\n  private getChars(rawOmapiCharacteristics: RawCharacteristicsInterface): CharsInterface[] | undefined {\n    if (rawOmapiCharacteristics.elementarycharacteristics) {\n      return rawOmapiCharacteristics.elementarycharacteristics.map((el) => {\n        return {\n          key: el.key,\n          values: el.value.split(','),\n          unit: el.unit,\n        };\n      });\n    }\n    return undefined;\n  }\n\n  private createConstituents(rawConstituents: RawConstituentInterface[]): ConstituentInterface[] {\n    return (\n      rawConstituents &&\n      rawConstituents.map((rawConstituent) => {\n        return this.createConstituent(rawConstituent);\n      })\n    );\n  }\n\n  private createConstituent(rawConstituent: RawConstituentInterface): ConstituentInterface {\n    const constituent = {} as ConstituentInterface;\n    constituent.type = this.normalizationService.normalizeKey(rawConstituent.type);\n    constituent.specurl = rawConstituent.specurl;\n    constituent.productInfo = this.toModel(rawConstituent.rawOmapi);\n    return constituent;\n  }\n\n  private createVisibilityRules(rawVisibilityrules?: { conditionalvisibility: boolean }): VisibilityRulesInterface {\n    const visibilityRules = {} as VisibilityRulesInterface;\n    if (rawVisibilityrules) {\n      visibilityRules.conditionalVisibility = rawVisibilityrules.conditionalvisibility;\n    }\n    return visibilityRules;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  private getValueUnit(rawData?: { unit: unknown; value: string }): object | undefined {\n    if (rawData) {\n      return { unit: rawData.unit, value: parseFloat(rawData.value) };\n    }\n    return undefined;\n  }\n}\n","import { OmapiFamily } from '../interfaces';\nimport { OmapiFamilyTierEnum } from '../constants';\n\nexport class OmapiFamilyUtils {\n  public static getFamilyTier(omapiId: string, omapiFamily: OmapiFamily): string {\n    const family = Object.values(OmapiFamilyTierEnum).find((family) =>\n      this.isOmapiIdInTier(omapiId, family, omapiFamily)\n    );\n    return family ? family : OmapiFamilyTierEnum.FAST;\n  }\n\n  private static isOmapiIdInTier(omapiId: string, familyTier: string, omapiFamily: OmapiFamily): boolean {\n    const omapiFamilyTier = omapiFamily.tiers.find((tier) => {\n      return tier.key === familyTier;\n    });\n    if (omapiFamilyTier === undefined) {\n      return false;\n    }\n    const strings =\n      omapiFamilyTier.mobile?.map((mobile) => {\n        return mobile.omapiId;\n      }) ?? [];\n    strings.push(omapiFamilyTier.omapiId);\n    return strings.indexOf(omapiId) > -1;\n  }\n}\n","import { OmapiProduct } from '../models/omapi-product.model';\nimport { LocalizedContentInterface } from '../interfaces/localized-content.interface';\nimport { RawOmapiProductInterfaceData } from '../interfaces/raw-omapi-product.interface';\nimport { LanguageEnum } from '../constants/language.enum';\nimport { SofyComboProducts } from '../constants/sofy-combo-products.constants';\n\nexport class OmapiUtils {\n  public static doesContainProductWithProvidedOmapiId<T extends { omapiid: string }[]>(\n    productsWithOmapiIds: T,\n    omapiId: string\n  ): boolean {\n    return productsWithOmapiIds.some((product) => product.omapiid === omapiId);\n  }\n\n  public static getLocalizedContent(\n    language: LanguageEnum,\n    omapiProduct: OmapiProduct\n  ): LocalizedContentInterface | undefined {\n    return omapiProduct.localizedContent?.find((value) => {\n      return language.valueOf() === value.locale;\n    });\n  }\n\n  public static getComboProducts(omapiId: string): RawOmapiProductInterfaceData | undefined {\n    return SofyComboProducts.find((product) => {\n      return product.productid === omapiId;\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { shareReplay } from 'rxjs/operators';\nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class OmapiCacheService<T> {\n  private cache: Record<string, Observable<T>> = {};\n\n  get(key: string): Observable<T> {\n    return this.cache[key];\n  }\n\n  add(key: string, response$: Observable<T>): void {\n    this.cache[key] = response$.pipe(shareReplay({ bufferSize: 1, refCount: false }));\n  }\n\n  remove(key: string): void {\n    delete this.cache[key];\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { map as lodashMap } from 'lodash-es';\nimport { forkJoin, Observable, of, throwError } from 'rxjs';\nimport { catchError, map, mergeMap, take } from 'rxjs/operators';\nimport { OmapiProduct } from '../models/omapi-product.model';\nimport { OmapiProductMapper } from '../mappers/omapi-product.mapper';\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { UrlService } from '@telenet/ng-lib-page';\nimport { ErrorMessage, MessageService } from '@telenet/ng-lib-message';\nimport { RawConstituentInterface, RawOmapiProductInterface } from '../interfaces/raw-omapi-product.interface';\nimport { ConfigConstants, ConfigService } from '@telenet/ng-lib-config';\nimport { OmapiCacheService } from './cache/omapi-cache.service';\nimport { LogFactory } from '@telenet/ng-lib-shared';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class OmapiProductService {\n  public gatewayUrl?: string;\n  private readonly log = LogFactory.createLogger(OmapiProductService);\n  private readonly FETCH_ERROR_PREFIX = 'An error occurred while trying to fetch ';\n\n  constructor(\n    private readonly http: HttpClient,\n    private readonly urlService: UrlService,\n    private readonly messageService: MessageService,\n    private readonly omapiProductMapper: OmapiProductMapper,\n    private readonly cacheService: OmapiCacheService<RawOmapiProductInterface>,\n    private readonly configService: ConfigService\n  ) {}\n\n  getProductByEPC(messageGroup: string, epc: string): Observable<OmapiProduct> {\n    const endpoint = this.getProductEndpoint(epc);\n    return this.http.get(endpoint, this.getHttpConfig()).pipe(\n      take(1),\n      catchError((error: HttpErrorResponse) => this.handleError(error, messageGroup)),\n      map((response: RawOmapiProductInterface) => {\n        return this.omapiProductMapper.toModel(response);\n      })\n    );\n  }\n\n  getRawProductByEndpoint(\n    messageGroup: string,\n    endpoint: string,\n    silentlyHandleError = false\n  ): Observable<RawOmapiProductInterface> {\n    if (!this.cacheService.get(endpoint)) {\n      this.cacheService.add(endpoint, this.http.get(endpoint, this.getHttpConfig()));\n    }\n    return this.cacheService.get(endpoint).pipe(\n      take(1),\n      catchError((error: HttpErrorResponse) =>\n        silentlyHandleError ? this.handleErrorSilent(error, messageGroup) : this.handleError(error, messageGroup)\n      ),\n      mergeMap((response: RawOmapiProductInterface) => {\n        return this.addConstituentsToOmapiResponse(response, messageGroup);\n      }),\n      map((response) => {\n        return response;\n      })\n    );\n  }\n\n  rawProductsFromEndpoints$(\n    messageGroup: string,\n    endpoints: string[],\n    silentlyHandleError = false\n  ): Observable<RawOmapiProductInterface[]> {\n    return forkJoin(\n      lodashMap(endpoints, (endpoint) => this.getRawProductByEndpoint(messageGroup, endpoint, silentlyHandleError))\n    ).pipe(map((omapiResponses) => omapiResponses.filter((omapiResponse) => omapiResponse !== undefined)));\n  }\n\n  getProductByEndpoint(messageGroup: string, endpoint: string): Observable<OmapiProduct> {\n    return this.doGet(messageGroup, endpoint);\n  }\n\n  // to do cleanup (method name getProductById), maybe method for the hardcoded url\n  getProductById(messageGroup: string, omapiId: string): Observable<OmapiProduct> {\n    return this.doGet(messageGroup, this.getOmapiProductUrl(omapiId));\n  }\n\n  addConstituentsToOmapiResponse(\n    rawOmapiResponse: RawOmapiProductInterface,\n    messageGroup: string\n  ): Observable<RawOmapiProductInterface> {\n    if (\n      rawOmapiResponse?.product &&\n      rawOmapiResponse.product.characteristics &&\n      rawOmapiResponse.product.characteristics.constituents\n    ) {\n      return this.resolveConstituents(rawOmapiResponse.product.characteristics.constituents, messageGroup).pipe(\n        map((response: RawConstituentInterface[]) => {\n          if (rawOmapiResponse?.product?.characteristics) {\n            rawOmapiResponse.product.characteristics.constituents = response;\n          }\n          return rawOmapiResponse;\n        })\n      );\n    } else {\n      return of(rawOmapiResponse);\n    }\n  }\n\n  getOmapiProductUrl(omapiId: string): string {\n    return this.configService.getConfig(ConfigConstants.OMAPI_URL) + '/public/product/' + omapiId;\n  }\n\n  private doGet(messageGroup: string, endpoint: string): Observable<OmapiProduct> {\n    if (!this.cacheService.get(endpoint)) {\n      const httpObservable$ = this.http.get(endpoint, this.getHttpConfig());\n      this.cacheService.add(endpoint, httpObservable$);\n    }\n\n    return this.cacheService.get(endpoint).pipe(\n      catchError((error: HttpErrorResponse) => this.handleError(error, messageGroup)),\n      map((response: RawOmapiProductInterface) => {\n        return this.omapiProductMapper.toModel(response);\n      })\n    );\n  }\n\n  private resolveConstituents(\n    constituents: RawConstituentInterface[],\n    messageGroup: string\n  ): Observable<RawConstituentInterface[]> {\n    return forkJoin(lodashMap(constituents, (constituent) => this.resolveConstituent(constituent, messageGroup)));\n  }\n\n  private resolveConstituent(\n    constituent: RawConstituentInterface,\n    messageGroup: string\n  ): Observable<RawConstituentInterface> {\n    return forkJoin({\n      specurl: of(constituent.specurl),\n      type: of(constituent.type),\n      rawOmapi: this.getRawProductByEndpoint(messageGroup, constituent.specurl, false),\n    });\n  }\n\n  private getProductEndpoint(epc: string): string {\n    return `${this.gatewayUrl}/omapi/public/product/${epc}`;\n  }\n\n  private getHttpConfig() {\n    return {\n      headers: {\n        'x-alt-referer': this.urlService.getCurrentUrl(),\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n      timeout: 10000,\n      cache: true,\n    };\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private handleError(error: HttpErrorResponse, messageGroup: string): Observable<any> {\n    if (error.status !== 410) {\n      this.messageService.addMessage(new ErrorMessage(messageGroup, 'omapi-' + error.status));\n    }\n    this.log.logError(this.FETCH_ERROR_PREFIX + messageGroup, error);\n    return throwError(() => this.FETCH_ERROR_PREFIX + messageGroup);\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private handleErrorSilent(error: HttpErrorResponse, messageGroup: string): Observable<any> {\n    if (error.status !== 410) {\n      this.messageService.addMessage(new ErrorMessage(messageGroup, 'omapi-' + error.status));\n    }\n    this.log.logError(this.FETCH_ERROR_PREFIX + messageGroup, error);\n    return of(undefined);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { catchError, map, switchMap, tap } from 'rxjs/operators';\nimport { forkJoin, Observable, of } from 'rxjs';\nimport { cloneDeep, isEmpty } from 'lodash-es';\nimport { OmapiProductService } from './omapi-product.service';\nimport { OmapiProductMapper } from '../mappers';\nimport { OmapiUtils } from '../utils';\nimport { OmapiProduct } from '../models';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class OmapiEnrichService {\n  constructor(\n    public readonly omapiProductService: OmapiProductService,\n    private readonly omapiProductMapper: OmapiProductMapper\n  ) {}\n\n  public enrichResponseWithOmapiData<T>(messageGroup: string, response: T): Observable<T> {\n    const copy = cloneDeep(response);\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    return forkJoin(this.getOmapiObservables(messageGroup, copy)).pipe(map(() => copy));\n  }\n\n  private getOmapiObservables<T extends RawOmapiProduct>(\n    messageGroup: string,\n    data: T,\n    specUrls: Observable<unknown>[] = []\n  ): Observable<unknown>[] {\n    if (data === undefined || data === null) {\n      return specUrls;\n    }\n\n    Object.entries(data).forEach(([key, value]) => {\n      if (key === 'specurl') {\n        const sofyComboProduct = OmapiUtils.getComboProducts(data.omapiid);\n        if (isEmpty(sofyComboProduct)) {\n          const omapiProduct$ = this.omapiProductService\n            // eslint-disable-next-line @typescript-eslint/ban-types\n            .getProductByEndpoint(messageGroup, (value as object).toString())\n            .pipe(\n              tap((omapiProduct) => {\n                data['productInfo'] = omapiProduct;\n              }),\n              catchError(() => {\n                return of(undefined);\n              }),\n              switchMap((omapiProduct) => this.enrichConstituents(messageGroup, omapiProduct))\n            );\n          specUrls.push(omapiProduct$);\n        } else {\n          data['productInfo'] = this.omapiProductMapper.toModel({ product: sofyComboProduct });\n        }\n      }\n\n      if (typeof value === 'object') {\n        this.getOmapiObservables(messageGroup, value, specUrls);\n      }\n    });\n    if (isEmpty(specUrls)) {\n      return [of(data)];\n    }\n    return specUrls;\n  }\n\n  private enrichConstituents(messageGroup: string, product?: OmapiProduct): Observable<OmapiProduct[]> {\n    if (product === undefined || product.getConstituents().length === 0) {\n      return of([]);\n    }\n\n    return forkJoin(\n      product.getConstituents().map((constituentInterface) => {\n        return this.omapiProductService.getProductByEndpoint(messageGroup, constituentInterface.specurl).pipe(\n          tap((omapiProduct) => {\n            constituentInterface.productInfo = omapiProduct;\n          })\n        );\n      })\n    );\n  }\n}\n\ninterface RawOmapiProduct {\n  omapiid: string;\n  productInfo: unknown;\n}\n","import { Observable, throwError } from 'rxjs';\nimport {\n  OmapiFamily,\n  OmapiFamilyOptin,\n  OmapiFamilyOption,\n  OmapiFamilyTier,\n  OmapiMobileData,\n  OmapiProductInfo,\n  RawMobileData,\n  RawOmapiFamily,\n  RawOmapiFamilyOptIn,\n  RawOmapiFamilyOption,\n  RawOmapiFamilyProduct,\n  RawOmapiFamilyTier,\n  RawOmapiProduct,\n  RawOmapiProductTier,\n} from '../interfaces';\nimport { catchError, map, mergeMap, take } from 'rxjs/operators';\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { ErrorMessage, MessageService } from '@telenet/ng-lib-message';\nimport { UrlService } from '@telenet/ng-lib-page';\nimport { flatMap, isEmpty } from 'lodash-es';\nimport { ConfigConstants, ConfigService } from '@telenet/ng-lib-config';\nimport { OmapiProductService } from './omapi-product.service';\nimport { OmapiProduct } from '../models';\nimport { Injectable } from '@angular/core';\nimport { OmapiFamilyConstants, OmapiFamilyProductType } from '../constants';\nimport { OmapiCacheService } from './cache/omapi-cache.service';\nimport { OmapiUtils } from '../utils';\n/* eslint-disable rxjs/no-internal */\nimport { firstValueFrom } from 'rxjs/internal/firstValueFrom';\nimport {\n  KlikMobileData,\n  KlikOmapiFamily,\n  KlikOmapiFamilyOptIn,\n  KlikOmapiFamilyOption,\n  KlikOmapiFamilyProduct,\n  KlikOmapiFamilyTier,\n  KlikOmapiProduct,\n  KlikOmapiProductTier,\n  KlikOptinPax,\n  KlikOptinTier,\n} from '../interfaces/klik-omapi-family.interface';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class OmapiFamilyService {\n  // FIXME this service has to be refactored - its full of promises being created out of an observable\n  constructor(\n    private readonly http: HttpClient,\n    private readonly urlService: UrlService,\n    private readonly messageService: MessageService,\n    private readonly configService: ConfigService,\n    private readonly cacheService: OmapiCacheService<RawOmapiFamily>,\n    private readonly omapiProductService: OmapiProductService\n  ) {}\n\n  getFamily(messageGroup: string, family: string): Observable<OmapiFamily> {\n    return this.getFamilyByEndpoint(messageGroup, this.getOmapiFamilyUrl(family));\n  }\n\n  getKlikFamily(messageGroup: string, family: string): Observable<KlikOmapiFamily> {\n    return this.getKlikFamilyByEndpoint(messageGroup, this.getOmapiFamilyUrl(family));\n  }\n\n  private getOmapiFamilyUrl(family: string): string {\n    return this.configService.getConfig(ConfigConstants.OMAPI_URL) + '/public/family/' + family;\n  }\n\n  private getFamilyByEndpoint(messageGroup: string, endpoint: string): Observable<OmapiFamily> {\n    if (!this.cacheService.get(endpoint)) {\n      this.cacheService.add(endpoint, this.http.get<RawOmapiFamily>(endpoint, this.getHttpConfig()));\n    }\n    const productInfoPromises: Promise<OmapiProduct>[] = [];\n\n    return this.cacheService.get(endpoint).pipe(\n      take(1),\n      map((rawOmapiFamily: RawOmapiFamily) => {\n        return this.parseFamily(messageGroup, rawOmapiFamily, productInfoPromises);\n      }),\n      mergeMap(async (omapiFamily: OmapiFamily) => {\n        await Promise.all(productInfoPromises);\n        return omapiFamily;\n      }),\n      catchError((error: HttpErrorResponse) => this.handleError(error, messageGroup))\n    );\n  }\n\n  private parseFamily(\n    messageGroup: string,\n    rawOmapiFamily: RawOmapiFamily,\n    productInfoPromises: Promise<OmapiProduct>[]\n  ): OmapiFamily {\n    const omapiFamily: OmapiFamily = { tiers: [] };\n\n    this.parseTiers(messageGroup, rawOmapiFamily, omapiFamily, productInfoPromises);\n    this.parseProductsByType(messageGroup, rawOmapiFamily, omapiFamily, productInfoPromises);\n    this.parseOptins(messageGroup, rawOmapiFamily, omapiFamily, productInfoPromises);\n    if (rawOmapiFamily.options) {\n      this.parseOptions(messageGroup, rawOmapiFamily, omapiFamily, productInfoPromises);\n    }\n\n    return omapiFamily;\n  }\n\n  private parseTiers(\n    messageGroup: string,\n    rawOmapiFamily: RawOmapiFamily,\n    omapiFamily: OmapiFamily,\n    productInfoPromises: Promise<OmapiProduct>[]\n  ) {\n    rawOmapiFamily.tiers.forEach((tier: RawOmapiFamilyTier) => {\n      omapiFamily.tiers.push(this.createTier(messageGroup, tier, productInfoPromises));\n    });\n  }\n\n  private parseProductsByType(\n    messageGroup: string,\n    rawOmapiFamily: RawOmapiFamily,\n    omapiFamily: OmapiFamily,\n    productInfoPromises: Promise<OmapiProduct>[]\n  ): void {\n    OmapiFamilyConstants.FAMILY_PRODUCT_TYPES.forEach((productType: OmapiFamilyProductType) => {\n      const product = rawOmapiFamily.products.find(\n        (rawOmapiFamilyProduct: RawOmapiFamilyProduct) => rawOmapiFamilyProduct.type === productType\n      );\n\n      if (product) {\n        this.addOmapiProductToTier(messageGroup, product, omapiFamily, productInfoPromises);\n      }\n    });\n  }\n\n  private parseOptins(\n    messageGroup: string,\n    rawOmapiFamily: RawOmapiFamily,\n    omapiFamily: OmapiFamily,\n    productInfoPromises: Promise<OmapiProduct | undefined>[]\n  ): void {\n    omapiFamily.tiers.forEach((omapiFamilyTier: OmapiFamilyTier) => {\n      if (omapiFamilyTier) {\n        omapiFamilyTier.optins = flatMap(\n          rawOmapiFamily.optins.map((rawOptin) => {\n            const key = rawOptin.key;\n            const currentTier = rawOptin.tiers.find((tier) => tier.key === omapiFamilyTier.key);\n\n            return (\n              currentTier?.pax?.map((pax) => {\n                const optin = {} as OmapiFamilyOptin;\n                optin.key = key;\n                optin.mobileId = pax.omapiId;\n                optin.omapiId = pax.optinId;\n\n                const promise = firstValueFrom(this.omapiProductService.getProductById(messageGroup, pax.optinId));\n\n                productInfoPromises.push(promise);\n\n                promise.then((omapiProduct?: OmapiProduct | undefined) => {\n                  optin.productInfo = omapiProduct;\n                });\n\n                return optin;\n              }) ?? []\n            );\n          })\n        );\n      }\n    });\n  }\n\n  private parseOptions(\n    messageGroup: string,\n    rawOmapiFamily: RawOmapiFamily,\n    omapiFamily: OmapiFamily,\n    productInfoPromises: Promise<OmapiProduct | undefined>[]\n  ): void {\n    omapiFamily.tiers.forEach((omapiFamilyTier: OmapiFamilyTier) => {\n      omapiFamilyTier.options = flatMap(\n        rawOmapiFamily.options.map((rawOption) => {\n          const option = {} as OmapiFamilyOption;\n          option.key = rawOption.key;\n          option.type = rawOption.type;\n          option.omapiId = rawOption.omapiId;\n          option.parents = rawOption.parents;\n\n          const promise = firstValueFrom(this.omapiProductService.getProductById(messageGroup, rawOption.omapiId));\n\n          productInfoPromises.push(promise);\n\n          promise.then((omapiProduct?: OmapiProduct) => {\n            option.productInfo = omapiProduct;\n          });\n\n          return option;\n        })\n      );\n    });\n  }\n\n  private addOmapiProductToTier(\n    messageGroup: string,\n    rawOmapiFamilyProduct: RawOmapiFamilyProduct,\n    omapiFamily: OmapiFamily,\n    productInfoPromises: Promise<OmapiProduct>[]\n  ): void {\n    rawOmapiFamilyProduct.tiers.forEach((rawOmapiProductTier: RawOmapiProductTier) => {\n      this.addOmapiFamilyObjectToTier(\n        messageGroup,\n        omapiFamily,\n        rawOmapiFamilyProduct.type,\n        rawOmapiProductTier,\n        productInfoPromises\n      );\n    });\n  }\n\n  private addOmapiFamilyObjectToTier(\n    messageGroup: string,\n    family: OmapiFamily,\n    productType: string,\n    rawOmapiProductTier: RawOmapiProductTier,\n    productInfoPromises: Promise<OmapiProduct>[]\n  ): void {\n    const familyTier: OmapiFamilyTier | undefined = family.tiers.find(\n      (tier: OmapiFamilyTier) => tier.key === rawOmapiProductTier.key\n    );\n    const omapiProductInfos: OmapiProductInfo[] = this.createOmapiProductInfos(\n      messageGroup,\n      rawOmapiProductTier,\n      productInfoPromises\n    );\n    if (familyTier) {\n      if (!familyTier[productType as keyof OmapiFamilyTier]) {\n        familyTier[productType] = [];\n      }\n      familyTier[productType] = familyTier[productType].concat(omapiProductInfos);\n    }\n  }\n\n  private createOmapiProductInfos(\n    messageGroup: string,\n    rawOmapiProductTier: RawOmapiProductTier,\n    productInfoPromises: Promise<OmapiProduct | undefined>[]\n  ): OmapiProductInfo[] {\n    const products: OmapiProductInfo[] = [];\n    let mobileData: OmapiMobileData[] = [];\n\n    rawOmapiProductTier.products.forEach((rawOmapiProduct: RawOmapiProduct) => {\n      const omapiProductInfo: OmapiProductInfo = {\n        omapiId: rawOmapiProduct.omapiId,\n      };\n      if (rawOmapiProduct.mobileData) {\n        rawOmapiProduct.mobileData.forEach((rawMobileData: RawMobileData) => {\n          const omapiMobileData = {} as OmapiMobileData;\n\n          omapiMobileData.omapiId = rawMobileData.omapiId;\n          omapiMobileData.key = rawMobileData.key;\n          const omapiMobileDataPromises = firstValueFrom(\n            this.omapiProductService.getProductById(messageGroup, omapiMobileData.omapiId)\n          );\n\n          productInfoPromises.push(omapiMobileDataPromises);\n          omapiMobileDataPromises.then((omapiProduct?: OmapiProduct) => {\n            omapiMobileData.productInfo = omapiProduct;\n          });\n          mobileData.push(omapiMobileData);\n        });\n      }\n      if (isEmpty(OmapiUtils.getComboProducts(rawOmapiProduct.omapiId))) {\n        const promise: Promise<OmapiProduct | undefined> = firstValueFrom(\n          this.omapiProductService.getProductById(messageGroup, rawOmapiProduct.omapiId)\n        );\n\n        productInfoPromises.push(promise);\n        promise.then((omapiProduct?: OmapiProduct) => {\n          omapiProductInfo.productInfo = omapiProduct;\n        });\n      }\n      omapiProductInfo.mobileData = mobileData;\n\n      products.push(omapiProductInfo);\n      mobileData = [];\n    });\n\n    return products;\n  }\n\n  private createTier(\n    messageGroup: string,\n    rawOmapiTier: RawOmapiFamilyTier,\n    productInfoPromises: Promise<OmapiProduct | undefined>[]\n  ): OmapiFamilyTier {\n    const tier: OmapiFamilyTier = {\n      omapiId: rawOmapiTier.omapiId,\n      key: rawOmapiTier.key,\n    };\n    const promise = firstValueFrom(this.omapiProductService.getProductById(messageGroup, rawOmapiTier.omapiId));\n\n    productInfoPromises.push(promise);\n\n    promise.then((omapiProduct?: OmapiProduct) => {\n      tier.productInfo = omapiProduct;\n    });\n\n    return tier;\n  }\n\n  private getHttpConfig(): { headers: Record<string, string>; timeout: number; cache: boolean } {\n    return {\n      headers: {\n        'x-alt-referer': this.urlService.getCurrentUrl(),\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n      timeout: 10000,\n      cache: true,\n    };\n  }\n\n  private handleError(error: HttpErrorResponse, messageGroup: string) {\n    if (error.status !== 410) {\n      this.messageService.addMessage(new ErrorMessage(messageGroup, 'omapi-' + error.status));\n    }\n\n    return throwError(() => 'An error occurred while trying to fetch ' + messageGroup);\n  }\n\n  private getKlikFamilyByEndpoint(messageGroup: string, endpoint: string): Observable<KlikOmapiFamily> {\n    if (!this.cacheService.get(endpoint)) {\n      this.cacheService.add(endpoint, this.http.get<RawOmapiFamily>(endpoint, this.getHttpConfig()));\n    }\n    const productInfoPromises: Promise<OmapiProduct>[] = [];\n    return this.cacheService.get(endpoint).pipe(\n      take(1),\n      catchError((error: HttpErrorResponse) => this.handleError(error, messageGroup)),\n      map((rawOmapiFamily: RawOmapiFamily) => {\n        return this.createFamily(messageGroup, rawOmapiFamily, productInfoPromises);\n      }),\n      mergeMap(async (omapiFamily: KlikOmapiFamily) => {\n        await Promise.all(productInfoPromises);\n        return omapiFamily;\n      })\n    );\n  }\n\n  private createFamily(\n    messageGroup: string,\n    rawOmapiFamily: RawOmapiFamily,\n    productInfoPromises: Promise<OmapiProduct>[]\n  ): KlikOmapiFamily {\n    const omapiFamily = {} as KlikOmapiFamily;\n    omapiFamily.tiers = this.createKlikTier(rawOmapiFamily.tiers, messageGroup, productInfoPromises);\n    omapiFamily.products = this.createKlikProduct(rawOmapiFamily.products, messageGroup, productInfoPromises);\n    omapiFamily.optins = this.createKlikOptins(rawOmapiFamily.optins, messageGroup, productInfoPromises);\n    omapiFamily.options = this.createKlikOptions(rawOmapiFamily.options, messageGroup, productInfoPromises);\n    return omapiFamily;\n  }\n\n  private createKlikTier(\n    rawOmapiFamilyTier: RawOmapiFamilyTier[],\n    messageGroup: string,\n    productInfoPromises: Promise<OmapiProduct>[]\n  ): KlikOmapiFamilyTier[] {\n    return rawOmapiFamilyTier.map((rawFamilyTier) => {\n      const tier = {} as KlikOmapiFamilyTier;\n      tier.key = rawFamilyTier.key;\n      tier.omapiId = rawFamilyTier.omapiId;\n      const promise = firstValueFrom(\n        this.omapiProductService.getProductById(messageGroup, rawFamilyTier.omapiId)\n      ) as Promise<OmapiProduct>;\n      productInfoPromises.push(promise);\n      promise.then((omapiProduct: OmapiProduct) => {\n        tier.productInfo = omapiProduct;\n      });\n      return tier;\n    });\n  }\n\n  private createKlikProduct(\n    rawOmapiFamilyProduct: RawOmapiFamilyProduct[],\n    messageGroup: string,\n    productInfoPromises: Promise<OmapiProduct>[]\n  ): KlikOmapiFamilyProduct[] {\n    return rawOmapiFamilyProduct.map((rawFamilyProduct) => {\n      const product = {} as KlikOmapiFamilyProduct;\n      product.type = rawFamilyProduct.type;\n      product.tiers = this.getProductTiers(rawFamilyProduct, messageGroup, productInfoPromises);\n      return product;\n    });\n  }\n\n  private createKlikOptins(\n    rawOmapiFamilyOptIn: RawOmapiFamilyOptIn[],\n    messageGroup: string,\n    productInfoPromises: Promise<OmapiProduct>[]\n  ): KlikOmapiFamilyOptIn[] {\n    return rawOmapiFamilyOptIn.map((rawOptins) => {\n      const optin = {} as KlikOmapiFamilyOptIn;\n      optin.key = rawOptins.key;\n      optin.tiers = [];\n      optin.tiers = rawOptins.tiers?.map((rawTier) => {\n        const optinTier = {} as KlikOptinTier;\n        optinTier.key = rawTier.key;\n        optinTier.pax = [];\n        optinTier.pax = rawTier.pax?.map((rawPax) => {\n          const optinPax = {} as KlikOptinPax;\n          optinPax.omapiId = rawPax.omapiId;\n          optinPax.optinId = rawPax.optinId;\n          const promise = firstValueFrom(\n            this.omapiProductService.getProductById(messageGroup, rawPax.optinId)\n          ) as Promise<OmapiProduct>;\n          productInfoPromises.push(promise);\n          promise.then((omapiProduct: OmapiProduct) => {\n            optinPax.productInfo = omapiProduct;\n          });\n          return optinPax;\n        });\n        return optinTier;\n      });\n      return optin;\n    });\n  }\n\n  private createKlikOptions(\n    rawOmapiFamilyOptIn: RawOmapiFamilyOption[],\n    messageGroup: string,\n    productInfoPromises: Promise<OmapiProduct>[]\n  ): KlikOmapiFamilyOption[] {\n    return rawOmapiFamilyOptIn.map((rawOption) => {\n      const option = {} as KlikOmapiFamilyOption;\n      option.key = rawOption.key;\n      option.omapiId = rawOption.omapiId;\n      option.parents = rawOption.parents;\n      option.type = rawOption.type;\n      const promise = firstValueFrom(\n        this.omapiProductService.getProductById(messageGroup, rawOption.omapiId)\n      ) as Promise<OmapiProduct>;\n      productInfoPromises.push(promise);\n      promise.then((omapiProduct: OmapiProduct) => {\n        option.productInfo = omapiProduct;\n      });\n      return option;\n    });\n  }\n\n  private getProductTiers(\n    rawFamilyProduct: RawOmapiFamilyProduct,\n    messageGroup: string,\n    productInfoPromises: Promise<OmapiProduct>[]\n  ) {\n    return rawFamilyProduct.tiers?.map((rawTier) => {\n      const tier = {} as KlikOmapiProductTier;\n      tier.key = rawTier.key;\n      tier.products = this.getProductDetails(rawTier, messageGroup, productInfoPromises);\n      return tier;\n    });\n  }\n\n  private getProductDetails(\n    rawTier: RawOmapiProductTier,\n    messageGroup: string,\n    productInfoPromises: Promise<OmapiProduct>[]\n  ): KlikOmapiProduct[] {\n    return rawTier.products?.map((rawTierProduct) => {\n      const tierProduct = {} as KlikOmapiProduct;\n      tierProduct.key = rawTierProduct.key;\n      tierProduct.omapiId = rawTierProduct.omapiId;\n      const promise = firstValueFrom(\n        this.omapiProductService.getProductById(messageGroup, rawTierProduct.omapiId)\n      ) as Promise<OmapiProduct>;\n      productInfoPromises.push(promise);\n      promise.then((omapiProduct: OmapiProduct) => {\n        tierProduct.productInfo = omapiProduct;\n      });\n      tierProduct.mobileData = this.getMobileData(rawTierProduct, messageGroup, productInfoPromises);\n      return tierProduct;\n    });\n  }\n\n  private getMobileData(\n    rawTierProduct: RawOmapiProduct,\n    messageGroup: string,\n    productInfoPromises: Promise<OmapiProduct>[]\n  ): KlikMobileData[] | undefined {\n    return rawTierProduct.mobileData?.map((rawTierProductMobile) => {\n      const mobileData = {} as KlikMobileData;\n      mobileData.key = rawTierProductMobile.key;\n      mobileData.omapiId = rawTierProductMobile.omapiId;\n      const mobileDataPromise = firstValueFrom(\n        this.omapiProductService.getProductById(messageGroup, rawTierProductMobile.omapiId)\n      ) as Promise<OmapiProduct>;\n      productInfoPromises.push(mobileDataPromise);\n      mobileDataPromise.then((omapiProduct: OmapiProduct) => {\n        mobileData.productInfo = omapiProduct;\n      });\n      return mobileData;\n    });\n  }\n}\n","import { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { ConfigConstants, ConfigService } from '@telenet/ng-lib-config';\nimport { UrlService } from '@telenet/ng-lib-page';\nimport { ErrorMessage, MessageService } from '@telenet/ng-lib-message';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError, map, take } from 'rxjs/operators';\nimport { RawOmapiPremiumInterface } from '../interfaces';\nimport { OmapiPremiumMapper } from '../mappers';\nimport { OmapiPremium } from '../models';\nimport { OmapiCacheService } from './cache/omapi-cache.service';\nimport { LogFactory } from '@telenet/ng-lib-shared';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class OmapiPremiumService {\n  gatewayUrl: string;\n  private readonly log = LogFactory.createLogger(OmapiPremiumService);\n\n  constructor(\n    private readonly http: HttpClient,\n    private readonly omapiPremiumMapper: OmapiPremiumMapper,\n    private readonly urlService: UrlService,\n    private readonly cacheService: OmapiCacheService<RawOmapiPremiumInterface>,\n    private readonly configService: ConfigService,\n    private readonly messageService: MessageService\n  ) {\n    this.gatewayUrl = this.configService.getConfig(ConfigConstants.OMAPI_URL);\n  }\n\n  getOmapiPremium(\n    messageGroup: string,\n    epc: string,\n    showCustomError?: boolean,\n    errorLabelKey?: string\n  ): Observable<OmapiPremium> {\n    if (!this.cacheService.get(epc)) {\n      this.cacheService.add(\n        epc,\n        this.http.get<RawOmapiPremiumInterface>(this.getPremiumEndpoint(epc), this.getHttpConfig())\n      );\n    }\n\n    return this.cacheService.get(epc).pipe(\n      take(1),\n      catchError((error: HttpErrorResponse) => this.handleError(error, messageGroup, showCustomError, errorLabelKey)),\n      map((response: RawOmapiPremiumInterface) => {\n        return this.omapiPremiumMapper.toModel(response);\n      })\n    );\n  }\n\n  private handleError(\n    error: HttpErrorResponse,\n    messageGroup: string,\n    showCustomError?: boolean,\n    errorLabelKey?: string\n  ) {\n    if (showCustomError && errorLabelKey) {\n      this.messageService.addMessage(new ErrorMessage(messageGroup, errorLabelKey));\n    } else if (error.status !== 410) {\n      this.messageService.addMessage(new ErrorMessage(messageGroup, 'omapi-' + error.status));\n    }\n    this.log.logError('An error occurred while trying to fetch ' + messageGroup, error);\n    return throwError(() => 'An error occurred while trying to fetch ' + messageGroup);\n  }\n\n  private getPremiumEndpoint(epc: string): string {\n    return `${this.gatewayUrl}/public/premium/${epc}`;\n  }\n\n  private getHttpConfig() {\n    return {\n      headers: {\n        'x-alt-referer': this.urlService.getCurrentUrl(),\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n      timeout: 10000,\n      cache: true,\n    };\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["lodashMap","i1","i2","i4.OmapiProductMapper","i5.OmapiCacheService","i1.OmapiProductService","i2.OmapiProductMapper","i4","i6.OmapiProductService","i2.OmapiPremiumMapper","i3","i4.OmapiCacheService","i5","i6"],"mappings":"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"}