{"version":3,"names":["TAB_TYPES","container","inline","tabsBaseCss","WinkTabsBaseStyle0","tabsTelenetCss","WinkTabsTelenetStyle0","Tabs","Map","tabList","tabItems","handleClickOnButton","index","this","activeTabIndex","handleScroll","focus","handleKeyDown","e","assignTheRightActiveTabIndex","key","handleKeyDownIndicator","direction","INDICATOR_DIRECTIONS","left","right","supportedKeysMap","tabElements","length","handler","get","findNextTabItemId","i","nextItem","querySelector","hasAttribute","undefined","containerRect","getBoundingClientRect","containerCenter","width","activeTab","activeRect","activeCenter","scrollOffset","scrollLeft","scrollWidth","scrollTo","behavior","checkIfScrollable","host","shadowRoot","querySelectorAll","tabitemWidth","forEach","item","offsetWidth","isScrollable","renderSlots","type","map","slotname","slot","replace","computedSlotName","uuid","uuidMap","UUId","set","h","id","role","tabIndex","class","name","disabled","onClick","onKeyDown","getAttribute","componentWillLoad","tabDivs","Array","from","componentDidLoad","render","Host","appearance","ref","el","event"],"sources":["../core/src/components/tabs/models/tabs.types.tsx","../core/src/components/tabs/styles/brands/tabs.base.scss?tag=wink-tabs&mode=base&encapsulation=shadow","../core/src/components/tabs/styles/brands/tabs.telenet.scss?tag=wink-tabs&mode=telenet&encapsulation=shadow","../core/src/components/tabs/tabs.tsx"],"sourcesContent":["export const TAB_TYPES = {\n  container: 'container',\n  inline: 'inline',\n} as const;\nexport type TabTypes = (typeof TAB_TYPES)[keyof typeof TAB_TYPES];\n","@import '../vars/vars.base';\n@import '../tabs.default';\n","@import '../vars/vars.telenet';\n@import '../tabs.default';\n","import { Component, Element, h, Host, Prop, State } from '@stencil/core';\nimport { UUId } from '../../utils/utils';\nimport { TabTypes, TAB_TYPES } from './models/tabs.types';\nimport { INDICATOR_DIRECTIONS, IndicatorDirection } from '../../models/directions.types';\n\n@Component({\n  tag: 'wink-tabs',\n  styleUrls: {\n    telenet: 'styles/brands/tabs.telenet.scss',\n    base: 'styles/brands/tabs.base.scss',\n  },\n  shadow: true,\n})\nexport class Tabs {\n  @Element() host!: HTMLWinkTabsElement;\n\n  @Prop() appearance: TabTypes = TAB_TYPES.container;\n\n  @State() activeTabIndex = 1;\n  @State() isScrollable = false;\n  @State() tabElements: Element[] = [];\n  @State() uuidMap = new Map();\n\n  private tabList!: HTMLElement;\n  private tabItems!: NodeListOf<HTMLElement>;\n\n  private readonly handleClickOnButton = (index: number) => {\n    this.activeTabIndex = index;\n    this.handleScroll();\n    this.tabItems[this.activeTabIndex - 1].focus();\n  };\n\n  private readonly handleKeyDown = (e: { key: string }) => {\n    this.assignTheRightActiveTabIndex(e.key);\n  };\n\n  private readonly handleKeyDownIndicator = (e: { key: string }, direction: IndicatorDirection) => {\n    if (e.key === 'Enter') {\n      direction === INDICATOR_DIRECTIONS.left\n        ? this.handleScroll(INDICATOR_DIRECTIONS.left)\n        : this.handleScroll(INDICATOR_DIRECTIONS.right);\n    }\n  };\n\n  private assignTheRightActiveTabIndex(key: string): void {\n    const supportedKeysMap = new Map<string, () => void>([\n      [\n        'ArrowRight',\n        () => {\n          this.handleScroll(INDICATOR_DIRECTIONS.right);\n        },\n      ],\n      [\n        'ArrowLeft',\n        () => {\n          this.handleScroll(INDICATOR_DIRECTIONS.left);\n        },\n      ],\n      [\n        'Home',\n        () => {\n          if (this.activeTabIndex !== 1) {\n            this.activeTabIndex = 1;\n          }\n        },\n      ],\n      [\n        'End',\n        () => {\n          if (this.activeTabIndex !== this.tabElements.length) {\n            this.activeTabIndex = this.tabElements.length;\n          }\n        },\n      ],\n    ]);\n\n    const handler = supportedKeysMap.get(key);\n\n    if (handler) {\n      handler();\n    }\n  }\n\n  private findNextTabItemId(direction: IndicatorDirection) {\n    if (direction === INDICATOR_DIRECTIONS.left) {\n      for (let i = this.activeTabIndex - 1; i > 0; i--) {\n        const nextItem = this.tabList.querySelector('#tab-' + i);\n        if (nextItem && !nextItem.hasAttribute('disabled')) {\n          return i;\n        }\n      }\n    } else {\n      for (let i = this.activeTabIndex + 1; i < this.tabElements.length + 1; i++) {\n        const nextItem = this.tabList.querySelector('#tab-' + i);\n        if (nextItem && !nextItem.hasAttribute('disabled')) {\n          return i;\n        }\n      }\n    }\n    return undefined;\n  }\n\n  private handleScroll(direction?: IndicatorDirection) {\n    if (direction) {\n      this.activeTabIndex = this.findNextTabItemId(direction) || this.activeTabIndex;\n    }\n\n    const containerRect = this.tabList.getBoundingClientRect();\n    const containerCenter = containerRect.width / 2;\n    const activeTab = this.tabList.querySelector('#tab-' + this.activeTabIndex);\n\n    if (activeTab) {\n      const activeRect = activeTab.getBoundingClientRect();\n      const activeCenter = activeRect.left + activeRect.width / 2;\n      const scrollOffset = activeCenter - containerCenter;\n\n      let scrollLeft = this.tabList.scrollLeft + scrollOffset - 8;\n      if (this.activeTabIndex === 1) {\n        scrollLeft = 0;\n      }\n\n      if (this.activeTabIndex === this.tabElements.length) {\n        scrollLeft = this.tabList.scrollWidth;\n      }\n\n      this.tabList.scrollTo({ left: scrollLeft, behavior: 'smooth' });\n    }\n  }\n\n  private checkIfScrollable() {\n    this.tabList = this.host?.shadowRoot?.querySelector('.tab-list') as HTMLElement;\n    this.tabItems = this.host?.shadowRoot?.querySelectorAll('.tab') as NodeListOf<HTMLElement>;\n\n    let tabitemWidth = 0;\n    this.tabItems.forEach((item) => {\n      tabitemWidth = tabitemWidth + item.offsetWidth;\n    });\n\n    if (tabitemWidth >= this.tabList.offsetWidth + 4) {\n      this.isScrollable = true;\n    } else {\n      this.isScrollable = false;\n    }\n  }\n\n  private renderSlots(type: string) {\n    return this.tabElements.map((item, index) => {\n      const slotname = (item.slot && item.slot.replace('tab-', '')) || `${index + 1}`;\n      const computedSlotName = type === 'tabpanel' ? `tabpanel-${slotname}` : `tab-${slotname}`;\n\n      let uuid = this.uuidMap.get(computedSlotName);\n      if (uuid === undefined) {\n        uuid = UUId();\n        this.uuidMap.set(computedSlotName, uuid);\n      }\n\n      return type === 'tabpanel' ? (\n        <div\n          key={uuid}\n          id={`tabpanel-${index + 1}`}\n          role=\"tabpanel\"\n          aria-labelledby={`tab-${index + 1}`}\n          tabIndex={this.activeTabIndex === index + 1 ? 0 : -1}\n          class={{ 'is-hidden': this.activeTabIndex !== index + 1 }}>\n          <slot name={`tab-${slotname}`}></slot>\n        </div>\n      ) : (\n        <button\n          key={uuid}\n          id={`tab-${index + 1}`}\n          type=\"button\"\n          role=\"tab\"\n          disabled={item.hasAttribute('disabled')}\n          class={`tab ${this.activeTabIndex === index + 1 ? 'is-active-tab' : ''}`}\n          aria-selected={`${this.activeTabIndex === index + 1}`}\n          aria-controls={`tabpanel-${index + 1}`}\n          aria-describedby={`tabpanel-${index + 1}`}\n          onClick={() => this.handleClickOnButton(index + 1)}\n          onKeyDown={this.handleKeyDown}>\n          <div class=\"tab-content\">\n            <p class=\"tab-title\"> {item.getAttribute('data-title')}</p>\n            {item.getAttribute('data-subtitle')}\n          </div>\n        </button>\n      );\n    });\n  }\n\n  async componentWillLoad() {\n    const tabDivs = this.host?.querySelectorAll('div[slot*=\"tab-\"]');\n    this.tabElements = Array.from(tabDivs);\n  }\n\n  componentDidLoad() {\n    this.checkIfScrollable();\n  }\n\n  render() {\n    return (\n      <Host>\n        <div class={`tabs tabs-${this.appearance}`}>\n          <div class={`tab-header ${this.isScrollable ? 'is-scrollable' : ''}`}>\n            <div\n              class=\"tab-list\"\n              role=\"tablist\"\n              aria-labelledby=\"tablist-1\"\n              ref={(el) => (this.tabList = el as HTMLDivElement)}>\n              {this.renderSlots('tab')}\n            </div>\n\n            {this.isScrollable && this.activeTabIndex > 1 && (\n              <wink-indicator\n                class=\"scroll-button scroll-button-left\"\n                direction=\"left\"\n                tabIndex={1}\n                onKeyDown={(event) => this.handleKeyDownIndicator(event, INDICATOR_DIRECTIONS.left)}\n                onClick={() => this.handleScroll(INDICATOR_DIRECTIONS.left)}></wink-indicator>\n            )}\n            {this.isScrollable && this.activeTabIndex !== this.tabElements.length && (\n              <wink-indicator\n                class=\"scroll-button scroll-button-right\"\n                direction=\"right\"\n                tabIndex={1}\n                onKeyDown={(event) => this.handleKeyDownIndicator(event, INDICATOR_DIRECTIONS.right)}\n                onClick={() => this.handleScroll(INDICATOR_DIRECTIONS.right)}></wink-indicator>\n            )}\n          </div>\n\n          {this.renderSlots('tabpanel')}\n        </div>\n      </Host>\n    );\n  }\n}\n"],"mappings":"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"}