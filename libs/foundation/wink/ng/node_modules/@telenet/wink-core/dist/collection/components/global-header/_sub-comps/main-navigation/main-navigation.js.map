{"version":3,"file":"main-navigation.js","sourceRoot":"","sources":["../../../../../../../../../../src/components/global-header/_sub-comps/main-navigation/main-navigation.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Event, EventEmitter, h, Listen, Prop, State } from '@stencil/core';\nimport { mainNavEventEmitterDetails, MenuItem } from './models/main-navigation.types';\nimport { MediaQueryDetector } from '../../../../assets/shared/scripts/media-query-detector';\n\n@Component({\n  tag: 'wink-main-navigation',\n  styleUrls: {\n    telenet: 'styles/brands/main-navigation.telenet.scss',\n    base: 'styles/brands/main-navigation.base.scss',\n  },\n  shadow: true,\n})\nexport class MainNavigation {\n  @Prop() menuItems = '';\n\n  @State() _menuItems: MenuItem[] = [];\n  @State() isOpen = false;\n  @State() activeIndex: number | undefined = undefined;\n  @State() ActiveLinkRef: HTMLAnchorElement | undefined = undefined;\n\n  @Event() mainNavigationItemClicked: EventEmitter<mainNavEventEmitterDetails> | undefined;\n\n  @Listen('flyoutBackLinkClicked', { target: 'document' })\n  handleFlyoutBackLinkClicked(e: CustomEvent) {\n    const { eventType } = e.detail;\n\n    this.isOpen = false;\n\n    if (eventType !== 'mouse') {\n      this.ActiveLinkRef?.focus();\n    }\n  }\n\n  componentWillLoad() {\n    if (!this.menuItems) {\n      return;\n    }\n    this._menuItems = JSON.parse(this.menuItems);\n  }\n\n  private mainNavigationItemEmitter(item: mainNavEventEmitterDetails) {\n    this.mainNavigationItemClicked?.emit(item);\n  }\n\n  private handleFlyOutOpening(item: mainNavEventEmitterDetails) {\n    this.isOpen = !!this._menuItems[item.index]?.hasSubNav;\n    this.mainNavigationItemEmitter(item);\n  }\n\n  private handleItemClick(item: mainNavEventEmitterDetails) {\n    this.activeIndex = item.index;\n    this.handleFlyOutOpening(item);\n  }\n\n  private handleItemMouseOver(item: mainNavEventEmitterDetails) {\n    if (item.eventType === 'mouse' && MediaQueryDetector.isUntilMdHeader) {\n      return;\n    }\n    if (this._menuItems[item.index].hasSubNav) {\n      this.handleFlyOutOpening(item);\n      return;\n    }\n    this.isOpen = false;\n    this.mainNavigationItemEmitter({ index: NaN, name: '' });\n  }\n\n  private handleKeyDownEvent(e: KeyboardEvent, index: number, name: string) {\n    if (e.code === 'Space') {\n      e.preventDefault();\n      this.handleItemClick({ index, name });\n    }\n  }\n\n  private getATagCssClasses(index: number) {\n    return {\n      active: this.activeIndex === index,\n    };\n  }\n\n  render() {\n    return (\n      <nav role=\"navigation\">\n        <ul role=\"menu\" aria-label=\"Main navigation menu\">\n          {this._menuItems.map((item: MenuItem, index: number) => (\n            <li role=\"none\">\n              <a\n                role=\"menuitem\"\n                aria-haspopup={(!!item.hasSubNav).toString()}\n                aria-expanded={this.isOpen.toString()}\n                aria-controls={item.hasSubNav ? `flyout-${index}` : undefined}\n                class={this.getATagCssClasses(index)}\n                href={item.url}\n                onClick={() => this.handleItemClick({ index, name: item.name })}\n                onMouseOver={() => this.handleItemMouseOver({ index, name: item.name, eventType: 'mouse' })}\n                onKeyDown={(e) => this.handleKeyDownEvent(e, index, item.name)}\n                ref={(el) => this.activeIndex === index && (this.ActiveLinkRef = el)}>\n                {item.name}\n                {item.hasSubNav && <wink-icon appearance=\"default\" icon=\"chevron-right\" size=\"sm\" />}\n              </a>\n            </li>\n          ))}\n        </ul>\n      </nav>\n    );\n  }\n}\n"]}