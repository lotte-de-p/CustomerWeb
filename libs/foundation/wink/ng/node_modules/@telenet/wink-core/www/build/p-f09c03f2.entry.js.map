{"version":3,"names":["DROPDOWN_ALIGN","topLeft","topRight","bottomLeft","bottomRight","dropdownMenuBaseCss","WinkDropdownMenuBaseStyle0","dropdownMenuTelenetCss","WinkDropdownMenuTelenetStyle0","DropdownMenu","NaN","componentDidLoad","this","setPosition","i","getDropdownItems","length","innerText","itemSelected","classList","add","handleKeyDown","ev","key","element","target","tagName","toUpperCase","shadowRoot","querySelector","click","toggleDropdown","Number","isNaN","focusableItem","focusOnItem","isExpanded","host","focus","focusItem","itemToFocus","HTMLElement","querySelectorAll","_e","dropdownRect","getBoundingClientRect","viewportWidth","window","innerWidth","viewportHeight","innerHeight","spaceOnLeft","left","spaceOnRight","right","spaceOnTop","top","spaceOnBottom","bottom","positionX","Math","max","positionY","listPosition","render","h","Host","class","onMouseDown","exportparts","tabindex","dropdownTabIndex","name","heading","size","ICON_SIZES","sm","icon"],"sources":["../core/src/components/dropdown-menu/models/dropdown-menu.types.tsx","../core/src/components/dropdown-menu/styles/brands/dropdown-menu.base.scss?tag=wink-dropdown-menu&mode=base&encapsulation=shadow","../core/src/components/dropdown-menu/styles/brands/dropdown-menu.telenet.scss?tag=wink-dropdown-menu&mode=telenet&encapsulation=shadow","../core/src/components/dropdown-menu/dropdown-menu.tsx"],"sourcesContent":["export const DROPDOWN_ALIGN = {\n  topLeft: 'top-left',\n  topRight: 'top-right',\n  bottomLeft: 'bottom-left',\n  bottomRight: 'bottom-right',\n} as const;\nexport type DropdownAlign = (typeof DROPDOWN_ALIGN)[keyof typeof DROPDOWN_ALIGN];\n","@import '../vars/vars.base';\n@import '../dropdown-menu.default';\n","@import '../vars/vars.telenet';\n@import '../dropdown-menu.default';\n","import { Component, Element, h, Host, Listen, Prop, State } from '@stencil/core';\nimport { DROPDOWN_ALIGN, DropdownAlign } from './models/dropdown-menu.types';\nimport { ICON_SIZES } from '../icon/models/icon.types';\n\n@Component({\n  tag: 'wink-dropdown-menu',\n  styleUrls: {\n    telenet: 'styles/brands/dropdown-menu.telenet.scss',\n    base: 'styles/brands/dropdown-menu.base.scss',\n  },\n  shadow: true,\n})\nexport class DropdownMenu {\n  @Element() host!: HTMLWinkDropdownMenuElement;\n\n  @Prop() heading?: string = 'default-1';\n  @Prop({ mutable: true }) isExpanded?: boolean = false;\n  @Prop() dropdownTabIndex?: number = 1;\n  @Prop() itemSelected?: string;\n\n  @State() listPosition: DropdownAlign = DROPDOWN_ALIGN.topLeft;\n  @State() focusableItem = NaN;\n\n  componentDidLoad(): void {\n    this.setPosition();\n    for (let i = 0; i < this.getDropdownItems().length; i++) {\n      if (this.getDropdownItems()[i].innerText === this.itemSelected) {\n        this.getDropdownItems()[i].classList.add('active');\n      }\n    }\n  }\n\n  @Listen('keydown', {\n    passive: true,\n  })\n  handleKeyDown(ev: KeyboardEvent) {\n    switch (ev.key) {\n      case ' ':\n      case 'Enter': {\n        const element = ev?.target as HTMLElement;\n        if (element.tagName.toUpperCase() === 'WINK-LINK') {\n          element?.shadowRoot?.querySelector('a')?.click();\n        } else {\n          this.toggleDropdown(ev);\n        }\n        break;\n      }\n      case 'Tab': {\n        if (ev.target === this.getDropdownItems()[this.getDropdownItems().length - 1]) {\n          this.toggleDropdown(ev);\n        }\n        break;\n      }\n      case 'ArrowDown': {\n        if (Number.isNaN(this.focusableItem) || this.focusableItem === this.getDropdownItems().length - 1) {\n          this.focusableItem = 0;\n        } else {\n          this.focusableItem++;\n        }\n        this.focusOnItem(this.focusableItem);\n        break;\n      }\n      case 'ArrowUp': {\n        if (!this.focusableItem || this.focusableItem === -1) {\n          this.focusableItem = this.getDropdownItems().length - 1;\n        } else {\n          this.focusableItem--;\n        }\n        this.focusOnItem(this.focusableItem);\n        break;\n      }\n      case 'Escape': {\n        this.isExpanded = false;\n        this.host.shadowRoot?.querySelector('button')?.focus();\n        break;\n      }\n      case 'Home': {\n        this.focusableItem = 0;\n        this.focusOnItem(this.focusableItem);\n        break;\n      }\n      case 'End': {\n        this.focusableItem = this.getDropdownItems().length - 1;\n        this.focusOnItem(this.focusableItem);\n        break;\n      }\n    }\n  }\n\n  private focusOnItem(focusItem: number) {\n    const itemToFocus = this.getDropdownItems()[focusItem];\n    if (itemToFocus instanceof HTMLElement) {\n      return itemToFocus?.shadowRoot?.querySelector('a')?.focus();\n    }\n  }\n\n  private getDropdownItems() {\n    return this.host.querySelectorAll('wink-link');\n  }\n\n  private readonly toggleDropdown = (_e: Event) => {\n    this.setPosition();\n    this.isExpanded = !this.isExpanded;\n  };\n\n  private readonly setPosition = () => {\n    const dropdownRect = this.host.getBoundingClientRect();\n    const viewportWidth = window.innerWidth;\n    const viewportHeight = window.innerHeight;\n\n    const spaceOnLeft = dropdownRect.left;\n    const spaceOnRight = viewportWidth - dropdownRect.right;\n    const spaceOnTop = dropdownRect.top;\n    const spaceOnBottom = viewportHeight - dropdownRect.bottom;\n\n    const positionX = Math.max(spaceOnLeft, spaceOnRight) === spaceOnRight ? 'left' : 'right';\n    const positionY = Math.max(spaceOnTop, spaceOnBottom) === spaceOnBottom ? 'top' : 'bottom';\n\n    this.listPosition = `${positionY}-${positionX}`;\n  };\n\n  render() {\n    return (\n      <Host\n        class={`dropdown-menu--align-list--${this.listPosition}`}\n        is-expanded={this.isExpanded}\n        onMouseDown={this.toggleDropdown}\n        exportparts=\"icon, icon-chevron-down-small\">\n        <button class=\"dropdown-menu--heading\" tabindex={this.dropdownTabIndex}>\n          <slot name=\"dropdown-menu--avatar\" />\n          {this.heading}\n          <div class=\"dropdown-menu--chevron\">\n            <wink-icon size={ICON_SIZES.sm} icon=\"chevron-down-small\"></wink-icon>\n          </div>\n        </button>\n        <ul class=\"dropdown-menu--list\">\n          <slot></slot>\n        </ul>\n      </Host>\n    );\n  }\n}\n"],"mappings":"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"}