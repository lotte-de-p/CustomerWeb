{"version":3,"file":"libs_account_discount_hardware-discount_data-access_src_index_ts-_ea7b0.js","mappings":"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","sources":["./libs/account/discount/hardware-discount/data-access/src/index.ts","./libs/account/discount/hardware-discount/data-access/src/lib/+state/hardware-discount-ngrx.module.ts","./libs/account/discount/hardware-discount/data-access/src/lib/+state/hardware-discount.actions.ts","./libs/account/discount/hardware-discount/data-access/src/lib/+state/hardware-discount.effects.ts","./libs/account/discount/hardware-discount/data-access/src/lib/+state/hardware-discount.facade.ts","./libs/account/discount/hardware-discount/data-access/src/lib/+state/hardware-discount.reducer.ts","./libs/account/discount/hardware-discount/data-access/src/lib/+state/hardware-discount.selectors.ts","./libs/account/discount/hardware-discount/data-access/src/lib/services/hardware-discount-datalayer.service.ts","./libs/account/discount/hardware-discount/data-access/src/lib/services/hardware-discount.service.ts","./libs/account/discount/hardware-discount/data-access/src/lib/util/directories/image-src-interceptor.directive.ts"],"sourcesContent":["export * from './lib/+state/hardware-discount.facade';\nexport { HardwareDiscountNgrxModule } from './lib/+state/hardware-discount-ngrx.module';\nexport {\n  HardwareDiscount,\n  UsedDiscounts,\n  HardwareInvoice,\n  Depreciations,\n  HardwareDiscountDatalayerEvent,\n} from './lib/entities/hardware-discount.interface';\nexport { ImageSrcInterceptorDirective } from './lib/util/directories/image-src-interceptor.directive';\nexport { HardwareDiscountService } from './lib/services/hardware-discount.service';\n","import { NgModule } from '@angular/core';\nimport { EffectsModule } from '@ngrx/effects';\nimport { StoreModule } from '@ngrx/store';\nimport { HardwareDiscountEffects } from './hardware-discount.effects';\nimport { hardwareDiscountFeature } from './hardware-discount.reducer';\n\n@NgModule({\n  imports: [EffectsModule.forFeature([HardwareDiscountEffects]), StoreModule.forFeature(hardwareDiscountFeature)],\n})\nexport class HardwareDiscountNgrxModule {}\n","import { createAction, emptyProps, props } from '@ngrx/store';\nimport { HardwareDiscount } from '../entities/hardware-discount.interface';\n\nexport const loadHardwareDiscount = createAction('[hardware-discount] loadHardwareDiscount', emptyProps);\n\nexport const loadHardwareDiscountSuccess = createAction(\n  '[hardware-discount] loadHardwareDiscountSuccess',\n  props<{\n    hardwareDiscountObject: HardwareDiscount;\n  }>()\n);\n\nexport const loadHardwareDiscountFailure = createAction(\n  '[hardware-discount] loadHardwareDiscountFailure',\n  props<{\n    error: string;\n  }>()\n);\n","import { Injectable } from '@angular/core';\nimport { Actions, createEffect, ofType } from '@ngrx/effects';\nimport { catchError, map, startWith, switchMap } from 'rxjs/operators';\nimport { HardwareDiscountService } from '../services/hardware-discount.service';\nimport {\n  loadHardwareDiscount,\n  loadHardwareDiscountFailure,\n  loadHardwareDiscountSuccess,\n} from './hardware-discount.actions';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class HardwareDiscountEffects {\n  loadHardwareDiscount$;\n\n  constructor(\n    private readonly actions$: Actions,\n    private readonly hardwareDiscountService: HardwareDiscountService\n  ) {\n    this.loadHardwareDiscount$ = createEffect(() =>\n      this.actions$.pipe(\n        ofType(loadHardwareDiscount),\n        switchMap(() => this.hardwareDiscountService.loadHardwareDiscount()),\n        map((hardwareDiscountObject) => loadHardwareDiscountSuccess({ hardwareDiscountObject })),\n        catchError((error, source) => source.pipe(startWith(loadHardwareDiscountFailure({ error }))))\n      )\n    );\n  }\n}\n","import { inject, Injectable } from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport { loadHardwareDiscount } from './hardware-discount.actions';\nimport { HardwareDiscountState } from './hardware-discount.reducer';\nimport {\n  selectHardwareDiscountError,\n  selectHardwareDiscountOverview,\n  selectHardwareDiscountLoading,\n} from './hardware-discount.selectors';\nimport { HardwareDiscountDatalayerEvent } from '../entities/hardware-discount.interface';\nimport { HardwareDiscountDatalayerService } from '../services/hardware-discount-datalayer.service';\nimport { DataLayerAttributes } from '@telenet/ng-lib-datalayer';\n\n@Injectable({ providedIn: 'root' })\nexport class HardwareDiscountFacade {\n  private readonly store = inject(Store<HardwareDiscountState>);\n  private readonly hardwareDiscountDatalayerService = inject(HardwareDiscountDatalayerService);\n\n  selectHardwareDiscountOverview$ = this.store.select(selectHardwareDiscountOverview);\n  selectHardwareDiscountError$ = this.store.select(selectHardwareDiscountError);\n  selectHardwareDiscountLoading$ = this.store.select(selectHardwareDiscountLoading);\n\n  loadHardwareDiscount(): void {\n    this.store.dispatch(loadHardwareDiscount());\n  }\n\n  sendDatalayerEvent(event: HardwareDiscountDatalayerEvent, attributes: DataLayerAttributes) {\n    this.hardwareDiscountDatalayerService.sendDataLayerEventWithAttributes(event, attributes);\n  }\n}\n","import { createFeature, createReducer, on } from '@ngrx/store';\nimport {\n  loadHardwareDiscount,\n  loadHardwareDiscountFailure,\n  loadHardwareDiscountSuccess,\n} from './hardware-discount.actions';\nimport { HardwareDiscount } from '../entities/hardware-discount.interface';\n\nexport const HARDWARE_DISCOUNT_FEATURE_KEY = 'hardware-discount';\n\nexport interface HardwareDiscountState {\n  discountOverview: HardwareDiscount;\n  loading: boolean;\n  loadError: string | undefined;\n}\n\nexport const initialState: HardwareDiscountState = {\n  discountOverview: {\n    availableSlots: 0,\n    totalSlots: 0,\n    creditCheck: '',\n    usedDiscounts: [\n      {\n        device: {\n          manufacturer: '',\n          name: '',\n          imageUrl: '',\n          itemCode: '',\n        },\n        deliveryOrder: {\n          id: '',\n          expectedDeliveryDate: '',\n          tracking: {\n            number: '',\n            url: '',\n          },\n        },\n        originalPrice: 0,\n        discountedPrice: 0,\n        invoice: {\n          billingAccountNumber: '',\n          documentReferenceNumber: '',\n        },\n        contract: {\n          remainingMonths: 0,\n          obligationInMonths: 0,\n          remainingValue: 0,\n        },\n        depreciations: [\n          {\n            date: '',\n            remainingValue: 0,\n            status: '',\n          },\n        ],\n      },\n    ],\n  },\n  loading: false,\n  loadError: undefined,\n};\n\nexport const hardwareDiscountReducer = createReducer(\n  initialState,\n  on(loadHardwareDiscountSuccess, (state: HardwareDiscountState, action) => ({\n    ...state,\n    loading: false,\n    loadError: undefined,\n    discountOverview: { ...action.hardwareDiscountObject },\n  })),\n  on(loadHardwareDiscountFailure, (state: HardwareDiscountState, action) => ({\n    ...state,\n    loading: false,\n    loadError: action.error,\n  })),\n  on(loadHardwareDiscount, (state: HardwareDiscountState) => ({\n    ...state,\n    loading: true,\n  }))\n);\n\nexport const hardwareDiscountFeature = createFeature({\n  name: HARDWARE_DISCOUNT_FEATURE_KEY,\n  reducer: hardwareDiscountReducer,\n});\n","import { createFeatureSelector, createSelector } from '@ngrx/store';\nimport { HARDWARE_DISCOUNT_FEATURE_KEY, HardwareDiscountState } from './hardware-discount.reducer';\n\nexport const selectHardwareDiscountFeature =\n  createFeatureSelector<HardwareDiscountState>(HARDWARE_DISCOUNT_FEATURE_KEY);\n\nexport const selectHardwareDiscountOverview = createSelector(\n  selectHardwareDiscountFeature,\n  (state) => state.discountOverview\n);\nexport const selectHardwareDiscountLoading = createSelector(selectHardwareDiscountFeature, (state) => state.loading);\nexport const selectHardwareDiscountError = createSelector(selectHardwareDiscountFeature, (state) => state.loadError);\n","import { Injectable } from '@angular/core';\nimport { DataLayerAttributes, DataLayerService } from '@telenet/ng-lib-datalayer';\nimport { HardwareDiscountDatalayerEvent } from '../entities/hardware-discount.interface';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class HardwareDiscountDatalayerService {\n  public static readonly CATEGORY_HARDWARE = 'hardware';\n\n  constructor(private readonly dataLayerService: DataLayerService) {}\n\n  sendDataLayerEventWithAttributes(event: HardwareDiscountDatalayerEvent, attributes: DataLayerAttributes) {\n    const category = this.dataLayerService.createCategory(HardwareDiscountDatalayerService.CATEGORY_HARDWARE);\n    const eventInfo = this.dataLayerService.createEventInfo(event.eventName, event.eventType);\n    this.dataLayerService.addEvent(eventInfo, attributes, category);\n  }\n\n  initDataLayer(): void {\n    this.dataLayerService.init();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { OcapiCallConfig, OcapiService } from '@telenet/ng-lib-ocapi';\nimport { Observable, filter, map, throwError } from 'rxjs';\nimport { HardwareDiscount, HardwareInvoice } from '../entities/hardware-discount.interface';\nimport { HttpResponse } from '@angular/common/http';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class HardwareDiscountService {\n  mock_reply = {} as HardwareDiscount;\n  private static readonly MESSAGE_GROUP = 'hardware-discount';\n  private static readonly HARDWARE_ENDPOINT =\n    '/public/api/customer-web-account-discount-overview-cs/v1/discount-overview';\n\n  constructor(private readonly ocapiService: OcapiService) {}\n\n  loadHardwareDiscount(): Observable<HardwareDiscount> {\n    const endpoint = HardwareDiscountService.HARDWARE_ENDPOINT;\n    return this.ocapiService.doGet(\n      new OcapiCallConfig<HardwareDiscount, HardwareDiscount>(HardwareDiscountService.MESSAGE_GROUP, endpoint)\n    );\n  }\n\n  getHardwareInvoice(invoice: HardwareInvoice): Observable<Blob> {\n    const endpoint =\n      HardwareDiscountService.HARDWARE_ENDPOINT +\n      `/${invoice.billingAccountNumber}/invoices/${invoice.documentReferenceNumber}`;\n    const ocapiCallConfig = new OcapiCallConfig<HttpResponse<Uint8Array>, HttpResponse<Uint8Array>>(\n      HardwareDiscountService.MESSAGE_GROUP,\n      endpoint\n    );\n    ocapiCallConfig.responseType = 'blob';\n    ocapiCallConfig.observeAsResponse = true;\n    ocapiCallConfig.errorHandler = (error) => throwError(() => error);\n    return this.ocapiService.doGet(ocapiCallConfig).pipe(\n      filter((response) => !!response.body),\n      map((response) => new Blob([response.body!], { type: 'pdf' }))\n    );\n  }\n}\n","import { Directive, ElementRef, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { ConfigService, RemoteHostConfig } from '@telenet/ng-lib-config';\n\n@Directive({\n  standalone: true,\n  selector: '[appHardwareDiscountDashboardImageSrcInterceptor]',\n})\nexport class ImageSrcInterceptorDirective implements OnChanges {\n  @Input() moduleId!: string;\n  @Input() src = '';\n  constructor(\n    private readonly el: ElementRef,\n    private readonly configService: ConfigService\n  ) {}\n\n  ngOnChanges(changes: SimpleChanges): void {\n    const remoteHost: string = this.getRemoteHost();\n\n    if (remoteHost) {\n      let imagePath: string = changes['src'].currentValue;\n      const indexOfAssetsFolder = imagePath.indexOf('/assets');\n      if (indexOfAssetsFolder !== -1) {\n        imagePath = imagePath.slice(indexOfAssetsFolder);\n      }\n      this.el.nativeElement.src = `${remoteHost}${imagePath}`;\n    }\n  }\n\n  getRemoteHost(): string {\n    const remoteHostConfig: Partial<RemoteHostConfig> = this.configService.getRemoteHostConfig(this.moduleId);\n    return remoteHostConfig?.remoteHost || '';\n  }\n}\n"],"names":["HardwareDiscountNgrxModule","ImageSrcInterceptorDirective","HardwareDiscountService","EffectsModule","StoreModule","HardwareDiscountEffects","hardwareDiscountFeature","forFeature","imports","i1","EffectsFeatureModule","i2","StoreFeatureModule","createAction","emptyProps","props","loadHardwareDiscount","loadHardwareDiscountSuccess","loadHardwareDiscountFailure","Actions","createEffect","ofType","catchError","map","startWith","switchMap","actions$","hardwareDiscountService","loadHardwareDiscount$","constructor","pipe","hardwareDiscountObject","error","source","i0","ɵɵinject","factory","ɵfac","providedIn","inject","Store","selectHardwareDiscountError","selectHardwareDiscountOverview","selectHardwareDiscountLoading","HardwareDiscountDatalayerService","HardwareDiscountFacade","store","hardwareDiscountDatalayerService","selectHardwareDiscountOverview$","select","selectHardwareDiscountError$","selectHardwareDiscountLoading$","dispatch","sendDatalayerEvent","event","attributes","sendDataLayerEventWithAttributes","createFeature","createReducer","on","HARDWARE_DISCOUNT_FEATURE_KEY","initialState","discountOverview","availableSlots","totalSlots","creditCheck","usedDiscounts","device","manufacturer","name","imageUrl","itemCode","deliveryOrder","id","expectedDeliveryDate","tracking","number","url","originalPrice","discountedPrice","invoice","billingAccountNumber","documentReferenceNumber","contract","remainingMonths","obligationInMonths","remainingValue","depreciations","date","status","loading","loadError","undefined","hardwareDiscountReducer","state","action","reducer","createFeatureSelector","createSelector","selectHardwareDiscountFeature","DataLayerService","dataLayerService","CATEGORY_HARDWARE","category","createCategory","eventInfo","createEventInfo","eventName","eventType","addEvent","initDataLayer","init","OcapiCallConfig","OcapiService","filter","throwError","ocapiService","mock_reply","MESSAGE_GROUP","HARDWARE_ENDPOINT","endpoint","doGet","getHardwareInvoice","ocapiCallConfig","responseType","observeAsResponse","errorHandler","response","body","Blob","type","ElementRef","SimpleChanges","ConfigService","el","configService","moduleId","src","ngOnChanges","changes","remoteHost","getRemoteHost","imagePath","currentValue","indexOfAssetsFolder","indexOf","slice","nativeElement","remoteHostConfig","getRemoteHostConfig","ɵɵdirectiveInject","selectors","inputs","standalone","features","ɵɵNgOnChangesFeature"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}