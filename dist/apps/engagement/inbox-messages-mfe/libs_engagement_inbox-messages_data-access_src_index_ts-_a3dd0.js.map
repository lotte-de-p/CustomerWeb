{"version":3,"file":"libs_engagement_inbox-messages_data-access_src_index_ts-_a3dd0.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACC0C;AACkD;AAC9C;AACkB;;;;AAS1D,MAAOK,uBAAuB;EAAA,QAAAC,CAAA;qBAAvBD,uBAAuB;EAAA;EAAA,QAAAE,EAAA;UAAvBF;EAAuB;EAAA,QAAAG,EAAA;cALhCR,oDAAW,CAACS,UAAU,CAAC,sBAAsB,EAAER,yEAAoB,CAAC,EACpED,oDAAW,CAACS,UAAU,CAAC,4BAA4B,EAAEP,+EAA0B,CAAC,EAChFC,wDAAa,CAACM,UAAU,CAAC,CAACL,yEAAoB,CAAC,CAAC;EAAA;;;sHAGvCC,uBAAuB;IAAAK,OAAA,GAAAC,2DAAA,EAAAA,2DAAA,EAAAE,+DAAA;EAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;ACbc;AAG3C,MAAMI,gBAAgB,GAAGF,yDAAY,CAAC,qCAAqC,CAAC;AAE5E,MAAMG,uBAAuB,GAAGH,yDAAY,CACjD,6CAA6C,EAC7CC,kDAAK,EAA2C,CACjD;AAEM,MAAMG,2BAA2B,GAAGJ,yDAAY,CAAC,kDAAkD,CAAC;AAEpG,MAAMK,kCAAkC,GAAGL,yDAAY,CAC5D,0DAA0D,EAC1DC,kDAAK,EAAwC,CAC9C;AAEM,MAAMK,QAAQ,GAAGN,yDAAY,CAAC,2CAA2C,EAAEC,kDAAK,EAAqB,CAAC;AAEtG,MAAMM,kBAAkB,GAAGP,yDAAY,CAAC,wCAAwC,EAAEC,kDAAK,EAAqB,CAAC;AAE7G,MAAMO,yBAAyB,GAAGR,yDAAY,CAAC,gDAAgD,CAAC;AAEhG,MAAMS,uBAAuB,GAAGT,yDAAY,CACjD,8CAA8C,EAC9CC,kDAAK,EAAqB,CAC3B;AAEM,MAAMS,kBAAkB,GAAGV,yDAAY,CAC5C,uCAAuC,EACvCC,kDAAK,EAA6B,CACnC;AAEM,MAAMU,yBAAyB,GAAGX,yDAAY,CACnD,+CAA+C,EAC/CC,kDAAK,EAA2C,CACjD;AAEM,MAAMW,mBAAmB,GAAGZ,yDAAY,CAC7C,+CAA+C,EAC/CC,kDAAK,EAAmB,CACzB;AAEM,MAAMY,mBAAmB,GAAGb,yDAAY,CAC7C,gDAAgD,EAChDC,kDAAK,EAA6B,CACnC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7C6D;AACiC;AACrE;AACgD;AACT;AAC4B;AACzD;AAC6D;AAC/C;;;;;;;AAG5C,MAAOZ,oBAAoB;EAC/B2C,YACmBC,QAAiB,EACjBC,oBAA0C,EAC1CC,6BAA4D,EAC5DC,KAAY,EACZC,UAAsB;IAJtB,KAAAJ,QAAQ,GAARA,QAAQ;IACR,KAAAC,oBAAoB,GAApBA,oBAAoB;IACpB,KAAAC,6BAA6B,GAA7BA,6BAA6B;IAC7B,KAAAC,KAAK,GAALA,KAAK;IACL,KAAAC,UAAU,GAAVA,UAAU;IAG7B,KAAAC,iBAAiB,GAAGvB,2DAAY,CAAC,MAC/B,IAAI,CAACkB,QAAQ,CAACM,IAAI,CAChBvB,qDAAM,CAACU,qEAAqC,CAAC,EAC7CT,wDAAQ,CAAC,MACP,IAAI,CAACiB,oBAAoB,CAACM,mBAAmB,EAAE,CAACD,IAAI,CAClDrB,mDAAG,CAAEuB,oBAAoB,IAAKf,4EAA4C,CAAC;MAAEe;IAAoB,CAAE,CAAC,CAAC,EACrGtB,0DAAU,CAAEuB,KAAK,IAAKlB,wCAAE,CAACE,6DAA6B,CAAC;MAAEgB;IAAK,CAAE,CAAC,CAAC,CAAC,CACpE,CACF,CACF,CACF;IAED,KAAAC,cAAc,GAAG5B,2DAAY,CAAC,MAC5B,IAAI,CAACkB,QAAQ,CAACM,IAAI,CAChBvB,qDAAM,CAACU,uEAAuC,CAAC,EAC/CT,wDAAQ,CAAE2B,MAAM,IACd,IAAI,CAACV,oBAAoB,CAACW,iBAAiB,CAACD,MAAM,CAACE,OAAO,CAAC,CAACP,IAAI,CAC9DnB,qDAAK,CAAC,GAAG,CAAC,EACVE,8DAAc,CAAC,IAAI,CAACc,KAAK,CAACW,MAAM,CAAClB,0EAAmB,CAAC,CAAC,EACtDX,mDAAG,CAAC,CAAC,CAAC3B,CAAC,EAAEkD,oBAAoB,CAAC,KAAI;MAChC,MAAM;QAAEO,OAAO;QAAEC;MAAE,CAAE,GAAGL,MAAM,CAACE,OAAO;MACtC,MAAMI,eAAe,GAAGT,oBAAoB,EAAEU,kBAAkB,CAAC5B,MAAM,CACpEuB,OAAO,IAAKA,OAAO,CAACG,EAAE,KAAKL,MAAM,CAACE,OAAO,CAACG,EAAE,CAC9C;MACD,IAAI,CAACd,6BAA6B,CAACiB,2BAA2B,CAACH,EAAE,EAAED,OAAO,GAAGA,OAAO,CAACK,KAAK,GAAG,EAAE,CAAC;MAEhG,OAAO3B,8EAA8C,CAAC;QACpDe,oBAAoB,EAAE;UAAE,GAAGA,oBAAoB;UAAEU,kBAAkB,EAAED;QAAe;OACrF,CAAC;IACJ,CAAC,CAAC,EACF/B,0DAAU,CAAEuB,KAAK,IAAKlB,wCAAE,CAACE,6DAA6B,CAAC;MAAEgB;IAAK,CAAE,CAAC,CAAC,CAAC,CACpE,CACF,CACF,CACF;IAED,KAAAY,cAAc,GAAGvC,2DAAY,CAAC,MAC5B,IAAI,CAACkB,QAAQ,CAACM,IAAI,CAChBvB,qDAAM,CAACU,4EAA4C,CAAC,EACpDT,wDAAQ,CAAE2B,MAAM,IACdpB,wCAAE,CAACoB,MAAM,CAAC,CAACL,IAAI,CACbhB,sDAAM,CAAEqB,MAAM,IAAK,CAAC,CAACA,MAAM,CAACH,oBAAoB,EAAEc,mBAAmB,EAAEC,MAAM,CAAC,EAC9EnC,mDAAG,CAAEuB,MAAM,IAAI;MACb,MAAMa,mBAAmB,GACvBb,MAAM,CAACH,oBAAoB,CAACc,mBAAmB,EAAErC,GAAG,CAAE4B,OAAO,IAAI;QAC/D,OAAOA,OAAO,CAACE,OAAO,GAAGF,OAAO,CAACE,OAAO,CAACK,KAAK,GAAG,EAAE;MACrD,CAAC,CAAC,IAAI,EAAE;MACV,IAAII,mBAAmB,CAACD,MAAM,EAAE;QAC9B,IAAI,CAACrB,6BAA6B,CAACuB,gCAAgC,CAACD,mBAAmB,CAAC;MAC1F;IACF,CAAC,CAAC,EACFxC,wDAAQ,CAAE2B,MAAM,IAAI;MAClB,MAAMe,gBAAgB,GACpBf,MAAM,CAACH,oBAAoB,CAACc,mBAAmB,EAAErC,GAAG,CAAE4B,OAAO,IAAKA,OAAO,CAACG,EAAE,CAAC,IAAI,EAAE;MACrF,OAAO,IAAI,CAACf,oBAAoB,CAAC0B,uBAAuB,CAACD,gBAAgB,CAAC,CAACpB,IAAI,CAC7EnB,qDAAK,CAAC,IAAI,CAAC,EACXH,wDAAQ,CAAC,MAAM,CACbS,uEAAuC,CAAC;QAAEmC,GAAG,EAAEF;MAAgB,CAAE,CAAC,EAClEjC,8EAA8C,EAAE,CACjD,CAAC,EACFP,0DAAU,CAAEuB,KAAK,IAAKlB,wCAAE,CAACE,4EAA4C,CAAC;QAAEgB;MAAK,CAAE,CAAC,CAAC,CAAC,CACnF;IACH,CAAC,CAAC,CACH,CACF,CACF,CACF;IAED,KAAAoB,yBAAyB,GAAG/C,2DAAY,CAAC,MACvC,IAAI,CAACkB,QAAQ,CAACM,IAAI,CAChBvB,qDAAM,CAACU,gFAAgD,CAAC,EACxDT,wDAAQ,CAAC,MACP,IAAI,CAACiB,oBAAoB,CAAC9B,2BAA2B,EAAE,CAACmC,IAAI,CAC1DrB,mDAAG,CAAE6C,kBAAkB,IACrBrC,uFAAuD,CAAC;MACtDsC,wBAAwB,EAAED,kBAAkB,EAAEE;KAC/C,CAAC,CACH,EACD9C,0DAAU,CAAEuB,KAAK,IAAKlB,wCAAE,CAACE,6DAA6B,CAAC;MAAEgB;IAAK,CAAE,CAAC,CAAC,CAAC,CACpE,CACF,CACF,CACF;IAED,KAAAwB,yBAAyB,GAAGnD,2DAAY,CACtC,MACE,IAAI,CAACkB,QAAQ,CAACM,IAAI,CAChBvB,qDAAM,CAACU,wEAAwC,CAAC,EAChDJ,8DAAc,CAAC,IAAI,CAACc,KAAK,CAACW,MAAM,CAACjB,qFAA8B,CAAC,CAAC,EACjET,mDAAG,CAAC,CAAC,CAACuB,MAAM,EAAEmB,kBAAkB,CAAC,KAAI;MACnC,IAAI,CAAC5B,6BAA6B,CAACgC,4BAA4B,CAACvB,MAAM,CAACwB,GAAG,EAAE,CAAC,CAACL,kBAAkB,CAAC;MACjG,IAAI,CAACnB,MAAM,EAAEwB,GAAG,EAAE;MAClB,IAAI,CAAC/B,UAAU,CAACgC,UAAU,CAACzB,MAAM,CAACwB,GAAG,CAAC;IACxC,CAAC,CAAC,CACH,EACH;MAAEE,QAAQ,EAAE;IAAK,CAAE,CACpB;IAED,KAAAC,yBAAyB,GAAGxD,2DAAY,CACtC,MACE,IAAI,CAACkB,QAAQ,CAACM,IAAI,CAChBvB,qDAAM,CAACU,wEAAwC,CAAC,EAChDL,mDAAG,CAAEuB,MAAM,IAAI;MACb,MAAM;QAAEI;MAAO,CAAE,GAAGJ,MAAM,CAACE,OAAO;MAClC,IAAIE,OAAO,IAAIA,OAAO,CAACwB,YAAY,EAAE;QACnC,MAAM;UAAEC,IAAI;UAAEC;QAAI,CAAE,GAAG1B,OAAO,CAACwB,YAAY;QAC3C,MAAM;UAAEnB;QAAK,CAAE,GAAGL,OAAO;QAEzB,IAAI,CAACb,6BAA6B,CAACwC,4BAA4B,CAACtB,KAAK,EAAEoB,IAAI,EAAEC,IAAI,CAAC;QAClF,IAAI,CAACD,IAAI,EAAE;QACX,IAAI,CAACpC,UAAU,CAACgC,UAAU,CAACI,IAAI,CAAC;MAClC;IACF,CAAC,CAAC,CACH,EACH;MAAEH,QAAQ,EAAE;IAAK,CAAE,CACpB;EArHE;EAAC,QAAA/E,CAAA;qBAPOF,oBAAoB,EAAAuF,sDAAA,CAAAhF,kDAAA,GAAAgF,sDAAA,CAAA9E,kFAAA,GAAA8E,sDAAA,CAAAE,qGAAA,GAAAF,sDAAA,CAAAG,8CAAA,GAAAH,sDAAA,CAAAI,4DAAA;EAAA;EAAA,QAAAxF,EAAA;WAApBH,oBAAoB;IAAA4F,OAAA,EAApB5F,oBAAoB,CAAA6F;EAAA;;;;;;;;;;;;;;;;;;;;;;ACZe;AAChB;AACiC;AAS1D,MAAMI,YAAY,GAAuB;EAC9C7C,oBAAoB,EAAE,EAAmB;EACzC8C,OAAO,EAAE,KAAK;EACdC,SAAS,EAAEC;CACZ;AAQM,MAAMC,+BAA+B,GAA6B;EACvEC,KAAK,EAAE,CAAC;EACRJ,OAAO,EAAE,KAAK;EACdC,SAAS,EAAEC;CACZ;AAEM,MAAMvG,oBAAoB,GAAGiG,0DAAa,CAC/CG,YAAY,EACZF,+CAAE,CAAC1D,qEAAqC,EAAGkE,KAAK,KAAM;EAAE,GAAGA,KAAK;EAAEL,OAAO,EAAE;AAAI,CAAE,CAAC,CAAC,EACnFH,+CAAE,CAAC1D,4EAA4C,EAAE,CAACkE,KAAK,EAAE;EAAEnD;AAAoB,CAAE,KAC/E4C,8CAAO,CAACO,KAAK,EAAGC,KAAK,IAAI;EACvBA,KAAK,CAACpD,oBAAoB,GAAGA,oBAAoB;EACjDoD,KAAK,CAACN,OAAO,GAAG,KAAK;EACrBM,KAAK,CAACL,SAAS,GAAGC,SAAS;AAC7B,CAAC,CAAC,CACH,EACDL,+CAAE,CAAC1D,6DAA6B,EAAE,CAACkE,KAAK,EAAE;EAAElD;AAAK,CAAE,MAAM;EAAE,GAAGkD,KAAK;EAAEL,OAAO,EAAE,KAAK;EAAEC,SAAS,EAAE9C;AAAK,CAAE,CAAC,CAAC,EACzG0C,+CAAE,CAAC1D,uEAAuC,EAAGkE,KAAK,KAAM;EAAE,GAAGA,KAAK;EAAEL,OAAO,EAAE;AAAI,CAAE,CAAC,CAAC,EACrFH,+CAAE,CAAC1D,8EAA8C,EAAE,CAACkE,KAAK,EAAE;EAAEnD;AAAoB,CAAE,KACjF4C,8CAAO,CAACO,KAAK,EAAGC,KAAK,IAAI;EACvBA,KAAK,CAACpD,oBAAoB,GAAGA,oBAAoB;EACjDoD,KAAK,CAACN,OAAO,GAAG,KAAK;EACrBM,KAAK,CAACL,SAAS,GAAGC,SAAS;AAC7B,CAAC,CAAC,CACH,CACF;AAEM,MAAMtG,0BAA0B,GAAGgG,0DAAa,CACrDO,+BAA+B,EAC/BN,+CAAE,CAAC1D,gFAAgD,EAAGkE,KAAK,KAAM;EAAE,GAAGA,KAAK;EAAEL,OAAO,EAAE;AAAI,CAAE,CAAC,CAAC,EAC9FH,+CAAE,CAAC1D,uFAAuD,EAAE,CAACkE,KAAK,EAAE;EAAE5B;AAAwB,CAAE,KAC9FqB,8CAAO,CAACO,KAAK,EAAGC,KAAK,IAAI;EACvBA,KAAK,CAACF,KAAK,GAAG3B,wBAAwB;EACtC6B,KAAK,CAACN,OAAO,GAAG,KAAK;EACrBM,KAAK,CAACL,SAAS,GAAGC,SAAS;AAC7B,CAAC,CAAC,CACH,EACDL,+CAAE,CAAC1D,6DAA6B,EAAE,CAACkE,KAAK,EAAE;EAAElD;AAAK,CAAE,MAAM;EAAE,GAAGkD,KAAK;EAAEL,OAAO,EAAE,KAAK;EAAEC,SAAS,EAAE9C;AAAK,CAAE,CAAC,CAAC,CAC1G;;;;;;;;;;;;;;;;;;;;;AC7DmE;AAG7D,MAAMsD,wBAAwB,GAAGF,kEAAqB,CAAqB,sBAAsB,CAAC;AAClG,MAAMG,mCAAmC,GAC9CH,kEAAqB,CAA2B,4BAA4B,CAAC;AAExE,MAAMjE,mBAAmB,GAAGkE,2DAAc,CAC/CC,wBAAwB,EACvBJ,KAAyB,IAAKA,KAAK,EAAEnD,oBAAoB,CAC3D;AACM,MAAMyD,aAAa,GAAGH,2DAAc,CAACC,wBAAwB,EAAGJ,KAAyB,IAAKA,KAAK,CAACL,OAAO,CAAC;AAC5G,MAAMY,eAAe,GAAGJ,2DAAc,CAACC,wBAAwB,EAAGJ,KAAyB,IAAKA,KAAK,CAACJ,SAAS,CAAC;AAEhH,MAAM1D,8BAA8B,GAAGiE,2DAAc,CAC1DE,mCAAmC,EAClCL,KAA+B,IAAKA,KAAK,EAAED,KAAK,CAClD;;;;;;;;;;;;;;;;;;;;;;;;;AEjBM,IAAKS,SAGX;AAHD,WAAYA,SAAS;EACnBA,SAAA,CAAAA,SAAA,oBAAG;EACHA,SAAA,CAAAA,SAAA,sBAAI;AACN,CAAC,EAHWA,SAAS,KAATA,SAAS;;;;;;;;;;;;;;;;;;;;;ACCe;AAIqC;AACI;AACgB;;;;AAKvF,MAAOE,mBAAmB;EAC9BtE,YACmBI,KAAgC,EAChCD,6BAA4D;IAD5D,KAAAC,KAAK,GAALA,KAAK;IACL,KAAAD,6BAA6B,GAA7BA,6BAA6B;IAGvC,KAAAoE,QAAQ,GAAwB,IAAI,CAACnE,KAAK,CAACW,MAAM,CAACsD,0EAAoC,CAAC;IACvF,KAAAG,UAAU,GAAmC,IAAI,CAACpE,KAAK,CAACW,MAAM,CAACsD,4EAAsC,CAAC;IACtG,KAAAI,cAAc,GAA8B,IAAI,CAACrE,KAAK,CAACW,MAAM,CAACsD,gFAA0C,CAAC;IACzG,KAAAK,yBAAyB,GAAuB,IAAI,CAACtE,KAAK,CAACW,MAAM,CACxEsD,2FAAqD,CACtD;EAPE;EASHM,iBAAiBA,CAAA;IACf,IAAI,CAACvE,KAAK,CAACkC,QAAQ,CAAC5C,2EAAqC,EAAE,CAAC;EAC9D;EAEAkF,4BAA4BA,CAAA;IAC1B,IAAI,CAACxE,KAAK,CAACkC,QAAQ,CAAC5C,sFAAgD,EAAE,CAAC;EACzE;EAEAyC,4BAA4BA,CAACC,GAAW;IACtC,IAAI,CAAChC,KAAK,CAACkC,QAAQ,CAAC5C,8EAAwC,CAAC;MAAE0C;IAAG,CAAE,CAAC,CAAC;EACxE;EAEAO,4BAA4BA,CAAC7B,OAAqB;IAChD,IAAI,CAACV,KAAK,CAACkC,QAAQ,CAAC5C,8EAAwC,CAAC;MAAEoB;IAAO,CAAE,CAAC,CAAC;EAC5E;EAEA+D,aAAaA,CAAC/D,OAAqB;IACjC,IAAI,CAACV,KAAK,CAACkC,QAAQ,CAAC5C,6EAAuC,CAAC;MAAEoB;IAAO,CAAE,CAAC,CAAC;EAC3E;EAEAgE,aAAaA,CAAA;IACX,IAAI,CAAC3E,6BAA6B,CAAC2E,aAAa,EAAE;EACpD;EAAC,QAAAvH,CAAA;qBAnCU+G,mBAAmB,EAAA1B,sDAAA,CAAAhF,8CAAA,GAAAgF,sDAAA,CAAA9E,qGAAA;EAAA;EAAA,QAAAN,EAAA;WAAnB8G,mBAAmB;IAAArB,OAAA,EAAnBqB,mBAAmB,CAAApB,IAAA;IAAA6B,UAAA,EAFlB;EAAM;;;;;;;;;;;;;;;;;;;;;;;;;ACViC;AACJ;AACC;AACE;AACL;;;;;;;;;;;;;;;;;;;;;ACDQ;AACH;;;AAM9C,MAAOG,mBAAmB;EAC9BlF,YAA6BmF,gBAAkC;IAAlC,KAAAA,gBAAgB,GAAhBA,gBAAgB;EAAqB;EAElEC,OAAOA,CAACC,gBAAmC;IACzC,MAAMC,QAAQ,GAAGD,gBAAgB,CAACnG,GAAG,CAAEqG,eAAgC,IACrE,IAAI,CAACC,iBAAiB,CAACD,eAAe,CAAC,CACxC;IAED,OAAO;MACLE,mBAAmB,EAAE,IAAI,CAACC,oBAAoB,CAACJ,QAAQ,CAAC;MACxDnE,kBAAkB,EAAE,IAAI,CAACwE,mBAAmB,CAACL,QAAQ,CAAC;MACtD/D,mBAAmB,EAAE,IAAI,CAACqE,oBAAoB,CAACN,QAAQ;KACxD;EACH;EAEQE,iBAAiBA,CAACD,eAAgC;IACxD,IAAI,CAACA,eAAe,IAAI,CAACA,eAAe,CAACM,QAAQ,EAAE,OAAO,EAAkB;IAE5E,OAAO;MACL5E,EAAE,EAAEsE,eAAe,CAACtE,EAAE;MACtB6E,IAAI,EAAEP,eAAe,CAACO,IAAI;MAC1BC,IAAI,EAAER,eAAe,CAACQ,IAAI;MAC1BC,MAAM,EAAET,eAAe,CAACS,MAAM;MAC9BhF,OAAO,EAAE,IAAI,CAACiF,6BAA6B,CAACV,eAAe,CAACM,QAAQ,CAAC;MACrEK,YAAY,EAAEX,eAAe,CAACW;KAC/B;EACH;EAEQD,6BAA6BA,CAACJ,QAAmB;IACvD,MAAMM,eAAe,GAAG,IAAI,CAAChB,gBAAgB,CAACiB,WAAW,IAAInB,8DAAY,CAACoB,EAAE;IAC5E,OAAOR,QAAQ,CAACS,IAAI,CAAEtF,OAAO,IAAKA,OAAO,EAAEuF,IAAI,EAAEC,WAAW,EAAE,KAAKL,eAAe,CAAC,IAAK,EAAc;EACxG;EAEQT,oBAAoBA,CAACe,aAA6B;IACxD,OAAOA,aAAa,CAAClH,MAAM,CAAEmH,YAAY,IAAKA,YAAY,CAACV,MAAM,CAAC;EACpE;EAEQL,mBAAmBA,CAACc,aAA6B;IACvD,OAAOA,aAAa,CAAClH,MAAM,CAAEmH,YAAY,IAAK,CAACA,YAAY,CAACV,MAAM,CAAC;EACrE;EAEQJ,oBAAoBA,CAACa,aAA6B;IACxD,OAAOA,aAAa,CAAClH,MAAM,CAAEmH,YAAY,IAAK,CAACA,YAAY,CAACX,IAAI,CAAC;EACnE;EAAC,QAAAxI,CAAA;qBA3CU2H,mBAAmB,EAAAtC,sDAAA,CAAAhF,iEAAA;EAAA;EAAA,QAAAJ,EAAA;WAAnB0H,mBAAmB;IAAAjC,OAAA,EAAnBiC,mBAAmB,CAAAhC,IAAA;IAAA6B,UAAA,EAFlB;EAAM;;;;;;;;;;;;;;;;;;;;;;;ACRgC;AACN;AACJ;AACyD;AAC5B;AAEjE,SAAU6B,0BAA0BA,CAAA;EACxC,OAAO,CACLD,kEAAmB,CAAC1J,oDAAW,CAACS,UAAU,CAAC,sBAAsB,EAAER,+EAAoB,CAAC,CAAC,EACzFyJ,kEAAmB,CAAC1J,oDAAW,CAACS,UAAU,CAAC,4BAA4B,EAAEP,qFAA0B,CAAC,CAAC,EACrGwJ,kEAAmB,CAACvJ,wDAAa,CAACM,UAAU,CAAC,CAACL,+EAAoB,CAAC,CAAC,CAAC,CACtE;AACH;;;;;;;;;;;;;;;;;;ACXsG;;;AAKhG,MAAOsC,6BAA6B;EAgBxCK,YACmBgH,wBAAkD,EAClDC,gBAAkC;IADlC,KAAAD,wBAAwB,GAAxBA,wBAAwB;IACxB,KAAAC,gBAAgB,GAAhBA,gBAAgB;IAjBlB,KAAAC,aAAa,GAAG,gBAAgB;IAChC,KAAAC,gBAAgB,GAAG,SAAS;IAE5B,KAAAC,iBAAiB,GAAG,cAAc;IAClC,KAAAC,kBAAkB,GAAG,eAAe;IACpC,KAAAC,uBAAuB,GAAG,cAAc;IACxC,KAAAC,0BAA0B,GAAG,iBAAiB;IAC9C,KAAAC,yBAAyB,GAAG,gBAAgB;IAE5C,KAAAC,yBAAyB,GAAG,gBAAgB;IAC5C,KAAAC,gBAAgB,GAAG,OAAO;IAE1B,KAAAC,4BAA4B,GAAG,mBAAmB;IAClD,KAAAC,qBAAqB,GAAG,YAAY;EAKlD;EAEHzF,4BAA4BA,CAACC,GAAW,EAAEyF,mBAA4B;IACpE,MAAM;MAAEC,aAAa;MAAEC,aAAa;MAAEC,cAAc;MAAEC;IAAmB,CAAE,GAAGpB,oEAAa;IAE3F,MAAMqB,UAAU,GAAG;MACjB,CAACJ,aAAa,GAAG,IAAI,CAACV,iBAAiB;MACvC,CAACW,aAAa,GAAG,IAAI,CAACV,kBAAkB;MACxC,CAACW,cAAc,GAAGH,mBAAmB,GAAG,IAAI,CAACP,uBAAuB,GAAG,IAAI,CAACC,0BAA0B;MACtG,CAACU,mBAAmB,GAAG7F;KACxB;IAED,OAAO,IAAI,CAAC+F,uBAAuB,CAAC,IAAI,CAACV,yBAAyB,EAAE,IAAI,CAACC,gBAAgB,EAAEQ,UAAU,CAAC;EACxG;EAEAvF,4BAA4BA,CAACtB,KAAa,EAAEe,GAAW,EAAEgG,UAAmB;IAC1E,MAAM;MAAEN,aAAa;MAAEC,aAAa;MAAEE;IAAmB,CAAE,GAAGpB,oEAAa;IAE3E,MAAMqB,UAAU,GAAG;MACjB,CAACJ,aAAa,GAAGzG,KAAK;MACtB,CAAC0G,aAAa,GAAGK,UAAU;MAC3B,CAACH,mBAAmB,GAAG7F;KACxB;IAED,IAAI,CAAC+F,uBAAuB,CAAC,IAAI,CAACR,4BAA4B,EAAE,IAAI,CAACD,gBAAgB,EAAEQ,UAAU,CAAC;EACpG;EAEA9G,2BAA2BA,CAACH,EAAU,EAAEI,KAAc;IACpD,MAAM;MAAEyG,aAAa;MAAEC,aAAa;MAAEC;IAAc,CAAE,GAAGnB,oEAAa;IAEtE,MAAMqB,UAAU,GAAG;MACjB,CAACJ,aAAa,GAAG7G,EAAE;MACnB,CAAC8G,aAAa,GAAG1G,KAAK;MACtB,CAAC2G,cAAc,GAAG,IAAI,CAACR;KACxB;IAED,IAAI,CAACW,uBAAuB,CAAC,IAAI,CAACR,4BAA4B,EAAE,IAAI,CAACD,gBAAgB,EAAEQ,UAAU,CAAC;EACpG;EAEAxG,gCAAgCA,CAAC2G,MAAgB;IAC/C,IAAIA,MAAM,IAAIA,MAAM,CAAC7G,MAAM,GAAG,CAAC,EAAE;MAC/B6G,MAAM,CAACC,OAAO,CAAEjH,KAAK,IAAI;QACvB,IAAI,CAACkH,+BAA+B,CAAClH,KAAK,CAAC;MAC7C,CAAC,CAAC;IACJ;EACF;EAEAkH,+BAA+BA,CAAClH,KAAa;IAC3C,MAAM;MAAEyG;IAAa,CAAE,GAAGjB,oEAAa;IAEvC,MAAMqB,UAAU,GAAG;MACjB,CAACJ,aAAa,GAAGzG;KAClB;IAED,IAAI,CAAC8G,uBAAuB,CAAC,IAAI,CAACR,4BAA4B,EAAE,IAAI,CAACC,qBAAqB,EAAEM,UAAU,CAAC;EACzG;EAEAC,uBAAuBA,CAACzF,IAAY,EAAE8F,IAAY,EAAEN,UAA8C;IAChG,MAAMO,QAAQ,GAAG,IAAI,CAACxB,gBAAgB,CAACyB,cAAc,CAAC,IAAI,CAACvB,gBAAgB,EAAE,IAAI,CAACD,aAAa,CAAC;IAEhG,MAAMyB,SAAS,GAAG,IAAI,CAAC1B,gBAAgB,CAAC2B,eAAe,CAAClG,IAAI,EAAE8F,IAAI,EAAE,CAAC,IAAI,CAACtB,aAAa,CAAC,CAAC;IAEzF,OAAO,IAAI,CAACD,gBAAgB,EAAE4B,SAAS,CAAC;MAAEF,SAAS;MAAET,UAAU;MAAEO;IAAQ,CAAE,CAAC;EAC9E;EAEA3D,aAAaA,CAAA;IACX,IAAI,CAACkC,wBAAwB,CAAC8B,IAAI,EAAE;EACtC;EAAC,QAAAvL,CAAA;qBAtFUoC,6BAA6B,EAAAiD,sDAAA,CAAAhF,+EAAA,GAAAgF,sDAAA,CAAAhF,uEAAA;EAAA;EAAA,QAAAJ,EAAA;WAA7BmC,6BAA6B;IAAAsD,OAAA,EAA7BtD,6BAA6B,CAAAuD,IAAA;IAAA6B,UAAA,EAF5B;EAAM;;;;;;;;;;;;;;;;;;;;ACFkD;AACC;;;;AASjE,MAAOtF,oBAAoB;EAM/BO,YACmBiJ,YAA0B,EAC1BC,mBAAwC;IADxC,KAAAD,YAAY,GAAZA,YAAY;IACZ,KAAAC,mBAAmB,GAAnBA,mBAAmB;IAPrB,KAAAhC,aAAa,GAAG,gBAAgB;IAChC,KAAAiC,2BAA2B,GAAG,sDAAsD;IACpF,KAAAC,sBAAsB,GAAG,GAAG,IAAI,CAACD,2BAA2B,gBAAgB;IAC5E,KAAAE,sBAAsB,GAAG,GAAG,IAAI,CAACF,2BAA2B,OAAO;EAKjF;EAEH3I,mBAAmBA,CAAA;IACjB,MAAM8I,eAAe,GAAG,IAAIP,kEAAe,CACzC,IAAI,CAAC7B,aAAa,EAClB,IAAI,CAACiC,2BAA2B,EAChC,IAAI,CAACD,mBAAmB,CACzB;IAED,OAAO,IAAI,CAACD,YAAY,CAACM,KAAK,CAACD,eAAe,CAAC;EACjD;EAEAlL,2BAA2BA,CAAA;IACzB,MAAMkL,eAAe,GAAG,IAAIP,kEAAe,CACzC,IAAI,CAAC7B,aAAa,EAClB,IAAI,CAACkC,sBAAsB,CAC5B;IAED,OAAO,IAAI,CAACH,YAAY,CAACM,KAAK,CAACD,eAAe,CAAC;EACjD;EAEA1H,uBAAuBA,CAACC,GAAa;IACnC,MAAM2H,oBAAoB,GAAG;MAC3BpE,OAAO,EAAGqE,sBAA8C,IAAKA,sBAAsB,EAAEC;KACtF;IAED,MAAMJ,eAAe,GAAG,IAAIP,kEAAe,CACzC,IAAI,CAAC7B,aAAa,EAClB,IAAI,CAACmC,sBAAsB,EAC3BG,oBAAoB,EACpB;MAAE3H;IAAG,CAAE,CACR;IAED,OAAO,IAAI,CAACoH,YAAY,CAACU,KAAK,CAACL,eAAe,CAAC;EACjD;EAEAzI,iBAAiBA,CAACC,OAAqB;IACrC,MAAMsB,GAAG,GAAG,GAAG,IAAI,CAAC+G,2BAA2B,IAAIrI,OAAO,CAACG,EAAE,EAAE;IAC/D,MAAMqI,eAAe,GAAG,IAAIP,kEAAe,CAAiC,IAAI,CAAC7B,aAAa,EAAE9E,GAAG,CAAC;IAEpG,OAAO,IAAI,CAAC6G,YAAY,CAACW,QAAQ,CAACN,eAAe,CAAC;EACpD;EAAC,QAAA/L,CAAA;qBAlDUkC,oBAAoB,EAAAmD,sDAAA,CAAAhF,+DAAA,GAAAgF,sDAAA,CAAA9E,+EAAA;EAAA;EAAA,QAAAN,EAAA;WAApBiC,oBAAoB;IAAAwD,OAAA,EAApBxD,oBAAoB,CAAAyD,IAAA;IAAA6B,UAAA,EAFnB;EAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVpB;AACA,IAAI8E,OAAO,GAAGC,MAAM,CAACC,GAAG,CAAC,eAAe,CAAC;AACzC,IAAIC,SAAS,GAAGF,MAAM,CAACC,GAAG,CAAC,iBAAiB,CAAC;AAC7C,IAAIE,WAAW,GAAGH,MAAM,CAACC,GAAG,CAAC,aAAa,CAAC;;AAE3C;AACA,IAAIG,MAAM,GAAGC,KAAqC,GAAG;AACnD;AACA,UAASG,MAAM,EAAE;EACf,OAAQ,mBAAkBA,MAAO,mFAAkFA,MAAO,0CAAyC;AACrK,CAAC,EACD,UAASC,KAAK,EAAE;EACd,OAAQ,sJAAqJA,KAAM,GAAE;AACvK,CAAC,EACD,uDAAuD,EACvD,UAASC,IAAI,EAAE;EACb,OAAO,sHAAsH,GAAGA,IAAI;AACtI,CAAC,EACD,mHAAmH,EACnH,mCAAmC,EACnC,8DAA8D,EAC9D,iEAAiE,EACjE,0FAA0F,EAC1F,2EAA2E,EAC3E,UAASD,KAAK,EAAE;EACd,OAAQ,mCAAkCA,KAAM,EAAC;AACnD,CAAC,EACD,0DAA0D,EAC1D,0DAA0D,EAC1D,4CAA4C,EAC5C,qEAAqE,EACrE,UAASA,KAAK,EAAE;EACd,OAAQ,oCAAmCA,KAAM,EAAC;AACpD;AACA;AACA;AAAA,CACD,GAAG,CAAE;AACN,SAASE,GAAGA,CAAC/J,KAAK,EAAE,GAAGgK,IAAI,EAAE;EAC3B,IAAIP,IAAqC,EAAE;IACzC,MAAMQ,CAAC,GAAGT,MAAM,CAACxJ,KAAK,CAAC;IACvB,MAAMkK,GAAG,GAAG,OAAOD,CAAC,KAAK,UAAU,GAAGA,CAAC,CAACE,KAAK,CAAC,IAAI,EAAEH,IAAI,CAAC,GAAGC,CAAC;IAC7D,MAAM,IAAIG,KAAK,CAAE,WAAUF,GAAI,EAAC,CAAC;EACnC;EACA,MAAM,IAAIE,KAAK,CACZ,8BAA6BpK,KAAM,yCACtC,CAAC;AACH;;AAEA;AACA,IAAIqK,cAAc,GAAGC,MAAM,CAACD,cAAc;AAC1C,SAASE,OAAOA,CAACC,KAAK,EAAE;EACtB,OAAO,CAAC,CAACA,KAAK,IAAI,CAAC,CAACA,KAAK,CAACjB,WAAW,CAAC;AACxC;AACA,SAASkB,WAAWA,CAACD,KAAK,EAAE;EAC1B,IAAI,CAACA,KAAK,EACR,OAAO,KAAK;EACd,OAAOE,aAAa,CAACF,KAAK,CAAC,IAAIG,KAAK,CAACC,OAAO,CAACJ,KAAK,CAAC,IAAI,CAAC,CAACA,KAAK,CAAClB,SAAS,CAAC,IAAI,CAAC,CAACkB,KAAK,CAAClL,WAAW,GAAGgK,SAAS,CAAC,IAAIuB,KAAK,CAACL,KAAK,CAAC,IAAIM,KAAK,CAACN,KAAK,CAAC;AAC/I;AACA,IAAIO,gBAAgB,GAAGT,MAAM,CAACU,SAAS,CAAC1L,WAAW,CAAC2L,QAAQ,CAAC,CAAC;AAC9D,SAASP,aAAaA,CAACF,KAAK,EAAE;EAC5B,IAAI,CAACA,KAAK,IAAI,OAAOA,KAAK,KAAK,QAAQ,EACrC,OAAO,KAAK;EACd,MAAMU,KAAK,GAAGb,cAAc,CAACG,KAAK,CAAC;EACnC,IAAIU,KAAK,KAAK,IAAI,EAAE;IAClB,OAAO,IAAI;EACb;EACA,MAAMC,IAAI,GAAGb,MAAM,CAACc,cAAc,CAACC,IAAI,CAACH,KAAK,EAAE,aAAa,CAAC,IAAIA,KAAK,CAAC5L,WAAW;EAClF,IAAI6L,IAAI,KAAKb,MAAM,EACjB,OAAO,IAAI;EACb,OAAO,OAAOa,IAAI,IAAI,UAAU,IAAIG,QAAQ,CAACL,QAAQ,CAACI,IAAI,CAACF,IAAI,CAAC,KAAKJ,gBAAgB;AACvF;AACA,SAASQ,QAAQA,CAACf,KAAK,EAAE;EACvB,IAAI,CAACD,OAAO,CAACC,KAAK,CAAC,EACjBT,GAAG,CAAC,EAAE,EAAES,KAAK,CAAC;EAChB,OAAOA,KAAK,CAACjB,WAAW,CAAC,CAACiC,KAAK;AACjC;AACA,SAASC,IAAIA,CAACC,GAAG,EAAEC,IAAI,EAAE;EACvB,IAAIC,WAAW,CAACF,GAAG,CAAC,KAAK,CAAC,CAAC,cAAc;IACvCpB,MAAM,CAACuB,OAAO,CAACH,GAAG,CAAC,CAAC9D,OAAO,CAAC,CAAC,CAACkE,GAAG,EAAEtB,KAAK,CAAC,KAAK;MAC5CmB,IAAI,CAACG,GAAG,EAAEtB,KAAK,EAAEkB,GAAG,CAAC;IACvB,CAAC,CAAC;EACJ,CAAC,MAAM;IACLA,GAAG,CAAC9D,OAAO,CAAC,CAACmE,KAAK,EAAEC,KAAK,KAAKL,IAAI,CAACK,KAAK,EAAED,KAAK,EAAEL,GAAG,CAAC,CAAC;EACxD;AACF;AACA,SAASE,WAAWA,CAAC/B,KAAK,EAAE;EAC1B,MAAM3G,KAAK,GAAG2G,KAAK,CAACN,WAAW,CAAC;EAChC,OAAOrG,KAAK,GAAGA,KAAK,CAAC+I,KAAK,GAAGtB,KAAK,CAACC,OAAO,CAACf,KAAK,CAAC,GAAG,CAAC,CAAC,cAAcgB,KAAK,CAAChB,KAAK,CAAC,GAAG,CAAC,CAAC,YAAYiB,KAAK,CAACjB,KAAK,CAAC,GAAG,CAAC,CAAC,YAAY,CAAC,CAAC;AAClI;AACA,SAASqC,GAAGA,CAACrC,KAAK,EAAEsC,IAAI,EAAE;EACxB,OAAOP,WAAW,CAAC/B,KAAK,CAAC,KAAK,CAAC,CAAC,YAAYA,KAAK,CAACqC,GAAG,CAACC,IAAI,CAAC,GAAG7B,MAAM,CAACU,SAAS,CAACI,cAAc,CAACC,IAAI,CAACxB,KAAK,EAAEsC,IAAI,CAAC;AACjH;AACA,SAASC,GAAGA,CAACvC,KAAK,EAAEsC,IAAI,EAAE;EACxB,OAAOP,WAAW,CAAC/B,KAAK,CAAC,KAAK,CAAC,CAAC,YAAYA,KAAK,CAACuC,GAAG,CAACD,IAAI,CAAC,GAAGtC,KAAK,CAACsC,IAAI,CAAC;AAC3E;AACA,SAASE,GAAGA,CAACxC,KAAK,EAAEyC,cAAc,EAAE9B,KAAK,EAAE;EACzC,MAAM+B,CAAC,GAAGX,WAAW,CAAC/B,KAAK,CAAC;EAC5B,IAAI0C,CAAC,KAAK,CAAC,CAAC,WACV1C,KAAK,CAACwC,GAAG,CAACC,cAAc,EAAE9B,KAAK,CAAC,CAAC,KAC9B,IAAI+B,CAAC,KAAK,CAAC,CAAC,WAAW;IAC1B1C,KAAK,CAAC2C,GAAG,CAAChC,KAAK,CAAC;EAClB,CAAC,MACCX,KAAK,CAACyC,cAAc,CAAC,GAAG9B,KAAK;AACjC;AACA,SAASiC,EAAEA,CAACC,CAAC,EAAEC,CAAC,EAAE;EAChB,IAAID,CAAC,KAAKC,CAAC,EAAE;IACX,OAAOD,CAAC,KAAK,CAAC,IAAI,CAAC,GAAGA,CAAC,KAAK,CAAC,GAAGC,CAAC;EACnC,CAAC,MAAM;IACL,OAAOD,CAAC,KAAKA,CAAC,IAAIC,CAAC,KAAKA,CAAC;EAC3B;AACF;AACA,SAAS9B,KAAKA,CAAC+B,MAAM,EAAE;EACrB,OAAOA,MAAM,YAAYC,GAAG;AAC9B;AACA,SAAS/B,KAAKA,CAAC8B,MAAM,EAAE;EACrB,OAAOA,MAAM,YAAYE,GAAG;AAC9B;AACA,SAASC,MAAMA,CAAC7J,KAAK,EAAE;EACrB,OAAOA,KAAK,CAAC8J,KAAK,IAAI9J,KAAK,CAACsI,KAAK;AACnC;AACA,SAASyB,WAAWA,CAACC,IAAI,EAAEC,MAAM,EAAE;EACjC,IAAItC,KAAK,CAACqC,IAAI,CAAC,EAAE;IACf,OAAO,IAAIL,GAAG,CAACK,IAAI,CAAC;EACtB;EACA,IAAIpC,KAAK,CAACoC,IAAI,CAAC,EAAE;IACf,OAAO,IAAIJ,GAAG,CAACI,IAAI,CAAC;EACtB;EACA,IAAIvC,KAAK,CAACC,OAAO,CAACsC,IAAI,CAAC,EACrB,OAAOvC,KAAK,CAACK,SAAS,CAACoC,KAAK,CAAC/B,IAAI,CAAC6B,IAAI,CAAC;EACzC,IAAI,CAACC,MAAM,IAAIzC,aAAa,CAACwC,IAAI,CAAC,EAAE;IAClC,IAAI,CAAC7C,cAAc,CAAC6C,IAAI,CAAC,EAAE;MACzB,MAAMxB,GAAG,GAAG,eAAgBpB,MAAM,CAAC+C,MAAM,CAAC,IAAI,CAAC;MAC/C,OAAO/C,MAAM,CAACgD,MAAM,CAAC5B,GAAG,EAAEwB,IAAI,CAAC;IACjC;IACA,OAAO;MAAE,GAAGA;IAAK,CAAC;EACpB;EACA,MAAMK,WAAW,GAAGjD,MAAM,CAACkD,yBAAyB,CAACN,IAAI,CAAC;EAC1D,OAAOK,WAAW,CAAChE,WAAW,CAAC;EAC/B,IAAIkE,IAAI,GAAGC,OAAO,CAACC,OAAO,CAACJ,WAAW,CAAC;EACvC,KAAK,IAAIK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,IAAI,CAAC3M,MAAM,EAAE8M,CAAC,EAAE,EAAE;IACpC,MAAM9B,GAAG,GAAG2B,IAAI,CAACG,CAAC,CAAC;IACnB,MAAMC,IAAI,GAAGN,WAAW,CAACzB,GAAG,CAAC;IAC7B,IAAI+B,IAAI,CAACC,QAAQ,KAAK,KAAK,EAAE;MAC3BD,IAAI,CAACC,QAAQ,GAAG,IAAI;MACpBD,IAAI,CAACE,YAAY,GAAG,IAAI;IAC1B;IACA,IAAIF,IAAI,CAACzB,GAAG,IAAIyB,IAAI,CAACxB,GAAG,EACtBkB,WAAW,CAACzB,GAAG,CAAC,GAAG;MACjBiC,YAAY,EAAE,IAAI;MAClBD,QAAQ,EAAE,IAAI;MACd;MACAE,UAAU,EAAEH,IAAI,CAACG,UAAU;MAC3BxD,KAAK,EAAE0C,IAAI,CAACpB,GAAG;IACjB,CAAC;EACL;EACA,OAAOxB,MAAM,CAAC+C,MAAM,CAAChD,cAAc,CAAC6C,IAAI,CAAC,EAAEK,WAAW,CAAC;AACzD;AACA,SAASU,MAAMA,CAACvC,GAAG,EAAEwC,IAAI,GAAG,KAAK,EAAE;EACjC,IAAIC,QAAQ,CAACzC,GAAG,CAAC,IAAInB,OAAO,CAACmB,GAAG,CAAC,IAAI,CAACjB,WAAW,CAACiB,GAAG,CAAC,EACpD,OAAOA,GAAG;EACZ,IAAIE,WAAW,CAACF,GAAG,CAAC,GAAG,CAAC,EAAE;IACxBA,GAAG,CAACW,GAAG,GAAGX,GAAG,CAACc,GAAG,GAAGd,GAAG,CAAC0C,KAAK,GAAG1C,GAAG,CAAC2C,MAAM,GAAGC,2BAA2B;EAC1E;EACAhE,MAAM,CAAC2D,MAAM,CAACvC,GAAG,CAAC;EAClB,IAAIwC,IAAI,EACNzC,IAAI,CAACC,GAAG,EAAE,CAAC6C,IAAI,EAAE/D,KAAK,KAAKyD,MAAM,CAACzD,KAAK,EAAE,IAAI,CAAC,EAAE,IAAI,CAAC;EACvD,OAAOkB,GAAG;AACZ;AACA,SAAS4C,2BAA2BA,CAAA,EAAG;EACrCvE,GAAG,CAAC,CAAC,CAAC;AACR;AACA,SAASoE,QAAQA,CAACzC,GAAG,EAAE;EACrB,OAAOpB,MAAM,CAAC6D,QAAQ,CAACzC,GAAG,CAAC;AAC7B;;AAEA;AACA,IAAI8C,OAAO,GAAG,CAAC,CAAC;AAChB,SAASC,SAASA,CAACC,SAAS,EAAE;EAC5B,MAAM9E,MAAM,GAAG4E,OAAO,CAACE,SAAS,CAAC;EACjC,IAAI,CAAC9E,MAAM,EAAE;IACXG,GAAG,CAAC,CAAC,EAAE2E,SAAS,CAAC;EACnB;EACA,OAAO9E,MAAM;AACf;AACA,SAAS+E,UAAUA,CAACD,SAAS,EAAEE,cAAc,EAAE;EAC7C,IAAI,CAACJ,OAAO,CAACE,SAAS,CAAC,EACrBF,OAAO,CAACE,SAAS,CAAC,GAAGE,cAAc;AACvC;;AAEA;AACA,IAAIC,YAAY;AAChB,SAASC,eAAeA,CAAA,EAAG;EACzB,OAAOD,YAAY;AACrB;AACA,SAASE,WAAWA,CAACC,OAAO,EAAEC,MAAM,EAAE;EACpC,OAAO;IACLC,OAAO,EAAE,EAAE;IACXF,OAAO;IACPC,MAAM;IACN;IACA;IACAE,cAAc,EAAE,IAAI;IACpBC,kBAAkB,EAAE;EACtB,CAAC;AACH;AACA,SAASC,iBAAiBA,CAACC,KAAK,EAAEC,aAAa,EAAE;EAC/C,IAAIA,aAAa,EAAE;IACjBd,SAAS,CAAC,SAAS,CAAC;IACpBa,KAAK,CAACE,QAAQ,GAAG,EAAE;IACnBF,KAAK,CAACG,eAAe,GAAG,EAAE;IAC1BH,KAAK,CAACI,cAAc,GAAGH,aAAa;EACtC;AACF;AACA,SAASI,WAAWA,CAACL,KAAK,EAAE;EAC1BM,UAAU,CAACN,KAAK,CAAC;EACjBA,KAAK,CAACJ,OAAO,CAACtH,OAAO,CAACiI,WAAW,CAAC;EAClCP,KAAK,CAACJ,OAAO,GAAG,IAAI;AACtB;AACA,SAASU,UAAUA,CAACN,KAAK,EAAE;EACzB,IAAIA,KAAK,KAAKT,YAAY,EAAE;IAC1BA,YAAY,GAAGS,KAAK,CAACN,OAAO;EAC9B;AACF;AACA,SAASc,UAAUA,CAACC,MAAM,EAAE;EAC1B,OAAOlB,YAAY,GAAGE,WAAW,CAACF,YAAY,EAAEkB,MAAM,CAAC;AACzD;AACA,SAASF,WAAWA,CAAC1M,KAAK,EAAE;EAC1B,MAAMD,KAAK,GAAGC,KAAK,CAACoG,WAAW,CAAC;EAChC,IAAIrG,KAAK,CAAC+I,KAAK,KAAK,CAAC,CAAC,gBAAgB/I,KAAK,CAAC+I,KAAK,KAAK,CAAC,CAAC,aACtD/I,KAAK,CAAC8M,OAAO,CAAC,CAAC,CAAC,KAEhB9M,KAAK,CAAC+M,QAAQ,GAAG,IAAI;AACzB;;AAEA;AACA,SAASC,aAAaA,CAACC,MAAM,EAAEb,KAAK,EAAE;EACpCA,KAAK,CAACF,kBAAkB,GAAGE,KAAK,CAACJ,OAAO,CAACpO,MAAM;EAC/C,MAAMsP,SAAS,GAAGd,KAAK,CAACJ,OAAO,CAAC,CAAC,CAAC;EAClC,MAAMmB,UAAU,GAAGF,MAAM,KAAK,KAAK,CAAC,IAAIA,MAAM,KAAKC,SAAS;EAC5D,IAAIC,UAAU,EAAE;IACd,IAAID,SAAS,CAAC7G,WAAW,CAAC,CAAC+G,SAAS,EAAE;MACpCX,WAAW,CAACL,KAAK,CAAC;MAClBvF,GAAG,CAAC,CAAC,CAAC;IACR;IACA,IAAIU,WAAW,CAAC0F,MAAM,CAAC,EAAE;MACvBA,MAAM,GAAGI,QAAQ,CAACjB,KAAK,EAAEa,MAAM,CAAC;MAChC,IAAI,CAACb,KAAK,CAACN,OAAO,EAChBwB,WAAW,CAAClB,KAAK,EAAEa,MAAM,CAAC;IAC9B;IACA,IAAIb,KAAK,CAACE,QAAQ,EAAE;MAClBf,SAAS,CAAC,SAAS,CAAC,CAACgC,2BAA2B,CAC9CL,SAAS,CAAC7G,WAAW,CAAC,CAACiC,KAAK,EAC5B2E,MAAM,EACNb,KAAK,CAACE,QAAQ,EACdF,KAAK,CAACG,eACR,CAAC;IACH;EACF,CAAC,MAAM;IACLU,MAAM,GAAGI,QAAQ,CAACjB,KAAK,EAAEc,SAAS,EAAE,EAAE,CAAC;EACzC;EACAT,WAAW,CAACL,KAAK,CAAC;EAClB,IAAIA,KAAK,CAACE,QAAQ,EAAE;IAClBF,KAAK,CAACI,cAAc,CAACJ,KAAK,CAACE,QAAQ,EAAEF,KAAK,CAACG,eAAe,CAAC;EAC7D;EACA,OAAOU,MAAM,KAAKhH,OAAO,GAAGgH,MAAM,GAAG,KAAK,CAAC;AAC7C;AACA,SAASI,QAAQA,CAACG,SAAS,EAAElG,KAAK,EAAEmG,IAAI,EAAE;EACxC,IAAIxC,QAAQ,CAAC3D,KAAK,CAAC,EACjB,OAAOA,KAAK;EACd,MAAMtH,KAAK,GAAGsH,KAAK,CAACjB,WAAW,CAAC;EAChC,IAAI,CAACrG,KAAK,EAAE;IACVuI,IAAI,CACFjB,KAAK,EACL,CAACsB,GAAG,EAAE8E,UAAU,KAAKC,gBAAgB,CAACH,SAAS,EAAExN,KAAK,EAAEsH,KAAK,EAAEsB,GAAG,EAAE8E,UAAU,EAAED,IAAI,CAAC,EACrF;IACA;IACF,CAAC;IACD,OAAOnG,KAAK;EACd;EACA,IAAItH,KAAK,CAAC4N,MAAM,KAAKJ,SAAS,EAC5B,OAAOlG,KAAK;EACd,IAAI,CAACtH,KAAK,CAACoN,SAAS,EAAE;IACpBE,WAAW,CAACE,SAAS,EAAExN,KAAK,CAACsI,KAAK,EAAE,IAAI,CAAC;IACzC,OAAOtI,KAAK,CAACsI,KAAK;EACpB;EACA,IAAI,CAACtI,KAAK,CAAC6N,UAAU,EAAE;IACrB7N,KAAK,CAAC6N,UAAU,GAAG,IAAI;IACvB7N,KAAK,CAAC4N,MAAM,CAAC1B,kBAAkB,EAAE;IACjC,MAAMe,MAAM,GAAGjN,KAAK,CAAC8J,KAAK;IAC1B,IAAIgE,UAAU,GAAGb,MAAM;IACvB,IAAIc,MAAM,GAAG,KAAK;IAClB,IAAI/N,KAAK,CAAC+I,KAAK,KAAK,CAAC,CAAC,WAAW;MAC/B+E,UAAU,GAAG,IAAIlE,GAAG,CAACqD,MAAM,CAAC;MAC5BA,MAAM,CAAC/B,KAAK,CAAC,CAAC;MACd6C,MAAM,GAAG,IAAI;IACf;IACAxF,IAAI,CACFuF,UAAU,EACV,CAAClF,GAAG,EAAE8E,UAAU,KAAKC,gBAAgB,CAACH,SAAS,EAAExN,KAAK,EAAEiN,MAAM,EAAErE,GAAG,EAAE8E,UAAU,EAAED,IAAI,EAAEM,MAAM,CAC/F,CAAC;IACDT,WAAW,CAACE,SAAS,EAAEP,MAAM,EAAE,KAAK,CAAC;IACrC,IAAIQ,IAAI,IAAID,SAAS,CAAClB,QAAQ,EAAE;MAC9Bf,SAAS,CAAC,SAAS,CAAC,CAACyC,gBAAgB,CACnChO,KAAK,EACLyN,IAAI,EACJD,SAAS,CAAClB,QAAQ,EAClBkB,SAAS,CAACjB,eACZ,CAAC;IACH;EACF;EACA,OAAOvM,KAAK,CAAC8J,KAAK;AACpB;AACA,SAAS6D,gBAAgBA,CAACH,SAAS,EAAES,WAAW,EAAEC,YAAY,EAAEjF,IAAI,EAAEyE,UAAU,EAAES,QAAQ,EAAEC,WAAW,EAAE;EACvG,IAAI7H,KAAqC,IAAImH,UAAU,KAAKQ,YAAY,EACtErH,GAAG,CAAC,CAAC,CAAC;EACR,IAAIQ,OAAO,CAACqG,UAAU,CAAC,EAAE;IACvB,MAAMD,IAAI,GAAGU,QAAQ,IAAIF,WAAW,IAAIA,WAAW,CAAClF,KAAK,KAAK,CAAC,CAAC;IAAa;IAC7E,CAACC,GAAG,CAACiF,WAAW,CAACI,SAAS,EAAEpF,IAAI,CAAC,GAAGkF,QAAQ,CAACG,MAAM,CAACrF,IAAI,CAAC,GAAG,KAAK,CAAC;IAClE,MAAMsF,GAAG,GAAGlB,QAAQ,CAACG,SAAS,EAAEE,UAAU,EAAED,IAAI,CAAC;IACjDtE,GAAG,CAAC+E,YAAY,EAAEjF,IAAI,EAAEsF,GAAG,CAAC;IAC5B,IAAIlH,OAAO,CAACkH,GAAG,CAAC,EAAE;MAChBf,SAAS,CAACvB,cAAc,GAAG,KAAK;IAClC,CAAC,MACC;EACJ,CAAC,MAAM,IAAImC,WAAW,EAAE;IACtBF,YAAY,CAAC5E,GAAG,CAACoE,UAAU,CAAC;EAC9B;EACA,IAAInG,WAAW,CAACmG,UAAU,CAAC,IAAI,CAACzC,QAAQ,CAACyC,UAAU,CAAC,EAAE;IACpD,IAAI,CAACF,SAAS,CAACzB,MAAM,CAACyC,WAAW,IAAIhB,SAAS,CAACtB,kBAAkB,GAAG,CAAC,EAAE;MACrE;IACF;IACAmB,QAAQ,CAACG,SAAS,EAAEE,UAAU,CAAC;IAC/B,IAAI,CAACO,WAAW,IAAI,CAACA,WAAW,CAACL,MAAM,CAAC9B,OAAO,EAC7CwB,WAAW,CAACE,SAAS,EAAEE,UAAU,CAAC;EACtC;AACF;AACA,SAASJ,WAAWA,CAAClB,KAAK,EAAE9E,KAAK,EAAE0D,IAAI,GAAG,KAAK,EAAE;EAC/C,IAAI,CAACoB,KAAK,CAACN,OAAO,IAAIM,KAAK,CAACL,MAAM,CAACyC,WAAW,IAAIpC,KAAK,CAACH,cAAc,EAAE;IACtElB,MAAM,CAACzD,KAAK,EAAE0D,IAAI,CAAC;EACrB;AACF;;AAEA;AACA,SAASyD,gBAAgBA,CAACzE,IAAI,EAAE0E,MAAM,EAAE;EACtC,MAAMhH,OAAO,GAAGD,KAAK,CAACC,OAAO,CAACsC,IAAI,CAAC;EACnC,MAAMhK,KAAK,GAAG;IACZ+I,KAAK,EAAErB,OAAO,GAAG,CAAC,CAAC,cAAc,CAAC,CAAC;;IACnC;IACAkG,MAAM,EAAEc,MAAM,GAAGA,MAAM,CAACd,MAAM,GAAGhC,eAAe,CAAC,CAAC;IAClD;IACAwB,SAAS,EAAE,KAAK;IAChB;IACAS,UAAU,EAAE,KAAK;IACjB;IACAQ,SAAS,EAAE,CAAC,CAAC;IACb;IACAvC,OAAO,EAAE4C,MAAM;IACf;IACApG,KAAK,EAAE0B,IAAI;IACX;IACA2E,MAAM,EAAE,IAAI;IACZ;IACA;IACA7E,KAAK,EAAE,IAAI;IACX;IACAgD,OAAO,EAAE,IAAI;IACb8B,SAAS,EAAE;EACb,CAAC;EACD,IAAIlF,MAAM,GAAG1J,KAAK;EAClB,IAAI6O,KAAK,GAAGC,WAAW;EACvB,IAAIpH,OAAO,EAAE;IACXgC,MAAM,GAAG,CAAC1J,KAAK,CAAC;IAChB6O,KAAK,GAAGE,UAAU;EACpB;EACA,MAAM;IAAEC,MAAM;IAAEC;EAAM,CAAC,GAAGC,KAAK,CAACC,SAAS,CAACzF,MAAM,EAAEmF,KAAK,CAAC;EACxD7O,KAAK,CAAC2O,MAAM,GAAGM,KAAK;EACpBjP,KAAK,CAAC8M,OAAO,GAAGkC,MAAM;EACtB,OAAOC,KAAK;AACd;AACA,IAAIH,WAAW,GAAG;EAChB5F,GAAGA,CAAClJ,KAAK,EAAEiJ,IAAI,EAAE;IACf,IAAIA,IAAI,KAAK5C,WAAW,EACtB,OAAOrG,KAAK;IACd,MAAMoP,MAAM,GAAGvF,MAAM,CAAC7J,KAAK,CAAC;IAC5B,IAAI,CAACgJ,GAAG,CAACoG,MAAM,EAAEnG,IAAI,CAAC,EAAE;MACtB,OAAOoG,iBAAiB,CAACrP,KAAK,EAAEoP,MAAM,EAAEnG,IAAI,CAAC;IAC/C;IACA,MAAM3B,KAAK,GAAG8H,MAAM,CAACnG,IAAI,CAAC;IAC1B,IAAIjJ,KAAK,CAAC6N,UAAU,IAAI,CAACtG,WAAW,CAACD,KAAK,CAAC,EAAE;MAC3C,OAAOA,KAAK;IACd;IACA,IAAIA,KAAK,KAAKgI,IAAI,CAACtP,KAAK,CAACsI,KAAK,EAAEW,IAAI,CAAC,EAAE;MACrCsG,WAAW,CAACvP,KAAK,CAAC;MAClB,OAAOA,KAAK,CAAC8J,KAAK,CAACb,IAAI,CAAC,GAAGuG,WAAW,CAAClI,KAAK,EAAEtH,KAAK,CAAC;IACtD;IACA,OAAOsH,KAAK;EACd,CAAC;EACD0B,GAAGA,CAAChJ,KAAK,EAAEiJ,IAAI,EAAE;IACf,OAAOA,IAAI,IAAIY,MAAM,CAAC7J,KAAK,CAAC;EAC9B,CAAC;EACDyK,OAAOA,CAACzK,KAAK,EAAE;IACb,OAAOwK,OAAO,CAACC,OAAO,CAACZ,MAAM,CAAC7J,KAAK,CAAC,CAAC;EACvC,CAAC;EACDmJ,GAAGA,CAACnJ,KAAK,EAAEiJ,IAAI,EAAE3B,KAAK,EAAE;IACtB,MAAMqD,IAAI,GAAG8E,sBAAsB,CAAC5F,MAAM,CAAC7J,KAAK,CAAC,EAAEiJ,IAAI,CAAC;IACxD,IAAI0B,IAAI,EAAExB,GAAG,EAAE;MACbwB,IAAI,CAACxB,GAAG,CAAChB,IAAI,CAACnI,KAAK,CAAC2O,MAAM,EAAErH,KAAK,CAAC;MAClC,OAAO,IAAI;IACb;IACA,IAAI,CAACtH,KAAK,CAACoN,SAAS,EAAE;MACpB,MAAMsC,QAAQ,GAAGJ,IAAI,CAACzF,MAAM,CAAC7J,KAAK,CAAC,EAAEiJ,IAAI,CAAC;MAC1C,MAAM0G,YAAY,GAAGD,QAAQ,GAAGrJ,WAAW,CAAC;MAC5C,IAAIsJ,YAAY,IAAIA,YAAY,CAACrH,KAAK,KAAKhB,KAAK,EAAE;QAChDtH,KAAK,CAAC8J,KAAK,CAACb,IAAI,CAAC,GAAG3B,KAAK;QACzBtH,KAAK,CAACqO,SAAS,CAACpF,IAAI,CAAC,GAAG,KAAK;QAC7B,OAAO,IAAI;MACb;MACA,IAAIM,EAAE,CAACjC,KAAK,EAAEoI,QAAQ,CAAC,KAAKpI,KAAK,KAAK,KAAK,CAAC,IAAI0B,GAAG,CAAChJ,KAAK,CAACsI,KAAK,EAAEW,IAAI,CAAC,CAAC,EACrE,OAAO,IAAI;MACbsG,WAAW,CAACvP,KAAK,CAAC;MAClB4P,WAAW,CAAC5P,KAAK,CAAC;IACpB;IACA,IAAIA,KAAK,CAAC8J,KAAK,CAACb,IAAI,CAAC,KAAK3B,KAAK;IAAI;IAClCA,KAAK,KAAK,KAAK,CAAC,IAAI2B,IAAI,IAAIjJ,KAAK,CAAC8J,KAAK,CAAC;IAAI;IAC7C+F,MAAM,CAACC,KAAK,CAACxI,KAAK,CAAC,IAAIuI,MAAM,CAACC,KAAK,CAAC9P,KAAK,CAAC8J,KAAK,CAACb,IAAI,CAAC,CAAC,EACpD,OAAO,IAAI;IACbjJ,KAAK,CAAC8J,KAAK,CAACb,IAAI,CAAC,GAAG3B,KAAK;IACzBtH,KAAK,CAACqO,SAAS,CAACpF,IAAI,CAAC,GAAG,IAAI;IAC5B,OAAO,IAAI;EACb,CAAC;EACD8G,cAAcA,CAAC/P,KAAK,EAAEiJ,IAAI,EAAE;IAC1B,IAAIqG,IAAI,CAACtP,KAAK,CAACsI,KAAK,EAAEW,IAAI,CAAC,KAAK,KAAK,CAAC,IAAIA,IAAI,IAAIjJ,KAAK,CAACsI,KAAK,EAAE;MAC7DtI,KAAK,CAACqO,SAAS,CAACpF,IAAI,CAAC,GAAG,KAAK;MAC7BsG,WAAW,CAACvP,KAAK,CAAC;MAClB4P,WAAW,CAAC5P,KAAK,CAAC;IACpB,CAAC,MAAM;MACL,OAAOA,KAAK,CAACqO,SAAS,CAACpF,IAAI,CAAC;IAC9B;IACA,IAAIjJ,KAAK,CAAC8J,KAAK,EAAE;MACf,OAAO9J,KAAK,CAAC8J,KAAK,CAACb,IAAI,CAAC;IAC1B;IACA,OAAO,IAAI;EACb,CAAC;EACD;EACA;EACA+G,wBAAwBA,CAAChQ,KAAK,EAAEiJ,IAAI,EAAE;IACpC,MAAMgH,KAAK,GAAGpG,MAAM,CAAC7J,KAAK,CAAC;IAC3B,MAAM2K,IAAI,GAAGH,OAAO,CAACwF,wBAAwB,CAACC,KAAK,EAAEhH,IAAI,CAAC;IAC1D,IAAI,CAAC0B,IAAI,EACP,OAAOA,IAAI;IACb,OAAO;MACLC,QAAQ,EAAE,IAAI;MACdC,YAAY,EAAE7K,KAAK,CAAC+I,KAAK,KAAK,CAAC,CAAC,eAAeE,IAAI,KAAK,QAAQ;MAChE6B,UAAU,EAAEH,IAAI,CAACG,UAAU;MAC3BxD,KAAK,EAAE2I,KAAK,CAAChH,IAAI;IACnB,CAAC;EACH,CAAC;EACDiH,cAAcA,CAAA,EAAG;IACfrJ,GAAG,CAAC,EAAE,CAAC;EACT,CAAC;EACDM,cAAcA,CAACnH,KAAK,EAAE;IACpB,OAAOmH,cAAc,CAACnH,KAAK,CAACsI,KAAK,CAAC;EACpC,CAAC;EACD6H,cAAcA,CAAA,EAAG;IACftJ,GAAG,CAAC,EAAE,CAAC;EACT;AACF,CAAC;AACD,IAAIkI,UAAU,GAAG,CAAC,CAAC;AACnBxG,IAAI,CAACuG,WAAW,EAAE,CAAClG,GAAG,EAAEwH,EAAE,KAAK;EAC7BrB,UAAU,CAACnG,GAAG,CAAC,GAAG,YAAW;IAC3ByH,SAAS,CAAC,CAAC,CAAC,GAAGA,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC9B,OAAOD,EAAE,CAACnJ,KAAK,CAAC,IAAI,EAAEoJ,SAAS,CAAC;EAClC,CAAC;AACH,CAAC,CAAC;AACFtB,UAAU,CAACgB,cAAc,GAAG,UAAS/P,KAAK,EAAEiJ,IAAI,EAAE;EAChD,IAAI1C,KAAqC,IAAIuJ,KAAK,CAACQ,QAAQ,CAACrH,IAAI,CAAC,CAAC,EAChEpC,GAAG,CAAC,EAAE,CAAC;EACT,OAAOkI,UAAU,CAAC5F,GAAG,CAAChB,IAAI,CAAC,IAAI,EAAEnI,KAAK,EAAEiJ,IAAI,EAAE,KAAK,CAAC,CAAC;AACvD,CAAC;AACD8F,UAAU,CAAC5F,GAAG,GAAG,UAASnJ,KAAK,EAAEiJ,IAAI,EAAE3B,KAAK,EAAE;EAC5C,IAAIf,KAAqC,IAAI0C,IAAI,KAAK,QAAQ,IAAI6G,KAAK,CAACQ,QAAQ,CAACrH,IAAI,CAAC,CAAC,EACrFpC,GAAG,CAAC,EAAE,CAAC;EACT,OAAOiI,WAAW,CAAC3F,GAAG,CAAChB,IAAI,CAAC,IAAI,EAAEnI,KAAK,CAAC,CAAC,CAAC,EAAEiJ,IAAI,EAAE3B,KAAK,EAAEtH,KAAK,CAAC,CAAC,CAAC,CAAC;AACpE,CAAC;AACD,SAASsP,IAAIA,CAACrP,KAAK,EAAEgJ,IAAI,EAAE;EACzB,MAAMjJ,KAAK,GAAGC,KAAK,CAACoG,WAAW,CAAC;EAChC,MAAM+I,MAAM,GAAGpP,KAAK,GAAG6J,MAAM,CAAC7J,KAAK,CAAC,GAAGC,KAAK;EAC5C,OAAOmP,MAAM,CAACnG,IAAI,CAAC;AACrB;AACA,SAASoG,iBAAiBA,CAACrP,KAAK,EAAEoP,MAAM,EAAEnG,IAAI,EAAE;EAC9C,MAAM0B,IAAI,GAAG8E,sBAAsB,CAACL,MAAM,EAAEnG,IAAI,CAAC;EACjD,OAAO0B,IAAI,GAAI,OAAM,IAAIA,IAAI,GAAGA,IAAI,CAACrD,KAAK;EACxC;EACA;EACAqD,IAAI,CAACzB,GAAG,EAAEf,IAAI,CAACnI,KAAK,CAAC2O,MAAM,CAC5B,GAAG,KAAK,CAAC;AACZ;AACA,SAASc,sBAAsBA,CAACL,MAAM,EAAEnG,IAAI,EAAE;EAC5C,IAAI,EAAEA,IAAI,IAAImG,MAAM,CAAC,EACnB,OAAO,KAAK,CAAC;EACf,IAAIpH,KAAK,GAAGb,cAAc,CAACiI,MAAM,CAAC;EAClC,OAAOpH,KAAK,EAAE;IACZ,MAAM2C,IAAI,GAAGvD,MAAM,CAAC4I,wBAAwB,CAAChI,KAAK,EAAEiB,IAAI,CAAC;IACzD,IAAI0B,IAAI,EACN,OAAOA,IAAI;IACb3C,KAAK,GAAGb,cAAc,CAACa,KAAK,CAAC;EAC/B;EACA,OAAO,KAAK,CAAC;AACf;AACA,SAAS4H,WAAWA,CAAC5P,KAAK,EAAE;EAC1B,IAAI,CAACA,KAAK,CAACoN,SAAS,EAAE;IACpBpN,KAAK,CAACoN,SAAS,GAAG,IAAI;IACtB,IAAIpN,KAAK,CAAC8L,OAAO,EAAE;MACjB8D,WAAW,CAAC5P,KAAK,CAAC8L,OAAO,CAAC;IAC5B;EACF;AACF;AACA,SAASyD,WAAWA,CAACvP,KAAK,EAAE;EAC1B,IAAI,CAACA,KAAK,CAAC8J,KAAK,EAAE;IAChB9J,KAAK,CAAC8J,KAAK,GAAGC,WAAW,CACvB/J,KAAK,CAACsI,KAAK,EACXtI,KAAK,CAAC4N,MAAM,CAAC7B,MAAM,CAACwE,qBACtB,CAAC;EACH;AACF;;AAEA;AACA,IAAIC,MAAM,GAAG,MAAM;EACjBpU,WAAWA,CAACqU,MAAM,EAAE;IAClB,IAAI,CAACjC,WAAW,GAAG,IAAI;IACvB,IAAI,CAAC+B,qBAAqB,GAAG,KAAK;IAClC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACI,IAAI,CAAC9Q,OAAO,GAAG,CAACuK,IAAI,EAAE0G,MAAM,EAAErE,aAAa,KAAK;MAC9C,IAAI,OAAOrC,IAAI,KAAK,UAAU,IAAI,OAAO0G,MAAM,KAAK,UAAU,EAAE;QAC9D,MAAMC,WAAW,GAAGD,MAAM;QAC1BA,MAAM,GAAG1G,IAAI;QACb,MAAM4G,IAAI,GAAG,IAAI;QACjB,OAAO,SAASC,cAAcA,CAACC,KAAK,GAAGH,WAAW,EAAE,GAAG7J,IAAI,EAAE;UAC3D,OAAO8J,IAAI,CAACnR,OAAO,CAACqR,KAAK,EAAG7Q,KAAK,IAAKyQ,MAAM,CAACvI,IAAI,CAAC,IAAI,EAAElI,KAAK,EAAE,GAAG6G,IAAI,CAAC,CAAC;QAC1E,CAAC;MACH;MACA,IAAI,OAAO4J,MAAM,KAAK,UAAU,EAC9B7J,GAAG,CAAC,CAAC,CAAC;MACR,IAAIwF,aAAa,KAAK,KAAK,CAAC,IAAI,OAAOA,aAAa,KAAK,UAAU,EACjExF,GAAG,CAAC,CAAC,CAAC;MACR,IAAIoG,MAAM;MACV,IAAI1F,WAAW,CAACyC,IAAI,CAAC,EAAE;QACrB,MAAMoC,KAAK,GAAGQ,UAAU,CAAC,IAAI,CAAC;QAC9B,MAAMqC,KAAK,GAAGO,WAAW,CAACxF,IAAI,EAAE,KAAK,CAAC,CAAC;QACvC,IAAI+G,QAAQ,GAAG,IAAI;QACnB,IAAI;UACF9D,MAAM,GAAGyD,MAAM,CAACzB,KAAK,CAAC;UACtB8B,QAAQ,GAAG,KAAK;QAClB,CAAC,SAAS;UACR,IAAIA,QAAQ,EACVtE,WAAW,CAACL,KAAK,CAAC,CAAC,KAEnBM,UAAU,CAACN,KAAK,CAAC;QACrB;QACAD,iBAAiB,CAACC,KAAK,EAAEC,aAAa,CAAC;QACvC,OAAOW,aAAa,CAACC,MAAM,EAAEb,KAAK,CAAC;MACrC,CAAC,MAAM,IAAI,CAACpC,IAAI,IAAI,OAAOA,IAAI,KAAK,QAAQ,EAAE;QAC5CiD,MAAM,GAAGyD,MAAM,CAAC1G,IAAI,CAAC;QACrB,IAAIiD,MAAM,KAAK,KAAK,CAAC,EACnBA,MAAM,GAAGjD,IAAI;QACf,IAAIiD,MAAM,KAAKhH,OAAO,EACpBgH,MAAM,GAAG,KAAK,CAAC;QACjB,IAAI,IAAI,CAACuB,WAAW,EAClBzD,MAAM,CAACkC,MAAM,EAAE,IAAI,CAAC;QACtB,IAAIZ,aAAa,EAAE;UACjB,MAAM2E,CAAC,GAAG,EAAE;UACZ,MAAMC,EAAE,GAAG,EAAE;UACb1F,SAAS,CAAC,SAAS,CAAC,CAACgC,2BAA2B,CAACvD,IAAI,EAAEiD,MAAM,EAAE+D,CAAC,EAAEC,EAAE,CAAC;UACrE5E,aAAa,CAAC2E,CAAC,EAAEC,EAAE,CAAC;QACtB;QACA,OAAOhE,MAAM;MACf,CAAC,MACCpG,GAAG,CAAC,CAAC,EAAEmD,IAAI,CAAC;IAChB,CAAC;IACD,IAAI,CAACkH,kBAAkB,GAAG,CAAClH,IAAI,EAAE0G,MAAM,KAAK;MAC1C,IAAI,OAAO1G,IAAI,KAAK,UAAU,EAAE;QAC9B,OAAO,CAAChK,KAAK,EAAE,GAAG8G,IAAI,KAAK,IAAI,CAACoK,kBAAkB,CAAClR,KAAK,EAAGC,KAAK,IAAK+J,IAAI,CAAC/J,KAAK,EAAE,GAAG6G,IAAI,CAAC,CAAC;MAC5F;MACA,IAAIqK,OAAO,EAAEC,cAAc;MAC3B,MAAMnE,MAAM,GAAG,IAAI,CAACxN,OAAO,CAACuK,IAAI,EAAE0G,MAAM,EAAE,CAACM,CAAC,EAAEC,EAAE,KAAK;QACnDE,OAAO,GAAGH,CAAC;QACXI,cAAc,GAAGH,EAAE;MACrB,CAAC,CAAC;MACF,OAAO,CAAChE,MAAM,EAAEkE,OAAO,EAAEC,cAAc,CAAC;IAC1C,CAAC;IACD,IAAI,OAAOX,MAAM,EAAEY,UAAU,KAAK,SAAS,EACzC,IAAI,CAACC,aAAa,CAACb,MAAM,CAACY,UAAU,CAAC;IACvC,IAAI,OAAOZ,MAAM,EAAEc,oBAAoB,KAAK,SAAS,EACnD,IAAI,CAACC,uBAAuB,CAACf,MAAM,CAACc,oBAAoB,CAAC;EAC7D;EACAE,WAAWA,CAACzH,IAAI,EAAE;IAChB,IAAI,CAACzC,WAAW,CAACyC,IAAI,CAAC,EACpBnD,GAAG,CAAC,CAAC,CAAC;IACR,IAAIQ,OAAO,CAAC2C,IAAI,CAAC,EACfA,IAAI,GAAG0H,OAAO,CAAC1H,IAAI,CAAC;IACtB,MAAMoC,KAAK,GAAGQ,UAAU,CAAC,IAAI,CAAC;IAC9B,MAAMqC,KAAK,GAAGO,WAAW,CAACxF,IAAI,EAAE,KAAK,CAAC,CAAC;IACvCiF,KAAK,CAAC5I,WAAW,CAAC,CAACuI,SAAS,GAAG,IAAI;IACnClC,UAAU,CAACN,KAAK,CAAC;IACjB,OAAO6C,KAAK;EACd;EACA0C,WAAWA,CAAC1R,KAAK,EAAEoM,aAAa,EAAE;IAChC,MAAMrM,KAAK,GAAGC,KAAK,IAAIA,KAAK,CAACoG,WAAW,CAAC;IACzC,IAAI,CAACrG,KAAK,IAAI,CAACA,KAAK,CAAC4O,SAAS,EAC5B/H,GAAG,CAAC,CAAC,CAAC;IACR,MAAM;MAAE+G,MAAM,EAAExB;IAAM,CAAC,GAAGpM,KAAK;IAC/BmM,iBAAiB,CAACC,KAAK,EAAEC,aAAa,CAAC;IACvC,OAAOW,aAAa,CAAC,KAAK,CAAC,EAAEZ,KAAK,CAAC;EACrC;EACA;AACF;AACA;AACA;AACA;EACEkF,aAAaA,CAAChK,KAAK,EAAE;IACnB,IAAI,CAACkH,WAAW,GAAGlH,KAAK;EAC1B;EACA;AACF;AACA;AACA;AACA;EACEkK,uBAAuBA,CAAClK,KAAK,EAAE;IAC7B,IAAI,CAACiJ,qBAAqB,GAAGjJ,KAAK;EACpC;EACAsK,YAAYA,CAAC5H,IAAI,EAAEmH,OAAO,EAAE;IAC1B,IAAIzG,CAAC;IACL,KAAKA,CAAC,GAAGyG,OAAO,CAACvT,MAAM,GAAG,CAAC,EAAE8M,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;MACxC,MAAMmH,KAAK,GAAGV,OAAO,CAACzG,CAAC,CAAC;MACxB,IAAImH,KAAK,CAACpE,IAAI,CAAC7P,MAAM,KAAK,CAAC,IAAIiU,KAAK,CAACC,EAAE,KAAK,SAAS,EAAE;QACrD9H,IAAI,GAAG6H,KAAK,CAACvK,KAAK;QAClB;MACF;IACF;IACA,IAAIoD,CAAC,GAAG,CAAC,CAAC,EAAE;MACVyG,OAAO,GAAGA,OAAO,CAACjH,KAAK,CAACQ,CAAC,GAAG,CAAC,CAAC;IAChC;IACA,MAAMqH,gBAAgB,GAAGxG,SAAS,CAAC,SAAS,CAAC,CAACyG,aAAa;IAC3D,IAAI3K,OAAO,CAAC2C,IAAI,CAAC,EAAE;MACjB,OAAO+H,gBAAgB,CAAC/H,IAAI,EAAEmH,OAAO,CAAC;IACxC;IACA,OAAO,IAAI,CAAC1R,OAAO,CACjBuK,IAAI,EACH/J,KAAK,IAAK8R,gBAAgB,CAAC9R,KAAK,EAAEkR,OAAO,CAC5C,CAAC;EACH;AACF,CAAC;AACD,SAAS3B,WAAWA,CAAClI,KAAK,EAAEoH,MAAM,EAAE;EAClC,MAAMzO,KAAK,GAAG0H,KAAK,CAACL,KAAK,CAAC,GAAGiE,SAAS,CAAC,QAAQ,CAAC,CAAC0G,SAAS,CAAC3K,KAAK,EAAEoH,MAAM,CAAC,GAAG9G,KAAK,CAACN,KAAK,CAAC,GAAGiE,SAAS,CAAC,QAAQ,CAAC,CAAC2G,SAAS,CAAC5K,KAAK,EAAEoH,MAAM,CAAC,GAAGD,gBAAgB,CAACnH,KAAK,EAAEoH,MAAM,CAAC;EACzK,MAAMtC,KAAK,GAAGsC,MAAM,GAAGA,MAAM,CAACd,MAAM,GAAGhC,eAAe,CAAC,CAAC;EACxDQ,KAAK,CAACJ,OAAO,CAACmG,IAAI,CAAClS,KAAK,CAAC;EACzB,OAAOA,KAAK;AACd;;AAEA;AACA,SAASyR,OAAOA,CAACpK,KAAK,EAAE;EACtB,IAAI,CAACD,OAAO,CAACC,KAAK,CAAC,EACjBT,GAAG,CAAC,EAAE,EAAES,KAAK,CAAC;EAChB,OAAO8K,WAAW,CAAC9K,KAAK,CAAC;AAC3B;AACA,SAAS8K,WAAWA,CAAC9K,KAAK,EAAE;EAC1B,IAAI,CAACC,WAAW,CAACD,KAAK,CAAC,IAAI2D,QAAQ,CAAC3D,KAAK,CAAC,EACxC,OAAOA,KAAK;EACd,MAAMtH,KAAK,GAAGsH,KAAK,CAACjB,WAAW,CAAC;EAChC,IAAIgM,IAAI;EACR,IAAIrS,KAAK,EAAE;IACT,IAAI,CAACA,KAAK,CAACoN,SAAS,EAClB,OAAOpN,KAAK,CAACsI,KAAK;IACpBtI,KAAK,CAAC6N,UAAU,GAAG,IAAI;IACvBwE,IAAI,GAAGtI,WAAW,CAACzC,KAAK,EAAEtH,KAAK,CAAC4N,MAAM,CAAC7B,MAAM,CAACwE,qBAAqB,CAAC;EACtE,CAAC,MAAM;IACL8B,IAAI,GAAGtI,WAAW,CAACzC,KAAK,EAAE,IAAI,CAAC;EACjC;EACAiB,IAAI,CAAC8J,IAAI,EAAE,CAACzJ,GAAG,EAAE8E,UAAU,KAAK;IAC9BvE,GAAG,CAACkJ,IAAI,EAAEzJ,GAAG,EAAEwJ,WAAW,CAAC1E,UAAU,CAAC,CAAC;EACzC,CAAC,CAAC;EACF,IAAI1N,KAAK,EAAE;IACTA,KAAK,CAAC6N,UAAU,GAAG,KAAK;EAC1B;EACA,OAAOwE,IAAI;AACb;;AAEA;AACA,SAASC,aAAaA,CAAA,EAAG;EACvB,MAAMC,WAAW,GAAG,EAAE;EACtB,IAAIhM,IAAqC,EAAE;IACzCD,MAAM,CAAC6L,IAAI,CACT,qCAAqC,EACrC,UAASL,EAAE,EAAE;MACX,OAAO,+BAA+B,GAAGA,EAAE;IAC7C,CAAC,EACD,UAASrE,IAAI,EAAE;MACb,OAAO,4CAA4C,GAAGA,IAAI;IAC5D,CAAC,EACD,uFACF,CAAC;EACH;EACA,MAAM+E,OAAO,GAAG,SAAS;EACzB,MAAMC,GAAG,GAAG,KAAK;EACjB,MAAMC,MAAM,GAAG,QAAQ;EACvB,SAAS1E,gBAAgBA,CAAChO,KAAK,EAAE2S,QAAQ,EAAExB,OAAO,EAAEC,cAAc,EAAE;IAClE,QAAQpR,KAAK,CAAC+I,KAAK;MACjB,KAAK,CAAC,CAAC;MACP,KAAK,CAAC,CAAC;QACL,OAAO6J,2BAA2B,CAChC5S,KAAK,EACL2S,QAAQ,EACRxB,OAAO,EACPC,cACF,CAAC;MACH,KAAK,CAAC,CAAC;QACL,OAAOyB,oBAAoB,CAAC7S,KAAK,EAAE2S,QAAQ,EAAExB,OAAO,EAAEC,cAAc,CAAC;MACvE,KAAK,CAAC,CAAC;QACL,OAAO0B,kBAAkB,CACvB9S,KAAK,EACL2S,QAAQ,EACRxB,OAAO,EACPC,cACF,CAAC;IACL;EACF;EACA,SAASyB,oBAAoBA,CAAC7S,KAAK,EAAE2S,QAAQ,EAAExB,OAAO,EAAEC,cAAc,EAAE;IACtE,IAAI;MAAE9I,KAAK;MAAE+F;IAAU,CAAC,GAAGrO,KAAK;IAChC,IAAI8J,KAAK,GAAG9J,KAAK,CAAC8J,KAAK;IACvB,IAAIA,KAAK,CAAClM,MAAM,GAAG0K,KAAK,CAAC1K,MAAM,EAAE;MAC/B;MACA,CAAC0K,KAAK,EAAEwB,KAAK,CAAC,GAAG,CAACA,KAAK,EAAExB,KAAK,CAAC;MAC/B,CAAC6I,OAAO,EAAEC,cAAc,CAAC,GAAG,CAACA,cAAc,EAAED,OAAO,CAAC;IACvD;IACA,KAAK,IAAIzG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGpC,KAAK,CAAC1K,MAAM,EAAE8M,CAAC,EAAE,EAAE;MACrC,IAAI2D,SAAS,CAAC3D,CAAC,CAAC,IAAIZ,KAAK,CAACY,CAAC,CAAC,KAAKpC,KAAK,CAACoC,CAAC,CAAC,EAAE;QACzC,MAAM+C,IAAI,GAAGkF,QAAQ,CAACrE,MAAM,CAAC,CAAC5D,CAAC,CAAC,CAAC;QACjCyG,OAAO,CAACgB,IAAI,CAAC;UACXL,EAAE,EAAEU,OAAO;UACX/E,IAAI;UACJ;UACA;UACAnG,KAAK,EAAEyL,uBAAuB,CAACjJ,KAAK,CAACY,CAAC,CAAC;QACzC,CAAC,CAAC;QACF0G,cAAc,CAACe,IAAI,CAAC;UAClBL,EAAE,EAAEU,OAAO;UACX/E,IAAI;UACJnG,KAAK,EAAEyL,uBAAuB,CAACzK,KAAK,CAACoC,CAAC,CAAC;QACzC,CAAC,CAAC;MACJ;IACF;IACA,KAAK,IAAIA,CAAC,GAAGpC,KAAK,CAAC1K,MAAM,EAAE8M,CAAC,GAAGZ,KAAK,CAAClM,MAAM,EAAE8M,CAAC,EAAE,EAAE;MAChD,MAAM+C,IAAI,GAAGkF,QAAQ,CAACrE,MAAM,CAAC,CAAC5D,CAAC,CAAC,CAAC;MACjCyG,OAAO,CAACgB,IAAI,CAAC;QACXL,EAAE,EAAEW,GAAG;QACPhF,IAAI;QACJ;QACA;QACAnG,KAAK,EAAEyL,uBAAuB,CAACjJ,KAAK,CAACY,CAAC,CAAC;MACzC,CAAC,CAAC;IACJ;IACA,KAAK,IAAIA,CAAC,GAAGZ,KAAK,CAAClM,MAAM,GAAG,CAAC,EAAE0K,KAAK,CAAC1K,MAAM,IAAI8M,CAAC,EAAE,EAAEA,CAAC,EAAE;MACrD,MAAM+C,IAAI,GAAGkF,QAAQ,CAACrE,MAAM,CAAC,CAAC5D,CAAC,CAAC,CAAC;MACjC0G,cAAc,CAACe,IAAI,CAAC;QAClBL,EAAE,EAAEY,MAAM;QACVjF;MACF,CAAC,CAAC;IACJ;EACF;EACA,SAASmF,2BAA2BA,CAAC5S,KAAK,EAAE2S,QAAQ,EAAExB,OAAO,EAAEC,cAAc,EAAE;IAC7E,MAAM;MAAE9I,KAAK;MAAEwB;IAAM,CAAC,GAAG9J,KAAK;IAC9BuI,IAAI,CAACvI,KAAK,CAACqO,SAAS,EAAE,CAACzF,GAAG,EAAEoK,aAAa,KAAK;MAC5C,MAAMC,SAAS,GAAG/J,GAAG,CAACZ,KAAK,EAAEM,GAAG,CAAC;MACjC,MAAMtB,KAAK,GAAG4B,GAAG,CAACY,KAAK,EAAElB,GAAG,CAAC;MAC7B,MAAMkJ,EAAE,GAAG,CAACkB,aAAa,GAAGN,MAAM,GAAG1J,GAAG,CAACV,KAAK,EAAEM,GAAG,CAAC,GAAG4J,OAAO,GAAGC,GAAG;MACpE,IAAIQ,SAAS,KAAK3L,KAAK,IAAIwK,EAAE,KAAKU,OAAO,EACvC;MACF,MAAM/E,IAAI,GAAGkF,QAAQ,CAACrE,MAAM,CAAC1F,GAAG,CAAC;MACjCuI,OAAO,CAACgB,IAAI,CAACL,EAAE,KAAKY,MAAM,GAAG;QAAEZ,EAAE;QAAErE;MAAK,CAAC,GAAG;QAAEqE,EAAE;QAAErE,IAAI;QAAEnG;MAAM,CAAC,CAAC;MAChE8J,cAAc,CAACe,IAAI,CACjBL,EAAE,KAAKW,GAAG,GAAG;QAAEX,EAAE,EAAEY,MAAM;QAAEjF;MAAK,CAAC,GAAGqE,EAAE,KAAKY,MAAM,GAAG;QAAEZ,EAAE,EAAEW,GAAG;QAAEhF,IAAI;QAAEnG,KAAK,EAAEyL,uBAAuB,CAACE,SAAS;MAAE,CAAC,GAAG;QAAEnB,EAAE,EAAEU,OAAO;QAAE/E,IAAI;QAAEnG,KAAK,EAAEyL,uBAAuB,CAACE,SAAS;MAAE,CACpL,CAAC;IACH,CAAC,CAAC;EACJ;EACA,SAASH,kBAAkBA,CAAC9S,KAAK,EAAE2S,QAAQ,EAAExB,OAAO,EAAEC,cAAc,EAAE;IACpE,IAAI;MAAE9I,KAAK;MAAEwB;IAAM,CAAC,GAAG9J,KAAK;IAC5B,IAAI0K,CAAC,GAAG,CAAC;IACTpC,KAAK,CAAC5D,OAAO,CAAE4C,KAAK,IAAK;MACvB,IAAI,CAACwC,KAAK,CAACd,GAAG,CAAC1B,KAAK,CAAC,EAAE;QACrB,MAAMmG,IAAI,GAAGkF,QAAQ,CAACrE,MAAM,CAAC,CAAC5D,CAAC,CAAC,CAAC;QACjCyG,OAAO,CAACgB,IAAI,CAAC;UACXL,EAAE,EAAEY,MAAM;UACVjF,IAAI;UACJnG;QACF,CAAC,CAAC;QACF8J,cAAc,CAAC8B,OAAO,CAAC;UACrBpB,EAAE,EAAEW,GAAG;UACPhF,IAAI;UACJnG;QACF,CAAC,CAAC;MACJ;MACAoD,CAAC,EAAE;IACL,CAAC,CAAC;IACFA,CAAC,GAAG,CAAC;IACLZ,KAAK,CAACpF,OAAO,CAAE4C,KAAK,IAAK;MACvB,IAAI,CAACgB,KAAK,CAACU,GAAG,CAAC1B,KAAK,CAAC,EAAE;QACrB,MAAMmG,IAAI,GAAGkF,QAAQ,CAACrE,MAAM,CAAC,CAAC5D,CAAC,CAAC,CAAC;QACjCyG,OAAO,CAACgB,IAAI,CAAC;UACXL,EAAE,EAAEW,GAAG;UACPhF,IAAI;UACJnG;QACF,CAAC,CAAC;QACF8J,cAAc,CAAC8B,OAAO,CAAC;UACrBpB,EAAE,EAAEY,MAAM;UACVjF,IAAI;UACJnG;QACF,CAAC,CAAC;MACJ;MACAoD,CAAC,EAAE;IACL,CAAC,CAAC;EACJ;EACA,SAAS6C,2BAA2BA,CAAC4F,SAAS,EAAEC,WAAW,EAAEjC,OAAO,EAAEC,cAAc,EAAE;IACpFD,OAAO,CAACgB,IAAI,CAAC;MACXL,EAAE,EAAEU,OAAO;MACX/E,IAAI,EAAE,EAAE;MACRnG,KAAK,EAAE8L,WAAW,KAAKnN,OAAO,GAAG,KAAK,CAAC,GAAGmN;IAC5C,CAAC,CAAC;IACFhC,cAAc,CAACe,IAAI,CAAC;MAClBL,EAAE,EAAEU,OAAO;MACX/E,IAAI,EAAE,EAAE;MACRnG,KAAK,EAAE6L;IACT,CAAC,CAAC;EACJ;EACA,SAASnB,aAAaA,CAAC/R,KAAK,EAAEkR,OAAO,EAAE;IACrCA,OAAO,CAACzM,OAAO,CAAEmN,KAAK,IAAK;MACzB,MAAM;QAAEpE,IAAI;QAAEqE;MAAG,CAAC,GAAGD,KAAK;MAC1B,IAAI7H,IAAI,GAAG/J,KAAK;MAChB,KAAK,IAAIyK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG+C,IAAI,CAAC7P,MAAM,GAAG,CAAC,EAAE8M,CAAC,EAAE,EAAE;QACxC,MAAM2I,UAAU,GAAG3K,WAAW,CAACsB,IAAI,CAAC;QACpC,IAAIgH,CAAC,GAAGvD,IAAI,CAAC/C,CAAC,CAAC;QACf,IAAI,OAAOsG,CAAC,KAAK,QAAQ,IAAI,OAAOA,CAAC,KAAK,QAAQ,EAAE;UAClDA,CAAC,GAAG,EAAE,GAAGA,CAAC;QACZ;QACA,IAAI,CAACqC,UAAU,KAAK,CAAC,CAAC,gBAAgBA,UAAU,KAAK,CAAC,CAAC,iBAAiBrC,CAAC,KAAK,WAAW,IAAIA,CAAC,KAAK,aAAa,CAAC,EAC/GnK,GAAG,CAAC0L,WAAW,GAAG,CAAC,CAAC;QACtB,IAAI,OAAOvI,IAAI,KAAK,UAAU,IAAIgH,CAAC,KAAK,WAAW,EACjDnK,GAAG,CAAC0L,WAAW,GAAG,CAAC,CAAC;QACtBvI,IAAI,GAAGd,GAAG,CAACc,IAAI,EAAEgH,CAAC,CAAC;QACnB,IAAI,OAAOhH,IAAI,KAAK,QAAQ,EAC1BnD,GAAG,CAAC0L,WAAW,GAAG,CAAC,EAAE9E,IAAI,CAAC6F,IAAI,CAAC,GAAG,CAAC,CAAC;MACxC;MACA,MAAM1O,IAAI,GAAG8D,WAAW,CAACsB,IAAI,CAAC;MAC9B,MAAM1C,KAAK,GAAGiM,mBAAmB,CAAC1B,KAAK,CAACvK,KAAK,CAAC;MAC9C,MAAMsB,GAAG,GAAG6E,IAAI,CAACA,IAAI,CAAC7P,MAAM,GAAG,CAAC,CAAC;MACjC,QAAQkU,EAAE;QACR,KAAKU,OAAO;UACV,QAAQ5N,IAAI;YACV,KAAK,CAAC,CAAC;cACL,OAAOoF,IAAI,CAACb,GAAG,CAACP,GAAG,EAAEtB,KAAK,CAAC;YAC7B,KAAK,CAAC,CAAC;cACLT,GAAG,CAAC0L,WAAW,CAAC;YAClB;cACE,OAAOvI,IAAI,CAACpB,GAAG,CAAC,GAAGtB,KAAK;UAC5B;QACF,KAAKmL,GAAG;UACN,QAAQ7N,IAAI;YACV,KAAK,CAAC,CAAC;cACL,OAAOgE,GAAG,KAAK,GAAG,GAAGoB,IAAI,CAACmI,IAAI,CAAC7K,KAAK,CAAC,GAAG0C,IAAI,CAACwJ,MAAM,CAAC5K,GAAG,EAAE,CAAC,EAAEtB,KAAK,CAAC;YACpE,KAAK,CAAC,CAAC;cACL,OAAO0C,IAAI,CAACb,GAAG,CAACP,GAAG,EAAEtB,KAAK,CAAC;YAC7B,KAAK,CAAC,CAAC;cACL,OAAO0C,IAAI,CAACV,GAAG,CAAChC,KAAK,CAAC;YACxB;cACE,OAAO0C,IAAI,CAACpB,GAAG,CAAC,GAAGtB,KAAK;UAC5B;QACF,KAAKoL,MAAM;UACT,QAAQ9N,IAAI;YACV,KAAK,CAAC,CAAC;cACL,OAAOoF,IAAI,CAACwJ,MAAM,CAAC5K,GAAG,EAAE,CAAC,CAAC;YAC5B,KAAK,CAAC,CAAC;cACL,OAAOoB,IAAI,CAACmB,MAAM,CAACvC,GAAG,CAAC;YACzB,KAAK,CAAC,CAAC;cACL,OAAOoB,IAAI,CAACmB,MAAM,CAAC0G,KAAK,CAACvK,KAAK,CAAC;YACjC;cACE,OAAO,OAAO0C,IAAI,CAACpB,GAAG,CAAC;UAC3B;QACF;UACE/B,GAAG,CAAC0L,WAAW,GAAG,CAAC,EAAET,EAAE,CAAC;MAC5B;IACF,CAAC,CAAC;IACF,OAAO7R,KAAK;EACd;EACA,SAASsT,mBAAmBA,CAAC/K,GAAG,EAAE;IAChC,IAAI,CAACjB,WAAW,CAACiB,GAAG,CAAC,EACnB,OAAOA,GAAG;IACZ,IAAIf,KAAK,CAACC,OAAO,CAACc,GAAG,CAAC,EACpB,OAAOA,GAAG,CAAClN,GAAG,CAACiY,mBAAmB,CAAC;IACrC,IAAI5L,KAAK,CAACa,GAAG,CAAC,EACZ,OAAO,IAAImB,GAAG,CACZlC,KAAK,CAACgM,IAAI,CAACjL,GAAG,CAACG,OAAO,CAAC,CAAC,CAAC,CAACrN,GAAG,CAAC,CAAC,CAACoY,CAAC,EAAEC,CAAC,CAAC,KAAK,CAACD,CAAC,EAAEH,mBAAmB,CAACI,CAAC,CAAC,CAAC,CACvE,CAAC;IACH,IAAI/L,KAAK,CAACY,GAAG,CAAC,EACZ,OAAO,IAAIoB,GAAG,CAACnC,KAAK,CAACgM,IAAI,CAACjL,GAAG,CAAC,CAAClN,GAAG,CAACiY,mBAAmB,CAAC,CAAC;IAC1D,MAAMK,MAAM,GAAGxM,MAAM,CAAC+C,MAAM,CAAChD,cAAc,CAACqB,GAAG,CAAC,CAAC;IACjD,KAAK,MAAMI,GAAG,IAAIJ,GAAG,EACnBoL,MAAM,CAAChL,GAAG,CAAC,GAAG2K,mBAAmB,CAAC/K,GAAG,CAACI,GAAG,CAAC,CAAC;IAC7C,IAAII,GAAG,CAACR,GAAG,EAAEpC,SAAS,CAAC,EACrBwN,MAAM,CAACxN,SAAS,CAAC,GAAGoC,GAAG,CAACpC,SAAS,CAAC;IACpC,OAAOwN,MAAM;EACf;EACA,SAASb,uBAAuBA,CAACvK,GAAG,EAAE;IACpC,IAAInB,OAAO,CAACmB,GAAG,CAAC,EAAE;MAChB,OAAO+K,mBAAmB,CAAC/K,GAAG,CAAC;IACjC,CAAC,MACC,OAAOA,GAAG;EACd;EACAiD,UAAU,CAAC,SAAS,EAAE;IACpBuG,aAAa;IACbhE,gBAAgB;IAChBT;EACF,CAAC,CAAC;AACJ;;AAEA;AACA,SAASsG,YAAYA,CAAA,EAAG;EACtB,MAAMC,QAAQ,SAASnK,GAAG,CAAC;IACzBvN,WAAWA,CAACsN,MAAM,EAAEgF,MAAM,EAAE;MAC1B,KAAK,CAAC,CAAC;MACP,IAAI,CAACrI,WAAW,CAAC,GAAG;QAClB0C,KAAK,EAAE,CAAC,CAAC;QACT+C,OAAO,EAAE4C,MAAM;QACfd,MAAM,EAAEc,MAAM,GAAGA,MAAM,CAACd,MAAM,GAAGhC,eAAe,CAAC,CAAC;QAClDwB,SAAS,EAAE,KAAK;QAChBS,UAAU,EAAE,KAAK;QACjB/D,KAAK,EAAE,KAAK,CAAC;QACbuE,SAAS,EAAE,KAAK,CAAC;QACjB/F,KAAK,EAAEoB,MAAM;QACbiF,MAAM,EAAE,IAAI;QACZC,SAAS,EAAE,KAAK;QAChB7B,QAAQ,EAAE;MACZ,CAAC;IACH;IACA,IAAIgH,IAAIA,CAAA,EAAG;MACT,OAAOlK,MAAM,CAAC,IAAI,CAACxD,WAAW,CAAC,CAAC,CAAC0N,IAAI;IACvC;IACA/K,GAAGA,CAACJ,GAAG,EAAE;MACP,OAAOiB,MAAM,CAAC,IAAI,CAACxD,WAAW,CAAC,CAAC,CAAC2C,GAAG,CAACJ,GAAG,CAAC;IAC3C;IACAO,GAAGA,CAACP,GAAG,EAAEtB,KAAK,EAAE;MACd,MAAMtH,KAAK,GAAG,IAAI,CAACqG,WAAW,CAAC;MAC/B2N,eAAe,CAAChU,KAAK,CAAC;MACtB,IAAI,CAAC6J,MAAM,CAAC7J,KAAK,CAAC,CAACgJ,GAAG,CAACJ,GAAG,CAAC,IAAIiB,MAAM,CAAC7J,KAAK,CAAC,CAACkJ,GAAG,CAACN,GAAG,CAAC,KAAKtB,KAAK,EAAE;QAC/D2M,cAAc,CAACjU,KAAK,CAAC;QACrB4P,WAAW,CAAC5P,KAAK,CAAC;QAClBA,KAAK,CAACqO,SAAS,CAAClF,GAAG,CAACP,GAAG,EAAE,IAAI,CAAC;QAC9B5I,KAAK,CAAC8J,KAAK,CAACX,GAAG,CAACP,GAAG,EAAEtB,KAAK,CAAC;QAC3BtH,KAAK,CAACqO,SAAS,CAAClF,GAAG,CAACP,GAAG,EAAE,IAAI,CAAC;MAChC;MACA,OAAO,IAAI;IACb;IACAuC,MAAMA,CAACvC,GAAG,EAAE;MACV,IAAI,CAAC,IAAI,CAACI,GAAG,CAACJ,GAAG,CAAC,EAAE;QAClB,OAAO,KAAK;MACd;MACA,MAAM5I,KAAK,GAAG,IAAI,CAACqG,WAAW,CAAC;MAC/B2N,eAAe,CAAChU,KAAK,CAAC;MACtBiU,cAAc,CAACjU,KAAK,CAAC;MACrB4P,WAAW,CAAC5P,KAAK,CAAC;MAClB,IAAIA,KAAK,CAACsI,KAAK,CAACU,GAAG,CAACJ,GAAG,CAAC,EAAE;QACxB5I,KAAK,CAACqO,SAAS,CAAClF,GAAG,CAACP,GAAG,EAAE,KAAK,CAAC;MACjC,CAAC,MAAM;QACL5I,KAAK,CAACqO,SAAS,CAAClD,MAAM,CAACvC,GAAG,CAAC;MAC7B;MACA5I,KAAK,CAAC8J,KAAK,CAACqB,MAAM,CAACvC,GAAG,CAAC;MACvB,OAAO,IAAI;IACb;IACAsC,KAAKA,CAAA,EAAG;MACN,MAAMlL,KAAK,GAAG,IAAI,CAACqG,WAAW,CAAC;MAC/B2N,eAAe,CAAChU,KAAK,CAAC;MACtB,IAAI6J,MAAM,CAAC7J,KAAK,CAAC,CAAC+T,IAAI,EAAE;QACtBE,cAAc,CAACjU,KAAK,CAAC;QACrB4P,WAAW,CAAC5P,KAAK,CAAC;QAClBA,KAAK,CAACqO,SAAS,GAAG,eAAgB,IAAI1E,GAAG,CAAC,CAAC;QAC3CpB,IAAI,CAACvI,KAAK,CAACsI,KAAK,EAAGM,GAAG,IAAK;UACzB5I,KAAK,CAACqO,SAAS,CAAClF,GAAG,CAACP,GAAG,EAAE,KAAK,CAAC;QACjC,CAAC,CAAC;QACF5I,KAAK,CAAC8J,KAAK,CAACoB,KAAK,CAAC,CAAC;MACrB;IACF;IACAxG,OAAOA,CAACwP,EAAE,EAAEC,OAAO,EAAE;MACnB,MAAMnU,KAAK,GAAG,IAAI,CAACqG,WAAW,CAAC;MAC/BwD,MAAM,CAAC7J,KAAK,CAAC,CAAC0E,OAAO,CAAC,CAAC0P,MAAM,EAAExL,GAAG,EAAEyL,IAAI,KAAK;QAC3CH,EAAE,CAAC/L,IAAI,CAACgM,OAAO,EAAE,IAAI,CAACjL,GAAG,CAACN,GAAG,CAAC,EAAEA,GAAG,EAAE,IAAI,CAAC;MAC5C,CAAC,CAAC;IACJ;IACAM,GAAGA,CAACN,GAAG,EAAE;MACP,MAAM5I,KAAK,GAAG,IAAI,CAACqG,WAAW,CAAC;MAC/B2N,eAAe,CAAChU,KAAK,CAAC;MACtB,MAAMsH,KAAK,GAAGuC,MAAM,CAAC7J,KAAK,CAAC,CAACkJ,GAAG,CAACN,GAAG,CAAC;MACpC,IAAI5I,KAAK,CAAC6N,UAAU,IAAI,CAACtG,WAAW,CAACD,KAAK,CAAC,EAAE;QAC3C,OAAOA,KAAK;MACd;MACA,IAAIA,KAAK,KAAKtH,KAAK,CAACsI,KAAK,CAACY,GAAG,CAACN,GAAG,CAAC,EAAE;QAClC,OAAOtB,KAAK;MACd;MACA,MAAMrH,KAAK,GAAGuP,WAAW,CAAClI,KAAK,EAAEtH,KAAK,CAAC;MACvCiU,cAAc,CAACjU,KAAK,CAAC;MACrBA,KAAK,CAAC8J,KAAK,CAACX,GAAG,CAACP,GAAG,EAAE3I,KAAK,CAAC;MAC3B,OAAOA,KAAK;IACd;IACAsK,IAAIA,CAAA,EAAG;MACL,OAAOV,MAAM,CAAC,IAAI,CAACxD,WAAW,CAAC,CAAC,CAACkE,IAAI,CAAC,CAAC;IACzC;IACA+J,MAAMA,CAAA,EAAG;MACP,MAAMC,QAAQ,GAAG,IAAI,CAAChK,IAAI,CAAC,CAAC;MAC5B,OAAO;QACL,CAACrE,MAAM,CAACqO,QAAQ,GAAG,MAAM,IAAI,CAACD,MAAM,CAAC,CAAC;QACtCE,IAAI,EAAEA,CAAA,KAAM;UACV,MAAMC,CAAC,GAAGF,QAAQ,CAACC,IAAI,CAAC,CAAC;UACzB,IAAIC,CAAC,CAACC,IAAI,EACR,OAAOD,CAAC;UACV,MAAMnN,KAAK,GAAG,IAAI,CAAC4B,GAAG,CAACuL,CAAC,CAACnN,KAAK,CAAC;UAC/B,OAAO;YACLoN,IAAI,EAAE,KAAK;YACXpN;UACF,CAAC;QACH;MACF,CAAC;IACH;IACAqB,OAAOA,CAAA,EAAG;MACR,MAAM4L,QAAQ,GAAG,IAAI,CAAChK,IAAI,CAAC,CAAC;MAC5B,OAAO;QACL,CAACrE,MAAM,CAACqO,QAAQ,GAAG,MAAM,IAAI,CAAC5L,OAAO,CAAC,CAAC;QACvC6L,IAAI,EAAEA,CAAA,KAAM;UACV,MAAMC,CAAC,GAAGF,QAAQ,CAACC,IAAI,CAAC,CAAC;UACzB,IAAIC,CAAC,CAACC,IAAI,EACR,OAAOD,CAAC;UACV,MAAMnN,KAAK,GAAG,IAAI,CAAC4B,GAAG,CAACuL,CAAC,CAACnN,KAAK,CAAC;UAC/B,OAAO;YACLoN,IAAI,EAAE,KAAK;YACXpN,KAAK,EAAE,CAACmN,CAAC,CAACnN,KAAK,EAAEA,KAAK;UACxB,CAAC;QACH;MACF,CAAC;IACH;IACA,EAAEjB,WAAW,EAAEH,MAAM,CAACqO,QAAQ,KAAK;MACjC,OAAO,IAAI,CAAC5L,OAAO,CAAC,CAAC;IACvB;EACF;EACA,SAASsJ,SAASA,CAACvI,MAAM,EAAEgF,MAAM,EAAE;IACjC,OAAO,IAAIoF,QAAQ,CAACpK,MAAM,EAAEgF,MAAM,CAAC;EACrC;EACA,SAASuF,cAAcA,CAACjU,KAAK,EAAE;IAC7B,IAAI,CAACA,KAAK,CAAC8J,KAAK,EAAE;MAChB9J,KAAK,CAACqO,SAAS,GAAG,eAAgB,IAAI1E,GAAG,CAAC,CAAC;MAC3C3J,KAAK,CAAC8J,KAAK,GAAG,IAAIH,GAAG,CAAC3J,KAAK,CAACsI,KAAK,CAAC;IACpC;EACF;EACA,MAAMqM,QAAQ,SAAS/K,GAAG,CAAC;IACzBxN,WAAWA,CAACsN,MAAM,EAAEgF,MAAM,EAAE;MAC1B,KAAK,CAAC,CAAC;MACP,IAAI,CAACrI,WAAW,CAAC,GAAG;QAClB0C,KAAK,EAAE,CAAC,CAAC;QACT+C,OAAO,EAAE4C,MAAM;QACfd,MAAM,EAAEc,MAAM,GAAGA,MAAM,CAACd,MAAM,GAAGhC,eAAe,CAAC,CAAC;QAClDwB,SAAS,EAAE,KAAK;QAChBS,UAAU,EAAE,KAAK;QACjB/D,KAAK,EAAE,KAAK,CAAC;QACbxB,KAAK,EAAEoB,MAAM;QACbiF,MAAM,EAAE,IAAI;QACZ3C,OAAO,EAAE,eAAgB,IAAIrC,GAAG,CAAC,CAAC;QAClCoD,QAAQ,EAAE,KAAK;QACf6B,SAAS,EAAE;MACb,CAAC;IACH;IACA,IAAImF,IAAIA,CAAA,EAAG;MACT,OAAOlK,MAAM,CAAC,IAAI,CAACxD,WAAW,CAAC,CAAC,CAAC0N,IAAI;IACvC;IACA/K,GAAGA,CAAC1B,KAAK,EAAE;MACT,MAAMtH,KAAK,GAAG,IAAI,CAACqG,WAAW,CAAC;MAC/B2N,eAAe,CAAChU,KAAK,CAAC;MACtB,IAAI,CAACA,KAAK,CAAC8J,KAAK,EAAE;QAChB,OAAO9J,KAAK,CAACsI,KAAK,CAACU,GAAG,CAAC1B,KAAK,CAAC;MAC/B;MACA,IAAItH,KAAK,CAAC8J,KAAK,CAACd,GAAG,CAAC1B,KAAK,CAAC,EACxB,OAAO,IAAI;MACb,IAAItH,KAAK,CAACgM,OAAO,CAAChD,GAAG,CAAC1B,KAAK,CAAC,IAAItH,KAAK,CAAC8J,KAAK,CAACd,GAAG,CAAChJ,KAAK,CAACgM,OAAO,CAAC9C,GAAG,CAAC5B,KAAK,CAAC,CAAC,EACvE,OAAO,IAAI;MACb,OAAO,KAAK;IACd;IACAgC,GAAGA,CAAChC,KAAK,EAAE;MACT,MAAMtH,KAAK,GAAG,IAAI,CAACqG,WAAW,CAAC;MAC/B2N,eAAe,CAAChU,KAAK,CAAC;MACtB,IAAI,CAAC,IAAI,CAACgJ,GAAG,CAAC1B,KAAK,CAAC,EAAE;QACpBsN,cAAc,CAAC5U,KAAK,CAAC;QACrB4P,WAAW,CAAC5P,KAAK,CAAC;QAClBA,KAAK,CAAC8J,KAAK,CAACR,GAAG,CAAChC,KAAK,CAAC;MACxB;MACA,OAAO,IAAI;IACb;IACA6D,MAAMA,CAAC7D,KAAK,EAAE;MACZ,IAAI,CAAC,IAAI,CAAC0B,GAAG,CAAC1B,KAAK,CAAC,EAAE;QACpB,OAAO,KAAK;MACd;MACA,MAAMtH,KAAK,GAAG,IAAI,CAACqG,WAAW,CAAC;MAC/B2N,eAAe,CAAChU,KAAK,CAAC;MACtB4U,cAAc,CAAC5U,KAAK,CAAC;MACrB4P,WAAW,CAAC5P,KAAK,CAAC;MAClB,OAAOA,KAAK,CAAC8J,KAAK,CAACqB,MAAM,CAAC7D,KAAK,CAAC,KAAKtH,KAAK,CAACgM,OAAO,CAAChD,GAAG,CAAC1B,KAAK,CAAC,GAAGtH,KAAK,CAAC8J,KAAK,CAACqB,MAAM,CAACnL,KAAK,CAACgM,OAAO,CAAC9C,GAAG,CAAC5B,KAAK,CAAC,CAAC,KAC1G;MACA,KAAK,CACN,CAAC;IACJ;IACA4D,KAAKA,CAAA,EAAG;MACN,MAAMlL,KAAK,GAAG,IAAI,CAACqG,WAAW,CAAC;MAC/B2N,eAAe,CAAChU,KAAK,CAAC;MACtB,IAAI6J,MAAM,CAAC7J,KAAK,CAAC,CAAC+T,IAAI,EAAE;QACtBa,cAAc,CAAC5U,KAAK,CAAC;QACrB4P,WAAW,CAAC5P,KAAK,CAAC;QAClBA,KAAK,CAAC8J,KAAK,CAACoB,KAAK,CAAC,CAAC;MACrB;IACF;IACAoJ,MAAMA,CAAA,EAAG;MACP,MAAMtU,KAAK,GAAG,IAAI,CAACqG,WAAW,CAAC;MAC/B2N,eAAe,CAAChU,KAAK,CAAC;MACtB4U,cAAc,CAAC5U,KAAK,CAAC;MACrB,OAAOA,KAAK,CAAC8J,KAAK,CAACwK,MAAM,CAAC,CAAC;IAC7B;IACA3L,OAAOA,CAAA,EAAG;MACR,MAAM3I,KAAK,GAAG,IAAI,CAACqG,WAAW,CAAC;MAC/B2N,eAAe,CAAChU,KAAK,CAAC;MACtB4U,cAAc,CAAC5U,KAAK,CAAC;MACrB,OAAOA,KAAK,CAAC8J,KAAK,CAACnB,OAAO,CAAC,CAAC;IAC9B;IACA4B,IAAIA,CAAA,EAAG;MACL,OAAO,IAAI,CAAC+J,MAAM,CAAC,CAAC;IACtB;IACA,EAAEjO,WAAW,EAAEH,MAAM,CAACqO,QAAQ,KAAK;MACjC,OAAO,IAAI,CAACD,MAAM,CAAC,CAAC;IACtB;IACA5P,OAAOA,CAACwP,EAAE,EAAEC,OAAO,EAAE;MACnB,MAAMI,QAAQ,GAAG,IAAI,CAACD,MAAM,CAAC,CAAC;MAC9B,IAAIrH,MAAM,GAAGsH,QAAQ,CAACC,IAAI,CAAC,CAAC;MAC5B,OAAO,CAACvH,MAAM,CAACyH,IAAI,EAAE;QACnBR,EAAE,CAAC/L,IAAI,CAACgM,OAAO,EAAElH,MAAM,CAAC3F,KAAK,EAAE2F,MAAM,CAAC3F,KAAK,EAAE,IAAI,CAAC;QAClD2F,MAAM,GAAGsH,QAAQ,CAACC,IAAI,CAAC,CAAC;MAC1B;IACF;EACF;EACA,SAAStC,SAASA,CAACxI,MAAM,EAAEgF,MAAM,EAAE;IACjC,OAAO,IAAIiG,QAAQ,CAACjL,MAAM,EAAEgF,MAAM,CAAC;EACrC;EACA,SAASkG,cAAcA,CAAC5U,KAAK,EAAE;IAC7B,IAAI,CAACA,KAAK,CAAC8J,KAAK,EAAE;MAChB9J,KAAK,CAAC8J,KAAK,GAAG,eAAgB,IAAIF,GAAG,CAAC,CAAC;MACvC5J,KAAK,CAACsI,KAAK,CAAC5D,OAAO,CAAE4C,KAAK,IAAK;QAC7B,IAAIC,WAAW,CAACD,KAAK,CAAC,EAAE;UACtB,MAAMrH,KAAK,GAAGuP,WAAW,CAAClI,KAAK,EAAEtH,KAAK,CAAC;UACvCA,KAAK,CAACgM,OAAO,CAAC7C,GAAG,CAAC7B,KAAK,EAAErH,KAAK,CAAC;UAC/BD,KAAK,CAAC8J,KAAK,CAACR,GAAG,CAACrJ,KAAK,CAAC;QACxB,CAAC,MAAM;UACLD,KAAK,CAAC8J,KAAK,CAACR,GAAG,CAAChC,KAAK,CAAC;QACxB;MACF,CAAC,CAAC;IACJ;EACF;EACA,SAAS0M,eAAeA,CAAChU,KAAK,EAAE;IAC9B,IAAIA,KAAK,CAAC+M,QAAQ,EAChBlG,GAAG,CAAC,CAAC,EAAEgO,IAAI,CAACC,SAAS,CAACjL,MAAM,CAAC7J,KAAK,CAAC,CAAC,CAAC;EACzC;EACAyL,UAAU,CAAC,QAAQ,EAAE;IAAEwG,SAAS;IAAEC;EAAU,CAAC,CAAC;AAChD;;AAEA;AACA,IAAI6C,KAAK,GAAG,IAAIvE,MAAM,CAAC,CAAC;AACxB,IAAI/Q,OAAO,GAAGsV,KAAK,CAACtV,OAAO;AAC3B,IAAIyR,kBAAkB,GAAG6D,KAAK,CAAC7D,kBAAkB,CAAC8D,IAAI,CACpDD,KACF,CAAC;AACD,IAAIzD,aAAa,GAAGyD,KAAK,CAACzD,aAAa,CAAC0D,IAAI,CAACD,KAAK,CAAC;AACnD,IAAIvD,uBAAuB,GAAGuD,KAAK,CAACvD,uBAAuB,CAACwD,IAAI,CAACD,KAAK,CAAC;AACvE,IAAInD,YAAY,GAAGmD,KAAK,CAACnD,YAAY,CAACoD,IAAI,CAACD,KAAK,CAAC;AACjD,IAAItD,WAAW,GAAGsD,KAAK,CAACtD,WAAW,CAACuD,IAAI,CAACD,KAAK,CAAC;AAC/C,IAAIpD,WAAW,GAAGoD,KAAK,CAACpD,WAAW,CAACqD,IAAI,CAACD,KAAK,CAAC;AAC/C,SAASE,SAASA,CAAC3N,KAAK,EAAE;EACxB,OAAOA,KAAK;AACd;AACA,SAAS4N,aAAaA,CAAC5N,KAAK,EAAE;EAC5B,OAAOA,KAAK;AACd","sources":["./libs/engagement/inbox-messages/data-access/src/index.ts","./libs/engagement/inbox-messages/data-access/src/lib/+state/inbox-messages-ngrx.module.ts","./libs/engagement/inbox-messages/data-access/src/lib/+state/inbox-messages.actions.ts","./libs/engagement/inbox-messages/data-access/src/lib/+state/inbox-messages.effects.ts","./libs/engagement/inbox-messages/data-access/src/lib/+state/inbox-messages.reducer.ts","./libs/engagement/inbox-messages/data-access/src/lib/+state/inbox-messages.selectors.ts","./libs/engagement/inbox-messages/data-access/src/lib/entitities/inbox-message.interface.ts","./libs/engagement/inbox-messages/data-access/src/lib/entitities/inbox-messages.enum.ts","./libs/engagement/inbox-messages/data-access/src/lib/facade/inbox-messages.facade.ts","./libs/engagement/inbox-messages/data-access/src/lib/index.ts","./libs/engagement/inbox-messages/data-access/src/lib/mappers/inbox-messages.mapper.ts","./libs/engagement/inbox-messages/data-access/src/lib/providers.ts","./libs/engagement/inbox-messages/data-access/src/lib/services/inbox-messages-datalayer.service.ts","./libs/engagement/inbox-messages/data-access/src/lib/services/inbox-messages.service.ts","./node_modules/immer/dist/immer.mjs"],"sourcesContent":["export * from './lib';\n","import { NgModule } from '@angular/core';\nimport { StoreModule } from '@ngrx/store';\nimport { inboxMessagesReducer, unreadInboxMessagesReducer } from './inbox-messages.reducer';\nimport { EffectsModule } from '@ngrx/effects';\nimport { InboxMessagesEffects } from './inbox-messages.effects';\n\n@NgModule({\n  imports: [\n    StoreModule.forFeature('inboxMessagesFeature', inboxMessagesReducer),\n    StoreModule.forFeature('unreadInboxMessagesFeature', unreadInboxMessagesReducer),\n    EffectsModule.forFeature([InboxMessagesEffects]),\n  ],\n})\nexport class InboxMessagesNgrxModule {}\n","import { createAction, props } from '@ngrx/store';\nimport { InboxMessage, InboxMessages } from '../entitities/inbox-message.interface';\n\nexport const getInboxMessages = createAction('[inbox-messages] get inbox messages');\n\nexport const getInboxMessagesSuccess = createAction(\n  '[inbox-messages] get inbox messages success',\n  props<{ inboxMessagesEntries: InboxMessages }>()\n);\n\nexport const getUnreadInboxMessagesCount = createAction('[inbox-messages] get unread inbox messages count');\n\nexport const getUnreadInboxMessagesCountSuccess = createAction(\n  '[inbox-messages] get unread inbox messages count success',\n  props<{ unreadInboxMessagesCount: number }>()\n);\n\nexport const getError = createAction('[inbox-messages] get inbox messages Error', props<{ error: string }>());\n\nexport const markMessagesAsRead = createAction('[inbox-messages] mark messages as read', props<{ ids: string[] }>());\n\nexport const markMessagesAsReadSuccess = createAction('[inbox-messages] mark messages as read success');\n\nexport const markMessagesAsReadError = createAction(\n  '[inbox-messages] mark messages as read error',\n  props<{ error: string }>()\n);\n\nexport const deleteInboxMessage = createAction(\n  '[inbox-messages] delete inbox message',\n  props<{ message: InboxMessage }>()\n);\n\nexport const deleteInboxMessageSuccess = createAction(\n  '[inbox-messages] delete inbox message success',\n  props<{ inboxMessagesEntries: InboxMessages }>()\n);\n\nexport const notificationClicked = createAction(\n  '[InboxMessagesDatalayer] Notification Clicked',\n  props<{ url: string }>()\n);\n\nexport const inboxMessageClicked = createAction(\n  '[InboxMessagesDatalayer] Inbox Message Clicked',\n  props<{ message: InboxMessage }>()\n);\n","import { Injectable } from '@angular/core';\nimport { Actions, createEffect, ofType } from '@ngrx/effects';\nimport { mergeMap, map, catchError, delay, tap, withLatestFrom, filter } from 'rxjs/operators';\nimport { of } from 'rxjs';\nimport { InboxMessagesService } from '../services/inbox-messages.service';\nimport * as InboxMessagesActions from './inbox-messages.actions';\nimport { InboxMessagesDatalayerService } from '../services/inbox-messages-datalayer.service';\nimport { Store } from '@ngrx/store';\nimport { selectInboxMessages, selectUnreadInboxMessagesCount } from './inbox-messages.selectors';\nimport { UrlService } from '@telenet/ng-lib-page';\n\n@Injectable()\nexport class InboxMessagesEffects {\n  constructor(\n    private readonly actions$: Actions,\n    private readonly inboxMessagesService: InboxMessagesService,\n    private readonly inboxMessagesDatalayerService: InboxMessagesDatalayerService,\n    private readonly store: Store,\n    private readonly urlService: UrlService\n  ) {}\n\n  fetchAllMessages$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(InboxMessagesActions.getInboxMessages),\n      mergeMap(() =>\n        this.inboxMessagesService.getAllInboxMessages().pipe(\n          map((inboxMessagesEntries) => InboxMessagesActions.getInboxMessagesSuccess({ inboxMessagesEntries })),\n          catchError((error) => of(InboxMessagesActions.getError({ error })))\n        )\n      )\n    )\n  );\n\n  deleteMessage$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(InboxMessagesActions.deleteInboxMessage),\n      mergeMap((action) =>\n        this.inboxMessagesService.deleteMessageById(action.message).pipe(\n          delay(500),\n          withLatestFrom(this.store.select(selectInboxMessages)),\n          map(([_, inboxMessagesEntries]) => {\n            const { content, id } = action.message;\n            const updatedMessages = inboxMessagesEntries?.otherInboxMessages.filter(\n              (message) => message.id !== action.message.id\n            );\n            this.inboxMessagesDatalayerService.sendInboxMessageDeleteEvent(id, content ? content.title : '');\n\n            return InboxMessagesActions.deleteInboxMessageSuccess({\n              inboxMessagesEntries: { ...inboxMessagesEntries, otherInboxMessages: updatedMessages },\n            });\n          }),\n          catchError((error) => of(InboxMessagesActions.getError({ error })))\n        )\n      )\n    )\n  );\n\n  markAllAsRead$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(InboxMessagesActions.getInboxMessagesSuccess),\n      mergeMap((action) =>\n        of(action).pipe(\n          filter((action) => !!action.inboxMessagesEntries?.unreadInboxMessages?.length),\n          tap((action) => {\n            const unreadMessageTitles =\n              action.inboxMessagesEntries.unreadInboxMessages?.map((message) => {\n                return message.content ? message.content.title : '';\n              }) || [];\n            if (unreadMessageTitles.length) {\n              this.inboxMessagesDatalayerService.sendInboxMessageImpressionEvents(unreadMessageTitles);\n            }\n          }),\n          mergeMap((action) => {\n            const unreadMessageIds =\n              action.inboxMessagesEntries.unreadInboxMessages?.map((message) => message.id) || [];\n            return this.inboxMessagesService.markMessagesAsReadByIds(unreadMessageIds).pipe(\n              delay(1000),\n              mergeMap(() => [\n                InboxMessagesActions.markMessagesAsRead({ ids: unreadMessageIds }),\n                InboxMessagesActions.markMessagesAsReadSuccess(),\n              ]),\n              catchError((error) => of(InboxMessagesActions.markMessagesAsReadError({ error })))\n            );\n          })\n        )\n      )\n    )\n  );\n\n  inboxMessagesUnreadCount$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(InboxMessagesActions.getUnreadInboxMessagesCount),\n      mergeMap(() =>\n        this.inboxMessagesService.getUnreadInboxMessagesCount().pipe(\n          map((unreadMessageCount) =>\n            InboxMessagesActions.getUnreadInboxMessagesCountSuccess({\n              unreadInboxMessagesCount: unreadMessageCount?.amount,\n            })\n          ),\n          catchError((error) => of(InboxMessagesActions.getError({ error })))\n        )\n      )\n    )\n  );\n\n  notificationClickedEvent$ = createEffect(\n    () =>\n      this.actions$.pipe(\n        ofType(InboxMessagesActions.notificationClicked),\n        withLatestFrom(this.store.select(selectUnreadInboxMessagesCount)),\n        tap(([action, unreadMessageCount]) => {\n          this.inboxMessagesDatalayerService.sendNotificationClickedEvent(action.url, !!unreadMessageCount);\n          if (!action?.url) return;\n          this.urlService.redirectTo(action.url);\n        })\n      ),\n    { dispatch: false }\n  );\n\n  inboxMessageClickedEvent$ = createEffect(\n    () =>\n      this.actions$.pipe(\n        ofType(InboxMessagesActions.inboxMessageClicked),\n        tap((action) => {\n          const { content } = action.message;\n          if (content && content.callToAction) {\n            const { link, name } = content.callToAction;\n            const { title } = content;\n\n            this.inboxMessagesDatalayerService.sendInboxMessageClickedEvent(title, link, name);\n            if (!link) return;\n            this.urlService.redirectTo(link);\n          }\n        })\n      ),\n    { dispatch: false }\n  );\n}\n","import { createReducer, on } from '@ngrx/store';\nimport { produce } from 'immer';\nimport * as InboxMessagesActions from './inbox-messages.actions';\nimport { InboxMessages } from '../entitities/inbox-message.interface';\n\nexport interface InboxMessagesState {\n  inboxMessagesEntries: InboxMessages;\n  loading: boolean;\n  loadError: string | undefined;\n}\n\nexport const initialState: InboxMessagesState = {\n  inboxMessagesEntries: {} as InboxMessages,\n  loading: false,\n  loadError: undefined,\n};\n\nexport interface UnreadInboxMessagesState {\n  count: number;\n  loading: boolean;\n  loadError: string | undefined;\n}\n\nexport const unreadInboxMessagesInitialState: UnreadInboxMessagesState = {\n  count: 0,\n  loading: false,\n  loadError: undefined,\n};\n\nexport const inboxMessagesReducer = createReducer(\n  initialState,\n  on(InboxMessagesActions.getInboxMessages, (state) => ({ ...state, loading: true })),\n  on(InboxMessagesActions.getInboxMessagesSuccess, (state, { inboxMessagesEntries }) =>\n    produce(state, (draft) => {\n      draft.inboxMessagesEntries = inboxMessagesEntries;\n      draft.loading = false;\n      draft.loadError = undefined;\n    })\n  ),\n  on(InboxMessagesActions.getError, (state, { error }) => ({ ...state, loading: false, loadError: error })),\n  on(InboxMessagesActions.deleteInboxMessage, (state) => ({ ...state, loading: true })),\n  on(InboxMessagesActions.deleteInboxMessageSuccess, (state, { inboxMessagesEntries }) =>\n    produce(state, (draft) => {\n      draft.inboxMessagesEntries = inboxMessagesEntries;\n      draft.loading = false;\n      draft.loadError = undefined;\n    })\n  )\n);\n\nexport const unreadInboxMessagesReducer = createReducer(\n  unreadInboxMessagesInitialState,\n  on(InboxMessagesActions.getUnreadInboxMessagesCount, (state) => ({ ...state, loading: true })),\n  on(InboxMessagesActions.getUnreadInboxMessagesCountSuccess, (state, { unreadInboxMessagesCount }) =>\n    produce(state, (draft) => {\n      draft.count = unreadInboxMessagesCount;\n      draft.loading = false;\n      draft.loadError = undefined;\n    })\n  ),\n  on(InboxMessagesActions.getError, (state, { error }) => ({ ...state, loading: false, loadError: error }))\n);\n","import { createFeatureSelector, createSelector } from '@ngrx/store';\nimport { InboxMessagesState, UnreadInboxMessagesState } from './inbox-messages.reducer';\n\nexport const selectInboxMessagesState = createFeatureSelector<InboxMessagesState>('inboxMessagesFeature');\nexport const selectUnreadInboxMessagesCountState =\n  createFeatureSelector<UnreadInboxMessagesState>('unreadInboxMessagesFeature');\n\nexport const selectInboxMessages = createSelector(\n  selectInboxMessagesState,\n  (state: InboxMessagesState) => state?.inboxMessagesEntries\n);\nexport const selectLoading = createSelector(selectInboxMessagesState, (state: InboxMessagesState) => state.loading);\nexport const selectLoadError = createSelector(selectInboxMessagesState, (state: InboxMessagesState) => state.loadError);\n\nexport const selectUnreadInboxMessagesCount = createSelector(\n  selectUnreadInboxMessagesCountState,\n  (state: UnreadInboxMessagesState) => state?.count\n);\n","export interface InboxMessages {\n  pinnedInboxMessages: InboxMessage[];\n  otherInboxMessages: InboxMessage[];\n  unreadInboxMessages?: InboxMessage[];\n}\n\nexport interface InboxMessage {\n  id: string;\n  content?: Content;\n  messageAdded: MessageAdded;\n  seen: boolean;\n  read: boolean;\n  pinned: boolean;\n}\n\nexport interface Content {\n  lang: string;\n  title: string;\n  body: string;\n  callToAction: CallToAction;\n}\n\nexport interface CallToAction {\n  link: string;\n  name?: string;\n}\n\nexport interface MessageAdded {\n  amount: number;\n  unit: string;\n}\n","export enum BadgeType {\n  New,\n  Info,\n}\n","import { Injectable } from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport { Observable } from 'rxjs';\nimport { InboxMessage, InboxMessages } from '../entitities/inbox-message.interface';\nimport { InboxMessagesState } from '../+state/inbox-messages.reducer';\nimport * as InboxMessagesActions from '../+state/inbox-messages.actions';\nimport * as InboxMessagesSelectors from '../+state/inbox-messages.selectors';\nimport { InboxMessagesDatalayerService } from '../services/inbox-messages-datalayer.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class InboxMessagesFacade {\n  constructor(\n    private readonly store: Store<InboxMessagesState>,\n    private readonly inboxMessagesDatalayerService: InboxMessagesDatalayerService\n  ) {}\n\n  readonly loading$: Observable<boolean> = this.store.select(InboxMessagesSelectors.selectLoading);\n  readonly loadError$: Observable<string | undefined> = this.store.select(InboxMessagesSelectors.selectLoadError);\n  readonly inboxMessages$: Observable<InboxMessages> = this.store.select(InboxMessagesSelectors.selectInboxMessages);\n  readonly unreadInboxMessagesCount$: Observable<number> = this.store.select(\n    InboxMessagesSelectors.selectUnreadInboxMessagesCount\n  );\n\n  loadInboxMessages(): void {\n    this.store.dispatch(InboxMessagesActions.getInboxMessages());\n  }\n\n  loadUnreadInboxMessagesCount(): void {\n    this.store.dispatch(InboxMessagesActions.getUnreadInboxMessagesCount());\n  }\n\n  sendNotificationClickedEvent(url: string): void {\n    this.store.dispatch(InboxMessagesActions.notificationClicked({ url }));\n  }\n\n  sendInboxMessageClickedEvent(message: InboxMessage): void {\n    this.store.dispatch(InboxMessagesActions.inboxMessageClicked({ message }));\n  }\n\n  deleteMessage(message: InboxMessage): void {\n    this.store.dispatch(InboxMessagesActions.deleteInboxMessage({ message }));\n  }\n\n  initDataLayer(): void {\n    this.inboxMessagesDatalayerService.initDataLayer();\n  }\n}\n","export * from './entitities/inbox-message.interface';\nexport * from './entitities/inbox-messages.enum';\nexport * from './services/inbox-messages.service';\nexport * from './+state/inbox-messages-ngrx.module';\nexport * from './facade/inbox-messages.facade';\nexport * from './providers';\n","import { Injectable } from '@angular/core';\nimport { MapperInterface } from '@telenet/ng-lib-shared';\nimport { RawInboxMessage } from '../entitities/raw-inbox-message.interface';\nimport { TranslateService } from '@ngx-translate/core';\nimport { LanguageEnum } from '@telenet/ng-lib-page';\nimport { Content, InboxMessage, InboxMessages } from '../entitities/inbox-message.interface';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class InboxMessagesMapper implements MapperInterface<RawInboxMessage[], InboxMessages> {\n  constructor(private readonly translateService: TranslateService) {}\n\n  toModel(rawInboxMessages: RawInboxMessage[]): InboxMessages {\n    const messages = rawInboxMessages.map((rawInboxMessage: RawInboxMessage) =>\n      this.mapToInboxMessage(rawInboxMessage)\n    );\n\n    return {\n      pinnedInboxMessages: this.filterPinnedMessages(messages),\n      otherInboxMessages: this.filterOtherMessages(messages),\n      unreadInboxMessages: this.filterUnreadMessages(messages),\n    };\n  }\n\n  private mapToInboxMessage(rawInboxMessage: RawInboxMessage): InboxMessage {\n    if (!rawInboxMessage || !rawInboxMessage.contents) return {} as InboxMessage;\n\n    return {\n      id: rawInboxMessage.id,\n      seen: rawInboxMessage.seen,\n      read: rawInboxMessage.read,\n      pinned: rawInboxMessage.pinned,\n      content: this.filterSelectedLanguageContent(rawInboxMessage.contents),\n      messageAdded: rawInboxMessage.messageAdded,\n    };\n  }\n\n  private filterSelectedLanguageContent(contents: Content[]): Content {\n    const currentLanguage = this.translateService.currentLang || LanguageEnum.NL;\n    return contents.find((content) => content?.lang?.toLowerCase() === currentLanguage) || ({} as Content);\n  }\n\n  private filterPinnedMessages(inboxMessages: InboxMessage[]): InboxMessage[] {\n    return inboxMessages.filter((inboxMessage) => inboxMessage.pinned);\n  }\n\n  private filterOtherMessages(inboxMessages: InboxMessage[]): InboxMessage[] {\n    return inboxMessages.filter((inboxMessage) => !inboxMessage.pinned);\n  }\n\n  private filterUnreadMessages(inboxMessages: InboxMessage[]): InboxMessage[] {\n    return inboxMessages.filter((inboxMessage) => !inboxMessage.read);\n  }\n}\n","import { importProvidersFrom } from '@angular/core';\nimport { EffectsModule } from '@ngrx/effects';\nimport { StoreModule } from '@ngrx/store';\nimport { inboxMessagesReducer, unreadInboxMessagesReducer } from './+state/inbox-messages.reducer';\nimport { InboxMessagesEffects } from './+state/inbox-messages.effects';\n\nexport function provideInboxMessagesDomain() {\n  return [\n    importProvidersFrom(StoreModule.forFeature('inboxMessagesFeature', inboxMessagesReducer)),\n    importProvidersFrom(StoreModule.forFeature('unreadInboxMessagesFeature', unreadInboxMessagesReducer)),\n    importProvidersFrom(EffectsModule.forFeature([InboxMessagesEffects])),\n  ];\n}\n","import { Injectable } from '@angular/core';\nimport { AttributeEnum, DataLayerService, DataLayerServiceProvider } from '@telenet/ng-lib-datalayer';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class InboxMessagesDatalayerService {\n  private readonly MESSAGE_GROUP = 'inbox-messages';\n  private readonly PRIMARY_CATEGORY = 'general';\n\n  private readonly NOTIFICATION_NAME = 'notification';\n  private readonly NOTIFICATIONS_DATA = 'notifications';\n  private readonly ITEM_GROUP_NEW_MESSAGES = 'new messages';\n  private readonly ITEM_GROUP_NO_NEW_MESSAGES = 'no new messages';\n  private readonly ITEM_GROUP_DELETE_MESSAGE = 'delete message';\n\n  private readonly EVENT_NAME_HEADER_CLICKED = 'header clicked';\n  private readonly EVENT_TYPE_CLICK = 'click';\n\n  private readonly EVENT_NAME_NOTIFICATION_CARD = 'notification card';\n  private readonly EVENT_TYPE_IMPRESSION = 'impression';\n\n  constructor(\n    private readonly dataLayerServiceProvider: DataLayerServiceProvider,\n    private readonly dataLayerService: DataLayerService\n  ) {}\n\n  sendNotificationClickedEvent(url: string, unreadNotifications: boolean) {\n    const { KEY_ITEM_NAME, KEY_ITEM_DATA, KEY_ITEM_GROUP, KEY_DESTINATION_URL } = AttributeEnum;\n\n    const attributes = {\n      [KEY_ITEM_NAME]: this.NOTIFICATION_NAME,\n      [KEY_ITEM_DATA]: this.NOTIFICATIONS_DATA,\n      [KEY_ITEM_GROUP]: unreadNotifications ? this.ITEM_GROUP_NEW_MESSAGES : this.ITEM_GROUP_NO_NEW_MESSAGES,\n      [KEY_DESTINATION_URL]: url,\n    };\n\n    return this.sendEventWithAttributes(this.EVENT_NAME_HEADER_CLICKED, this.EVENT_TYPE_CLICK, attributes);\n  }\n\n  sendInboxMessageClickedEvent(title: string, url: string, buttonText?: string): void {\n    const { KEY_ITEM_NAME, KEY_ITEM_DATA, KEY_DESTINATION_URL } = AttributeEnum;\n\n    const attributes = {\n      [KEY_ITEM_NAME]: title,\n      [KEY_ITEM_DATA]: buttonText,\n      [KEY_DESTINATION_URL]: url,\n    };\n\n    this.sendEventWithAttributes(this.EVENT_NAME_NOTIFICATION_CARD, this.EVENT_TYPE_CLICK, attributes);\n  }\n\n  sendInboxMessageDeleteEvent(id: string, title?: string): void {\n    const { KEY_ITEM_NAME, KEY_ITEM_DATA, KEY_ITEM_GROUP } = AttributeEnum;\n\n    const attributes = {\n      [KEY_ITEM_NAME]: id,\n      [KEY_ITEM_DATA]: title,\n      [KEY_ITEM_GROUP]: this.ITEM_GROUP_DELETE_MESSAGE,\n    };\n\n    this.sendEventWithAttributes(this.EVENT_NAME_NOTIFICATION_CARD, this.EVENT_TYPE_CLICK, attributes);\n  }\n\n  sendInboxMessageImpressionEvents(titles: string[]): void {\n    if (titles && titles.length > 0) {\n      titles.forEach((title) => {\n        this.sendInboxMessageImpressionEvent(title);\n      });\n    }\n  }\n\n  sendInboxMessageImpressionEvent(title: string): void {\n    const { KEY_ITEM_NAME } = AttributeEnum;\n\n    const attributes = {\n      [KEY_ITEM_NAME]: title,\n    };\n\n    this.sendEventWithAttributes(this.EVENT_NAME_NOTIFICATION_CARD, this.EVENT_TYPE_IMPRESSION, attributes);\n  }\n\n  sendEventWithAttributes(name: string, type: string, attributes: Record<string, string | undefined>) {\n    const category = this.dataLayerService.createCategory(this.PRIMARY_CATEGORY, this.MESSAGE_GROUP);\n\n    const eventInfo = this.dataLayerService.createEventInfo(name, type, [this.MESSAGE_GROUP]);\n\n    return this.dataLayerService?.sendEvent({ eventInfo, attributes, category });\n  }\n\n  initDataLayer(): void {\n    this.dataLayerServiceProvider.init();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { OcapiCallConfig, OcapiService } from '@telenet/ng-lib-ocapi';\nimport { InboxMessagesMapper } from '../mappers/inbox-messages.mapper';\nimport { InboxMessage, InboxMessages } from '../entitities/inbox-message.interface';\nimport { RawInboxMessage } from '../entitities/raw-inbox-message.interface';\nimport { RawUnreadMessages } from '../entitities/raw-unread-messages.interface';\nimport { UnreadMessagesResponse } from '../entitities/unread-messages-response.interface';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class InboxMessagesService {\n  private readonly MESSAGE_GROUP = 'inbox-messages';\n  private readonly INBOX_MESSAGES_API_ENDPOINT = '/public/api/inbox-messages-service/v1/inbox-messages';\n  private readonly ENDPOINT_UNREAD_AMOUNT = `${this.INBOX_MESSAGES_API_ENDPOINT}/unread/amount`;\n  private readonly ENDPOINT_READ_MESSAGES = `${this.INBOX_MESSAGES_API_ENDPOINT}/read`;\n\n  constructor(\n    private readonly ocapiService: OcapiService,\n    private readonly inboxMessagesMapper: InboxMessagesMapper\n  ) {}\n\n  getAllInboxMessages(): Observable<InboxMessages> {\n    const ocapiCallConfig = new OcapiCallConfig<RawInboxMessage[], InboxMessages>(\n      this.MESSAGE_GROUP,\n      this.INBOX_MESSAGES_API_ENDPOINT,\n      this.inboxMessagesMapper\n    );\n\n    return this.ocapiService.doGet(ocapiCallConfig);\n  }\n\n  getUnreadInboxMessagesCount(): Observable<RawUnreadMessages> {\n    const ocapiCallConfig = new OcapiCallConfig<RawUnreadMessages, RawUnreadMessages>(\n      this.MESSAGE_GROUP,\n      this.ENDPOINT_UNREAD_AMOUNT\n    );\n\n    return this.ocapiService.doGet(ocapiCallConfig);\n  }\n\n  markMessagesAsReadByIds(ids: string[]): Observable<string> {\n    const unreadMessagesMapper = {\n      toModel: (unreadMessagesResponse: UnreadMessagesResponse) => unreadMessagesResponse?.status,\n    };\n\n    const ocapiCallConfig = new OcapiCallConfig<UnreadMessagesResponse, string>(\n      this.MESSAGE_GROUP,\n      this.ENDPOINT_READ_MESSAGES,\n      unreadMessagesMapper,\n      { ids }\n    );\n\n    return this.ocapiService.doPut(ocapiCallConfig);\n  }\n\n  deleteMessageById(message: InboxMessage): Observable<string> {\n    const url = `${this.INBOX_MESSAGES_API_ENDPOINT}/${message.id}`;\n    const ocapiCallConfig = new OcapiCallConfig<UnreadMessagesResponse, string>(this.MESSAGE_GROUP, url);\n\n    return this.ocapiService.doDelete(ocapiCallConfig);\n  }\n}\n","// src/utils/env.ts\nvar NOTHING = Symbol.for(\"immer-nothing\");\nvar DRAFTABLE = Symbol.for(\"immer-draftable\");\nvar DRAFT_STATE = Symbol.for(\"immer-state\");\n\n// src/utils/errors.ts\nvar errors = process.env.NODE_ENV !== \"production\" ? [\n  // All error codes, starting by 0:\n  function(plugin) {\n    return `The plugin for '${plugin}' has not been loaded into Immer. To enable the plugin, import and call \\`enable${plugin}()\\` when initializing your application.`;\n  },\n  function(thing) {\n    return `produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${thing}'`;\n  },\n  \"This object has been frozen and should not be mutated\",\n  function(data) {\n    return \"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \" + data;\n  },\n  \"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",\n  \"Immer forbids circular references\",\n  \"The first or second argument to `produce` must be a function\",\n  \"The third argument to `produce` must be a function or undefined\",\n  \"First argument to `createDraft` must be a plain object, an array, or an immerable object\",\n  \"First argument to `finishDraft` must be a draft returned by `createDraft`\",\n  function(thing) {\n    return `'current' expects a draft, got: ${thing}`;\n  },\n  \"Object.defineProperty() cannot be used on an Immer draft\",\n  \"Object.setPrototypeOf() cannot be used on an Immer draft\",\n  \"Immer only supports deleting array indices\",\n  \"Immer only supports setting array indices and the 'length' property\",\n  function(thing) {\n    return `'original' expects a draft, got: ${thing}`;\n  }\n  // Note: if more errors are added, the errorOffset in Patches.ts should be increased\n  // See Patches.ts for additional errors\n] : [];\nfunction die(error, ...args) {\n  if (process.env.NODE_ENV !== \"production\") {\n    const e = errors[error];\n    const msg = typeof e === \"function\" ? e.apply(null, args) : e;\n    throw new Error(`[Immer] ${msg}`);\n  }\n  throw new Error(\n    `[Immer] minified error nr: ${error}. Full error at: https://bit.ly/3cXEKWf`\n  );\n}\n\n// src/utils/common.ts\nvar getPrototypeOf = Object.getPrototypeOf;\nfunction isDraft(value) {\n  return !!value && !!value[DRAFT_STATE];\n}\nfunction isDraftable(value) {\n  if (!value)\n    return false;\n  return isPlainObject(value) || Array.isArray(value) || !!value[DRAFTABLE] || !!value.constructor?.[DRAFTABLE] || isMap(value) || isSet(value);\n}\nvar objectCtorString = Object.prototype.constructor.toString();\nfunction isPlainObject(value) {\n  if (!value || typeof value !== \"object\")\n    return false;\n  const proto = getPrototypeOf(value);\n  if (proto === null) {\n    return true;\n  }\n  const Ctor = Object.hasOwnProperty.call(proto, \"constructor\") && proto.constructor;\n  if (Ctor === Object)\n    return true;\n  return typeof Ctor == \"function\" && Function.toString.call(Ctor) === objectCtorString;\n}\nfunction original(value) {\n  if (!isDraft(value))\n    die(15, value);\n  return value[DRAFT_STATE].base_;\n}\nfunction each(obj, iter) {\n  if (getArchtype(obj) === 0 /* Object */) {\n    Object.entries(obj).forEach(([key, value]) => {\n      iter(key, value, obj);\n    });\n  } else {\n    obj.forEach((entry, index) => iter(index, entry, obj));\n  }\n}\nfunction getArchtype(thing) {\n  const state = thing[DRAFT_STATE];\n  return state ? state.type_ : Array.isArray(thing) ? 1 /* Array */ : isMap(thing) ? 2 /* Map */ : isSet(thing) ? 3 /* Set */ : 0 /* Object */;\n}\nfunction has(thing, prop) {\n  return getArchtype(thing) === 2 /* Map */ ? thing.has(prop) : Object.prototype.hasOwnProperty.call(thing, prop);\n}\nfunction get(thing, prop) {\n  return getArchtype(thing) === 2 /* Map */ ? thing.get(prop) : thing[prop];\n}\nfunction set(thing, propOrOldValue, value) {\n  const t = getArchtype(thing);\n  if (t === 2 /* Map */)\n    thing.set(propOrOldValue, value);\n  else if (t === 3 /* Set */) {\n    thing.add(value);\n  } else\n    thing[propOrOldValue] = value;\n}\nfunction is(x, y) {\n  if (x === y) {\n    return x !== 0 || 1 / x === 1 / y;\n  } else {\n    return x !== x && y !== y;\n  }\n}\nfunction isMap(target) {\n  return target instanceof Map;\n}\nfunction isSet(target) {\n  return target instanceof Set;\n}\nfunction latest(state) {\n  return state.copy_ || state.base_;\n}\nfunction shallowCopy(base, strict) {\n  if (isMap(base)) {\n    return new Map(base);\n  }\n  if (isSet(base)) {\n    return new Set(base);\n  }\n  if (Array.isArray(base))\n    return Array.prototype.slice.call(base);\n  if (!strict && isPlainObject(base)) {\n    if (!getPrototypeOf(base)) {\n      const obj = /* @__PURE__ */ Object.create(null);\n      return Object.assign(obj, base);\n    }\n    return { ...base };\n  }\n  const descriptors = Object.getOwnPropertyDescriptors(base);\n  delete descriptors[DRAFT_STATE];\n  let keys = Reflect.ownKeys(descriptors);\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    const desc = descriptors[key];\n    if (desc.writable === false) {\n      desc.writable = true;\n      desc.configurable = true;\n    }\n    if (desc.get || desc.set)\n      descriptors[key] = {\n        configurable: true,\n        writable: true,\n        // could live with !!desc.set as well here...\n        enumerable: desc.enumerable,\n        value: base[key]\n      };\n  }\n  return Object.create(getPrototypeOf(base), descriptors);\n}\nfunction freeze(obj, deep = false) {\n  if (isFrozen(obj) || isDraft(obj) || !isDraftable(obj))\n    return obj;\n  if (getArchtype(obj) > 1) {\n    obj.set = obj.add = obj.clear = obj.delete = dontMutateFrozenCollections;\n  }\n  Object.freeze(obj);\n  if (deep)\n    each(obj, (_key, value) => freeze(value, true), true);\n  return obj;\n}\nfunction dontMutateFrozenCollections() {\n  die(2);\n}\nfunction isFrozen(obj) {\n  return Object.isFrozen(obj);\n}\n\n// src/utils/plugins.ts\nvar plugins = {};\nfunction getPlugin(pluginKey) {\n  const plugin = plugins[pluginKey];\n  if (!plugin) {\n    die(0, pluginKey);\n  }\n  return plugin;\n}\nfunction loadPlugin(pluginKey, implementation) {\n  if (!plugins[pluginKey])\n    plugins[pluginKey] = implementation;\n}\n\n// src/core/scope.ts\nvar currentScope;\nfunction getCurrentScope() {\n  return currentScope;\n}\nfunction createScope(parent_, immer_) {\n  return {\n    drafts_: [],\n    parent_,\n    immer_,\n    // Whenever the modified draft contains a draft from another scope, we\n    // need to prevent auto-freezing so the unowned draft can be finalized.\n    canAutoFreeze_: true,\n    unfinalizedDrafts_: 0\n  };\n}\nfunction usePatchesInScope(scope, patchListener) {\n  if (patchListener) {\n    getPlugin(\"Patches\");\n    scope.patches_ = [];\n    scope.inversePatches_ = [];\n    scope.patchListener_ = patchListener;\n  }\n}\nfunction revokeScope(scope) {\n  leaveScope(scope);\n  scope.drafts_.forEach(revokeDraft);\n  scope.drafts_ = null;\n}\nfunction leaveScope(scope) {\n  if (scope === currentScope) {\n    currentScope = scope.parent_;\n  }\n}\nfunction enterScope(immer2) {\n  return currentScope = createScope(currentScope, immer2);\n}\nfunction revokeDraft(draft) {\n  const state = draft[DRAFT_STATE];\n  if (state.type_ === 0 /* Object */ || state.type_ === 1 /* Array */)\n    state.revoke_();\n  else\n    state.revoked_ = true;\n}\n\n// src/core/finalize.ts\nfunction processResult(result, scope) {\n  scope.unfinalizedDrafts_ = scope.drafts_.length;\n  const baseDraft = scope.drafts_[0];\n  const isReplaced = result !== void 0 && result !== baseDraft;\n  if (isReplaced) {\n    if (baseDraft[DRAFT_STATE].modified_) {\n      revokeScope(scope);\n      die(4);\n    }\n    if (isDraftable(result)) {\n      result = finalize(scope, result);\n      if (!scope.parent_)\n        maybeFreeze(scope, result);\n    }\n    if (scope.patches_) {\n      getPlugin(\"Patches\").generateReplacementPatches_(\n        baseDraft[DRAFT_STATE].base_,\n        result,\n        scope.patches_,\n        scope.inversePatches_\n      );\n    }\n  } else {\n    result = finalize(scope, baseDraft, []);\n  }\n  revokeScope(scope);\n  if (scope.patches_) {\n    scope.patchListener_(scope.patches_, scope.inversePatches_);\n  }\n  return result !== NOTHING ? result : void 0;\n}\nfunction finalize(rootScope, value, path) {\n  if (isFrozen(value))\n    return value;\n  const state = value[DRAFT_STATE];\n  if (!state) {\n    each(\n      value,\n      (key, childValue) => finalizeProperty(rootScope, state, value, key, childValue, path),\n      true\n      // See #590, don't recurse into non-enumerable of non drafted objects\n    );\n    return value;\n  }\n  if (state.scope_ !== rootScope)\n    return value;\n  if (!state.modified_) {\n    maybeFreeze(rootScope, state.base_, true);\n    return state.base_;\n  }\n  if (!state.finalized_) {\n    state.finalized_ = true;\n    state.scope_.unfinalizedDrafts_--;\n    const result = state.copy_;\n    let resultEach = result;\n    let isSet2 = false;\n    if (state.type_ === 3 /* Set */) {\n      resultEach = new Set(result);\n      result.clear();\n      isSet2 = true;\n    }\n    each(\n      resultEach,\n      (key, childValue) => finalizeProperty(rootScope, state, result, key, childValue, path, isSet2)\n    );\n    maybeFreeze(rootScope, result, false);\n    if (path && rootScope.patches_) {\n      getPlugin(\"Patches\").generatePatches_(\n        state,\n        path,\n        rootScope.patches_,\n        rootScope.inversePatches_\n      );\n    }\n  }\n  return state.copy_;\n}\nfunction finalizeProperty(rootScope, parentState, targetObject, prop, childValue, rootPath, targetIsSet) {\n  if (process.env.NODE_ENV !== \"production\" && childValue === targetObject)\n    die(5);\n  if (isDraft(childValue)) {\n    const path = rootPath && parentState && parentState.type_ !== 3 /* Set */ && // Set objects are atomic since they have no keys.\n    !has(parentState.assigned_, prop) ? rootPath.concat(prop) : void 0;\n    const res = finalize(rootScope, childValue, path);\n    set(targetObject, prop, res);\n    if (isDraft(res)) {\n      rootScope.canAutoFreeze_ = false;\n    } else\n      return;\n  } else if (targetIsSet) {\n    targetObject.add(childValue);\n  }\n  if (isDraftable(childValue) && !isFrozen(childValue)) {\n    if (!rootScope.immer_.autoFreeze_ && rootScope.unfinalizedDrafts_ < 1) {\n      return;\n    }\n    finalize(rootScope, childValue);\n    if (!parentState || !parentState.scope_.parent_)\n      maybeFreeze(rootScope, childValue);\n  }\n}\nfunction maybeFreeze(scope, value, deep = false) {\n  if (!scope.parent_ && scope.immer_.autoFreeze_ && scope.canAutoFreeze_) {\n    freeze(value, deep);\n  }\n}\n\n// src/core/proxy.ts\nfunction createProxyProxy(base, parent) {\n  const isArray = Array.isArray(base);\n  const state = {\n    type_: isArray ? 1 /* Array */ : 0 /* Object */,\n    // Track which produce call this is associated with.\n    scope_: parent ? parent.scope_ : getCurrentScope(),\n    // True for both shallow and deep changes.\n    modified_: false,\n    // Used during finalization.\n    finalized_: false,\n    // Track which properties have been assigned (true) or deleted (false).\n    assigned_: {},\n    // The parent draft state.\n    parent_: parent,\n    // The base state.\n    base_: base,\n    // The base proxy.\n    draft_: null,\n    // set below\n    // The base copy with any updated values.\n    copy_: null,\n    // Called by the `produce` function.\n    revoke_: null,\n    isManual_: false\n  };\n  let target = state;\n  let traps = objectTraps;\n  if (isArray) {\n    target = [state];\n    traps = arrayTraps;\n  }\n  const { revoke, proxy } = Proxy.revocable(target, traps);\n  state.draft_ = proxy;\n  state.revoke_ = revoke;\n  return proxy;\n}\nvar objectTraps = {\n  get(state, prop) {\n    if (prop === DRAFT_STATE)\n      return state;\n    const source = latest(state);\n    if (!has(source, prop)) {\n      return readPropFromProto(state, source, prop);\n    }\n    const value = source[prop];\n    if (state.finalized_ || !isDraftable(value)) {\n      return value;\n    }\n    if (value === peek(state.base_, prop)) {\n      prepareCopy(state);\n      return state.copy_[prop] = createProxy(value, state);\n    }\n    return value;\n  },\n  has(state, prop) {\n    return prop in latest(state);\n  },\n  ownKeys(state) {\n    return Reflect.ownKeys(latest(state));\n  },\n  set(state, prop, value) {\n    const desc = getDescriptorFromProto(latest(state), prop);\n    if (desc?.set) {\n      desc.set.call(state.draft_, value);\n      return true;\n    }\n    if (!state.modified_) {\n      const current2 = peek(latest(state), prop);\n      const currentState = current2?.[DRAFT_STATE];\n      if (currentState && currentState.base_ === value) {\n        state.copy_[prop] = value;\n        state.assigned_[prop] = false;\n        return true;\n      }\n      if (is(value, current2) && (value !== void 0 || has(state.base_, prop)))\n        return true;\n      prepareCopy(state);\n      markChanged(state);\n    }\n    if (state.copy_[prop] === value && // special case: handle new props with value 'undefined'\n    (value !== void 0 || prop in state.copy_) || // special case: NaN\n    Number.isNaN(value) && Number.isNaN(state.copy_[prop]))\n      return true;\n    state.copy_[prop] = value;\n    state.assigned_[prop] = true;\n    return true;\n  },\n  deleteProperty(state, prop) {\n    if (peek(state.base_, prop) !== void 0 || prop in state.base_) {\n      state.assigned_[prop] = false;\n      prepareCopy(state);\n      markChanged(state);\n    } else {\n      delete state.assigned_[prop];\n    }\n    if (state.copy_) {\n      delete state.copy_[prop];\n    }\n    return true;\n  },\n  // Note: We never coerce `desc.value` into an Immer draft, because we can't make\n  // the same guarantee in ES5 mode.\n  getOwnPropertyDescriptor(state, prop) {\n    const owner = latest(state);\n    const desc = Reflect.getOwnPropertyDescriptor(owner, prop);\n    if (!desc)\n      return desc;\n    return {\n      writable: true,\n      configurable: state.type_ !== 1 /* Array */ || prop !== \"length\",\n      enumerable: desc.enumerable,\n      value: owner[prop]\n    };\n  },\n  defineProperty() {\n    die(11);\n  },\n  getPrototypeOf(state) {\n    return getPrototypeOf(state.base_);\n  },\n  setPrototypeOf() {\n    die(12);\n  }\n};\nvar arrayTraps = {};\neach(objectTraps, (key, fn) => {\n  arrayTraps[key] = function() {\n    arguments[0] = arguments[0][0];\n    return fn.apply(this, arguments);\n  };\n});\narrayTraps.deleteProperty = function(state, prop) {\n  if (process.env.NODE_ENV !== \"production\" && isNaN(parseInt(prop)))\n    die(13);\n  return arrayTraps.set.call(this, state, prop, void 0);\n};\narrayTraps.set = function(state, prop, value) {\n  if (process.env.NODE_ENV !== \"production\" && prop !== \"length\" && isNaN(parseInt(prop)))\n    die(14);\n  return objectTraps.set.call(this, state[0], prop, value, state[0]);\n};\nfunction peek(draft, prop) {\n  const state = draft[DRAFT_STATE];\n  const source = state ? latest(state) : draft;\n  return source[prop];\n}\nfunction readPropFromProto(state, source, prop) {\n  const desc = getDescriptorFromProto(source, prop);\n  return desc ? `value` in desc ? desc.value : (\n    // This is a very special case, if the prop is a getter defined by the\n    // prototype, we should invoke it with the draft as context!\n    desc.get?.call(state.draft_)\n  ) : void 0;\n}\nfunction getDescriptorFromProto(source, prop) {\n  if (!(prop in source))\n    return void 0;\n  let proto = getPrototypeOf(source);\n  while (proto) {\n    const desc = Object.getOwnPropertyDescriptor(proto, prop);\n    if (desc)\n      return desc;\n    proto = getPrototypeOf(proto);\n  }\n  return void 0;\n}\nfunction markChanged(state) {\n  if (!state.modified_) {\n    state.modified_ = true;\n    if (state.parent_) {\n      markChanged(state.parent_);\n    }\n  }\n}\nfunction prepareCopy(state) {\n  if (!state.copy_) {\n    state.copy_ = shallowCopy(\n      state.base_,\n      state.scope_.immer_.useStrictShallowCopy_\n    );\n  }\n}\n\n// src/core/immerClass.ts\nvar Immer2 = class {\n  constructor(config) {\n    this.autoFreeze_ = true;\n    this.useStrictShallowCopy_ = false;\n    /**\n     * The `produce` function takes a value and a \"recipe function\" (whose\n     * return value often depends on the base state). The recipe function is\n     * free to mutate its first argument however it wants. All mutations are\n     * only ever applied to a __copy__ of the base state.\n     *\n     * Pass only a function to create a \"curried producer\" which relieves you\n     * from passing the recipe function every time.\n     *\n     * Only plain objects and arrays are made mutable. All other objects are\n     * considered uncopyable.\n     *\n     * Note: This function is __bound__ to its `Immer` instance.\n     *\n     * @param {any} base - the initial state\n     * @param {Function} recipe - function that receives a proxy of the base state as first argument and which can be freely modified\n     * @param {Function} patchListener - optional function that will be called with all the patches produced here\n     * @returns {any} a new state, or the initial state if nothing was modified\n     */\n    this.produce = (base, recipe, patchListener) => {\n      if (typeof base === \"function\" && typeof recipe !== \"function\") {\n        const defaultBase = recipe;\n        recipe = base;\n        const self = this;\n        return function curriedProduce(base2 = defaultBase, ...args) {\n          return self.produce(base2, (draft) => recipe.call(this, draft, ...args));\n        };\n      }\n      if (typeof recipe !== \"function\")\n        die(6);\n      if (patchListener !== void 0 && typeof patchListener !== \"function\")\n        die(7);\n      let result;\n      if (isDraftable(base)) {\n        const scope = enterScope(this);\n        const proxy = createProxy(base, void 0);\n        let hasError = true;\n        try {\n          result = recipe(proxy);\n          hasError = false;\n        } finally {\n          if (hasError)\n            revokeScope(scope);\n          else\n            leaveScope(scope);\n        }\n        usePatchesInScope(scope, patchListener);\n        return processResult(result, scope);\n      } else if (!base || typeof base !== \"object\") {\n        result = recipe(base);\n        if (result === void 0)\n          result = base;\n        if (result === NOTHING)\n          result = void 0;\n        if (this.autoFreeze_)\n          freeze(result, true);\n        if (patchListener) {\n          const p = [];\n          const ip = [];\n          getPlugin(\"Patches\").generateReplacementPatches_(base, result, p, ip);\n          patchListener(p, ip);\n        }\n        return result;\n      } else\n        die(1, base);\n    };\n    this.produceWithPatches = (base, recipe) => {\n      if (typeof base === \"function\") {\n        return (state, ...args) => this.produceWithPatches(state, (draft) => base(draft, ...args));\n      }\n      let patches, inversePatches;\n      const result = this.produce(base, recipe, (p, ip) => {\n        patches = p;\n        inversePatches = ip;\n      });\n      return [result, patches, inversePatches];\n    };\n    if (typeof config?.autoFreeze === \"boolean\")\n      this.setAutoFreeze(config.autoFreeze);\n    if (typeof config?.useStrictShallowCopy === \"boolean\")\n      this.setUseStrictShallowCopy(config.useStrictShallowCopy);\n  }\n  createDraft(base) {\n    if (!isDraftable(base))\n      die(8);\n    if (isDraft(base))\n      base = current(base);\n    const scope = enterScope(this);\n    const proxy = createProxy(base, void 0);\n    proxy[DRAFT_STATE].isManual_ = true;\n    leaveScope(scope);\n    return proxy;\n  }\n  finishDraft(draft, patchListener) {\n    const state = draft && draft[DRAFT_STATE];\n    if (!state || !state.isManual_)\n      die(9);\n    const { scope_: scope } = state;\n    usePatchesInScope(scope, patchListener);\n    return processResult(void 0, scope);\n  }\n  /**\n   * Pass true to automatically freeze all copies created by Immer.\n   *\n   * By default, auto-freezing is enabled.\n   */\n  setAutoFreeze(value) {\n    this.autoFreeze_ = value;\n  }\n  /**\n   * Pass true to enable strict shallow copy.\n   *\n   * By default, immer does not copy the object descriptors such as getter, setter and non-enumrable properties.\n   */\n  setUseStrictShallowCopy(value) {\n    this.useStrictShallowCopy_ = value;\n  }\n  applyPatches(base, patches) {\n    let i;\n    for (i = patches.length - 1; i >= 0; i--) {\n      const patch = patches[i];\n      if (patch.path.length === 0 && patch.op === \"replace\") {\n        base = patch.value;\n        break;\n      }\n    }\n    if (i > -1) {\n      patches = patches.slice(i + 1);\n    }\n    const applyPatchesImpl = getPlugin(\"Patches\").applyPatches_;\n    if (isDraft(base)) {\n      return applyPatchesImpl(base, patches);\n    }\n    return this.produce(\n      base,\n      (draft) => applyPatchesImpl(draft, patches)\n    );\n  }\n};\nfunction createProxy(value, parent) {\n  const draft = isMap(value) ? getPlugin(\"MapSet\").proxyMap_(value, parent) : isSet(value) ? getPlugin(\"MapSet\").proxySet_(value, parent) : createProxyProxy(value, parent);\n  const scope = parent ? parent.scope_ : getCurrentScope();\n  scope.drafts_.push(draft);\n  return draft;\n}\n\n// src/core/current.ts\nfunction current(value) {\n  if (!isDraft(value))\n    die(10, value);\n  return currentImpl(value);\n}\nfunction currentImpl(value) {\n  if (!isDraftable(value) || isFrozen(value))\n    return value;\n  const state = value[DRAFT_STATE];\n  let copy;\n  if (state) {\n    if (!state.modified_)\n      return state.base_;\n    state.finalized_ = true;\n    copy = shallowCopy(value, state.scope_.immer_.useStrictShallowCopy_);\n  } else {\n    copy = shallowCopy(value, true);\n  }\n  each(copy, (key, childValue) => {\n    set(copy, key, currentImpl(childValue));\n  });\n  if (state) {\n    state.finalized_ = false;\n  }\n  return copy;\n}\n\n// src/plugins/patches.ts\nfunction enablePatches() {\n  const errorOffset = 16;\n  if (process.env.NODE_ENV !== \"production\") {\n    errors.push(\n      'Sets cannot have \"replace\" patches.',\n      function(op) {\n        return \"Unsupported patch operation: \" + op;\n      },\n      function(path) {\n        return \"Cannot apply patch, path doesn't resolve: \" + path;\n      },\n      \"Patching reserved attributes like __proto__, prototype and constructor is not allowed\"\n    );\n  }\n  const REPLACE = \"replace\";\n  const ADD = \"add\";\n  const REMOVE = \"remove\";\n  function generatePatches_(state, basePath, patches, inversePatches) {\n    switch (state.type_) {\n      case 0 /* Object */:\n      case 2 /* Map */:\n        return generatePatchesFromAssigned(\n          state,\n          basePath,\n          patches,\n          inversePatches\n        );\n      case 1 /* Array */:\n        return generateArrayPatches(state, basePath, patches, inversePatches);\n      case 3 /* Set */:\n        return generateSetPatches(\n          state,\n          basePath,\n          patches,\n          inversePatches\n        );\n    }\n  }\n  function generateArrayPatches(state, basePath, patches, inversePatches) {\n    let { base_, assigned_ } = state;\n    let copy_ = state.copy_;\n    if (copy_.length < base_.length) {\n      ;\n      [base_, copy_] = [copy_, base_];\n      [patches, inversePatches] = [inversePatches, patches];\n    }\n    for (let i = 0; i < base_.length; i++) {\n      if (assigned_[i] && copy_[i] !== base_[i]) {\n        const path = basePath.concat([i]);\n        patches.push({\n          op: REPLACE,\n          path,\n          // Need to maybe clone it, as it can in fact be the original value\n          // due to the base/copy inversion at the start of this function\n          value: clonePatchValueIfNeeded(copy_[i])\n        });\n        inversePatches.push({\n          op: REPLACE,\n          path,\n          value: clonePatchValueIfNeeded(base_[i])\n        });\n      }\n    }\n    for (let i = base_.length; i < copy_.length; i++) {\n      const path = basePath.concat([i]);\n      patches.push({\n        op: ADD,\n        path,\n        // Need to maybe clone it, as it can in fact be the original value\n        // due to the base/copy inversion at the start of this function\n        value: clonePatchValueIfNeeded(copy_[i])\n      });\n    }\n    for (let i = copy_.length - 1; base_.length <= i; --i) {\n      const path = basePath.concat([i]);\n      inversePatches.push({\n        op: REMOVE,\n        path\n      });\n    }\n  }\n  function generatePatchesFromAssigned(state, basePath, patches, inversePatches) {\n    const { base_, copy_ } = state;\n    each(state.assigned_, (key, assignedValue) => {\n      const origValue = get(base_, key);\n      const value = get(copy_, key);\n      const op = !assignedValue ? REMOVE : has(base_, key) ? REPLACE : ADD;\n      if (origValue === value && op === REPLACE)\n        return;\n      const path = basePath.concat(key);\n      patches.push(op === REMOVE ? { op, path } : { op, path, value });\n      inversePatches.push(\n        op === ADD ? { op: REMOVE, path } : op === REMOVE ? { op: ADD, path, value: clonePatchValueIfNeeded(origValue) } : { op: REPLACE, path, value: clonePatchValueIfNeeded(origValue) }\n      );\n    });\n  }\n  function generateSetPatches(state, basePath, patches, inversePatches) {\n    let { base_, copy_ } = state;\n    let i = 0;\n    base_.forEach((value) => {\n      if (!copy_.has(value)) {\n        const path = basePath.concat([i]);\n        patches.push({\n          op: REMOVE,\n          path,\n          value\n        });\n        inversePatches.unshift({\n          op: ADD,\n          path,\n          value\n        });\n      }\n      i++;\n    });\n    i = 0;\n    copy_.forEach((value) => {\n      if (!base_.has(value)) {\n        const path = basePath.concat([i]);\n        patches.push({\n          op: ADD,\n          path,\n          value\n        });\n        inversePatches.unshift({\n          op: REMOVE,\n          path,\n          value\n        });\n      }\n      i++;\n    });\n  }\n  function generateReplacementPatches_(baseValue, replacement, patches, inversePatches) {\n    patches.push({\n      op: REPLACE,\n      path: [],\n      value: replacement === NOTHING ? void 0 : replacement\n    });\n    inversePatches.push({\n      op: REPLACE,\n      path: [],\n      value: baseValue\n    });\n  }\n  function applyPatches_(draft, patches) {\n    patches.forEach((patch) => {\n      const { path, op } = patch;\n      let base = draft;\n      for (let i = 0; i < path.length - 1; i++) {\n        const parentType = getArchtype(base);\n        let p = path[i];\n        if (typeof p !== \"string\" && typeof p !== \"number\") {\n          p = \"\" + p;\n        }\n        if ((parentType === 0 /* Object */ || parentType === 1 /* Array */) && (p === \"__proto__\" || p === \"constructor\"))\n          die(errorOffset + 3);\n        if (typeof base === \"function\" && p === \"prototype\")\n          die(errorOffset + 3);\n        base = get(base, p);\n        if (typeof base !== \"object\")\n          die(errorOffset + 2, path.join(\"/\"));\n      }\n      const type = getArchtype(base);\n      const value = deepClonePatchValue(patch.value);\n      const key = path[path.length - 1];\n      switch (op) {\n        case REPLACE:\n          switch (type) {\n            case 2 /* Map */:\n              return base.set(key, value);\n            case 3 /* Set */:\n              die(errorOffset);\n            default:\n              return base[key] = value;\n          }\n        case ADD:\n          switch (type) {\n            case 1 /* Array */:\n              return key === \"-\" ? base.push(value) : base.splice(key, 0, value);\n            case 2 /* Map */:\n              return base.set(key, value);\n            case 3 /* Set */:\n              return base.add(value);\n            default:\n              return base[key] = value;\n          }\n        case REMOVE:\n          switch (type) {\n            case 1 /* Array */:\n              return base.splice(key, 1);\n            case 2 /* Map */:\n              return base.delete(key);\n            case 3 /* Set */:\n              return base.delete(patch.value);\n            default:\n              return delete base[key];\n          }\n        default:\n          die(errorOffset + 1, op);\n      }\n    });\n    return draft;\n  }\n  function deepClonePatchValue(obj) {\n    if (!isDraftable(obj))\n      return obj;\n    if (Array.isArray(obj))\n      return obj.map(deepClonePatchValue);\n    if (isMap(obj))\n      return new Map(\n        Array.from(obj.entries()).map(([k, v]) => [k, deepClonePatchValue(v)])\n      );\n    if (isSet(obj))\n      return new Set(Array.from(obj).map(deepClonePatchValue));\n    const cloned = Object.create(getPrototypeOf(obj));\n    for (const key in obj)\n      cloned[key] = deepClonePatchValue(obj[key]);\n    if (has(obj, DRAFTABLE))\n      cloned[DRAFTABLE] = obj[DRAFTABLE];\n    return cloned;\n  }\n  function clonePatchValueIfNeeded(obj) {\n    if (isDraft(obj)) {\n      return deepClonePatchValue(obj);\n    } else\n      return obj;\n  }\n  loadPlugin(\"Patches\", {\n    applyPatches_,\n    generatePatches_,\n    generateReplacementPatches_\n  });\n}\n\n// src/plugins/mapset.ts\nfunction enableMapSet() {\n  class DraftMap extends Map {\n    constructor(target, parent) {\n      super();\n      this[DRAFT_STATE] = {\n        type_: 2 /* Map */,\n        parent_: parent,\n        scope_: parent ? parent.scope_ : getCurrentScope(),\n        modified_: false,\n        finalized_: false,\n        copy_: void 0,\n        assigned_: void 0,\n        base_: target,\n        draft_: this,\n        isManual_: false,\n        revoked_: false\n      };\n    }\n    get size() {\n      return latest(this[DRAFT_STATE]).size;\n    }\n    has(key) {\n      return latest(this[DRAFT_STATE]).has(key);\n    }\n    set(key, value) {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      if (!latest(state).has(key) || latest(state).get(key) !== value) {\n        prepareMapCopy(state);\n        markChanged(state);\n        state.assigned_.set(key, true);\n        state.copy_.set(key, value);\n        state.assigned_.set(key, true);\n      }\n      return this;\n    }\n    delete(key) {\n      if (!this.has(key)) {\n        return false;\n      }\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      prepareMapCopy(state);\n      markChanged(state);\n      if (state.base_.has(key)) {\n        state.assigned_.set(key, false);\n      } else {\n        state.assigned_.delete(key);\n      }\n      state.copy_.delete(key);\n      return true;\n    }\n    clear() {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      if (latest(state).size) {\n        prepareMapCopy(state);\n        markChanged(state);\n        state.assigned_ = /* @__PURE__ */ new Map();\n        each(state.base_, (key) => {\n          state.assigned_.set(key, false);\n        });\n        state.copy_.clear();\n      }\n    }\n    forEach(cb, thisArg) {\n      const state = this[DRAFT_STATE];\n      latest(state).forEach((_value, key, _map) => {\n        cb.call(thisArg, this.get(key), key, this);\n      });\n    }\n    get(key) {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      const value = latest(state).get(key);\n      if (state.finalized_ || !isDraftable(value)) {\n        return value;\n      }\n      if (value !== state.base_.get(key)) {\n        return value;\n      }\n      const draft = createProxy(value, state);\n      prepareMapCopy(state);\n      state.copy_.set(key, draft);\n      return draft;\n    }\n    keys() {\n      return latest(this[DRAFT_STATE]).keys();\n    }\n    values() {\n      const iterator = this.keys();\n      return {\n        [Symbol.iterator]: () => this.values(),\n        next: () => {\n          const r = iterator.next();\n          if (r.done)\n            return r;\n          const value = this.get(r.value);\n          return {\n            done: false,\n            value\n          };\n        }\n      };\n    }\n    entries() {\n      const iterator = this.keys();\n      return {\n        [Symbol.iterator]: () => this.entries(),\n        next: () => {\n          const r = iterator.next();\n          if (r.done)\n            return r;\n          const value = this.get(r.value);\n          return {\n            done: false,\n            value: [r.value, value]\n          };\n        }\n      };\n    }\n    [(DRAFT_STATE, Symbol.iterator)]() {\n      return this.entries();\n    }\n  }\n  function proxyMap_(target, parent) {\n    return new DraftMap(target, parent);\n  }\n  function prepareMapCopy(state) {\n    if (!state.copy_) {\n      state.assigned_ = /* @__PURE__ */ new Map();\n      state.copy_ = new Map(state.base_);\n    }\n  }\n  class DraftSet extends Set {\n    constructor(target, parent) {\n      super();\n      this[DRAFT_STATE] = {\n        type_: 3 /* Set */,\n        parent_: parent,\n        scope_: parent ? parent.scope_ : getCurrentScope(),\n        modified_: false,\n        finalized_: false,\n        copy_: void 0,\n        base_: target,\n        draft_: this,\n        drafts_: /* @__PURE__ */ new Map(),\n        revoked_: false,\n        isManual_: false\n      };\n    }\n    get size() {\n      return latest(this[DRAFT_STATE]).size;\n    }\n    has(value) {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      if (!state.copy_) {\n        return state.base_.has(value);\n      }\n      if (state.copy_.has(value))\n        return true;\n      if (state.drafts_.has(value) && state.copy_.has(state.drafts_.get(value)))\n        return true;\n      return false;\n    }\n    add(value) {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      if (!this.has(value)) {\n        prepareSetCopy(state);\n        markChanged(state);\n        state.copy_.add(value);\n      }\n      return this;\n    }\n    delete(value) {\n      if (!this.has(value)) {\n        return false;\n      }\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      prepareSetCopy(state);\n      markChanged(state);\n      return state.copy_.delete(value) || (state.drafts_.has(value) ? state.copy_.delete(state.drafts_.get(value)) : (\n        /* istanbul ignore next */\n        false\n      ));\n    }\n    clear() {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      if (latest(state).size) {\n        prepareSetCopy(state);\n        markChanged(state);\n        state.copy_.clear();\n      }\n    }\n    values() {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      prepareSetCopy(state);\n      return state.copy_.values();\n    }\n    entries() {\n      const state = this[DRAFT_STATE];\n      assertUnrevoked(state);\n      prepareSetCopy(state);\n      return state.copy_.entries();\n    }\n    keys() {\n      return this.values();\n    }\n    [(DRAFT_STATE, Symbol.iterator)]() {\n      return this.values();\n    }\n    forEach(cb, thisArg) {\n      const iterator = this.values();\n      let result = iterator.next();\n      while (!result.done) {\n        cb.call(thisArg, result.value, result.value, this);\n        result = iterator.next();\n      }\n    }\n  }\n  function proxySet_(target, parent) {\n    return new DraftSet(target, parent);\n  }\n  function prepareSetCopy(state) {\n    if (!state.copy_) {\n      state.copy_ = /* @__PURE__ */ new Set();\n      state.base_.forEach((value) => {\n        if (isDraftable(value)) {\n          const draft = createProxy(value, state);\n          state.drafts_.set(value, draft);\n          state.copy_.add(draft);\n        } else {\n          state.copy_.add(value);\n        }\n      });\n    }\n  }\n  function assertUnrevoked(state) {\n    if (state.revoked_)\n      die(3, JSON.stringify(latest(state)));\n  }\n  loadPlugin(\"MapSet\", { proxyMap_, proxySet_ });\n}\n\n// src/immer.ts\nvar immer = new Immer2();\nvar produce = immer.produce;\nvar produceWithPatches = immer.produceWithPatches.bind(\n  immer\n);\nvar setAutoFreeze = immer.setAutoFreeze.bind(immer);\nvar setUseStrictShallowCopy = immer.setUseStrictShallowCopy.bind(immer);\nvar applyPatches = immer.applyPatches.bind(immer);\nvar createDraft = immer.createDraft.bind(immer);\nvar finishDraft = immer.finishDraft.bind(immer);\nfunction castDraft(value) {\n  return value;\n}\nfunction castImmutable(value) {\n  return value;\n}\nexport {\n  Immer2 as Immer,\n  applyPatches,\n  castDraft,\n  castImmutable,\n  createDraft,\n  current,\n  enableMapSet,\n  enablePatches,\n  finishDraft,\n  freeze,\n  DRAFTABLE as immerable,\n  isDraft,\n  isDraftable,\n  NOTHING as nothing,\n  original,\n  produce,\n  produceWithPatches,\n  setAutoFreeze,\n  setUseStrictShallowCopy\n};\n"],"names":["StoreModule","inboxMessagesReducer","unreadInboxMessagesReducer","EffectsModule","InboxMessagesEffects","InboxMessagesNgrxModule","_","_2","_3","forFeature","imports","i1","StoreFeatureModule","i2","EffectsFeatureModule","createAction","props","getInboxMessages","getInboxMessagesSuccess","getUnreadInboxMessagesCount","getUnreadInboxMessagesCountSuccess","getError","markMessagesAsRead","markMessagesAsReadSuccess","markMessagesAsReadError","deleteInboxMessage","deleteInboxMessageSuccess","notificationClicked","inboxMessageClicked","Actions","createEffect","ofType","mergeMap","map","catchError","delay","tap","withLatestFrom","filter","of","InboxMessagesService","InboxMessagesActions","InboxMessagesDatalayerService","Store","selectInboxMessages","selectUnreadInboxMessagesCount","UrlService","constructor","actions$","inboxMessagesService","inboxMessagesDatalayerService","store","urlService","fetchAllMessages$","pipe","getAllInboxMessages","inboxMessagesEntries","error","deleteMessage$","action","deleteMessageById","message","select","content","id","updatedMessages","otherInboxMessages","sendInboxMessageDeleteEvent","title","markAllAsRead$","unreadInboxMessages","length","unreadMessageTitles","sendInboxMessageImpressionEvents","unreadMessageIds","markMessagesAsReadByIds","ids","inboxMessagesUnreadCount$","unreadMessageCount","unreadInboxMessagesCount","amount","notificationClickedEvent$","sendNotificationClickedEvent","url","redirectTo","dispatch","inboxMessageClickedEvent$","callToAction","link","name","sendInboxMessageClickedEvent","i0","ɵɵinject","i3","i4","i5","factory","ɵfac","createReducer","on","produce","initialState","loading","loadError","undefined","unreadInboxMessagesInitialState","count","state","draft","createFeatureSelector","createSelector","selectInboxMessagesState","selectUnreadInboxMessagesCountState","selectLoading","selectLoadError","BadgeType","InboxMessagesSelectors","InboxMessagesFacade","loading$","loadError$","inboxMessages$","unreadInboxMessagesCount$","loadInboxMessages","loadUnreadInboxMessagesCount","deleteMessage","initDataLayer","providedIn","TranslateService","LanguageEnum","InboxMessagesMapper","translateService","toModel","rawInboxMessages","messages","rawInboxMessage","mapToInboxMessage","pinnedInboxMessages","filterPinnedMessages","filterOtherMessages","filterUnreadMessages","contents","seen","read","pinned","filterSelectedLanguageContent","messageAdded","currentLanguage","currentLang","NL","find","lang","toLowerCase","inboxMessages","inboxMessage","importProvidersFrom","provideInboxMessagesDomain","AttributeEnum","DataLayerService","DataLayerServiceProvider","dataLayerServiceProvider","dataLayerService","MESSAGE_GROUP","PRIMARY_CATEGORY","NOTIFICATION_NAME","NOTIFICATIONS_DATA","ITEM_GROUP_NEW_MESSAGES","ITEM_GROUP_NO_NEW_MESSAGES","ITEM_GROUP_DELETE_MESSAGE","EVENT_NAME_HEADER_CLICKED","EVENT_TYPE_CLICK","EVENT_NAME_NOTIFICATION_CARD","EVENT_TYPE_IMPRESSION","unreadNotifications","KEY_ITEM_NAME","KEY_ITEM_DATA","KEY_ITEM_GROUP","KEY_DESTINATION_URL","attributes","sendEventWithAttributes","buttonText","titles","forEach","sendInboxMessageImpressionEvent","type","category","createCategory","eventInfo","createEventInfo","sendEvent","init","OcapiCallConfig","OcapiService","ocapiService","inboxMessagesMapper","INBOX_MESSAGES_API_ENDPOINT","ENDPOINT_UNREAD_AMOUNT","ENDPOINT_READ_MESSAGES","ocapiCallConfig","doGet","unreadMessagesMapper","unreadMessagesResponse","status","doPut","doDelete","NOTHING","Symbol","for","DRAFTABLE","DRAFT_STATE","errors","process","env","NODE_ENV","plugin","thing","data","die","args","e","msg","apply","Error","getPrototypeOf","Object","isDraft","value","isDraftable","isPlainObject","Array","isArray","isMap","isSet","objectCtorString","prototype","toString","proto","Ctor","hasOwnProperty","call","Function","original","base_","each","obj","iter","getArchtype","entries","key","entry","index","type_","has","prop","get","set","propOrOldValue","t","add","is","x","y","target","Map","Set","latest","copy_","shallowCopy","base","strict","slice","create","assign","descriptors","getOwnPropertyDescriptors","keys","Reflect","ownKeys","i","desc","writable","configurable","enumerable","freeze","deep","isFrozen","clear","delete","dontMutateFrozenCollections","_key","plugins","getPlugin","pluginKey","loadPlugin","implementation","currentScope","getCurrentScope","createScope","parent_","immer_","drafts_","canAutoFreeze_","unfinalizedDrafts_","usePatchesInScope","scope","patchListener","patches_","inversePatches_","patchListener_","revokeScope","leaveScope","revokeDraft","enterScope","immer2","revoke_","revoked_","processResult","result","baseDraft","isReplaced","modified_","finalize","maybeFreeze","generateReplacementPatches_","rootScope","path","childValue","finalizeProperty","scope_","finalized_","resultEach","isSet2","generatePatches_","parentState","targetObject","rootPath","targetIsSet","assigned_","concat","res","autoFreeze_","createProxyProxy","parent","draft_","isManual_","traps","objectTraps","arrayTraps","revoke","proxy","Proxy","revocable","source","readPropFromProto","peek","prepareCopy","createProxy","getDescriptorFromProto","current2","currentState","markChanged","Number","isNaN","deleteProperty","getOwnPropertyDescriptor","owner","defineProperty","setPrototypeOf","fn","arguments","parseInt","useStrictShallowCopy_","Immer2","config","recipe","defaultBase","self","curriedProduce","base2","hasError","p","ip","produceWithPatches","patches","inversePatches","autoFreeze","setAutoFreeze","useStrictShallowCopy","setUseStrictShallowCopy","createDraft","current","finishDraft","applyPatches","patch","op","applyPatchesImpl","applyPatches_","proxyMap_","proxySet_","push","currentImpl","copy","enablePatches","errorOffset","REPLACE","ADD","REMOVE","basePath","generatePatchesFromAssigned","generateArrayPatches","generateSetPatches","clonePatchValueIfNeeded","assignedValue","origValue","unshift","baseValue","replacement","parentType","join","deepClonePatchValue","splice","from","k","v","cloned","enableMapSet","DraftMap","size","assertUnrevoked","prepareMapCopy","cb","thisArg","_value","_map","values","iterator","next","r","done","DraftSet","prepareSetCopy","JSON","stringify","immer","bind","castDraft","castImmutable","Immer","immerable","nothing"],"sourceRoot":"webpack:///","x_google_ignoreList":[14]}