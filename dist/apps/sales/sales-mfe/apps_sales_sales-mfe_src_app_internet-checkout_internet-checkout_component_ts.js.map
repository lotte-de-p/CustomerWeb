{"version":3,"file":"apps_sales_sales-mfe_src_app_internet-checkout_internet-checkout_component_ts.js","mappings":"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","sources":["./apps/sales/sales-mfe/src/app/hardware-checkout/classes/hardware-checkout-error.class.ts","./apps/sales/sales-mfe/src/app/hardware-checkout/constants/errors.constants.ts","./apps/sales/sales-mfe/src/app/hardware-checkout/enums/error.enum.ts","./apps/sales/sales-mfe/src/app/hardware-checkout/utils/header.util.ts","./apps/sales/sales-mfe/src/app/internet-checkout/classes/action-executer.ts","./apps/sales/sales-mfe/src/app/internet-checkout/classes/internet-checkout-error.class.ts","./apps/sales/sales-mfe/src/app/internet-checkout/constants/errors.constants.ts","./apps/sales/sales-mfe/src/app/internet-checkout/constants/flow/goliath-flow.constant.ts","./apps/sales/sales-mfe/src/app/internet-checkout/constants/flow/goliath-state-sequence.constant.ts","./apps/sales/sales-mfe/src/app/internet-checkout/constants/flow/initialization-actions.constants.ts","./apps/sales/sales-mfe/src/app/internet-checkout/constants/internet-checkout.constant.ts","./apps/sales/sales-mfe/src/app/internet-checkout/enums/error.enum.ts","./apps/sales/sales-mfe/src/app/internet-checkout/facade/internet-checkout.facade.ts","./apps/sales/sales-mfe/src/app/internet-checkout/internet-checkout.component.ts","./apps/sales/sales-mfe/src/app/internet-checkout/internet-checkout.component.html","./apps/sales/sales-mfe/src/app/internet-checkout/services/internet-checkout.service.ts","./apps/sales/sales-mfe/src/app/internet-checkout/services/reverse-proxy.service.ts","./apps/sales/sales-mfe/src/app/internet-checkout/utils/installation-address.util.ts","./apps/sales/sales-mfe/src/app/internet-checkout/utils/sales-order.util.ts","./node_modules/@ngneat/until-destroy/fesm2022/ngneat-until-destroy.mjs"],"sourcesContent":["import { ErrorObject } from '../interfaces/error.interface';\n\nexport class HardwareCheckoutError extends Error {\n  errorObject: ErrorObject;\n  constructor(errorObject: ErrorObject) {\n    super(errorObject.key);\n    this.errorObject = errorObject;\n  }\n}\n","import { ErrorRedirectUrlEnum } from '../enums/error.enum';\nimport { ErrorObject } from '../interfaces/error.interface';\n\nexport const errorTitlePrefix = 'ng.sales-checkout.title.error-';\nexport const errorMessagePrefix = 'ng.sales-checkout.text.error-';\nexport const errorButtonPrefix = 'ng.sales-checkout.button.error-';\n\nexport const UserNotLoggedInError = 'UserNotLoggedIn';\n\nexport const GenericError: ErrorObject = {\n  key: 'HC-0000',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const GetCustomerDataError: ErrorObject = {\n  key: 'HC-0001',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const EventStrategyError: ErrorObject = {\n  key: 'HC-0002',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\nexport const NoHardwareItemsFound: ErrorObject = {\n  key: 'HC-0003',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const OrderItemCreationFailed: ErrorObject = {\n  key: 'HC-0004',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const SalesOfferNotFound: ErrorObject = {\n  key: 'HC-0005',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const DiscountRuleNotFound: ErrorObject = {\n  key: 'HC-0006',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const DiscountCouldNotBeRemoved: ErrorObject = {\n  key: 'HC-0007',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const DiscountCouldNotBeAdded: ErrorObject = {\n  key: 'HC-0008',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const SalesOrderNotSet: ErrorObject = {\n  key: 'HC-0009',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const EligibilityError: ErrorObject = {\n  key: 'HC-0010',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const ContractSummaryUrlError: ErrorObject = {\n  key: 'HC-0011',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const NoBillingAccount: ErrorObject = {\n  key: 'HC-0012',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const NoDeliveryOrderItemFound: ErrorObject = {\n  key: 'HC-0014',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const SubmitSalesOrderFailed: ErrorObject = {\n  key: 'HC-0015',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\nexport const UpdateHomeDeliveryCharsError: ErrorObject = {\n  key: 'HC-0016',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const CheckoutDeliveryError: ErrorObject = {\n  key: 'HC-0017',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const CouldNotReadContractSummaryRequired: ErrorObject = {\n  key: 'HC-0018',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const CouldNotStoreSalesOrderOnSummary: ErrorObject = {\n  key: 'HC-0019',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const CreatePaymentTransactionFailed: ErrorObject = {\n  key: 'HC-0020',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const updateAwaitingPaymentFailed: ErrorObject = {\n  key: 'HC-0021',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const HardwareCreationFailed: ErrorObject = {\n  key: 'HC-0022',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const UserNotLoggedIn: ErrorObject = {\n  key: 'HC-0023',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const OcapiNotConfigured: ErrorObject = {\n  key: 'HC-0024',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const CustomerHasNoLocationAssociated: ErrorObject = {\n  key: 'HC-0025',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const NoHomeDeliveryOrderItem: ErrorObject = {\n  key: 'HC-0026',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const CorruptSdata: ErrorObject = {\n  key: 'HC-0026',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const AemInputNotSet: ErrorObject = {\n  key: 'HC-0027',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const CouldNotUpdateInstallationLocation: ErrorObject = {\n  key: 'HC-0028',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const AbandonableMailCouldNOtBeSet: ErrorObject = {\n  key: 'HC-0029',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const OmapiQueryNotConfigured: ErrorObject = {\n  key: 'HC-0030',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const PersonalIdentityCouldNotBeHandled: ErrorObject = {\n  key: 'HC-0031',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const CustomerAccountCouldNotBeHandled: ErrorObject = {\n  key: 'HC-0032',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nconst PreviousProcessingBaseErrorObject: Omit<ErrorObject, 'key'> = {\n  titleKey: 'generic',\n  descriptionKey: 'previous-order-processing',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const MandatoryFieldsAreMissing: ErrorObject = {\n  key: 'HC-0034',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const CouldNotParseAddress: ErrorObject = {\n  key: 'HC-0035',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const UpdateDeliveryCharsError: ErrorObject = {\n  key: 'HC-0036',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const FeasibilityError: ErrorObject = {\n  key: 'HC-0010',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const ProductNotActive: ErrorObject = {\n  key: 'HC-0031',\n  ...PreviousProcessingBaseErrorObject,\n};\n\nexport const PreviousSalesOrderStillInProcessing: ErrorObject = {\n  key: 'HC-0032',\n  ...PreviousProcessingBaseErrorObject,\n};\n\nexport const OperationProhibitedDueToIncompatibleStateOfOrderItem: ErrorObject = {\n  key: 'HC-0033',\n  ...PreviousProcessingBaseErrorObject,\n};\n\nexport const NcErrors: { key: string; error: ErrorObject }[] = [\n  {\n    key: 'OE-0100',\n    error: ProductNotActive,\n  },\n  {\n    key: 'OE-0071',\n    error: PreviousSalesOrderStillInProcessing,\n  },\n  {\n    key: 'OE-0069',\n    error: OperationProhibitedDueToIncompatibleStateOfOrderItem,\n  },\n];\n","export enum ErrorRedirectUrlEnum {\n  CUSTOMER_SERVICE_REDIRECT_URL,\n  CONTACT_US_REDIRECT_URL,\n}\n","import { HttpHeaders } from '@angular/common/http';\n\nexport class HeaderUtil {\n  static createHttpHeaders(currentUrl: string): HttpHeaders {\n    let httpHeaders = new HttpHeaders();\n    httpHeaders = httpHeaders.set('x-alt-referer', currentUrl);\n    httpHeaders = httpHeaders.set('X-Requested-With', 'XMLHttpRequest');\n    return httpHeaders;\n  }\n}\n","import { from, of, Observable } from 'rxjs';\nimport { catchError, concatMap } from 'rxjs/operators';\nimport { StateAction } from '@sales/goliath/data-access';\nimport { InternetCheckoutFacade } from '../facade/internet-checkout.facade';\n\nexport class ActionProcessor {\n  constructor(private readonly internetCheckoutFacade: InternetCheckoutFacade) {}\n\n  executeActions(stateActions: StateAction<InternetCheckoutFacade>[]): Observable<unknown> {\n    // Changed return type to any for general use\n    return from(stateActions).pipe(concatMap((action) => this.executeSingleAction(action)));\n  }\n\n  private executeSingleAction(action: StateAction<InternetCheckoutFacade>): Observable<unknown> {\n    // Handling the execution of each action\n    if (action.executor) {\n      // Call the executor with the service and wrap it in an observable context if not already an observable\n      const operation = action.executor(this.internetCheckoutFacade); // This should be a UnaryFunction<Observable<any>, Observable<any>>\n      return this.internetCheckoutFacade.salesOrder$.pipe(\n        operation, // Apply the operation provided by the executor\n        catchError((error) => {\n          console.error(`Error executing action for ${action.name}:`, error);\n          return of(`Error in action: ${action.name}`); // Continue stream with error info or a default value on error\n        })\n      );\n    } else {\n      console.warn(`No executor defined for action: ${action.name}`);\n      return of(`No executor for: ${action.name}`); // Return info if no executor\n    }\n  }\n}\n","import { ErrorObject } from '../interfaces/error.interface';\n\nexport class InternetCheckoutErrorClass extends Error {\n  errorObject: ErrorObject;\n  constructor(errorObject: ErrorObject) {\n    super(errorObject.key);\n    this.errorObject = errorObject;\n  }\n}\n","import { ErrorRedirectUrlEnum } from '../enums/error.enum';\nimport { ErrorObject } from '../interfaces/error.interface';\n\nexport const errorTitlePrefix = 'ng.sales-checkout.title.error-';\nexport const errorMessagePrefix = 'ng.sales-checkout.text.error-';\nexport const errorButtonPrefix = 'ng.sales-checkout.button.error-';\n\nexport const GenericError: ErrorObject = {\n  key: 'HC-0000',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n\nexport const EventStrategyError: ErrorObject = {\n  key: 'HC-0002',\n  titleKey: 'generic',\n  descriptionKey: 'generic',\n  buttonTextKey: 'generic',\n  type: ErrorRedirectUrlEnum.CONTACT_US_REDIRECT_URL,\n};\n","import { internetStateActions } from './goliath-state-sequence.constant';\nimport { DeliveryComponent } from '@sales/delivery/feat-delivery';\nimport { SummaryStepComponent } from '@sales/summary/feat-summary';\nimport { Flow, SalesOrderState, ShoppingBasket, ShoppingBasketEnum, StepNameEnum } from '@sales/goliath/data-access';\nimport { EasySwitchComponent } from '@sales/easy-switch/feat-easy-switch';\nimport { AppointmentComponent } from '@sales/appointment/feat-appointment';\nimport { InstallationTypeComponent } from '@sales/installation-type/feat-installation-type';\nimport { ThankYouStepComponent } from '@sales/thank-you/feat-thank-you';\nimport { InternetCheckoutFacade } from '../../facade/internet-checkout.facade';\nimport { FeatInstallationAddressComponent } from '@sales/address/feat-installation-address';\nimport { InstallationAddressUtil } from '../../utils/installation-address.util';\n\nexport const internetFlow: Flow<InternetCheckoutFacade> = {\n  name: 'Internet flow',\n  isRequired: (shoppingBasket: ShoppingBasket) =>\n    shoppingBasket.items.some((item) => item.type === ShoppingBasketEnum.INTERNET),\n  steps: [\n    {\n      name: StepNameEnum.INSTALLATION_ADDRESS,\n      component: FeatInstallationAddressComponent,\n      requiredStateBeforeLoad: {\n        state: SalesOrderState.ORDER_ITEMS_ADDED,\n      },\n      isRequired: (shoppingBasket) => InstallationAddressUtil.isRequired(shoppingBasket),\n    },\n    {\n      name: StepNameEnum.INSTALLATION_TYPE,\n      component: InstallationTypeComponent,\n      requiredStateBeforeLoad: {\n        state: SalesOrderState.ORDER_ITEMS_ADDED,\n      },\n      isRequired: () => true,\n    },\n    {\n      name: StepNameEnum.APPOINTMENT,\n      component: AppointmentComponent,\n      requiredStateBeforeLoad: {\n        state: SalesOrderState.INSTALLATION_CONFIGURED,\n      },\n      isRequired: () => true,\n    },\n    {\n      name: StepNameEnum.DELIVERY,\n      component: DeliveryComponent,\n      requiredStateBeforeLoad: {\n        state: SalesOrderState.INSTALLATION_CONFIGURED,\n      },\n      isRequired: () => true,\n    },\n    {\n      name: StepNameEnum.EASY_SWITCH,\n      component: EasySwitchComponent,\n      requiredStateBeforeLoad: {\n        state: SalesOrderState.INSTALLATION_CONFIGURED,\n      },\n      isRequired: () => true,\n    },\n    {\n      name: StepNameEnum.SUMMARY,\n      component: SummaryStepComponent,\n      requiredStateBeforeLoad: {\n        state: SalesOrderState.APPOINTMENT_CONFIGURED,\n      },\n      isRequired: () => true,\n    },\n    {\n      name: StepNameEnum.CONFIRMATION,\n      component: ThankYouStepComponent,\n      requiredStateBeforeLoad: {\n        state: SalesOrderState.APPOINTMENT_CONFIGURED,\n      },\n      isRequired: () => true,\n    },\n  ],\n  stateActions: internetStateActions,\n};\n","import { SalesOrderState, StateAction, StateActionEnum } from '@sales/goliath/data-access';\nimport { InternetCheckoutFacade } from '../../facade/internet-checkout.facade';\nimport { loadCustomerProducts } from './initialization-actions.constants';\nimport { InstallationAddressUtil } from '../../utils/installation-address.util';\n\nexport const defaultStateActions: StateAction<InternetCheckoutFacade>[] = [\n  loadCustomerProducts,\n  {\n    name: StateActionEnum.ADD_ORDER_ITEMS,\n    weight: 0,\n    description: 'Set installation address',\n    executor: (internetCheckoutFacade: InternetCheckoutFacade) =>\n      InstallationAddressUtil.loadAndSetCustomerActiveProductAddresses(internetCheckoutFacade),\n    afterExecutionHooks: [],\n    stateProduced: SalesOrderState.ORDER_ITEMS_ADDED,\n  },\n];\n\nexport const internetStateActions: StateAction<InternetCheckoutFacade>[] = [];\n","import { SalesOrderState, StateAction, StateActionEnum } from '@sales/goliath/data-access';\nimport { InternetCheckoutFacade } from '../../facade/internet-checkout.facade';\nimport { forkJoin, mergeMap, pipe } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nexport const loadCustomerProducts: StateAction<InternetCheckoutFacade> = {\n  name: StateActionEnum.EMPTY,\n  weight: 0,\n  description: 'Load customer products',\n  executor: (internetCheckoutFacade: InternetCheckoutFacade) =>\n    pipe(\n      mergeMap((salesOrder) => {\n        return forkJoin([\n          internetCheckoutFacade.getCustomerProducts(),\n          internetCheckoutFacade.getCustomerAccount(),\n        ]).pipe(\n          map(([customerProducts, customerAccount]) => {\n            internetCheckoutFacade.setCustomerProducts(customerProducts);\n            internetCheckoutFacade.setCustomerAccount(customerAccount);\n          }),\n          map(() => salesOrder)\n        );\n      })\n    ),\n  afterExecutionHooks: [],\n  stateProduced: SalesOrderState.INITIALIZED,\n};\n","export const InternetCheckoutConstant = {\n  MODULE_NAME: 'internet checkout',\n  ORDER_CORRECTION_IMAGE: 'order-correction.svg',\n  ORDER_CORRECTION_MOBILE_IMAGE: 'order-correction-mobile.svg',\n  SDATA: 'sdata',\n};\n","export enum ErrorRedirectUrlEnum {\n  CUSTOMER_SERVICE_REDIRECT_URL,\n  CONTACT_US_REDIRECT_URL,\n}\n","import { Injectable } from '@angular/core';\nimport { select, Store } from '@ngrx/store';\nimport { InstallationAddressInterface, setInstallationAddresses } from '@sales/address/data-access';\nimport { Observable, of } from 'rxjs';\nimport { EventInterface, selectEvent } from '@sales/events/data-access';\nimport { filter } from 'rxjs/operators';\nimport {\n  CustomerAccount,\n  CustomerData,\n  customerDataState,\n  CustomerProduct,\n  salesOfferOmapiProductsState,\n  salesOrderState,\n  SdataSalesOffer,\n  setCustomerAccount,\n  setCustomerProducts,\n  setOmapiProducts,\n  setSalesOffer,\n  setViewState,\n  ViewState,\n  viewState,\n} from '@sales/internet-checkout/data-access';\nimport {\n  Flow,\n  SalesOrderState,\n  setCurrentState,\n  setFlows,\n  setStateActions,\n  setSteps,\n  StateAction,\n  StateActionEnum,\n  stateActions,\n  Step,\n  steps,\n} from '@sales/goliath/data-access';\nimport { InternetCheckoutService } from '../services/internet-checkout.service';\nimport { ReverseProxyService } from '../services/reverse-proxy.service';\nimport { SalesOrderUtil } from '../utils/sales-order.util';\nimport { AddressFacade, AddressUnit } from '@sales/shared/address/data-access';\nimport { OmapiProduct, OmapiProductService } from '@telenet/ng-lib-omapi';\nimport { LanguageEnum, LanguageService } from '@telenet/ng-lib-page';\n\n@Injectable({ providedIn: 'root' })\nexport class InternetCheckoutFacade {\n  goliathSteps$ = this.store.select<Step[]>(steps);\n  goliathStateActions$ = this.store.select<StateAction<InternetCheckoutService>[]>(stateActions);\n\n  stepEvent$: Observable<EventInterface | undefined> = this.store.pipe(\n    select(selectEvent),\n    filter((val) => val !== undefined)\n  );\n  salesOrderState$ = this.store.select<SalesOrderState>(salesOrderState);\n  salesOrder$ = of({\n    empty: true,\n  });\n  customerData$ = this.store.select<CustomerData | undefined>(customerDataState);\n  salesOfferOmapiProducts$ = this.store.select<OmapiProduct[] | undefined>(salesOfferOmapiProductsState);\n\n  viewState$ = this.store.select<ViewState>(viewState);\n\n  language: LanguageEnum;\n\n  constructor(\n    private readonly store: Store,\n    private readonly reverseProxyService: ReverseProxyService,\n    private readonly addressFacade: AddressFacade,\n    private readonly omapiProductService: OmapiProductService,\n    private readonly languageService: LanguageService\n  ) {\n    this.language = this.languageService.getLanguage();\n  }\n\n  setInstallationAddresses(addresses: InstallationAddressInterface[]) {\n    this.store.dispatch(setInstallationAddresses({ addresses: addresses }));\n  }\n\n  getCustomerProducts(): Observable<CustomerProduct[]> {\n    return this.reverseProxyService.getCustomerProducts().pipe(SalesOrderUtil.handleNcErrors());\n  }\n\n  getOmapiProduct(productId: string): Observable<OmapiProduct> {\n    return this.omapiProductService.getProductById('internet-checkout', productId);\n  }\n\n  getCustomerAccount(): Observable<CustomerAccount> {\n    return this.reverseProxyService.getCustomerAccount().pipe(SalesOrderUtil.handleNcErrors());\n  }\n\n  setCustomerProducts(customerProducts: CustomerProduct[]) {\n    this.store.dispatch(setCustomerProducts({ customerProducts: customerProducts }));\n  }\n\n  setCustomerAccount(customerAccount: CustomerAccount) {\n    this.store.dispatch(setCustomerAccount({ customerAccount: customerAccount }));\n  }\n\n  setViewState(viewState: ViewState) {\n    this.store.dispatch(setViewState({ viewState: viewState }));\n  }\n\n  setFlows<T>(flows: Flow<T>[]): void {\n    this.store.dispatch(setFlows({ flows: flows as Flow<unknown>[] }));\n  }\n\n  setSteps(steps: Step[]): void {\n    this.store.dispatch(setSteps({ steps: steps }));\n  }\n\n  setStateActions<T>(stateActions: StateAction<T>[]): void {\n    this.store.dispatch(setStateActions({ stateActions: stateActions as StateAction<unknown>[] }));\n  }\n\n  setCurrentState(state: StateActionEnum): void {\n    this.store.dispatch(setCurrentState({ state: state }));\n  }\n\n  getAddressById(addressId: string): Observable<AddressUnit> {\n    return this.addressFacade.getAddressById(addressId).pipe(SalesOrderUtil.handleNcErrors());\n  }\n\n  setSalesOfferState(salesOffer: SdataSalesOffer[]) {\n    this.store.dispatch(setSalesOffer({ salesOffer: salesOffer }));\n  }\n\n  setOmapiProductsState(omapiProducts: OmapiProduct[]) {\n    this.store.dispatch(setOmapiProducts({ omapiProducts: omapiProducts }));\n  }\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ComponentStep, StepsNgrxModule } from '@sales/shared/data-access';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport { SalesStepperComponent } from '@sales/shared/feature-sales-stepper';\nimport { InternetCheckoutFacade } from './facade/internet-checkout.facade';\nimport { EventInterface, EventsNgrxModule } from '@sales/events/data-access';\nimport { combineLatest, Observable } from 'rxjs';\nimport { LoaderModule, LoaderService } from '@telenet/ng-lib-page';\nimport { InternetCheckoutService } from './services/internet-checkout.service';\nimport { StepFlowLibModule } from '@telenet/ng-lib-step-flow';\nimport { tap } from 'rxjs/operators';\nimport { ViewState, ViewStateEnum } from '@sales/hardware-checkout/data-access';\nimport { ErrorComponent } from '@sales/error/feat-error';\nimport { SalesInternetCheckoutNgrxModule } from '@sales/internet-checkout/data-access';\nimport { AddressNgrxModule } from '@sales/address/data-access';\n\n@Component({\n  standalone: true,\n  selector: 'tg-sales-internet-checkout',\n  templateUrl: './internet-checkout.component.html',\n  imports: [\n    CommonModule,\n    StepsNgrxModule,\n    SalesStepperComponent,\n    StepFlowLibModule,\n    LoaderModule,\n    ErrorComponent,\n    SalesInternetCheckoutNgrxModule,\n    AddressNgrxModule,\n    EventsNgrxModule,\n  ],\n})\n@UntilDestroy()\nexport class InternetCheckoutComponent implements OnInit {\n  @Input() enableMask: boolean;\n  @Input() enableLoader = true;\n  @Input() pageType: string;\n  @Input() customerServiceRedirectUrlInput: string | undefined;\n  @Input() contactUsRedirectUrlInput: string | undefined;\n  @Input() thankyouRedirectUrl: string | undefined;\n  @Input() termsAndConditionsUrl: string | undefined;\n\n  componentSteps: ComponentStep[] = [];\n  isLoaded = false;\n\n  viewState$: Observable<ViewState>;\n  viewStateEnum = ViewStateEnum;\n\n  constructor(\n    private readonly loaderService: LoaderService,\n    private readonly internetCheckoutFacade: InternetCheckoutFacade,\n    private readonly internetCheckoutService: InternetCheckoutService\n  ) {}\n\n  ngOnInit(): void {\n    this.loaderService.start();\n\n    combineLatest([this.internetCheckoutFacade.stepEvent$, this.internetCheckoutFacade.salesOrderState$])\n      .pipe(\n        this.internetCheckoutService.logDebug(),\n        this.internetCheckoutService.executeEventStrategy(),\n        untilDestroyed(this)\n      )\n      .subscribe({\n        next: (event: EventInterface | null) => {\n          this.loaderService.stop();\n          if (event) {\n            this.internetCheckoutService.goToNextStepIfNeeded(event);\n          }\n        },\n        error: (error) => {\n          this.handleError(error);\n        },\n      });\n\n    this.initialiseFlow();\n  }\n\n  nextButtonClickedEvent() {\n    console.log('next button clicked');\n  }\n\n  private initialiseFlow() {\n    try {\n      this.internetCheckoutService\n        .initialiseFlow()\n        .pipe(tap((componentSteps: ComponentStep[]) => (this.componentSteps = componentSteps)))\n        .pipe(untilDestroyed(this))\n        .subscribe({\n          next: () => {\n            this.isLoaded = true;\n            this.loaderService.stop();\n          },\n          error: (error) => {\n            this.handleError(error);\n          },\n        });\n    } catch (error) {\n      this.handleError(error as Error);\n    }\n  }\n\n  private handleError(error: Error) {\n    this.loaderService.stop();\n    this.internetCheckoutService.setError(error, this.customerServiceRedirectUrlInput, this.contactUsRedirectUrlInput);\n  }\n\n  protected readonly ViewStateEnum = ViewStateEnum;\n}\n","<app-loader\n  id=\"page-loader\"\n  [enableLoader]=\"enableLoader\"\n  [enableMask]=\"enableMask\"\n  [pageType]=\"pageType\"\n  [startByDefault]=\"false\">\n</app-loader>\n<tg-sales-error\n  *ngIf=\"(viewState$ | async)?.key === viewStateEnum.ERROR\"\n  [error]=\"(viewState$ | async)?.error\"></tg-sales-error>\n<ng-container *ngIf=\"isLoaded && !((viewState$ | async)?.key === viewStateEnum.ERROR)\" #element>\n  <tg-sales-stepper\n    *ngIf=\"componentSteps.length > 0\"\n    (nextButtonClicked)=\"nextButtonClickedEvent()\"\n    [showNavigation]=\"true\"\n    [showStepProgressBar]=\"true\"\n    [steps]=\"componentSteps\"></tg-sales-stepper>\n</ng-container>\n","import { LogFactory } from '@telenet/ng-lib-shared';\nimport { AssetService, JsonUrlService, LoaderService, UrlService } from '@telenet/ng-lib-page';\nimport { ComponentStep, StepFacade } from '@sales/shared/data-access';\nimport { EventInterface, EventTypeEnum } from '@sales/events/data-access';\nimport { forkJoin, mergeMap, Observable, OperatorFunction } from 'rxjs';\nimport { map, take, tap } from 'rxjs/operators';\nimport { ErrorViewModel } from '@sales/error/data-access';\nimport { InternetCheckoutConstant } from '../constants/internet-checkout.constant';\nimport { ErrorObject } from '../interfaces/error.interface';\nimport { InternetCheckoutFacade } from '../facade/internet-checkout.facade';\nimport { SdataSalesOffer, ViewStateEnum } from '@sales/internet-checkout/data-access';\nimport { InternetCheckoutErrorClass } from '../classes/internet-checkout-error.class';\nimport {\n  errorButtonPrefix,\n  errorMessagePrefix,\n  errorTitlePrefix,\n  EventStrategyError,\n  GenericError,\n} from '../constants/errors.constants';\nimport { ErrorRedirectUrlEnum } from '../enums/error.enum';\nimport { Injectable } from '@angular/core';\nimport { GoliathService, GoliathUtil } from '@sales/goliath/feat-goliath';\nimport { SalesOrderState, ShoppingBasketEnum, StateAction } from '@sales/goliath/data-access';\nimport { internetFlow } from '../constants/flow/goliath-flow.constant';\nimport { defaultStateActions } from '../constants/flow/goliath-state-sequence.constant';\nimport { ActionProcessor } from '../classes/action-executer';\nimport { OmapiProduct } from '@telenet/ng-lib-omapi';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class InternetCheckoutService {\n  private readonly log = LogFactory.createLogger(InternetCheckoutService);\n\n  constructor(\n    private readonly stepFacade: StepFacade,\n    private readonly loaderService: LoaderService,\n    private readonly internetCheckoutFacade: InternetCheckoutFacade,\n    private readonly goliathService: GoliathService,\n    private readonly urlService: UrlService,\n    private readonly jsonUrlService: JsonUrlService\n  ) {}\n\n  executeEventStrategy(): OperatorFunction<[EventInterface | undefined, SalesOrderState], EventInterface | null> {\n    // Using the goliath service we need to calculate the delta between the current step and the next one\n    // and execute all actions\n    return map(([stepEvent]) => {\n      if (stepEvent) {\n        return stepEvent;\n      }\n      throw EventStrategyError;\n    });\n  }\n\n  goToNextStepIfNeeded(event: EventInterface) {\n    if (event && event.eventType === EventTypeEnum.STEP_FINISHED) {\n      this.stepFacade.nextStepKey$.pipe(take(1)).subscribe({\n        next: () => {\n          this.loaderService.stop();\n          this.stepFacade.goToNextStep();\n        },\n      });\n    }\n  }\n\n  logDebug() {\n    return tap({\n      next: ([stepEvent, salesOrderState]) => {\n        this.log.logDebug('Received event: ', {\n          stepEvent: stepEvent,\n          salesOrderState: salesOrderState,\n        });\n      },\n    });\n  }\n\n  initialiseFlow(): Observable<ComponentStep[]> {\n    return this.initialiseRequestState().pipe(\n      map((omapiProducts) => {\n        const flows = [internetFlow];\n        const steps = this.goliathService.getSteps([internetFlow], {\n          items: [{ type: ShoppingBasketEnum.INTERNET }],\n          omapiProducts: omapiProducts,\n        });\n        const stateActions = this.goliathService.createActionsList(defaultStateActions, [internetFlow.stateActions]);\n\n        this.internetCheckoutFacade.setFlows<InternetCheckoutFacade>(GoliathUtil.removeComponentsFromFlows(flows));\n        this.internetCheckoutFacade.setSteps(GoliathUtil.removeComponentsFromSteps(steps));\n        this.internetCheckoutFacade.setStateActions<InternetCheckoutFacade>(stateActions);\n\n        this.stepFacade.setStepConfig({ steps: steps.map((step) => step.name.toString()) });\n        // Load the first step\n\n        const statesToProcess: SalesOrderState[] = this.goliathService.getStatesToProcess(\n          SalesOrderState.INITIALIZED,\n          steps.length > 0 ? steps[0].requiredStateBeforeLoad.state : SalesOrderState.INITIALIZED\n        );\n\n        const actionsToProcess: StateAction<InternetCheckoutFacade>[] = statesToProcess\n          .map((stateToProcess) => {\n            return stateActions.find((action) => action.stateProduced === stateToProcess);\n          })\n          .filter((action) => action !== undefined) as StateAction<InternetCheckoutFacade>[];\n\n        const processor = new ActionProcessor(this.internetCheckoutFacade);\n        processor.executeActions(actionsToProcess).subscribe({\n          next: (result) => console.log('Action result:', result),\n          error: (err) => console.error('Error processing actions:', err),\n          complete: () => console.log('All actions processed.'),\n        });\n\n        return steps.map((step) => {\n          const stepComponent: ComponentStep = {\n            key: step.name.toString(),\n            component: step.component,\n          };\n          return stepComponent;\n        });\n      })\n    );\n  }\n\n  // store SDATA from URL request parameter and resolve/store omapi information of the requested products\n  initialiseRequestState(): Observable<OmapiProduct[]> {\n    return this.getSalesOrderRequestFromSdata().pipe(\n      tap((salesOffer) => {\n        this.internetCheckoutFacade.setSalesOfferState(salesOffer);\n      }),\n      mergeMap((salesOffer) => {\n        const omapiProductRequests = salesOffer.map((offer) => this.internetCheckoutFacade.getOmapiProduct(offer.id));\n\n        return forkJoin(omapiProductRequests).pipe(\n          tap((omapiProducts) => this.internetCheckoutFacade.setOmapiProductsState(omapiProducts))\n        );\n      })\n    );\n  }\n\n  setOrderCorrection(errorObject: ErrorObject, url: string) {\n    const errorViewModel: ErrorViewModel = {\n      key: errorObject.key,\n      titleKey: errorTitlePrefix.concat(errorObject.titleKey),\n      buttonTextKey: errorButtonPrefix.concat(errorObject.buttonTextKey),\n      descriptionKey: errorMessagePrefix.concat(errorObject.descriptionKey),\n      image: AssetService.getImagePath(\n        InternetCheckoutConstant.MODULE_NAME,\n        InternetCheckoutConstant.ORDER_CORRECTION_IMAGE\n      ),\n      mobileImage: AssetService.getImagePath(\n        InternetCheckoutConstant.MODULE_NAME,\n        InternetCheckoutConstant.ORDER_CORRECTION_MOBILE_IMAGE\n      ),\n      redirectUrl: url,\n    };\n\n    this.internetCheckoutFacade.setViewState({\n      key: ViewStateEnum.ERROR,\n      showNavigation: false,\n      showBackButton: true,\n      error: errorViewModel,\n    });\n  }\n\n  setError(error: Error, customerServiceRedirectUrl: string | undefined, contactUsRedirectUrl: string | undefined) {\n    console.log(error.message, error);\n\n    let internetCheckoutError: InternetCheckoutErrorClass;\n\n    if (error instanceof InternetCheckoutErrorClass) {\n      internetCheckoutError = error;\n    } else {\n      internetCheckoutError = new InternetCheckoutErrorClass(GenericError);\n    }\n\n    const errorViewModel: ErrorViewModel = {\n      key: internetCheckoutError.errorObject.key,\n      titleKey: errorTitlePrefix.concat(internetCheckoutError.errorObject.titleKey),\n      descriptionKey: errorMessagePrefix.concat(internetCheckoutError.errorObject.descriptionKey),\n      buttonTextKey: errorButtonPrefix.concat(internetCheckoutError.errorObject.buttonTextKey),\n      redirectUrl: undefined,\n      image: AssetService.getImagePath(\n        InternetCheckoutConstant.MODULE_NAME,\n        InternetCheckoutConstant.ORDER_CORRECTION_IMAGE\n      ),\n      mobileImage: AssetService.getImagePath(\n        InternetCheckoutConstant.MODULE_NAME,\n        InternetCheckoutConstant.ORDER_CORRECTION_MOBILE_IMAGE\n      ),\n    };\n    if (customerServiceRedirectUrl && contactUsRedirectUrl) {\n      errorViewModel.redirectUrl =\n        internetCheckoutError.errorObject.type === ErrorRedirectUrlEnum.CUSTOMER_SERVICE_REDIRECT_URL\n          ? customerServiceRedirectUrl\n          : contactUsRedirectUrl;\n    }\n    this.internetCheckoutFacade.setViewState({\n      key: ViewStateEnum.ERROR,\n      showNavigation: false,\n      showBackButton: true,\n      error: errorViewModel,\n    });\n  }\n\n  getSalesOrderRequestFromSdata(): Observable<SdataSalesOffer[]> {\n    const encodedString = this.urlService.getRequestParamValue(InternetCheckoutConstant.SDATA, '');\n\n    if (encodedString !== '') {\n      return this.jsonUrlService.decompress(encodedString).pipe(\n        map((response) => {\n          if (response && response['offers'].length > 0) {\n            return response['offers'];\n          }\n        })\n      );\n    }\n    throw new Error('No sales order request found in the URL');\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { ConfigConstants, ConfigService } from '@telenet/ng-lib-config';\nimport { Observable } from 'rxjs';\nimport { HeaderUtil } from '../../hardware-checkout/utils/header.util';\nimport { UrlService } from '@telenet/ng-lib-page';\nimport { CustomerAccount, CustomerProduct } from '@sales/internet-checkout/data-access';\n\n@Injectable({ providedIn: 'root' })\nexport class ReverseProxyService {\n  baseUrl: string;\n  basePath = '/public/api/mytelenet-web-sales-checkout-rp';\n\n  businessDomainPlan = 'Mobile Plan,Internet,TV,Fixed Phone,Bundle,Streaming Services Container';\n\n  constructor(\n    private readonly http: HttpClient,\n    private readonly urlService: UrlService,\n    private readonly configService: ConfigService\n  ) {\n    this.baseUrl = this.configService.getConfig(ConfigConstants.OCAPI_URl);\n  }\n\n  getCustomerProducts(): Observable<CustomerProduct[]> {\n    const path = this.urlService.buildUrlWithParams(\n      '/v1/orderManagement/customerAccount/customerProduct',\n      new Map([['businessDomains', this.businessDomainPlan]])\n    );\n    return this.doGet<CustomerProduct[]>(this.getUrl(path));\n  }\n\n  getCustomerAccount(): Observable<CustomerAccount> {\n    const path = '/v1/customerManagement/customerAccount';\n    return this.doGet<CustomerAccount>(this.getUrl(path));\n  }\n\n  private getUrl(path: string) {\n    return `${this.baseUrl}${this.basePath}${path}`;\n  }\n\n  private doGet<T>(url: string): Observable<T> {\n    return this.http.get<T>(url, {\n      headers: HeaderUtil.createHttpHeaders(this.urlService.getCurrentUrl()),\n      withCredentials: true,\n    });\n  }\n}\n","import { AddressUnit, createAddressUtil } from '@sales/shared/address/data-access';\nimport { InstallationAddressInterface } from '@sales/address/data-access';\nimport { SalesOrder, ShoppingBasket } from '@sales/goliath/data-access';\nimport { InternetCheckoutFacade } from '../facade/internet-checkout.facade';\nimport { forkJoin, mergeMap, Observable, of, pipe, UnaryFunction } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { CustomerAccountUtil, CustomerProductUtil } from '@sales/internet-checkout/data-access';\nimport { LanguageEnum } from '@telenet/ng-lib-page';\n\nexport class InstallationAddressUtil {\n  static loadAndSetCustomerActiveProductAddresses(\n    internetCheckoutFacade: InternetCheckoutFacade\n  ): UnaryFunction<Observable<SalesOrder>, Observable<boolean | SalesOrder>> {\n    return pipe(\n      mergeMap((salesOrder) => {\n        return internetCheckoutFacade.customerData$.pipe(\n          mergeMap((customerData) => {\n            return customerData?.customerProducts && customerData.customerAccount\n              ? forkJoin(\n                  customerData.customerProducts\n                    .filter(CustomerProductUtil.isActiveOrSuspended)\n                    .filter(CustomerProductUtil.inUniqueLocation)\n                    .map((product) =>\n                      CustomerAccountUtil.getAddressIdForLocation(customerData.customerAccount, product.locationId)\n                    )\n                    .filter((addressId): addressId is string => !!addressId) // Filter out undefined/null addressId\n                    .map((addressId) => internetCheckoutFacade.getAddressById(addressId))\n                )\n              : of([]);\n          }),\n          map((addresses) =>\n            InstallationAddressUtil.mapToInstallationAddress(addresses, internetCheckoutFacade.language)\n          ),\n          map((installationAddresses) => {\n            internetCheckoutFacade.setInstallationAddresses(installationAddresses);\n            return salesOrder;\n          })\n        );\n      })\n    );\n  }\n\n  static isRequired(shoppingBasket: ShoppingBasket): boolean {\n    return shoppingBasket.omapiProducts.some((offer) => offer.requiresInstallation);\n  }\n\n  private static readonly mapToInstallationAddress = (\n    installationAddress: AddressUnit[],\n    language: LanguageEnum\n  ): InstallationAddressInterface[] => {\n    const selectedIfOnlyOne = installationAddress.length === 1;\n    return installationAddress\n      .map((address) => createAddressUtil(address, language))\n      .map(\n        (addressUtil) =>\n          <InstallationAddressInterface>{\n            id: addressUtil.getId(),\n            street: addressUtil.getStreet(),\n            houseNumber: addressUtil.getHouseNumber(),\n            postalCode: addressUtil.getPostalCode(),\n            municipality: addressUtil.getMunicipality(),\n            country: addressUtil.getCountry(),\n            isNew: false,\n            selected: selectedIfOnlyOne,\n            subHouseNumber: addressUtil.getSubHouseNumber(),\n            box: addressUtil.getBoxNumber(),\n            floor: addressUtil.getFloor(),\n          }\n      );\n  };\n}\n","import { Observable, pipe, UnaryFunction } from 'rxjs';\nimport { NcError } from '@sales/hardware-checkout/data-access';\nimport { map } from 'rxjs/operators';\nimport { GenericError, NcErrors } from '../../hardware-checkout/constants/errors.constants';\nimport { HardwareCheckoutError } from '../../hardware-checkout/classes/hardware-checkout-error.class';\n\nexport class SalesOrderUtil {\n  static handleNcErrors<T extends object>(): UnaryFunction<Observable<T | NcError>, Observable<T>> {\n    return pipe(\n      map((result: T | NcError) => {\n        if (this.isNcError(result)) {\n          const errorObject = NcErrors.find((error) => error.key === result.errorCode);\n          if (errorObject) {\n            throw new HardwareCheckoutError(errorObject.error);\n          }\n          throw new HardwareCheckoutError(GenericError);\n        }\n        return result as T;\n      })\n    );\n  }\n\n  static isNcError(result: unknown): result is NcError {\n    if (typeof result === 'object' && result !== null) {\n      const error = result as Partial<NcError>;\n\n      return (\n        typeof error.errorCode === 'string' &&\n        typeof error.errorType === 'string' &&\n        typeof error.errorMessage === 'string'\n      );\n    }\n    return false;\n  }\n}\n","import { Subject, Subscription, from, EMPTY } from 'rxjs';\nimport { NG_PIPE_DEF, getLContext, global } from '@angular/core';\nimport { mergeMap, takeUntil } from 'rxjs/operators';\n\nconst NG_PIPE_DEF = NG_PIPE_DEF;\nfunction isPipe(target) {\n    return !!target[NG_PIPE_DEF];\n}\n\n/**\n * Applied to instances and stores `Subject` instance when\n * no custom destroy method is provided.\n */\nconst DESTROY = Symbol('__destroy');\n/**\n * Applied to definitions and informs that class is decorated\n */\nconst DECORATOR_APPLIED = Symbol('__decoratorApplied');\n/**\n * If we use the `untilDestroyed` operator multiple times inside the single\n * instance providing different `destroyMethodName`, then all streams will\n * subscribe to the single subject. If any method is invoked, the subject will\n * emit and all streams will be unsubscribed. We wan't to prevent this behavior,\n * thus we store subjects under different symbols.\n */\nfunction getSymbol(destroyMethodName) {\n    if (typeof destroyMethodName === 'string') {\n        return Symbol(`__destroy__${destroyMethodName}`);\n    }\n    else {\n        return DESTROY;\n    }\n}\nfunction markAsDecorated(type) {\n    // Store this property on the prototype if it's an injectable class, component or directive.\n    // We will be able to handle class extension this way.\n    type.prototype[DECORATOR_APPLIED] = true;\n}\nfunction createSubjectOnTheInstance(instance, symbol) {\n    if (!instance[symbol]) {\n        instance[symbol] = new Subject();\n    }\n}\nfunction completeSubjectOnTheInstance(instance, symbol) {\n    if (instance[symbol]) {\n        instance[symbol].next();\n        instance[symbol].complete();\n        // We also have to re-assign this property thus in the future\n        // we will be able to create new subject on the same instance.\n        instance[symbol] = null;\n    }\n}\n\nfunction unsubscribe(property) {\n    if (property instanceof Subscription) {\n        property.unsubscribe();\n    }\n}\nfunction unsubscribeIfPropertyIsArrayLike(property) {\n    Array.isArray(property) && property.forEach(unsubscribe);\n}\nfunction decorateNgOnDestroy(ngOnDestroy, options) {\n    return function () {\n        // Invoke the original `ngOnDestroy` if it exists\n        ngOnDestroy && ngOnDestroy.call(this);\n        // It's important to use `this` instead of caching instance\n        // that may lead to memory leaks\n        completeSubjectOnTheInstance(this, getSymbol());\n        // Check if subscriptions are pushed to some array\n        if (options.arrayName) {\n            unsubscribeIfPropertyIsArrayLike(this[options.arrayName]);\n        }\n        // Loop through the properties and find subscriptions\n        if (options.checkProperties) {\n            for (const property in this) {\n                if (options.blackList?.includes(property)) {\n                    continue;\n                }\n                unsubscribe(this[property]);\n            }\n        }\n    };\n}\nfunction decorateProviderDirectiveOrComponent(type, options) {\n    type.prototype.ngOnDestroy = decorateNgOnDestroy(type.prototype.ngOnDestroy, options);\n}\nfunction decoratePipe(type, options) {\n    const def = type.pipe;\n    def.onDestroy = decorateNgOnDestroy(def.onDestroy, options);\n}\nfunction UntilDestroy(options = {}) {\n    return (type) => {\n        if (isPipe(type)) {\n            decoratePipe(type, options);\n        }\n        else {\n            decorateProviderDirectiveOrComponent(type, options);\n        }\n        markAsDecorated(type);\n    };\n}\n\n// `LView` is an array where each index matches the specific data structure.\n// The 7th element in an `LView` is an array of cleanup listeners. They are\n// invoked when the view is removed (similar to `ComponentRef.onDestroy`).\nconst CLEANUP = 7;\nconst CheckerHasBeenSet = Symbol('CheckerHasBeenSet');\nfunction setupSubjectUnsubscribedChecker(instance, destroy$) {\n    // This function is used within the `untilDestroyed` operator and setups a function that\n    // listens for the view removal and checks if the `destroy$` subject has any observers (usually `takeUntil`).\n    // Note: this code will not be shipped into production since it's guarded with `ngDevMode`,\n    // this means it'll exist only in development mode.\n    if (instance[CheckerHasBeenSet] || isAngularInTestMode()) {\n        return;\n    }\n    runOutsideAngular(() => from(Promise.resolve())\n        .pipe(mergeMap(() => {\n        let lContext;\n        try {\n            // The `getLContext` might not work for a pipe, because it's not a component nor a directive,\n            // which means there's no `RNode` for an instance.\n            lContext = getLContext(instance);\n        }\n        catch {\n            lContext = null;\n        }\n        const lView = lContext?.lView;\n        if (lView == null) {\n            return EMPTY;\n        }\n        const lCleanup = lView[CLEANUP] || (lView[CLEANUP] = []);\n        const cleanupHasBeenExecuted$ = new Subject();\n        // Note: this function is named for debugging purposes.\n        lCleanup.push(function untilDestroyedLCleanup() {\n            // We leave the Angular zone, so RxJS will also call subsequent `next` functions\n            // outside of the Angular zone, which is done to avoid scheduling a microtask (through\n            // `asapScheduler`) within the Angular zone.\n            runOutsideAngular(() => {\n                cleanupHasBeenExecuted$.next();\n                cleanupHasBeenExecuted$.complete();\n            });\n        });\n        return cleanupHasBeenExecuted$;\n    }), \n    // We can't use `observeOn(asapScheduler)` because this might break the app's change detection.\n    // RxJS schedulers coalesce tasks and then flush the queue, which means our task might be scheduled\n    // within the root zone, and then all of the tasks (that were set up by developers in the Angular zone)\n    // will also be flushed in the root zone.\n    mergeMap(() => Promise.resolve()))\n        .subscribe(() => {\n        // Note: The `observed` property is available only in RxJS@7.2.0, which will throw\n        // an error in lower versions. We have integration test with RxJS@6 to ensure we don't\n        // import operators from `rxjs`; that's why it's wrapped into braces. The `observers`\n        // property is also being deprecated.\n        const observed = destroy$['observed'] ?? destroy$['observers'].length > 0;\n        if (observed) {\n            console.warn(createMessage(instance));\n        }\n    }));\n    instance[CheckerHasBeenSet] = true;\n}\nfunction isAngularInTestMode() {\n    // Gets whether the code is currently running in a test environment.\n    // We don't use `declare const` because it might cause conflicts with the real typings.\n    return (\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    (typeof __karma__ !== 'undefined' && !!__karma__) ||\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        (typeof jasmine !== 'undefined' && !!jasmine) ||\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        (typeof jest !== 'undefined' && !!jest) ||\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        (typeof Mocha !== 'undefined' && !!Mocha) ||\n        // Jest is not defined in ESM mode since it must be access only by importing from `@jest/globals`.\n        // There's no way to check if we're in Jest ESM mode or not, but we can check if the `process` is defined.\n        // Note: it's required to check for `[object process]` because someone might be running unit tests with\n        // Webpack and shimming `process`.\n        (typeof process !== 'undefined' &&\n            Object.prototype.toString.call(process) === '[object process]'));\n}\nfunction runOutsideAngular(fn) {\n    // We cannot inject the `NgZone` class when running the checker. The `__ngContext__` is read\n    // for the first time within a microtask which triggers change detection; we want to avoid that.\n    // The `Zone` is always available globally when the `zone.js` is imported. Otherwise, it may be\n    // nooped through bootstrap options. The `NgZone.runOutsideAngular` calls `Zone.root.run`, so we're\n    // safe calling that function directly.\n    const Zone = global.Zone;\n    const isNgZoneEnabled = !!Zone && typeof Zone.root?.run === 'function';\n    return isNgZoneEnabled ? Zone.root.run(fn) : fn();\n}\nfunction createMessage(instance) {\n    return `\n  The ${instance.constructor.name} still has subscriptions that haven't been unsubscribed.\n  This may happen if the class extends another class decorated with @UntilDestroy().\n  The child class implements its own ngOnDestroy() method but doesn't call super.ngOnDestroy().\n  Let's look at the following example:\n  @UntilDestroy()\n  @Directive()\n  export abstract class BaseDirective {}\n  @Component({ template: '' })\n  export class ConcreteComponent extends BaseDirective implements OnDestroy {\n    constructor() {\n      super();\n      someObservable$.pipe(untilDestroyed(this)).subscribe();\n    }\n    ngOnDestroy(): void {\n      // Some logic here...\n    }\n  }\n  The BaseDirective.ngOnDestroy() will not be called since Angular will call ngOnDestroy()\n  on the ConcreteComponent, but not on the BaseDirective.\n  One of the solutions is to declare an empty ngOnDestroy method on the BaseDirective:\n  @UntilDestroy()\n  @Directive()\n  export abstract class BaseDirective {\n    ngOnDestroy(): void {}\n  }\n  @Component({ template: '' })\n  export class ConcreteComponent extends BaseDirective implements OnDestroy {\n    constructor() {\n      super();\n      someObservable$.pipe(untilDestroyed(this)).subscribe();\n    }\n    ngOnDestroy(): void {\n      // Some logic here...\n      super.ngOnDestroy();\n    }\n  }\n  `;\n}\n\nconst NG_DEV_MODE = typeof ngDevMode === 'undefined' || ngDevMode;\nfunction overrideNonDirectiveInstanceMethod(instance, destroyMethodName, symbol) {\n    const originalDestroy = instance[destroyMethodName];\n    if (NG_DEV_MODE && typeof originalDestroy !== 'function') {\n        throw new Error(`${instance.constructor.name} is using untilDestroyed but doesn't implement ${destroyMethodName}`);\n    }\n    createSubjectOnTheInstance(instance, symbol);\n    instance[destroyMethodName] = function () {\n        // eslint-disable-next-line prefer-rest-params\n        originalDestroy.apply(this, arguments);\n        completeSubjectOnTheInstance(this, symbol);\n        // We have to re-assign this property back to the original value.\n        // If the `untilDestroyed` operator is called for the same instance\n        // multiple times, then we will be able to get the original\n        // method again and not the patched one.\n        instance[destroyMethodName] = originalDestroy;\n    };\n}\nfunction untilDestroyed(instance, destroyMethodName) {\n    return (source) => {\n        const symbol = getSymbol(destroyMethodName);\n        // If `destroyMethodName` is passed then the developer applies\n        // this operator to something non-related to Angular DI system\n        if (typeof destroyMethodName === 'string') {\n            overrideNonDirectiveInstanceMethod(instance, destroyMethodName, symbol);\n        }\n        else {\n            NG_DEV_MODE && ensureClassIsDecorated(instance);\n            createSubjectOnTheInstance(instance, symbol);\n        }\n        const destroy$ = instance[symbol];\n        NG_DEV_MODE && setupSubjectUnsubscribedChecker(instance, destroy$);\n        return source.pipe(takeUntil(destroy$));\n    };\n}\nfunction ensureClassIsDecorated(instance) {\n    const prototype = Object.getPrototypeOf(instance);\n    const missingDecorator = !(DECORATOR_APPLIED in prototype);\n    if (missingDecorator) {\n        throw new Error('untilDestroyed operator cannot be used inside directives or ' +\n            'components or providers that are not decorated with UntilDestroy decorator');\n    }\n}\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { UntilDestroy, untilDestroyed };\n"],"names":["HardwareCheckoutError","Error","constructor","errorObject","key","ErrorRedirectUrlEnum","errorTitlePrefix","errorMessagePrefix","errorButtonPrefix","UserNotLoggedInError","GenericError","titleKey","descriptionKey","buttonTextKey","type","CONTACT_US_REDIRECT_URL","GetCustomerDataError","EventStrategyError","NoHardwareItemsFound","OrderItemCreationFailed","SalesOfferNotFound","DiscountRuleNotFound","DiscountCouldNotBeRemoved","DiscountCouldNotBeAdded","SalesOrderNotSet","EligibilityError","ContractSummaryUrlError","NoBillingAccount","NoDeliveryOrderItemFound","SubmitSalesOrderFailed","UpdateHomeDeliveryCharsError","CheckoutDeliveryError","CouldNotReadContractSummaryRequired","CouldNotStoreSalesOrderOnSummary","CreatePaymentTransactionFailed","updateAwaitingPaymentFailed","HardwareCreationFailed","UserNotLoggedIn","OcapiNotConfigured","CustomerHasNoLocationAssociated","NoHomeDeliveryOrderItem","CorruptSdata","AemInputNotSet","CouldNotUpdateInstallationLocation","AbandonableMailCouldNOtBeSet","OmapiQueryNotConfigured","PersonalIdentityCouldNotBeHandled","CustomerAccountCouldNotBeHandled","PreviousProcessingBaseErrorObject","MandatoryFieldsAreMissing","CouldNotParseAddress","UpdateDeliveryCharsError","FeasibilityError","ProductNotActive","PreviousSalesOrderStillInProcessing","OperationProhibitedDueToIncompatibleStateOfOrderItem","NcErrors","error","HttpHeaders","HeaderUtil","createHttpHeaders","currentUrl","httpHeaders","set","from","of","catchError","concatMap","ActionProcessor","internetCheckoutFacade","executeActions","stateActions","pipe","action","executeSingleAction","executor","operation","salesOrder$","console","name","warn","InternetCheckoutErrorClass","internetStateActions","DeliveryComponent","SummaryStepComponent","SalesOrderState","ShoppingBasketEnum","StepNameEnum","EasySwitchComponent","AppointmentComponent","InstallationTypeComponent","ThankYouStepComponent","FeatInstallationAddressComponent","InstallationAddressUtil","internetFlow","isRequired","shoppingBasket","items","some","item","INTERNET","steps","INSTALLATION_ADDRESS","component","requiredStateBeforeLoad","state","ORDER_ITEMS_ADDED","INSTALLATION_TYPE","APPOINTMENT","INSTALLATION_CONFIGURED","DELIVERY","EASY_SWITCH","SUMMARY","APPOINTMENT_CONFIGURED","CONFIRMATION","StateActionEnum","loadCustomerProducts","defaultStateActions","ADD_ORDER_ITEMS","weight","description","loadAndSetCustomerActiveProductAddresses","afterExecutionHooks","stateProduced","forkJoin","mergeMap","map","EMPTY","salesOrder","getCustomerProducts","getCustomerAccount","customerProducts","customerAccount","setCustomerProducts","setCustomerAccount","INITIALIZED","InternetCheckoutConstant","MODULE_NAME","ORDER_CORRECTION_IMAGE","ORDER_CORRECTION_MOBILE_IMAGE","SDATA","select","Store","setInstallationAddresses","selectEvent","filter","customerDataState","salesOfferOmapiProductsState","salesOrderState","setOmapiProducts","setSalesOffer","setViewState","viewState","setCurrentState","setFlows","setStateActions","setSteps","ReverseProxyService","SalesOrderUtil","AddressFacade","OmapiProductService","LanguageService","InternetCheckoutFacade","store","reverseProxyService","addressFacade","omapiProductService","languageService","goliathSteps$","goliathStateActions$","stepEvent$","val","undefined","salesOrderState$","empty","customerData$","salesOfferOmapiProducts$","viewState$","language","getLanguage","addresses","dispatch","handleNcErrors","getOmapiProduct","productId","getProductById","flows","getAddressById","addressId","setSalesOfferState","salesOffer","setOmapiProductsState","omapiProducts","_","i0","inject","i1","i2","i3","i4","i5","_2","factory","fac","providedIn","CommonModule","StepsNgrxModule","UntilDestroy","untilDestroyed","SalesStepperComponent","EventsNgrxModule","combineLatest","LoaderModule","LoaderService","InternetCheckoutService","StepFlowLibModule","tap","ViewStateEnum","ErrorComponent","SalesInternetCheckoutNgrxModule","AddressNgrxModule","element","property","tmp_0_0","pipeBind1","ctx_r0","elementStart","listener","InternetCheckoutComponent_ng_container_3_tg_sales_stepper_2_Template_tg_sales_stepper_nextButtonClicked_0_listener","restoreView","_r5","ctx_r4","nextContext","resetView","nextButtonClickedEvent","elementEnd","ctx_r3","componentSteps","elementContainerStart","template","InternetCheckoutComponent_ng_container_3_tg_sales_stepper_2_Template","elementContainerEnd","advance","ctx_r1","length","InternetCheckoutComponent","loaderService","internetCheckoutService","enableLoader","isLoaded","viewStateEnum","ngOnInit","start","logDebug","executeEventStrategy","subscribe","next","event","stop","goToNextStepIfNeeded","handleError","initialiseFlow","log","setError","customerServiceRedirectUrlInput","contactUsRedirectUrlInput","directiveInject","selectors","inputs","enableMask","pageType","thankyouRedirectUrl","termsAndConditionsUrl","standalone","features","StandaloneFeature","decls","vars","consts","template","InternetCheckoutComponent_Template","rf","ctx","InternetCheckoutComponent_tg_sales_error_1_Template","InternetCheckoutComponent_ng_container_3_Template","tmp_4_0","ERROR","tmp_5_0","NgIf","AsyncPipe","LoaderComponent","encapsulation","__decorate","LogFactory","AssetService","JsonUrlService","UrlService","StepFacade","EventTypeEnum","take","GoliathService","GoliathUtil","stepFacade","goliathService","urlService","jsonUrlService","createLogger","stepEvent","eventType","STEP_FINISHED","nextStepKey$","goToNextStep","initialiseRequestState","getSteps","createActionsList","removeComponentsFromFlows","removeComponentsFromSteps","setStepConfig","step","toString","statesToProcess","getStatesToProcess","actionsToProcess","stateToProcess","find","processor","result","err","complete","stepComponent","getSalesOrderRequestFromSdata","omapiProductRequests","offer","id","setOrderCorrection","url","errorViewModel","concat","image","getImagePath","mobileImage","redirectUrl","showNavigation","showBackButton","customerServiceRedirectUrl","contactUsRedirectUrl","message","internetCheckoutError","CUSTOMER_SERVICE_REDIRECT_URL","encodedString","getRequestParamValue","decompress","response","HttpClient","ConfigConstants","ConfigService","http","configService","basePath","businessDomainPlan","baseUrl","getConfig","OCAPI_URl","path","buildUrlWithParams","Map","doGet","getUrl","get","headers","getCurrentUrl","withCredentials","createAddressUtil","CustomerAccountUtil","CustomerProductUtil","customerData","isActiveOrSuspended","inUniqueLocation","product","getAddressIdForLocation","locationId","mapToInstallationAddress","installationAddresses","requiresInstallation","installationAddress","selectedIfOnlyOne","address","addressUtil","getId","street","getStreet","houseNumber","getHouseNumber","postalCode","getPostalCode","municipality","getMunicipality","country","getCountry","isNew","selected","subHouseNumber","getSubHouseNumber","box","getBoxNumber","floor","getFloor","isNcError","errorCode","errorType","errorMessage","Subject","Subscription","NG_PIPE_DEF","getLContext","global","takeUntil","NG_PIPE_DEF","isPipe","target","DESTROY","Symbol","DECORATOR_APPLIED","getSymbol","destroyMethodName","markAsDecorated","prototype","createSubjectOnTheInstance","instance","symbol","completeSubjectOnTheInstance","unsubscribe","property","unsubscribeIfPropertyIsArrayLike","Array","isArray","forEach","decorateNgOnDestroy","ngOnDestroy","options","call","arrayName","checkProperties","blackList","includes","decorateProviderDirectiveOrComponent","decoratePipe","def","pipe","onDestroy","CLEANUP","CheckerHasBeenSet","setupSubjectUnsubscribedChecker","destroy$","isAngularInTestMode","runOutsideAngular","Promise","resolve","lContext","lView","lCleanup","cleanupHasBeenExecuted$","push","untilDestroyedLCleanup","observed","createMessage","__karma__","jasmine","jest","Mocha","process","Object","fn","Zone","isNgZoneEnabled","root","run","NG_DEV_MODE","ngDevMode","overrideNonDirectiveInstanceMethod","originalDestroy","apply","arguments","source","ensureClassIsDecorated","getPrototypeOf","missingDecorator"],"sourceRoot":"webpack:///","x_google_ignoreList":[19]}