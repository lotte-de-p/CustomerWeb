{"version":3,"file":"libs_sales_etf_feat-etf_src_index_ts-_be5c1.js","mappings":"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","sources":["./libs/sales/etf/feat-etf/src/index.ts","./libs/sales/etf/feat-etf/src/lib/constants/etf-event-step-key.const.ts","./libs/sales/etf/feat-etf/src/lib/constants/etf-step-finished.const.ts","./libs/sales/etf/feat-etf/src/lib/etf.component.ts","./libs/sales/etf/feat-etf/src/lib/etf.component.html","./libs/sales/etf/feat-etf/src/lib/events/etf-step-loaded.const.ts","./node_modules/ng-inline-svg-2/lib_esmodule/index.js","./node_modules/ng-inline-svg-2/lib_esmodule/inline-svg.component.js","./node_modules/ng-inline-svg-2/lib_esmodule/inline-svg.config.js","./node_modules/ng-inline-svg-2/lib_esmodule/inline-svg.directive.js","./node_modules/ng-inline-svg-2/lib_esmodule/inline-svg.module.js","./node_modules/ng-inline-svg-2/lib_esmodule/inline-svg.service.js","./node_modules/ng-inline-svg-2/lib_esmodule/svg-cache.service.js","./node_modules/ng-inline-svg-2/lib_esmodule/svg-util.js"],"sourcesContent":["export * from './lib/etf.component';\nexport * from './lib/constants/etf-event-step-key.const';\nexport * from './lib/interfaces/response-model.interface';\nexport * from './lib/interfaces/view-model.interface';\nexport * from './lib/events/etf-step-loaded.const';\n","export const etfEventStepKey = 'etf-buy-off';\nexport const stepImage = 'etf-buy-off.svg';\n","import { EventInterface, EventTypeEnum } from '@sales/events/data-access';\nimport { etfEventStepKey } from './etf-event-step-key.const';\nimport { etfResponse, etfResponseIdObject } from '../interfaces/response-model.interface';\n\nexport const createEtfStepViewed = (\n  discountIdsToRemove: { id: string }[],\n  orderItemsToAddDiscounts: etfResponseIdObject[]\n): EventInterface<etfResponse> => {\n  return {\n    eventType: EventTypeEnum.STEP_FINISHED,\n    body: {\n      stepKey: etfEventStepKey,\n      existingDiscountsToRemove: discountIdsToRemove,\n      targetOrderItemIdsToDiscount: orderItemsToAddDiscounts,\n    },\n  };\n};\n","import { Component, OnInit } from '@angular/core';\nimport { StepComponent } from '@sales/shared/data-access';\nimport { CommonModule } from '@angular/common';\nimport { forkJoin, Observable, of } from 'rxjs';\nimport { take } from 'rxjs/operators';\nimport { AnalyticsInterface, EventFacade } from '@sales/events/data-access';\nimport { etfStepLoaded } from './events/etf-step-loaded.const';\nimport { ViewModel } from './interfaces/view-model.interface';\nimport { EtfFacade, OrderItemWithDiscount, UsedSlot } from '@sales/etf/data-access';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { etfResponseIdObject } from './interfaces/response-model.interface';\nimport { stepImage } from './constants/etf-event-step-key.const';\nimport { InlineSVGModule } from 'ng-inline-svg-2';\nimport { TgFormsModule } from '@telenet/ng-lib-form';\nimport { AssetService } from '@telenet/ng-lib-page';\nimport {\n  EtfListComponent,\n  OrderItemComponent,\n  OrderItemMarkedAsNoDiscountComponent,\n  OrderItemWithEtfListComponent,\n  OrderItemWithTerminationComponent,\n} from '@sales/etf/ui';\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport { createEtfStepViewed } from './constants/etf-step-finished.const';\n\n@Component({\n  standalone: true,\n  imports: [\n    CommonModule,\n    TranslateModule,\n    InlineSVGModule,\n    TgFormsModule,\n    EtfListComponent,\n    OrderItemComponent,\n    OrderItemWithEtfListComponent,\n    OrderItemWithTerminationComponent,\n    OrderItemMarkedAsNoDiscountComponent,\n  ],\n  selector: 'tg-sales-etf',\n  templateUrl: './etf.component.html',\n})\n@UntilDestroy()\nexport class EtfComponent implements StepComponent, OnInit {\n  viewModel: ViewModel | undefined;\n\n  constructor(\n    private readonly eventFacade: EventFacade,\n    private readonly etfFacade: EtfFacade\n  ) {\n    this.viewModel = {\n      stepImage: AssetService.getImagePath('HARDWARE_CHECKOUT', stepImage),\n      discountItems: this.etfFacade.orderItemsWithDiscount$,\n      usedAndPendingDiscounts: this.etfFacade.usedAndPendingDiscountSlots$,\n      showValidationNotification: false,\n    };\n  }\n\n  ngOnInit(): void {\n    this.eventFacade.triggerEvent(etfStepLoaded);\n  }\n\n  onNextStep(): Observable<boolean> {\n    this.validateAndApplyEtf();\n    return of(false);\n  }\n\n  private validateAndApplyEtf() {\n    forkJoin({\n      orderItemsWithDiscount: this.etfFacade.orderItemsWithDiscount$.pipe(take(1)),\n      usedDiscountSlots: this.etfFacade.usedAndPendingDiscountSlots$.pipe(take(1)),\n    })\n      .pipe(untilDestroyed(this))\n      .subscribe(({ orderItemsWithDiscount, usedDiscountSlots }) => {\n        if (!orderItemsWithDiscount || !usedDiscountSlots) {\n          throw new Error('No order item');\n        }\n\n        const hasOrderItemsThatAreNotMarkedYet = orderItemsWithDiscount.some(\n          (orderItemWithDiscount) => !orderItemWithDiscount.hasMadeASelection\n        );\n\n        this.setShowValidationNotification(hasOrderItemsThatAreNotMarkedYet);\n\n        if (!hasOrderItemsThatAreNotMarkedYet) {\n          this.applyEtf(orderItemsWithDiscount, usedDiscountSlots);\n        }\n      });\n  }\n\n  private validateOnly() {\n    forkJoin({\n      orderItemsWithDiscount: this.etfFacade.orderItemsWithDiscount$.pipe(take(1)),\n      usedDiscountSlots: this.etfFacade.usedAndPendingDiscountSlots$.pipe(take(1)),\n    })\n      .pipe(untilDestroyed(this))\n      .subscribe(({ orderItemsWithDiscount, usedDiscountSlots }) => {\n        if (!orderItemsWithDiscount || !usedDiscountSlots) {\n          throw new Error('No order item');\n        }\n\n        const hasOrderItemsThatAreNotMarkedYet = orderItemsWithDiscount.some(\n          (orderItemWithDiscount) => !orderItemWithDiscount.hasMadeASelection\n        );\n\n        this.setShowValidationNotification(hasOrderItemsThatAreNotMarkedYet);\n      });\n  }\n\n  setShowEtfOptions(orderItemWithDiscount: OrderItemWithDiscount, showEtfOptions: boolean) {\n    this.eventFacade.triggerAnalyticsClickEvent({ name: 'enable discount link clicked' });\n    this.etfFacade.setShowEtfOptions(orderItemWithDiscount, showEtfOptions);\n  }\n\n  setOrderItemTerminationStateEvent(event: { orderItemWithDiscount: OrderItemWithDiscount; buyWithDiscount: boolean }) {\n    const clickEvent: AnalyticsInterface = {\n      name: 'terminate existing contract selected',\n      attributes: {\n        itemName: `discount-slot-${event.orderItemWithDiscount.id}`,\n        itemData: event.buyWithDiscount ? 'yes' : 'no',\n      },\n    };\n    this.eventFacade.triggerAnalyticsClickEvent(clickEvent);\n\n    if (event.buyWithDiscount) {\n      this.etfFacade.setShowEtfOptions(event.orderItemWithDiscount, true);\n    } else {\n      this.etfFacade.setOrderItemToMarkedForBuyingWithoutDiscount(event.orderItemWithDiscount);\n    }\n    this.etfFacade.setShowEtfOptions(event.orderItemWithDiscount, event.buyWithDiscount);\n  }\n\n  cancelEtfTermination(orderItemWithDiscount: OrderItemWithDiscount) {\n    const analyticsEvent: AnalyticsInterface = {\n      name: 'cancel button clicked',\n      attributes: {\n        itemName: `discount-slot-${orderItemWithDiscount.id}`,\n      },\n    };\n    this.eventFacade.triggerAnalyticsClickEvent(analyticsEvent);\n\n    this.etfFacade.cancelEtfTermination(orderItemWithDiscount);\n    this.etfFacade.setShowEtfOptions(orderItemWithDiscount, false);\n  }\n\n  selectDiscountToTerminate(event: { orderItemWithDiscount: OrderItemWithDiscount; usedDiscountSlot: UsedSlot }) {\n    const analyticsEvent: AnalyticsInterface = {\n      name: 'apply button clicked',\n      attributes: {\n        itemName: `discount-slot-${event.orderItemWithDiscount.id}`,\n      },\n    };\n    this.eventFacade.triggerAnalyticsClickEvent(analyticsEvent);\n\n    this.etfFacade.setDiscountToTerminate(event.orderItemWithDiscount, event.usedDiscountSlot);\n    this.etfFacade.setShowEtfOptions(event.orderItemWithDiscount, false);\n    this.validateOnly();\n  }\n\n  setOrderItemMarkedForDiscount(orderItemWithDiscount: OrderItemWithDiscount) {\n    this.etfFacade.resetOrderItem(orderItemWithDiscount);\n  }\n\n  private applyEtf(orderItemsWithDiscount: OrderItemWithDiscount[], usedDiscountSlots: UsedSlot[]) {\n    const orderItemsToAddDiscounts: etfResponseIdObject[] = [];\n\n    if (orderItemsWithDiscount) {\n      orderItemsWithDiscount.forEach((orderItemWithDiscount) => {\n        if (orderItemWithDiscount.selectedEtfDiscountSlot) {\n          orderItemsToAddDiscounts.push({ id: orderItemWithDiscount.rule.targetOrderItemIds[0] });\n        }\n      });\n    }\n\n    const discountIdsToRemove: { id: string }[] = [];\n    if (usedDiscountSlots) {\n      usedDiscountSlots.forEach((usedDiscountSlot) => {\n        if (usedDiscountSlot.shouldBeTerminated) {\n          discountIdsToRemove.push({ id: usedDiscountSlot.id });\n        }\n      });\n    }\n    this.eventFacade.triggerEvent(createEtfStepViewed(discountIdsToRemove, orderItemsToAddDiscounts));\n  }\n\n  private setShowValidationNotification(show: boolean) {\n    if (this.viewModel) {\n      this.viewModel.showValidationNotification = show;\n    }\n  }\n}\n","<div [attr.data-cy]=\"'feat-etf'\" class=\"sales-checkout container--medium\">\n  <div class=\"sales-page__container__title sales-page__container__title--secondary\">\n    <div class=\"display--flex flex-direction--column\">\n      <div class=\"sales-page__container__title__header text-align--center--md text-align--left\">\n        {{ 'ng.sales-checkout.lbl.title.etf-buy-off' | translate }}\n      </div>\n      <p class=\"text-align--center--md text-align--left\">\n        {{ 'ng.sales-checkout.lbl.sub-title.etf-buy-off' | translate }}\n      </p>\n    </div>\n  </div>\n  <div\n    class=\"row m--auto pl--xxxs pr--xxxs pl--n--md pr--n--md flex-direction--row--md flex-direction--column-reverse horizontal-center-align\">\n    <div class=\"col-sm-12 sales-checkout\">\n      <div>\n        <div class=\"stepper-page__body-inner p-0\">\n          <div class=\"stepper-page__content--split container mobile-lines\">\n            <div class=\"stepper-page__content-first flex-hide-until-md position--sticky--md position--top--md\">\n              <div\n                *ngIf=\"viewModel\"\n                [inlineSVG]=\"viewModel.stepImage\"\n                [resolveSVGUrl]=\"false\"\n                class=\"stepper-page__content-first flex-hide-until-sm\"></div>\n            </div>\n            <div class=\"stepper-page__content-second\">\n              <div class=\"stepper-move\" id=\"undefined\">\n                <div class=\"text-flow text-flow--label stepper-page__title-label m-0\"></div>\n                <div>\n                  <div class=\"sales-flow\">\n                    <div class=\"sales-flow__content__delivery mb--xxxg\">\n                      <div class=\"mobile-lines__discount\">\n                        <div *ngIf=\"viewModel?.showValidationNotification\" class=\"mb--s mt--s\">\n                          <div [attr.data-cy]=\"'feat-etf-validation'\" class=\"notification notification--errorfield\">\n                            <span\n                              [innerHTML]=\"'ng.sales-checkout.error.yes-or-no-to-continue-errorfield' | translate\"\n                              class=\"icon-status-errorfield errorfield\"></span>\n                          </div>\n                        </div>\n\n                        <div class=\"mobile-lines__vertical-step-content m--auto\">\n                          <div class=\"mobile-lines__options display--flex flex-direction--column\">\n                            <div [ngClass]=\"{ hideTracker: true }\" class=\"vertical-step-tracker\">\n                              <ul class=\"Container\">\n                                <ng-container\n                                  *ngFor=\"\n                                    let orderItemWithDiscount of viewModel?.discountItems | async;\n                                    let trackerIndex = index\n                                  \">\n                                  <li class=\"tracker--step ready-{{ trackerIndex }} mb-20\">\n                                    <ng-container\n                                      *ngIf=\"\n                                        viewModel?.usedAndPendingDiscounts | async as usedAndPendingDiscountSlotList\n                                      \">\n                                      <ng-container\n                                        *ngIf=\"usedAndPendingDiscountSlotList && usedAndPendingDiscountSlotList.length\">\n                                        <tg-sales-etf-order-item\n                                          (setOrderItemTerminationStateEvent)=\"\n                                            setOrderItemTerminationStateEvent($event)\n                                          \"\n                                          *ngIf=\"\n                                            !orderItemWithDiscount.hasMadeASelection &&\n                                            !orderItemWithDiscount.selectedEtfDiscountSlot\n                                          \"\n                                          [orderItemWithDiscount]=\"orderItemWithDiscount\">\n                                        </tg-sales-etf-order-item>\n                                        <tg-sales-etf-order-item-marked-as-no-discount\n                                          (setOrderMarkedForDiscount)=\"setOrderItemMarkedForDiscount($event)\"\n                                          *ngIf=\"\n                                            orderItemWithDiscount.hasMadeASelection &&\n                                            !orderItemWithDiscount.selectedEtfDiscountSlot\n                                          \"\n                                          [orderItemWithDiscount]=\"orderItemWithDiscount\">\n                                        </tg-sales-etf-order-item-marked-as-no-discount>\n                                        <tg-sales-etf-order-item-with-etf-list\n                                          (applyEtfCancellationEvent)=\"selectDiscountToTerminate($event)\"\n                                          (cancelEtfSelectionEvent)=\"cancelEtfTermination($event)\"\n                                          *ngIf=\"orderItemWithDiscount.showEtfOptions\"\n                                          [orderItemWithDiscount]=\"orderItemWithDiscount\"\n                                          [usedAndPendingDiscountSlotList]=\"usedAndPendingDiscountSlotList\">\n                                        </tg-sales-etf-order-item-with-etf-list>\n                                        <tg-sales-etf-order-item-with-termination\n                                          (showEtfOptionsEvent)=\"setShowEtfOptions($event, true)\"\n                                          *ngIf=\"\n                                            orderItemWithDiscount.selectedEtfDiscountSlot &&\n                                            !orderItemWithDiscount.showEtfOptions\n                                          \"\n                                          [orderItemWithDiscount]=\"orderItemWithDiscount\">\n                                        </tg-sales-etf-order-item-with-termination>\n                                      </ng-container>\n                                    </ng-container>\n                                  </li>\n                                </ng-container>\n                              </ul>\n                              <div class=\"whitespace whitespace--medium\"></div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n","import { EventInterface, EventTypeEnum, StepEventBody } from '@sales/events/data-access';\nimport { etfEventStepKey } from '../constants/etf-event-step-key.const';\n\nexport const etfStepLoaded: EventInterface<StepEventBody> = {\n  eventType: EventTypeEnum.STEP_LOADED,\n  body: {\n    stepKey: etfEventStepKey,\n  },\n};\n","export { InlineSVGConfig } from './inline-svg.config';\nexport { InlineSVGDirective } from './inline-svg.directive';\nexport { InlineSVGModule } from './inline-svg.module';\nexport { SVGCacheService } from './svg-cache.service';\n","import { ChangeDetectionStrategy, Component, ElementRef, Input } from '@angular/core';\nimport { InlineSVGDirective } from './inline-svg.directive';\nimport { InlineSVGService } from './inline-svg.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./inline-svg.service\";\nvar InlineSVGComponent = (function () {\n    function InlineSVGComponent(_inlineSVGService, el) {\n        this._inlineSVGService = _inlineSVGService;\n        this._el = el;\n    }\n    InlineSVGComponent.prototype.ngAfterViewInit = function () {\n        this._updateContent();\n    };\n    InlineSVGComponent.prototype.ngOnChanges = function (changes) {\n        if (changes['content']) {\n            this._updateContent();\n        }\n    };\n    InlineSVGComponent.prototype._updateContent = function () {\n        this._inlineSVGService.insertEl(this.context, this._el.nativeElement, this.content, this.replaceContents, this.prepend);\n    };\n    InlineSVGComponent.ɵfac = function InlineSVGComponent_Factory(t) { return new (t || InlineSVGComponent)(i0.ɵɵdirectiveInject(i1.InlineSVGService), i0.ɵɵdirectiveInject(i0.ElementRef)); };\n    InlineSVGComponent.ɵcmp = i0.ɵɵdefineComponent({ type: InlineSVGComponent, selectors: [[\"inline-svg\"]], inputs: { context: \"context\", content: \"content\", replaceContents: \"replaceContents\", prepend: \"prepend\" }, features: [i0.ɵɵNgOnChangesFeature], decls: 0, vars: 0, template: function InlineSVGComponent_Template(rf, ctx) { }, encapsulation: 2, changeDetection: 0 });\n    return InlineSVGComponent;\n}());\nexport { InlineSVGComponent };\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(InlineSVGComponent, [{\n        type: Component,\n        args: [{\n                selector: 'inline-svg',\n                template: '',\n                changeDetection: ChangeDetectionStrategy.OnPush\n            }]\n    }], function () { return [{ type: i1.InlineSVGService }, { type: i0.ElementRef }]; }, { context: [{\n            type: Input\n        }], content: [{\n            type: Input\n        }], replaceContents: [{\n            type: Input\n        }], prepend: [{\n            type: Input\n        }] }); })();\n","var InlineSVGConfig = (function () {\n    function InlineSVGConfig() {\n    }\n    return InlineSVGConfig;\n}());\nexport { InlineSVGConfig };\n","import { ComponentFactoryResolver, Directive, ElementRef, EventEmitter, Inject, Input, Optional, Output, PLATFORM_ID, Renderer2, ViewContainerRef, } from '@angular/core';\nimport { isPlatformBrowser, isPlatformServer } from '@angular/common';\nimport { InlineSVGComponent } from './inline-svg.component';\nimport { SVGCacheService } from './svg-cache.service';\nimport { InlineSVGService } from './inline-svg.service';\nimport { InlineSVGConfig } from './inline-svg.config';\nimport * as SvgUtil from './svg-util';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./svg-cache.service\";\nimport * as i2 from \"./inline-svg.service\";\nimport * as i3 from \"./inline-svg.config\";\nvar InlineSVGDirective = (function () {\n    function InlineSVGDirective(_el, _viewContainerRef, _resolver, _svgCache, _renderer, _inlineSVGService, _config, platformId) {\n        this._el = _el;\n        this._viewContainerRef = _viewContainerRef;\n        this._resolver = _resolver;\n        this._svgCache = _svgCache;\n        this._renderer = _renderer;\n        this._inlineSVGService = _inlineSVGService;\n        this._config = _config;\n        this.platformId = platformId;\n        this.resolveSVGUrl = true;\n        this.replaceContents = true;\n        this.prepend = false;\n        this.injectComponent = false;\n        this.cacheSVG = true;\n        this.forceEvalStyles = false;\n        this.evalScripts = \"always\";\n        this.onSVGInserted = new EventEmitter();\n        this.onSVGFailed = new EventEmitter();\n        this._supportsSVG = SvgUtil.isSvgSupported();\n        if (!isPlatformServer(this.platformId) && !this._supportsSVG) {\n            this._fail('Embed SVG are not supported by this browser');\n        }\n    }\n    InlineSVGDirective.prototype.ngOnInit = function () {\n        if (!this._isValidPlatform() || this._isSSRDisabled()) {\n            return;\n        }\n        this._insertSVG();\n    };\n    InlineSVGDirective.prototype.ngOnChanges = function (changes) {\n        if (!this._isValidPlatform() || this._isSSRDisabled()) {\n            return;\n        }\n        var setSVGAttributesChanged = Boolean(changes['setSVGAttributes']);\n        if (changes['inlineSVG'] || setSVGAttributesChanged) {\n            this._insertSVG(setSVGAttributesChanged);\n        }\n    };\n    InlineSVGDirective.prototype.ngOnDestroy = function () {\n        if (this._subscription) {\n            this._subscription.unsubscribe();\n        }\n    };\n    InlineSVGDirective.prototype._insertSVG = function (force) {\n        var _this = this;\n        if (force === void 0) { force = false; }\n        if (!isPlatformServer(this.platformId) && !this._supportsSVG) {\n            return;\n        }\n        if (!this.inlineSVG) {\n            this._fail('No URL passed to [inlineSVG]');\n            return;\n        }\n        if (!force && this.inlineSVG === this._prevUrl) {\n            return;\n        }\n        this._prevUrl = this.inlineSVG;\n        this._subscription = this._svgCache.getSVG(this.inlineSVG, this.resolveSVGUrl, this.cacheSVG)\n            .subscribe(function (svg) {\n            if (SvgUtil.isUrlSymbol(_this.inlineSVG)) {\n                var symbolId = _this.inlineSVG.split('#')[1];\n                svg = SvgUtil.createSymbolSvg(_this._renderer, svg, symbolId);\n            }\n            _this._processSvg(svg);\n        }, function (err) {\n            _this._fail(err);\n        });\n    };\n    InlineSVGDirective.prototype._processSvg = function (svg) {\n        if (!svg) {\n            return;\n        }\n        if (this.removeSVGAttributes && isPlatformBrowser(this.platformId)) {\n            SvgUtil.removeAttributes(svg, this.removeSVGAttributes);\n        }\n        if (this.setSVGAttributes) {\n            SvgUtil.setAttributes(svg, this.setSVGAttributes);\n        }\n        if (this.onSVGLoaded) {\n            svg = this.onSVGLoaded(svg, this._el.nativeElement);\n        }\n        this._insertEl(svg);\n        if (isPlatformBrowser(this.platformId)) {\n            this._inlineSVGService.evalScripts(svg, this.inlineSVG, this.evalScripts);\n        }\n        if (this.forceEvalStyles) {\n            var styleTags = svg.querySelectorAll('style');\n            Array.from(styleTags).forEach(function (tag) { return tag.textContent += ''; });\n        }\n        this.onSVGInserted.emit(svg);\n    };\n    InlineSVGDirective.prototype._insertEl = function (el) {\n        if (this.injectComponent) {\n            if (!this._svgComp) {\n                var factory = this._resolver.resolveComponentFactory(InlineSVGComponent);\n                this._svgComp = this._viewContainerRef.createComponent(factory);\n            }\n            this._svgComp.instance.context = this;\n            this._svgComp.instance.replaceContents = this.replaceContents;\n            this._svgComp.instance.prepend = this.prepend;\n            this._svgComp.instance.content = el;\n            this._renderer.appendChild(this._el.nativeElement, this._svgComp.injector.get(InlineSVGComponent)._el.nativeElement);\n        }\n        else {\n            this._inlineSVGService.insertEl(this, this._el.nativeElement, el, this.replaceContents, this.prepend);\n        }\n    };\n    InlineSVGDirective.prototype._fail = function (msg) {\n        this.onSVGFailed.emit(msg);\n        if (this.fallbackImgUrl) {\n            var elImg = this._renderer.createElement('IMG');\n            this._renderer.setAttribute(elImg, 'src', this.fallbackImgUrl);\n            this._insertEl(elImg);\n        }\n        else if (this.fallbackSVG && this.fallbackSVG !== this.inlineSVG) {\n            this.inlineSVG = this.fallbackSVG;\n            this._insertSVG();\n        }\n    };\n    InlineSVGDirective.prototype._isValidPlatform = function () {\n        return isPlatformServer(this.platformId) || isPlatformBrowser(this.platformId);\n    };\n    InlineSVGDirective.prototype._isSSRDisabled = function () {\n        return isPlatformServer(this.platformId) && this._config && this._config.clientOnly;\n    };\n    InlineSVGDirective.ɵfac = function InlineSVGDirective_Factory(t) { return new (t || InlineSVGDirective)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.ViewContainerRef), i0.ɵɵdirectiveInject(i0.ComponentFactoryResolver), i0.ɵɵdirectiveInject(i1.SVGCacheService), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i2.InlineSVGService), i0.ɵɵdirectiveInject(i3.InlineSVGConfig, 8), i0.ɵɵdirectiveInject(PLATFORM_ID)); };\n    InlineSVGDirective.ɵdir = i0.ɵɵdefineDirective({ type: InlineSVGDirective, selectors: [[\"\", \"inlineSVG\", \"\"]], inputs: { inlineSVG: \"inlineSVG\", resolveSVGUrl: \"resolveSVGUrl\", replaceContents: \"replaceContents\", prepend: \"prepend\", injectComponent: \"injectComponent\", cacheSVG: \"cacheSVG\", setSVGAttributes: \"setSVGAttributes\", removeSVGAttributes: \"removeSVGAttributes\", forceEvalStyles: \"forceEvalStyles\", evalScripts: \"evalScripts\", fallbackImgUrl: \"fallbackImgUrl\", fallbackSVG: \"fallbackSVG\", onSVGLoaded: \"onSVGLoaded\" }, outputs: { onSVGInserted: \"onSVGInserted\", onSVGFailed: \"onSVGFailed\" }, features: [i0.ɵɵProvidersFeature([SVGCacheService]), i0.ɵɵNgOnChangesFeature] });\n    return InlineSVGDirective;\n}());\nexport { InlineSVGDirective };\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(InlineSVGDirective, [{\n        type: Directive,\n        args: [{\n                selector: '[inlineSVG]',\n                providers: [SVGCacheService]\n            }]\n    }], function () { return [{ type: i0.ElementRef }, { type: i0.ViewContainerRef }, { type: i0.ComponentFactoryResolver }, { type: i1.SVGCacheService }, { type: i0.Renderer2 }, { type: i2.InlineSVGService }, { type: i3.InlineSVGConfig, decorators: [{\n                type: Optional\n            }] }, { type: Object, decorators: [{\n                type: Inject,\n                args: [PLATFORM_ID]\n            }] }]; }, { inlineSVG: [{\n            type: Input\n        }], resolveSVGUrl: [{\n            type: Input\n        }], replaceContents: [{\n            type: Input\n        }], prepend: [{\n            type: Input\n        }], injectComponent: [{\n            type: Input\n        }], cacheSVG: [{\n            type: Input\n        }], setSVGAttributes: [{\n            type: Input\n        }], removeSVGAttributes: [{\n            type: Input\n        }], forceEvalStyles: [{\n            type: Input\n        }], evalScripts: [{\n            type: Input\n        }], fallbackImgUrl: [{\n            type: Input\n        }], fallbackSVG: [{\n            type: Input\n        }], onSVGLoaded: [{\n            type: Input\n        }], onSVGInserted: [{\n            type: Output\n        }], onSVGFailed: [{\n            type: Output\n        }] }); })();\n","import { NgModule } from '@angular/core';\nimport { InlineSVGComponent } from './inline-svg.component';\nimport { InlineSVGConfig } from './inline-svg.config';\nimport { InlineSVGDirective } from './inline-svg.directive';\nimport * as i0 from \"@angular/core\";\nvar InlineSVGModule = (function () {\n    function InlineSVGModule() {\n    }\n    InlineSVGModule.forRoot = function (config) {\n        return {\n            ngModule: InlineSVGModule,\n            providers: [\n                { provide: InlineSVGConfig, useValue: config }\n            ]\n        };\n    };\n    InlineSVGModule.ɵfac = function InlineSVGModule_Factory(t) { return new (t || InlineSVGModule)(); };\n    InlineSVGModule.ɵmod = i0.ɵɵdefineNgModule({ type: InlineSVGModule });\n    InlineSVGModule.ɵinj = i0.ɵɵdefineInjector({});\n    return InlineSVGModule;\n}());\nexport { InlineSVGModule };\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(InlineSVGModule, [{\n        type: NgModule,\n        args: [{\n                declarations: [InlineSVGDirective, InlineSVGComponent],\n                exports: [InlineSVGDirective],\n                entryComponents: [InlineSVGComponent]\n            }]\n    }], null, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && i0.ɵɵsetNgModuleScope(InlineSVGModule, { declarations: [InlineSVGDirective, InlineSVGComponent], exports: [InlineSVGDirective] }); })();\n","import { Injectable, RendererFactory2 } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nvar InlineSVGService = (function () {\n    function InlineSVGService(rendererFactory) {\n        this._ranScripts = {};\n        this._renderer = rendererFactory.createRenderer(null, null);\n    }\n    InlineSVGService.prototype.insertEl = function (dir, parentEl, content, replaceContents, prepend) {\n        if (replaceContents && !prepend) {\n            var parentNode = dir._prevSVG && dir._prevSVG.parentNode;\n            if (parentNode) {\n                this._renderer.removeChild(parentNode, dir._prevSVG);\n            }\n            parentEl.innerHTML = '';\n        }\n        if (prepend) {\n            this._renderer.insertBefore(parentEl, content, parentEl.firstChild);\n        }\n        else {\n            this._renderer.appendChild(parentEl, content);\n        }\n        if (content.nodeName === 'svg') {\n            dir._prevSVG = content;\n        }\n    };\n    InlineSVGService.prototype.evalScripts = function (svg, url, evalMode) {\n        var scripts = svg.querySelectorAll('script');\n        var scriptsToEval = [];\n        for (var i = 0; i < scripts.length; i++) {\n            var scriptType = scripts[i].getAttribute('type');\n            if (!scriptType || scriptType === 'application/ecmascript' || scriptType === 'application/javascript') {\n                var script = scripts[i].innerText || scripts[i].textContent;\n                scriptsToEval.push(script);\n                this._renderer.removeChild(scripts[i].parentNode, scripts[i]);\n            }\n        }\n        if (scriptsToEval.length > 0 && (evalMode === \"always\" ||\n            (evalMode === \"once\" && !this._ranScripts[url]))) {\n            for (var i = 0; i < scriptsToEval.length; i++) {\n                new Function(scriptsToEval[i])(window);\n            }\n            this._ranScripts[url] = true;\n        }\n    };\n    InlineSVGService.ɵfac = function InlineSVGService_Factory(t) { return new (t || InlineSVGService)(i0.ɵɵinject(i0.RendererFactory2)); };\n    InlineSVGService.ɵprov = i0.ɵɵdefineInjectable({ token: InlineSVGService, factory: InlineSVGService.ɵfac, providedIn: 'root' });\n    return InlineSVGService;\n}());\nexport { InlineSVGService };\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(InlineSVGService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: i0.RendererFactory2 }]; }, null); })();\n","import { APP_BASE_HREF, PlatformLocation } from '@angular/common';\nimport { HttpBackend, HttpClient } from '@angular/common/http';\nimport { Inject, Injectable, Optional, RendererFactory2 } from '@angular/core';\nimport { of, throwError } from 'rxjs';\nimport { catchError, map, share, tap } from 'rxjs/operators';\nimport { InlineSVGConfig } from './inline-svg.config';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"./inline-svg.config\";\nimport * as i3 from \"@angular/common/http\";\nvar SVGCacheService = (function () {\n    function SVGCacheService(_appBase, _location, _config, httpClient, httpBackend, rendererFactory) {\n        this._appBase = _appBase;\n        this._location = _location;\n        this._config = _config;\n        this._http = _config && !_config.bypassHttpClientInterceptorChain\n            ? httpClient\n            : new HttpClient(httpBackend);\n        this._renderer = rendererFactory.createRenderer(null, null);\n        this.setBaseUrl();\n        if (!SVGCacheService._cache) {\n            SVGCacheService._cache = new Map();\n        }\n        if (!SVGCacheService._inProgressReqs) {\n            SVGCacheService._inProgressReqs = new Map();\n        }\n    }\n    SVGCacheService.prototype.getSVG = function (url, resolveSVGUrl, cache) {\n        var _this = this;\n        if (cache === void 0) { cache = true; }\n        var svgUrl = (resolveSVGUrl\n            ? this.getAbsoluteUrl(url)\n            : url).replace(/#.+$/, '');\n        if (cache && SVGCacheService._cache.has(svgUrl)) {\n            return of(this._cloneSVG(SVGCacheService._cache.get(svgUrl)));\n        }\n        if (SVGCacheService._inProgressReqs.has(svgUrl)) {\n            return SVGCacheService._inProgressReqs.get(svgUrl);\n        }\n        var req = this._http.get(svgUrl, { responseType: 'text' })\n            .pipe(tap(function () {\n            SVGCacheService._inProgressReqs.delete(svgUrl);\n        }), catchError(function (error) {\n            SVGCacheService._inProgressReqs.delete(svgUrl);\n            return throwError(error.message);\n        }), share(), map(function (svgText) {\n            var svgEl = _this._svgElementFromString(svgText);\n            SVGCacheService._cache.set(svgUrl, svgEl);\n            return _this._cloneSVG(svgEl);\n        }));\n        SVGCacheService._inProgressReqs.set(svgUrl, req);\n        return req;\n    };\n    SVGCacheService.prototype.setBaseUrl = function () {\n        if (this._config) {\n            this._baseUrl = this._config.baseUrl;\n        }\n        else if (this._appBase !== null) {\n            this._baseUrl = this._appBase;\n        }\n        else if (this._location !== null) {\n            this._baseUrl = this._location.getBaseHrefFromDOM();\n        }\n    };\n    SVGCacheService.prototype.getAbsoluteUrl = function (url) {\n        if (this._baseUrl && !/^https?:\\/\\//i.test(url)) {\n            url = this._baseUrl + url;\n            if (url.indexOf('//') === 0) {\n                url = url.substring(1);\n            }\n        }\n        var base = this._renderer.createElement('BASE');\n        base.href = url;\n        return base.href;\n    };\n    SVGCacheService.prototype._svgElementFromString = function (str) {\n        var div = this._renderer.createElement('DIV');\n        div.innerHTML = str;\n        var svg = div.querySelector('svg');\n        if (!svg) {\n            throw new Error('No SVG found in loaded contents');\n        }\n        return svg;\n    };\n    SVGCacheService.prototype._cloneSVG = function (svg) {\n        return svg.cloneNode(true);\n    };\n    SVGCacheService.ɵfac = function SVGCacheService_Factory(t) { return new (t || SVGCacheService)(i0.ɵɵinject(APP_BASE_HREF, 8), i0.ɵɵinject(i1.PlatformLocation, 8), i0.ɵɵinject(i2.InlineSVGConfig, 8), i0.ɵɵinject(i3.HttpClient), i0.ɵɵinject(i3.HttpBackend), i0.ɵɵinject(i0.RendererFactory2)); };\n    SVGCacheService.ɵprov = i0.ɵɵdefineInjectable({ token: SVGCacheService, factory: SVGCacheService.ɵfac, providedIn: 'root' });\n    return SVGCacheService;\n}());\nexport { SVGCacheService };\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(SVGCacheService, [{\n        type: Injectable,\n        args: [{\n                providedIn: 'root'\n            }]\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [APP_BASE_HREF]\n            }] }, { type: i1.PlatformLocation, decorators: [{\n                type: Optional\n            }] }, { type: i2.InlineSVGConfig, decorators: [{\n                type: Optional\n            }] }, { type: i3.HttpClient }, { type: i3.HttpBackend }, { type: i0.RendererFactory2 }]; }, null); })();\n","export function isUrlSymbol(url) {\n    return url.charAt(0) === '#' || url.indexOf('.svg#') > -1;\n}\nexport function isSvgSupported() {\n    return typeof SVGRect !== 'undefined';\n}\nexport function createSymbolSvg(renderer, svg, symbolId) {\n    var symbol = svg.querySelector(\"[id=\\\"\".concat(symbolId, \"\\\"]\"));\n    if (!symbol) {\n        throw new Error(\"Symbol \\\"\".concat(symbolId, \"\\\" not found\"));\n    }\n    var elSvg = renderer.createElement('svg', 'svg');\n    renderer.appendChild(elSvg, symbol);\n    var elSvgUse = renderer.createElement('use', 'svg');\n    renderer.setAttribute(elSvgUse, 'href', \"#\".concat(symbolId), 'xlink');\n    renderer.appendChild(elSvg, elSvgUse);\n    return elSvg;\n}\nexport function removeAttributes(element, attrs) {\n    for (var i = 0; i < attrs.length; i++) {\n        var elAttr = element.getAttribute(attrs[i]);\n        if (elAttr) {\n            element.removeAttribute(attrs[i]);\n        }\n    }\n    var innerEls = element.getElementsByTagName('*');\n    for (var i = 0; i < innerEls.length; i++) {\n        removeAttributes(innerEls[i], attrs);\n    }\n}\nexport function setAttributes(element, attrs) {\n    for (var attr in attrs) {\n        element.setAttribute(attr, attrs[attr]);\n    }\n}\n"],"names":["etfEventStepKey","stepImage","EventTypeEnum","createEtfStepViewed","discountIdsToRemove","orderItemsToAddDiscounts","eventType","STEP_FINISHED","body","stepKey","existingDiscountsToRemove","targetOrderItemIdsToDiscount","CommonModule","forkJoin","of","take","EventFacade","etfStepLoaded","EtfFacade","TranslateModule","InlineSVGModule","TgFormsModule","AssetService","OrderItemComponent","OrderItemMarkedAsNoDiscountComponent","OrderItemWithEtfListComponent","OrderItemWithTerminationComponent","UntilDestroy","untilDestroyed","i0","ɵɵelement","ɵɵproperty","ctx_r0","viewModel","ɵɵelementStart","ɵɵelementEnd","ɵɵadvance","ɵɵattribute","ɵɵpipeBind1","ɵɵsanitizeHtml","ɵɵlistener","EtfComponent_ng_container_28_ng_container_2_ng_container_1_tg_sales_etf_order_item_1_Template_tg_sales_etf_order_item_setOrderItemTerminationStateEvent_0_listener","$event","ɵɵrestoreView","_r13","ctx_r12","ɵɵnextContext","ɵɵresetView","setOrderItemTerminationStateEvent","orderItemWithDiscount_r3","EtfComponent_ng_container_28_ng_container_2_ng_container_1_tg_sales_etf_order_item_marked_as_no_discount_2_Template_tg_sales_etf_order_item_marked_as_no_discount_setOrderMarkedForDiscount_0_listener","_r16","ctx_r15","setOrderItemMarkedForDiscount","EtfComponent_ng_container_28_ng_container_2_ng_container_1_tg_sales_etf_order_item_with_etf_list_3_Template_tg_sales_etf_order_item_with_etf_list_applyEtfCancellationEvent_0_listener","_r19","ctx_r18","selectDiscountToTerminate","EtfComponent_ng_container_28_ng_container_2_ng_container_1_tg_sales_etf_order_item_with_etf_list_3_Template_tg_sales_etf_order_item_with_etf_list_cancelEtfSelectionEvent_0_listener","ctx_r20","cancelEtfTermination","usedAndPendingDiscountSlotList_r6","EtfComponent_ng_container_28_ng_container_2_ng_container_1_tg_sales_etf_order_item_with_termination_4_Template_tg_sales_etf_order_item_with_termination_showEtfOptionsEvent_0_listener","_r24","ctx_r23","setShowEtfOptions","ɵɵelementContainerStart","ɵɵtemplate","EtfComponent_ng_container_28_ng_container_2_ng_container_1_tg_sales_etf_order_item_1_Template","EtfComponent_ng_container_28_ng_container_2_ng_container_1_tg_sales_etf_order_item_marked_as_no_discount_2_Template","EtfComponent_ng_container_28_ng_container_2_ng_container_1_tg_sales_etf_order_item_with_etf_list_3_Template","EtfComponent_ng_container_28_ng_container_2_ng_container_1_tg_sales_etf_order_item_with_termination_4_Template","ɵɵelementContainerEnd","hasMadeASelection","selectedEtfDiscountSlot","showEtfOptions","EtfComponent_ng_container_28_ng_container_2_ng_container_1_Template","length","EtfComponent_ng_container_28_ng_container_2_Template","ɵɵclassMapInterpolate1","trackerIndex_r4","ctx_r2","usedAndPendingDiscounts","EtfComponent","constructor","eventFacade","etfFacade","getImagePath","discountItems","orderItemsWithDiscount$","usedAndPendingDiscountSlots$","showValidationNotification","ngOnInit","triggerEvent","onNextStep","validateAndApplyEtf","orderItemsWithDiscount","pipe","usedDiscountSlots","subscribe","Error","hasOrderItemsThatAreNotMarkedYet","some","orderItemWithDiscount","setShowValidationNotification","applyEtf","validateOnly","triggerAnalyticsClickEvent","name","event","clickEvent","attributes","itemName","id","itemData","buyWithDiscount","setOrderItemToMarkedForBuyingWithoutDiscount","analyticsEvent","setDiscountToTerminate","usedDiscountSlot","resetOrderItem","forEach","push","rule","targetOrderItemIds","shouldBeTerminated","show","_","ɵɵdirectiveInject","i1","i2","_2","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","EtfComponent_Template","rf","ctx","ɵɵtext","EtfComponent_div_15_Template","EtfComponent_div_23_Template","EtfComponent_ng_container_28_Template","ɵɵtextInterpolate1","ɵɵpureFunction0","_c0","i3","NgClass","NgForOf","NgIf","AsyncPipe","i4","TranslatePipe","i5","InlineSVGDirective","encapsulation","__decorate","STEP_LOADED","InlineSVGConfig","SVGCacheService","ChangeDetectionStrategy","Component","ElementRef","Input","InlineSVGService","InlineSVGComponent","_inlineSVGService","el","_el","prototype","ngAfterViewInit","_updateContent","ngOnChanges","changes","insertEl","context","nativeElement","content","replaceContents","prepend","ɵfac","InlineSVGComponent_Factory","t","ɵcmp","ɵɵdefineComponent","type","inputs","ɵɵNgOnChangesFeature","InlineSVGComponent_Template","changeDetection","ngDevMode","ɵsetClassMetadata","args","selector","OnPush","ComponentFactoryResolver","Directive","EventEmitter","Inject","Optional","Output","PLATFORM_ID","Renderer2","ViewContainerRef","isPlatformBrowser","isPlatformServer","SvgUtil","_viewContainerRef","_resolver","_svgCache","_renderer","_config","platformId","resolveSVGUrl","injectComponent","cacheSVG","forceEvalStyles","evalScripts","onSVGInserted","onSVGFailed","_supportsSVG","isSvgSupported","_fail","_isValidPlatform","_isSSRDisabled","_insertSVG","setSVGAttributesChanged","Boolean","ngOnDestroy","_subscription","unsubscribe","force","_this","inlineSVG","_prevUrl","getSVG","svg","isUrlSymbol","symbolId","split","createSymbolSvg","_processSvg","err","removeSVGAttributes","removeAttributes","setSVGAttributes","setAttributes","onSVGLoaded","_insertEl","styleTags","querySelectorAll","Array","from","tag","textContent","emit","_svgComp","factory","resolveComponentFactory","createComponent","instance","appendChild","injector","get","msg","fallbackImgUrl","elImg","createElement","setAttribute","fallbackSVG","clientOnly","InlineSVGDirective_Factory","ɵdir","ɵɵdefineDirective","outputs","ɵɵProvidersFeature","providers","decorators","Object","NgModule","forRoot","config","ngModule","provide","useValue","InlineSVGModule_Factory","ɵmod","ɵɵdefineNgModule","ɵinj","ɵɵdefineInjector","declarations","exports","entryComponents","ngJitMode","ɵɵsetNgModuleScope","Injectable","RendererFactory2","rendererFactory","_ranScripts","createRenderer","dir","parentEl","parentNode","_prevSVG","removeChild","innerHTML","insertBefore","firstChild","nodeName","url","evalMode","scripts","scriptsToEval","i","scriptType","getAttribute","script","innerText","Function","window","InlineSVGService_Factory","ɵɵinject","ɵprov","ɵɵdefineInjectable","token","providedIn","APP_BASE_HREF","PlatformLocation","HttpBackend","HttpClient","throwError","catchError","map","share","tap","_appBase","_location","httpClient","httpBackend","_http","bypassHttpClientInterceptorChain","setBaseUrl","_cache","Map","_inProgressReqs","cache","svgUrl","getAbsoluteUrl","replace","has","_cloneSVG","req","responseType","delete","error","message","svgText","svgEl","_svgElementFromString","set","_baseUrl","baseUrl","getBaseHrefFromDOM","test","indexOf","substring","base","href","str","div","querySelector","cloneNode","SVGCacheService_Factory","undefined","charAt","SVGRect","renderer","symbol","concat","elSvg","elSvgUse","element","attrs","elAttr","removeAttribute","innerEls","getElementsByTagName","attr"],"sourceRoot":"webpack:///","x_google_ignoreList":[6,7,8,9,10,11,12,13]}