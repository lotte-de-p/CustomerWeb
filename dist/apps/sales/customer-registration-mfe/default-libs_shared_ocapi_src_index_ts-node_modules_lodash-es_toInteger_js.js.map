{"version":3,"file":"default-libs_shared_ocapi_src_index_ts-node_modules_lodash-es_toInteger_js.js","mappings":"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,oBAAoB,CAAC,CAAC;MAC/B;MACA,OAAOO,UAAU;IAAC;EACtB;EACA;AACJ;AACA;AACA;AACA;AACA;EACIT,eAAeA,CAAA,EAAG;IACd,IAAI,IAAI,CAACT,aAAa,EAAE;MACpB,IAAI,CAACA,aAAa,CAACS,eAAe,CAAC,CAAC;IACxC;EACJ;EACAE,oBAAoBA,CAAA,EAAG;IACnB;IACA,IAAI,IAAI,CAACX,aAAa,EAAE;MACpB,IAAI,CAACA,aAAa,CAACuB,OAAO,CAAC,CAAC;IAChC;EACJ;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI7E,OAAOA,CAACjpC,MAAM,EAAE;IACZ,IAAI,CAAC+tC,gBAAgB,CAAC,CAAC;IACvB;IACA,IAAI,CAACxB,aAAa,CAACtD,OAAO,CAACjpC,MAAM,CAAC;EACtC;EACA+tC,gBAAgBA,CAAA,EAAG;IACf,IAAI,CAAC,IAAI,CAACjF,SAAS,EAAE;MACjB,MAAM,IAAIjc,SAAS,CAAC,yCAAyC,CAAC;IAClE;EACJ;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIsd,eAAeA,CAACC,SAAS,EAAEzS,QAAQ,EAAE;IACjC,IAAI,CAACoW,gBAAgB,CAAC,CAAC;IACvB;IACA,IAAI,CAACxB,aAAa,CAACpC,eAAe,CAACC,SAAS,EAAEzS,QAAQ,CAAC;EAC3D;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIj8B,SAASA,CAACguC,WAAW,EAAE/R,QAAQ,EAAEhmB,OAAO,GAAG,CAAC,CAAC,EAAE;IAC3C,IAAI,CAACo8B,gBAAgB,CAAC,CAAC;IACvB;IACA,OAAO,IAAI,CAACxB,aAAa,CAAC7wC,SAAS,CAACguC,WAAW,EAAE/R,QAAQ,EAAEhmB,OAAO,CAAC;EACvE;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIu4B,WAAWA,CAAC9Q,EAAE,EAAEznB,OAAO,GAAG,CAAC,CAAC,EAAE;IAC1B,IAAI,CAACo8B,gBAAgB,CAAC,CAAC;IACvB;IACA,IAAI,CAACxB,aAAa,CAACrC,WAAW,CAAC9Q,EAAE,EAAEznB,OAAO,CAAC;EAC/C;EACA;AACJ;AACA;AACA;AACA;AACA;EACIq8B,KAAKA,CAACC,aAAa,EAAE;IACjB,IAAI,CAACF,gBAAgB,CAAC,CAAC;IACvB;IACA,OAAO,IAAI,CAACxB,aAAa,CAACyB,KAAK,CAACC,aAAa,CAAC;EAClD;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,MAAMA,CAACD,aAAa,EAAE;IAClB,IAAI,CAACF,gBAAgB,CAAC,CAAC;IACvB;IACA,IAAI,CAACxB,aAAa,CAAC2B,MAAM,CAACD,aAAa,CAAC;EAC5C;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACItY,KAAKA,CAACsY,aAAa,EAAE;IACjB,IAAI,CAACF,gBAAgB,CAAC,CAAC;IACvB;IACA,IAAI,CAACxB,aAAa,CAAC5W,KAAK,CAACsY,aAAa,CAAC;EAC3C;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIE,GAAGA,CAACC,SAAS,EAAEC,cAAc,EAAE18B,OAAO,GAAG,CAAC,CAAC,EAAE;IACzC,IAAI,CAACo8B,gBAAgB,CAAC,CAAC;IACvB;IACA,IAAI,CAACxB,aAAa,CAAC4B,GAAG,CAACC,SAAS,EAAEC,cAAc,EAAE18B,OAAO,CAAC;EAC9D;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI28B,IAAIA,CAACF,SAAS,EAAEC,cAAc,EAAE18B,OAAO,GAAG,CAAC,CAAC,EAAE;IAC1C,IAAI,CAACo8B,gBAAgB,CAAC,CAAC;IACvB;IACA,IAAI,CAACxB,aAAa,CAAC+B,IAAI,CAACF,SAAS,EAAEC,cAAc,EAAE18B,OAAO,CAAC;EAC/D;AACJ;;;;;;;;;;;;;;;AChlBiC;AACjC;AACA;AACA;AACA;AACA;AACO,MAAM48B,SAAS,CAAC;EACnB;AACJ;AACA;AACA;AACA;EACIz0C,WAAWA,CAACkG,MAAM,EAAE;IAChB,MAAM;MAAEwuC,OAAO;MAAE78B,OAAO;MAAE0Z,IAAI;MAAEojB,UAAU;MAAEC,kBAAkB;MAAEC;IAAyB,CAAC,GAAG3uC,MAAM;IACnG,IAAI,CAACwuC,OAAO,GAAGA,OAAO;IACtB,IAAI,CAAC78B,OAAO,GAAGpE,MAAM,CAACs6B,MAAM,CAAC,CAAC,CAAC,EAAEl2B,OAAO,IAAI,CAAC,CAAC,CAAC;IAC/C,IAAI88B,UAAU,EAAE;MACZ,IAAI,CAACG,WAAW,GAAGH,UAAU;MAC7B,IAAI,CAACI,YAAY,GAAG,IAAI;IAC5B,CAAC,MACI;MACD,IAAI,CAACC,KAAK,GAAGzjB,IAAI,IAAI,EAAE;MACvB,IAAI,CAACwjB,YAAY,GAAG,KAAK;IAC7B;IACA,IAAI,CAACH,kBAAkB,GAAGA,kBAAkB,IAAI,KAAK;IACrD,IAAI,CAACC,uBAAuB,GAAGA,uBAAuB,IAAI,KAAK;EACnE;EACA;AACJ;AACA;EACI,IAAItjB,IAAIA,CAAA,EAAG;IACP,IAAI,CAAC,IAAI,CAACyjB,KAAK,IAAI,IAAI,CAACD,YAAY,EAAE;MAClC,IAAI,CAACC,KAAK,GAAG,IAAIC,WAAW,CAAC,CAAC,CAACxrB,MAAM,CAAC,IAAI,CAACqrB,WAAW,CAAC;IAC3D;IACA,OAAO,IAAI,CAACE,KAAK,IAAI,EAAE;EAC3B;EACA;AACJ;AACA;EACI,IAAIL,UAAUA,CAAA,EAAG;IACb,IAAI,CAAC,IAAI,CAACG,WAAW,IAAI,CAAC,IAAI,CAACC,YAAY,EAAE;MACzC,IAAI,CAACD,WAAW,GAAG,IAAII,WAAW,CAAC,CAAC,CAACtrB,MAAM,CAAC,IAAI,CAACorB,KAAK,CAAC;IAC3D;IACA;IACA,OAAO,IAAI,CAACF,WAAW;EAC3B;EACA;AACJ;AACA;AACA;AACA;EACI,OAAOK,YAAYA,CAACC,QAAQ,EAAER,kBAAkB,EAAE;IAC9C,MAAM/8B,OAAO,GAAG,CAAC,CAAC;IAClB,MAAMw9B,IAAI,GAAI3sB,GAAG,IAAKA,GAAG,CAACnU,OAAO,CAAC,YAAY,EAAE,EAAE,CAAC;IACnD;IACA,KAAK,MAAM+gC,MAAM,IAAIF,QAAQ,CAACv9B,OAAO,CAACkB,OAAO,CAAC,CAAC,EAAE;MAC7C,MAAMsU,GAAG,GAAGioB,MAAM,CAACloB,OAAO,CAAC,GAAG,CAAC;MAC/B,MAAMxoB,GAAG,GAAGywC,IAAI,CAACC,MAAM,CAAC,CAAC,CAAC,CAAC;MAC3B,IAAInwC,KAAK,GAAGkwC,IAAI,CAACC,MAAM,CAAC,CAAC,CAAC,CAAC;MAC3B,IAAIV,kBAAkB,IAClBQ,QAAQ,CAACV,OAAO,KAAK,SAAS,IAC9BU,QAAQ,CAACV,OAAO,KAAK,WAAW,EAAE;QAClCvvC,KAAK,GAAGsvC,SAAS,CAACc,gBAAgB,CAACpwC,KAAK,CAAC;MAC7C;MACA0S,OAAO,CAACjT,GAAG,CAAC,GAAGO,KAAK;IACxB;IACA,OAAO,IAAIsvC,SAAS,CAAC;MACjBC,OAAO,EAAEU,QAAQ,CAACV,OAAO;MACzB78B,OAAO;MACP88B,UAAU,EAAES,QAAQ,CAACT,UAAU;MAC/BC;IACJ,CAAC,CAAC;EACN;EACA;AACJ;AACA;EACI59B,QAAQA,CAAA,EAAG;IACP,OAAO,IAAI,CAACw+B,sBAAsB,CAAC,CAAC;EACxC;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;EACIC,SAASA,CAAA,EAAG;IACR,MAAMC,aAAa,GAAG,IAAI,CAACF,sBAAsB,CAAC,CAAC;IACnD,IAAI,IAAI,CAACT,YAAY,EAAE;MACnB,OAAON,SAAS,CAACkB,YAAY,CAACD,aAAa,EAAE,IAAI,CAACZ,WAAW,CAAC,CAACc,MAAM;IACzE,CAAC,MACI;MACD,OAAOF,aAAa,GAAG,IAAI,CAACV,KAAK,GAAG/D,0CAAI,CAACE,IAAI;IACjD;EACJ;EACAqE,sBAAsBA,CAAA,EAAG;IACrB,MAAMK,KAAK,GAAG,CAAC,IAAI,CAACnB,OAAO,CAAC;IAC5B,IAAI,IAAI,CAACG,uBAAuB,EAAE;MAC9B,OAAO,IAAI,CAACh9B,OAAO,CAAC,gBAAgB,CAAC;IACzC;IACA,KAAK,MAAMY,IAAI,IAAIhF,MAAM,CAACtP,IAAI,CAAC,IAAI,CAAC0T,OAAO,IAAI,CAAC,CAAC,CAAC,EAAE;MAChD,MAAM1S,KAAK,GAAG,IAAI,CAAC0S,OAAO,CAACY,IAAI,CAAC;MAChC,IAAI,IAAI,CAACm8B,kBAAkB,IACvB,IAAI,CAACF,OAAO,KAAK,SAAS,IAC1B,IAAI,CAACA,OAAO,KAAK,WAAW,EAAE;QAC9BmB,KAAK,CAACtxB,IAAI,CAAE,GAAE9L,IAAK,IAAGg8B,SAAS,CAACqB,cAAc,CAAE,GAAE3wC,KAAM,EAAC,CAAE,EAAC,CAAC;MACjE,CAAC,MACI;QACD0wC,KAAK,CAACtxB,IAAI,CAAE,GAAE9L,IAAK,IAAGtT,KAAM,EAAC,CAAC;MAClC;IACJ;IACA,IAAI,IAAI,CAAC4vC,YAAY,IAChB,CAAC,IAAI,CAACgB,WAAW,CAAC,CAAC,IAAI,CAAC,IAAI,CAAClB,uBAAwB,EAAE;MACxDgB,KAAK,CAACtxB,IAAI,CAAE,kBAAiB,IAAI,CAACyxB,UAAU,CAAC,CAAE,EAAC,CAAC;IACrD;IACA,OAAOH,KAAK,CAAC58B,IAAI,CAACg4B,0CAAI,CAACC,EAAE,CAAC,GAAGD,0CAAI,CAACC,EAAE,GAAGD,0CAAI,CAACC,EAAE;EAClD;EACA6E,WAAWA,CAAA,EAAG;IACV,OAAO,IAAI,CAACC,UAAU,CAAC,CAAC,KAAK,CAAC;EAClC;EACAA,UAAUA,CAAA,EAAG;IACT,MAAMrB,UAAU,GAAG,IAAI,CAACA,UAAU;IAClC,OAAOA,UAAU,GAAGA,UAAU,CAAClxC,MAAM,GAAG,CAAC;EAC7C;EACA;AACJ;AACA;AACA;EACI,OAAOwyC,UAAUA,CAACnuB,CAAC,EAAE;IACjB,OAAOA,CAAC,GAAG,IAAIotB,WAAW,CAAC,CAAC,CAACtrB,MAAM,CAAC9B,CAAC,CAAC,CAACrkB,MAAM,GAAG,CAAC;EACrD;EACA,OAAOkyC,YAAYA,CAACD,aAAa,EAAEf,UAAU,EAAE;IAC3C,MAAMuB,kBAAkB,GAAG,IAAIhB,WAAW,CAAC,CAAC,CAACtrB,MAAM,CAAC8rB,aAAa,CAAC;IAClE,MAAMS,cAAc,GAAG,IAAI1S,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;IAC1C,MAAM2S,UAAU,GAAG,IAAI3S,UAAU,CAACyS,kBAAkB,CAACzyC,MAAM,GAAGkxC,UAAU,CAAClxC,MAAM,GAAG0yC,cAAc,CAAC1yC,MAAM,CAAC;IACxG2yC,UAAU,CAAChxC,GAAG,CAAC8wC,kBAAkB,CAAC;IAClCE,UAAU,CAAChxC,GAAG,CAACuvC,UAAU,EAAEuB,kBAAkB,CAACzyC,MAAM,CAAC;IACrD2yC,UAAU,CAAChxC,GAAG,CAAC+wC,cAAc,EAAED,kBAAkB,CAACzyC,MAAM,GAAGkxC,UAAU,CAAClxC,MAAM,CAAC;IAC7E,OAAO2yC,UAAU;EACrB;EACA;AACJ;AACA;AACA;AACA;EACI,OAAOC,QAAQA,CAACnwC,MAAM,EAAE;IACpB,MAAMgoB,KAAK,GAAG,IAAIumB,SAAS,CAACvuC,MAAM,CAAC;IACnC,OAAOgoB,KAAK,CAACunB,SAAS,CAAC,CAAC;EAC5B;EACA;AACJ;AACA;EACI,OAAOK,cAAcA,CAACptB,GAAG,EAAE;IACvB,OAAOA,GAAG,CACLnU,OAAO,CAAC,KAAK,EAAE,MAAM,CAAC,CACtBA,OAAO,CAAC,KAAK,EAAE,KAAK,CAAC,CACrBA,OAAO,CAAC,KAAK,EAAE,KAAK,CAAC,CACrBA,OAAO,CAAC,IAAI,EAAE,KAAK,CAAC;EAC7B;EACA;AACJ;AACA;EACI,OAAOghC,gBAAgBA,CAAC7sB,GAAG,EAAE;IACzB,OAAOA,GAAG,CACLnU,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,CACrBA,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,CACrBA,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,CACpBA,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC;EAC/B;AACJ;;;;;;;;;;;;;;ACzKA;AACA;AACA;AACA,MAAM48B,IAAI,GAAG,CAAC;AACd;AACA;AACA;AACA,MAAMD,EAAE,GAAG,EAAE;AACb;AACA;AACA;AACA,MAAMoF,EAAE,GAAG,EAAE;AACb;AACA;AACA;AACA,MAAMC,KAAK,GAAG,EAAE;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAMC,MAAM,CAAC;EAChBx2C,WAAWA,CAACy2C,OAAO,EAAEC,cAAc,EAAE;IACjC,IAAI,CAACD,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACC,cAAc,GAAGA,cAAc;IACpC,IAAI,CAACC,QAAQ,GAAG,IAAIzB,WAAW,CAAC,CAAC;IACjC,IAAI,CAAC0B,QAAQ,GAAG,IAAI3B,WAAW,CAAC,CAAC;IACjC,IAAI,CAAC4B,MAAM,GAAG,EAAE;IAChB,IAAI,CAACC,UAAU,CAAC,CAAC;EACrB;EACAC,UAAUA,CAACC,OAAO,EAAE/E,2BAA2B,GAAG,KAAK,EAAE;IACrD,IAAIgF,KAAK;IACT,IAAI,OAAOD,OAAO,KAAK,QAAQ,EAAE;MAC7BC,KAAK,GAAG,IAAI,CAACN,QAAQ,CAAC/sB,MAAM,CAACotB,OAAO,CAAC;IACzC,CAAC,MACI;MACDC,KAAK,GAAG,IAAIxT,UAAU,CAACuT,OAAO,CAAC;IACnC;IACA;IACA;IACA;IACA;IACA,IAAI/E,2BAA2B,IAAIgF,KAAK,CAACA,KAAK,CAACxzC,MAAM,GAAG,CAAC,CAAC,KAAK,CAAC,EAAE;MAC9D,MAAMyzC,aAAa,GAAG,IAAIzT,UAAU,CAACwT,KAAK,CAACxzC,MAAM,GAAG,CAAC,CAAC;MACtDyzC,aAAa,CAAC9xC,GAAG,CAAC6xC,KAAK,EAAE,CAAC,CAAC;MAC3BC,aAAa,CAACD,KAAK,CAACxzC,MAAM,CAAC,GAAG,CAAC;MAC/BwzC,KAAK,GAAGC,aAAa;IACzB;IACA;IACA,KAAK,IAAI7yC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4yC,KAAK,CAACxzC,MAAM,EAAEY,CAAC,EAAE,EAAE;MACnC,MAAM8yC,IAAI,GAAGF,KAAK,CAAC5yC,CAAC,CAAC;MACrB,IAAI,CAAC+yC,OAAO,CAACD,IAAI,CAAC;IACtB;EACJ;EACA;EACA;EACAE,aAAaA,CAACF,IAAI,EAAE;IAChB,IAAIA,IAAI,KAAKhG,IAAI,EAAE;MACf;MACA;IACJ;IACA,IAAIgG,IAAI,KAAKb,EAAE,EAAE;MACb;MACA;IACJ;IACA,IAAIa,IAAI,KAAKjG,EAAE,EAAE;MACb;MACA,IAAI,CAACwF,cAAc,CAAC,CAAC;MACrB;IACJ;IACA,IAAI,CAACU,OAAO,GAAG,IAAI,CAACE,eAAe;IACnC,IAAI,CAACC,aAAa,CAACJ,IAAI,CAAC;EAC5B;EACAG,eAAeA,CAACH,IAAI,EAAE;IAClB,IAAIA,IAAI,KAAKb,EAAE,EAAE;MACb;MACA;IACJ;IACA,IAAIa,IAAI,KAAKjG,EAAE,EAAE;MACb,IAAI,CAACsG,QAAQ,CAAC9C,OAAO,GAAG,IAAI,CAAC+C,mBAAmB,CAAC,CAAC;MAClD,IAAI,CAACL,OAAO,GAAG,IAAI,CAACM,eAAe;MACnC;IACJ;IACA,IAAI,CAACC,YAAY,CAACR,IAAI,CAAC;EAC3B;EACAO,eAAeA,CAACP,IAAI,EAAE;IAClB,IAAIA,IAAI,KAAKb,EAAE,EAAE;MACb;MACA;IACJ;IACA,IAAIa,IAAI,KAAKjG,EAAE,EAAE;MACb,IAAI,CAAC0G,iBAAiB,CAAC,CAAC;MACxB;IACJ;IACA,IAAI,CAACR,OAAO,GAAG,IAAI,CAACS,iBAAiB;IACrC,IAAI,CAACN,aAAa,CAACJ,IAAI,CAAC;EAC5B;EACAI,aAAaA,CAACJ,IAAI,EAAE;IAChB,IAAI,CAACC,OAAO,CAACD,IAAI,CAAC;EACtB;EACAU,iBAAiBA,CAACV,IAAI,EAAE;IACpB,IAAIA,IAAI,KAAKZ,KAAK,EAAE;MAChB,IAAI,CAACuB,UAAU,GAAG,IAAI,CAACL,mBAAmB,CAAC,CAAC;MAC5C,IAAI,CAACL,OAAO,GAAG,IAAI,CAACW,mBAAmB;MACvC;IACJ;IACA,IAAI,CAACJ,YAAY,CAACR,IAAI,CAAC;EAC3B;EACAY,mBAAmBA,CAACZ,IAAI,EAAE;IACtB,IAAIA,IAAI,KAAKb,EAAE,EAAE;MACb;MACA;IACJ;IACA,IAAIa,IAAI,KAAKjG,EAAE,EAAE;MACb,IAAI,CAACsG,QAAQ,CAAC3/B,OAAO,CAAC0M,IAAI,CAAC,CACvB,IAAI,CAACuzB,UAAU,EACf,IAAI,CAACL,mBAAmB,CAAC,CAAC,CAC7B,CAAC;MACF,IAAI,CAACK,UAAU,GAAGhhC,SAAS;MAC3B,IAAI,CAACsgC,OAAO,GAAG,IAAI,CAACM,eAAe;MACnC;IACJ;IACA,IAAI,CAACC,YAAY,CAACR,IAAI,CAAC;EAC3B;EACAS,iBAAiBA,CAAA,EAAG;IAChB,MAAMI,mBAAmB,GAAG,IAAI,CAACR,QAAQ,CAAC3/B,OAAO,CAACw0B,MAAM,CAAEiJ,MAAM,IAAK;MACjE,OAAOA,MAAM,CAAC,CAAC,CAAC,KAAK,gBAAgB;IACzC,CAAC,CAAC,CAAC,CAAC,CAAC;IACL,IAAI0C,mBAAmB,EAAE;MACrB,IAAI,CAACC,mBAAmB,GAAG3Q,QAAQ,CAAC0Q,mBAAmB,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;MAC/D,IAAI,CAACZ,OAAO,GAAG,IAAI,CAACc,qBAAqB;IAC7C,CAAC,MACI;MACD,IAAI,CAACd,OAAO,GAAG,IAAI,CAACe,0BAA0B;IAClD;EACJ;EACAA,0BAA0BA,CAAChB,IAAI,EAAE;IAC7B,IAAIA,IAAI,KAAKhG,IAAI,EAAE;MACf,IAAI,CAACiH,cAAc,CAAC,CAAC;MACrB;IACJ;IACA,IAAI,CAACT,YAAY,CAACR,IAAI,CAAC;EAC3B;EACAe,qBAAqBA,CAACf,IAAI,EAAE;IACxB;IACA,IAAI,IAAI,CAACc,mBAAmB,EAAE,KAAK,CAAC,EAAE;MAClC,IAAI,CAACG,cAAc,CAAC,CAAC;MACrB;IACJ;IACA,IAAI,CAACT,YAAY,CAACR,IAAI,CAAC;EAC3B;EACAiB,cAAcA,CAAA,EAAG;IACb,IAAI,CAACZ,QAAQ,CAAC7C,UAAU,GAAG,IAAI,CAAC0D,kBAAkB,CAAC,CAAC;IACpD,IAAI;MACA,IAAI,CAAC5B,OAAO,CAAC,IAAI,CAACe,QAAQ,CAAC;IAC/B,CAAC,CACD,OAAO91B,CAAC,EAAE;MACNgkB,OAAO,CAAC9S,GAAG,CAAE,uEAAsE,EAAElR,CAAC,CAAC;IAC3F;IACA,IAAI,CAACo1B,UAAU,CAAC,CAAC;EACrB;EACA;EACAa,YAAYA,CAACR,IAAI,EAAE;IACf,IAAI,CAACN,MAAM,CAACtyB,IAAI,CAAC4yB,IAAI,CAAC;EAC1B;EACAM,mBAAmBA,CAAA,EAAG;IAClB,OAAO,IAAI,CAACb,QAAQ,CAACntB,MAAM,CAAC,IAAI,CAAC4uB,kBAAkB,CAAC,CAAC,CAAC;EAC1D;EACAA,kBAAkBA,CAAA,EAAG;IACjB,MAAMC,SAAS,GAAG,IAAI7U,UAAU,CAAC,IAAI,CAACoT,MAAM,CAAC;IAC7C,IAAI,CAACA,MAAM,GAAG,EAAE;IAChB,OAAOyB,SAAS;EACpB;EACAxB,UAAUA,CAAA,EAAG;IACT,IAAI,CAACU,QAAQ,GAAG;MACZ9C,OAAO,EAAE59B,SAAS;MAClBe,OAAO,EAAE,EAAE;MACX88B,UAAU,EAAE79B;IAChB,CAAC;IACD,IAAI,CAAC+/B,MAAM,GAAG,EAAE;IAChB,IAAI,CAACiB,UAAU,GAAGhhC,SAAS;IAC3B,IAAI,CAACsgC,OAAO,GAAG,IAAI,CAACC,aAAa;EACrC;AACJ;;;;;;;;;;;;;;;;;;;;AC5NiC;AACW;AACP;AACU;AACN;AACiB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAMjG,YAAY,CAAC;EACtBpxC,WAAWA,CAACu4C,OAAO,EAAE7F,UAAU,EAAExsB,MAAM,EAAE;IACrC,IAAI,CAACqyB,OAAO,GAAGA,OAAO;IACtB,IAAI,CAAC7F,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAAC8F,UAAU,GAAG,KAAK;IACvB,IAAI,CAACC,oBAAoB,GAAG;MACxB;MACAC,SAAS,EAAExqB,KAAK,IAAI;QAChB,IAAI,CAACS,KAAK,CAAE,uBAAsBT,KAAK,CAACrW,OAAO,CAACgc,MAAO,EAAC,CAAC;QACzD,IAAI,CAAC2kB,UAAU,GAAG,IAAI;QACtB,IAAI,CAACG,iBAAiB,GAAGzqB,KAAK,CAACrW,OAAO,CAACmY,OAAO;QAC9C;QACA,IAAI,IAAI,CAAC2oB,iBAAiB,KAAKpH,kDAAQ,CAACqH,IAAI,EAAE;UAC1C,IAAI,CAACC,mBAAmB,GAAG,IAAI;QACnC;QACA,IAAI,CAACC,eAAe,CAAC5qB,KAAK,CAACrW,OAAO,CAAC;QACnC,IAAI,CAACy2B,SAAS,CAACpgB,KAAK,CAAC;MACzB,CAAC;MACD;MACA6qB,OAAO,EAAE7qB,KAAK,IAAI;QACd;QACA;QACA;QACA;QACA;QACA;QACA;QACA,MAAM8qB,YAAY,GAAG9qB,KAAK,CAACrW,OAAO,CAACmhC,YAAY;QAC/C,MAAMC,SAAS,GAAG,IAAI,CAACC,cAAc,CAACF,YAAY,CAAC,IAAI,IAAI,CAACvK,kBAAkB;QAC9E;QACA,MAAM1yB,OAAO,GAAGmS,KAAK;QACrB,MAAM0e,MAAM,GAAG,IAAI;QACnB,MAAM0H,SAAS,GAAG,IAAI,CAACqE,iBAAiB,KAAKpH,kDAAQ,CAACqH,IAAI,GACpD78B,OAAO,CAAClE,OAAO,CAACw8B,GAAG,GACnBt4B,OAAO,CAAClE,OAAO,CAAC,YAAY,CAAC;QACnC;QACA;QACAkE,OAAO,CAACs4B,GAAG,GAAG,CAACx8B,OAAO,GAAG,CAAC,CAAC,KAAK;UAC5B,OAAO+0B,MAAM,CAACyH,GAAG,CAACC,SAAS,EAAE0E,YAAY,EAAEnhC,OAAO,CAAC;QACvD,CAAC;QACDkE,OAAO,CAACy4B,IAAI,GAAG,CAAC38B,OAAO,GAAG,CAAC,CAAC,KAAK;UAC7B,OAAO+0B,MAAM,CAAC4H,IAAI,CAACF,SAAS,EAAE0E,YAAY,EAAEnhC,OAAO,CAAC;QACxD,CAAC;QACDohC,SAAS,CAACl9B,OAAO,CAAC;MACtB,CAAC;MACD;MACAo9B,OAAO,EAAEjrB,KAAK,IAAI;QACd,MAAM2P,QAAQ,GAAG,IAAI,CAACub,gBAAgB,CAAClrB,KAAK,CAACrW,OAAO,CAAC,YAAY,CAAC,CAAC;QACnE,IAAIgmB,QAAQ,EAAE;UACVA,QAAQ,CAAC3P,KAAK,CAAC;UACf;UACA,OAAO,IAAI,CAACkrB,gBAAgB,CAAClrB,KAAK,CAACrW,OAAO,CAAC,YAAY,CAAC,CAAC;QAC7D,CAAC,MACI;UACD,IAAI,CAAC62B,kBAAkB,CAACxgB,KAAK,CAAC;QAClC;MACJ,CAAC;MACD;MACAmrB,KAAK,EAAEnrB,KAAK,IAAI;QACZ,IAAI,CAACqgB,YAAY,CAACrgB,KAAK,CAAC;MAC5B;IACJ,CAAC;IACD;IACA,IAAI,CAACorB,QAAQ,GAAG,CAAC;IACjB;IACA,IAAI,CAACJ,cAAc,GAAG,CAAC,CAAC;IACxB;IACA,IAAI,CAACE,gBAAgB,GAAG,CAAC,CAAC;IAC1B,IAAI,CAACG,YAAY,GAAG,EAAE;IACtB,IAAI,CAACV,mBAAmB,GAAG,KAAK;IAChC,IAAI,CAACW,qBAAqB,GAAG3sB,IAAI,CAAC4sB,GAAG,CAAC,CAAC;IACvC,IAAI,CAAC9qB,KAAK,GAAGzI,MAAM,CAACyI,KAAK;IACzB,IAAI,CAAC8iB,aAAa,GAAGvrB,MAAM,CAACurB,aAAa;IACzC,IAAI,CAACc,cAAc,GAAGrsB,MAAM,CAACqsB,cAAc;IAC3C,IAAI,CAACI,iBAAiB,GAAGzsB,MAAM,CAACysB,iBAAiB;IACjD,IAAI,CAACf,iBAAiB,GAAG1rB,MAAM,CAAC0rB,iBAAiB;IACjD,IAAI,CAACC,iBAAiB,GAAG3rB,MAAM,CAAC2rB,iBAAiB;IACjD,IAAI,CAACC,gBAAgB,GAAG5rB,MAAM,CAAC4rB,gBAAgB;IAC/C,IAAI,CAACC,qBAAqB,GAAG7rB,MAAM,CAAC6rB,qBAAqB;IACzD,IAAI,CAACC,mBAAmB,GAAG9rB,MAAM,CAAC8rB,mBAAmB;IACrD,IAAI,CAACK,mBAAmB,GAAGnsB,MAAM,CAACmsB,mBAAmB;IACrD,IAAI,CAACJ,2BAA2B,GAAG/rB,MAAM,CAAC+rB,2BAA2B;IACrE,IAAI,CAACC,6BAA6B,GAAGhsB,MAAM,CAACgsB,6BAA6B;IACzE,IAAI,CAAC5D,SAAS,GAAGpoB,MAAM,CAACooB,SAAS;IACjC,IAAI,CAAC8D,YAAY,GAAGlsB,MAAM,CAACksB,YAAY;IACvC,IAAI,CAAC7D,YAAY,GAAGroB,MAAM,CAACqoB,YAAY;IACvC,IAAI,CAACC,gBAAgB,GAAGtoB,MAAM,CAACsoB,gBAAgB;IAC/C,IAAI,CAACI,gBAAgB,GAAG1oB,MAAM,CAAC0oB,gBAAgB;IAC/C,IAAI,CAACH,kBAAkB,GAAGvoB,MAAM,CAACuoB,kBAAkB;IACnD,IAAI,CAACC,kBAAkB,GAAGxoB,MAAM,CAACwoB,kBAAkB;IACnD,IAAI,CAACC,gBAAgB,GAAGzoB,MAAM,CAACyoB,gBAAgB;EACnD;EACA,IAAIiE,gBAAgBA,CAAA,EAAG;IACnB,OAAO,IAAI,CAAC+F,iBAAiB;EACjC;EACA,IAAI3J,SAASA,CAAA,EAAG;IACZ,OAAO,IAAI,CAACwJ,UAAU;EAC1B;EACA5d,KAAKA,CAAA,EAAG;IACJ,MAAM7Q,MAAM,GAAG,IAAIysB,8CAAM;IACzB;IACApB,QAAQ,IAAI;MACR,MAAMlnB,KAAK,GAAGumB,qDAAS,CAACU,YAAY,CAACC,QAAQ,EAAE,IAAI,CAACyD,mBAAmB,CAAC;MACxE;MACA,IAAI,CAAC,IAAI,CAACxG,mBAAmB,EAAE;QAC3B,IAAI,CAAC1jB,KAAK,CAAE,OAAMT,KAAM,EAAC,CAAC;MAC9B;MACA,MAAMwrB,kBAAkB,GAAG,IAAI,CAACjB,oBAAoB,CAACvqB,KAAK,CAACwmB,OAAO,CAAC,IAAI,IAAI,CAAC/F,gBAAgB;MAC5F+K,kBAAkB,CAACxrB,KAAK,CAAC;IAC7B,CAAC;IACD;IACA,MAAM;MACF,IAAI,CAACS,KAAK,CAAC,UAAU,CAAC;IAC1B,CAAC,CAAC;IACF,IAAI,CAAC+jB,UAAU,CAAC5b,SAAS,GAAI+X,GAAG,IAAK;MACjC,IAAI,CAAClgB,KAAK,CAAC,eAAe,CAAC;MAC3B,IAAI,CAAC6qB,qBAAqB,GAAG3sB,IAAI,CAAC4sB,GAAG,CAAC,CAAC;MACvC,IAAI,IAAI,CAACpH,mBAAmB,EAAE;QAC1B,MAAMsH,gBAAgB,GAAG9K,GAAG,CAAC1/B,IAAI,YAAYyqC,WAAW,GAClD,IAAI3E,WAAW,CAAC,CAAC,CAACxrB,MAAM,CAAColB,GAAG,CAAC1/B,IAAI,CAAC,GAClC0/B,GAAG,CAAC1/B,IAAI;QACd,IAAI,CAACwf,KAAK,CAAE,OAAMgrB,gBAAiB,EAAC,CAAC;MACzC;MACA5vB,MAAM,CAACgtB,UAAU,CAAClI,GAAG,CAAC1/B,IAAI,EAAE,IAAI,CAAC8iC,2BAA2B,CAAC;IACjE,CAAC;IACD,IAAI,CAACS,UAAU,CAAC3b,OAAO,GAAI+Z,UAAU,IAAK;MACtC,IAAI,CAACniB,KAAK,CAAE,wBAAuB,IAAI,CAAC+jB,UAAU,CAACt7B,GAAI,EAAC,CAAC;MACzD,IAAI,CAACyiC,QAAQ,CAAC,CAAC;MACf,IAAI,CAACrL,gBAAgB,CAACsC,UAAU,CAAC;IACrC,CAAC;IACD,IAAI,CAAC4B,UAAU,CAAC1b,OAAO,GAAI8iB,UAAU,IAAK;MACtC,IAAI,CAAClL,gBAAgB,CAACkL,UAAU,CAAC;IACrC,CAAC;IACD,IAAI,CAACpH,UAAU,CAAC/B,MAAM,GAAG,MAAM;MAC3B;MACA,MAAM4B,cAAc,GAAG9+B,MAAM,CAACs6B,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAACwE,cAAc,CAAC;MAC7D,IAAI,CAAC5jB,KAAK,CAAC,sBAAsB,CAAC;MAClC4jB,cAAc,CAAC,gBAAgB,CAAC,GAAG,IAAI,CAACd,aAAa,CAACsI,iBAAiB,CAAC,CAAC;MACzExH,cAAc,CAAC,YAAY,CAAC,GAAG,CAC3B,IAAI,CAACV,iBAAiB,EACtB,IAAI,CAACD,iBAAiB,CACzB,CAAC34B,IAAI,CAAC,GAAG,CAAC;MACX,IAAI,CAAC+gC,SAAS,CAAC;QAAEtF,OAAO,EAAE,SAAS;QAAE78B,OAAO,EAAE06B;MAAe,CAAC,CAAC;IACnE,CAAC;EACL;EACAuG,eAAeA,CAACjhC,OAAO,EAAE;IACrB,IAAIA,OAAO,CAACmY,OAAO,KAAKuhB,kDAAQ,CAAC0I,IAAI,IACjCpiC,OAAO,CAACmY,OAAO,KAAKuhB,kDAAQ,CAACqH,IAAI,EAAE;MACnC;IACJ;IACA;IACA;IACA,IAAI,CAAC/gC,OAAO,CAAC,YAAY,CAAC,EAAE;MACxB;IACJ;IACA;IACA;IACA;IACA,MAAM,CAACqiC,cAAc,EAAEC,cAAc,CAAC,GAAGtiC,OAAO,CAAC,YAAY,CAAC,CACzDzT,KAAK,CAAC,GAAG,CAAC,CACV2K,GAAG,CAAEs5B,CAAC,IAAKf,QAAQ,CAACe,CAAC,EAAE,EAAE,CAAC,CAAC;IAChC,IAAI,IAAI,CAACwJ,iBAAiB,KAAK,CAAC,IAAIsI,cAAc,KAAK,CAAC,EAAE;MACtD,MAAMC,GAAG,GAAGlxB,IAAI,CAACkN,GAAG,CAAC,IAAI,CAACyb,iBAAiB,EAAEsI,cAAc,CAAC;MAC5D,IAAI,CAACxrB,KAAK,CAAE,mBAAkByrB,GAAI,IAAG,CAAC;MACtC,IAAI,CAACC,OAAO,GAAGC,WAAW,CAAC,MAAM;QAC7B,IAAI,IAAI,CAAC5H,UAAU,CAAC1f,UAAU,KAAKse,uDAAgB,CAACnc,IAAI,EAAE;UACtD,IAAI,CAACud,UAAU,CAACtkB,IAAI,CAAC6iB,0CAAI,CAACC,EAAE,CAAC;UAC7B,IAAI,CAACviB,KAAK,CAAC,UAAU,CAAC;QAC1B;MACJ,CAAC,EAAEyrB,GAAG,CAAC;IACX;IACA,IAAI,IAAI,CAACxI,iBAAiB,KAAK,CAAC,IAAIsI,cAAc,KAAK,CAAC,EAAE;MACtD,MAAME,GAAG,GAAGlxB,IAAI,CAACkN,GAAG,CAAC,IAAI,CAACwb,iBAAiB,EAAEsI,cAAc,CAAC;MAC5D,IAAI,CAACvrB,KAAK,CAAE,oBAAmByrB,GAAI,IAAG,CAAC;MACvC,IAAI,CAACG,OAAO,GAAGD,WAAW,CAAC,MAAM;QAC7B,MAAME,KAAK,GAAG3tB,IAAI,CAAC4sB,GAAG,CAAC,CAAC,GAAG,IAAI,CAACD,qBAAqB;QACrD;QACA,IAAIgB,KAAK,GAAGJ,GAAG,GAAG,CAAC,EAAE;UACjB,IAAI,CAACzrB,KAAK,CAAE,gDAA+C6rB,KAAM,IAAG,CAAC;UACrE,IAAI,CAACC,wBAAwB,CAAC,CAAC;QACnC;MACJ,CAAC,EAAEL,GAAG,CAAC;IACX;EACJ;EACAK,wBAAwBA,CAAA,EAAG;IACvB,IAAI,IAAI,CAACvI,6BAA6B,EAAE;MACpC,IAAI,CAACvjB,KAAK,CAAC,oEAAoE,CAAC;MAChF,IAAI,CAAColB,gBAAgB,CAAC,CAAC;IAC3B,CAAC,MACI;MACD,IAAI,CAACplB,KAAK,CAAC,gCAAgC,CAAC;MAC5C,IAAI,CAAC+rB,eAAe,CAAC,CAAC;IAC1B;EACJ;EACAxH,eAAeA,CAAA,EAAG;IACd,IAAI,IAAI,CAACR,UAAU,EAAE;MACjB,IAAI,IAAI,CAACA,UAAU,CAAC1f,UAAU,KAAKse,uDAAgB,CAACre,UAAU,IAC1D,IAAI,CAACyf,UAAU,CAAC1f,UAAU,KAAKse,uDAAgB,CAACnc,IAAI,EAAE;QACtD,IAAI,CAACslB,wBAAwB,CAAC,CAAC;MACnC;IACJ;EACJ;EACAC,eAAeA,CAAA,EAAG;IACd,IAAI,CAAChI,UAAU,CAAC5b,SAAS,GAAG,MAAM,CAAE,CAAC,CAAC,CAAC;IACvC,IAAI,CAAC4b,UAAU,CAACpkB,KAAK,CAAC,CAAC;EAC3B;EACAylB,gBAAgBA,CAAA,EAAG;IACf,IAAI,OAAO,IAAI,CAACrB,UAAU,CAAChC,SAAS,KAAK,UAAU,EAAE;MACjDF,uEAAgB,CAAC,IAAI,CAACkC,UAAU,EAAGrhB,GAAG,IAAK,IAAI,CAAC1C,KAAK,CAAC0C,GAAG,CAAC,CAAC;IAC/D;IACA;IACA,IAAI,CAACqhB,UAAU,CAAChC,SAAS,CAAC,CAAC;EAC/B;EACAsJ,SAASA,CAAC9zC,MAAM,EAAE;IACd,MAAM;MAAEwuC,OAAO;MAAE78B,OAAO;MAAE0Z,IAAI;MAAEojB,UAAU;MAAEE;IAAwB,CAAC,GAAG3uC,MAAM;IAC9E,MAAMgoB,KAAK,GAAG,IAAIumB,qDAAS,CAAC;MACxBC,OAAO;MACP78B,OAAO;MACP0Z,IAAI;MACJojB,UAAU;MACVC,kBAAkB,EAAE,IAAI,CAACiE,mBAAmB;MAC5ChE;IACJ,CAAC,CAAC;IACF,IAAI8F,QAAQ,GAAGzsB,KAAK,CAACunB,SAAS,CAAC,CAAC;IAChC,IAAI,IAAI,CAACpD,mBAAmB,EAAE;MAC1B,IAAI,CAAC1jB,KAAK,CAAE,OAAMgsB,QAAS,EAAC,CAAC;IACjC,CAAC,MACI;MACD,IAAI,CAAChsB,KAAK,CAAE,OAAMT,KAAM,EAAC,CAAC;IAC9B;IACA,IAAI,IAAI,CAAC8jB,mBAAmB,IAAI,OAAO2I,QAAQ,KAAK,QAAQ,EAAE;MAC1DA,QAAQ,GAAG,IAAIzF,WAAW,CAAC,CAAC,CAACtrB,MAAM,CAAC+wB,QAAQ,CAAC;IACjD;IACA,IAAI,OAAOA,QAAQ,KAAK,QAAQ,IAAI,CAAC,IAAI,CAAC7I,gBAAgB,EAAE;MACxD,IAAI,CAACY,UAAU,CAACtkB,IAAI,CAACusB,QAAQ,CAAC;IAClC,CAAC,MACI;MACD,IAAIC,GAAG,GAAGD,QAAQ;MAClB,OAAOC,GAAG,CAACn3C,MAAM,GAAG,CAAC,EAAE;QACnB,MAAMwzC,KAAK,GAAG2D,GAAG,CAACroC,SAAS,CAAC,CAAC,EAAE,IAAI,CAACw/B,qBAAqB,CAAC;QAC1D6I,GAAG,GAAGA,GAAG,CAACroC,SAAS,CAAC,IAAI,CAACw/B,qBAAqB,CAAC;QAC/C,IAAI,CAACW,UAAU,CAACtkB,IAAI,CAAC6oB,KAAK,CAAC;QAC3B,IAAI,CAACtoB,KAAK,CAAE,gBAAesoB,KAAK,CAACxzC,MAAO,iBAAgBm3C,GAAG,CAACn3C,MAAO,EAAC,CAAC;MACzE;IACJ;EACJ;EACAuwC,OAAOA,CAAA,EAAG;IACN,IAAI,IAAI,CAAChF,SAAS,EAAE;MAChB,IAAI;QACA;QACA,MAAM2D,iBAAiB,GAAGl/B,MAAM,CAACs6B,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC4E,iBAAiB,CAAC;QACnE,IAAI,CAACA,iBAAiB,CAACkI,OAAO,EAAE;UAC5BlI,iBAAiB,CAACkI,OAAO,GAAI,SAAQ,IAAI,CAACvB,QAAQ,EAAG,EAAC;QAC1D;QACA,IAAI,CAACjJ,eAAe,CAACsC,iBAAiB,CAACkI,OAAO,EAAE3sB,KAAK,IAAI;UACrD,IAAI,CAACwsB,eAAe,CAAC,CAAC;UACtB,IAAI,CAACb,QAAQ,CAAC,CAAC;UACf,IAAI,CAACzH,YAAY,CAAClkB,KAAK,CAAC;QAC5B,CAAC,CAAC;QACF,IAAI,CAAC8rB,SAAS,CAAC;UAAEtF,OAAO,EAAE,YAAY;UAAE78B,OAAO,EAAE86B;QAAkB,CAAC,CAAC;MACzE,CAAC,CACD,OAAOz7B,KAAK,EAAE;QACV,IAAI,CAACyX,KAAK,CAAE,oCAAmCzX,KAAM,EAAC,CAAC;MAC3D;IACJ,CAAC,MACI;MACD,IAAI,IAAI,CAACw7B,UAAU,CAAC1f,UAAU,KAAKse,uDAAgB,CAACre,UAAU,IAC1D,IAAI,CAACyf,UAAU,CAAC1f,UAAU,KAAKse,uDAAgB,CAACnc,IAAI,EAAE;QACtD,IAAI,CAACulB,eAAe,CAAC,CAAC;MAC1B;IACJ;EACJ;EACAb,QAAQA,CAAA,EAAG;IACP,IAAI,CAACrB,UAAU,GAAG,KAAK;IACvB,IAAI,IAAI,CAAC6B,OAAO,EAAE;MACdS,aAAa,CAAC,IAAI,CAACT,OAAO,CAAC;MAC3B,IAAI,CAACA,OAAO,GAAGvjC,SAAS;IAC5B;IACA,IAAI,IAAI,CAACyjC,OAAO,EAAE;MACdO,aAAa,CAAC,IAAI,CAACP,OAAO,CAAC;MAC3B,IAAI,CAACA,OAAO,GAAGzjC,SAAS;IAC5B;EACJ;EACAq4B,OAAOA,CAACjpC,MAAM,EAAE;IACZ,MAAM;MAAE0pC,WAAW;MAAE/3B,OAAO;MAAE0Z,IAAI;MAAEojB,UAAU;MAAEE;IAAwB,CAAC,GAAG3uC,MAAM;IAClF,MAAM60C,IAAI,GAAGtnC,MAAM,CAACs6B,MAAM,CAAC;MAAE6B;IAAY,CAAC,EAAE/3B,OAAO,CAAC;IACpD,IAAI,CAACmiC,SAAS,CAAC;MACXtF,OAAO,EAAE,MAAM;MACf78B,OAAO,EAAEkjC,IAAI;MACbxpB,IAAI;MACJojB,UAAU;MACVE;IACJ,CAAC,CAAC;EACN;EACAxE,eAAeA,CAACC,SAAS,EAAEzS,QAAQ,EAAE;IACjC,IAAI,CAACub,gBAAgB,CAAC9I,SAAS,CAAC,GAAGzS,QAAQ;EAC/C;EACAj8B,SAASA,CAACguC,WAAW,EAAE/R,QAAQ,EAAEhmB,OAAO,GAAG,CAAC,CAAC,EAAE;IAC3CA,OAAO,GAAGpE,MAAM,CAACs6B,MAAM,CAAC,CAAC,CAAC,EAAEl2B,OAAO,CAAC;IACpC,IAAI,CAACA,OAAO,CAACynB,EAAE,EAAE;MACbznB,OAAO,CAACynB,EAAE,GAAI,OAAM,IAAI,CAACga,QAAQ,EAAG,EAAC;IACzC;IACAzhC,OAAO,CAAC+3B,WAAW,GAAGA,WAAW;IACjC,IAAI,CAACsJ,cAAc,CAACrhC,OAAO,CAACynB,EAAE,CAAC,GAAGzB,QAAQ;IAC1C,IAAI,CAACmc,SAAS,CAAC;MAAEtF,OAAO,EAAE,WAAW;MAAE78B;IAAQ,CAAC,CAAC;IACjD,MAAM+0B,MAAM,GAAG,IAAI;IACnB,OAAO;MACHtN,EAAE,EAAEznB,OAAO,CAACynB,EAAE;MACd8Q,WAAWA,CAAC2K,IAAI,EAAE;QACd,OAAOnO,MAAM,CAACwD,WAAW,CAACv4B,OAAO,CAACynB,EAAE,EAAEyb,IAAI,CAAC;MAC/C;IACJ,CAAC;EACL;EACA3K,WAAWA,CAAC9Q,EAAE,EAAEznB,OAAO,GAAG,CAAC,CAAC,EAAE;IAC1BA,OAAO,GAAGpE,MAAM,CAACs6B,MAAM,CAAC,CAAC,CAAC,EAAEl2B,OAAO,CAAC;IACpC,OAAO,IAAI,CAACqhC,cAAc,CAAC5Z,EAAE,CAAC;IAC9BznB,OAAO,CAACynB,EAAE,GAAGA,EAAE;IACf,IAAI,CAAC0a,SAAS,CAAC;MAAEtF,OAAO,EAAE,aAAa;MAAE78B;IAAQ,CAAC,CAAC;EACvD;EACAq8B,KAAKA,CAACC,aAAa,EAAE;IACjB,MAAM6G,IAAI,GAAG7G,aAAa,IAAK,MAAK,IAAI,CAACmF,QAAQ,EAAG,EAAC;IACrD,IAAI,CAACU,SAAS,CAAC;MACXtF,OAAO,EAAE,OAAO;MAChB78B,OAAO,EAAE;QACLojC,WAAW,EAAED;MACjB;IACJ,CAAC,CAAC;IACF,MAAMpO,MAAM,GAAG,IAAI;IACnB,OAAO;MACHtN,EAAE,EAAE0b,IAAI;MACR5G,MAAMA,CAAA,EAAG;QACLxH,MAAM,CAACwH,MAAM,CAAC4G,IAAI,CAAC;MACvB,CAAC;MACDnf,KAAKA,CAAA,EAAG;QACJ+Q,MAAM,CAAC/Q,KAAK,CAACmf,IAAI,CAAC;MACtB;IACJ,CAAC;EACL;EACA5G,MAAMA,CAACD,aAAa,EAAE;IAClB,IAAI,CAAC6F,SAAS,CAAC;MACXtF,OAAO,EAAE,QAAQ;MACjB78B,OAAO,EAAE;QACLojC,WAAW,EAAE9G;MACjB;IACJ,CAAC,CAAC;EACN;EACAtY,KAAKA,CAACsY,aAAa,EAAE;IACjB,IAAI,CAAC6F,SAAS,CAAC;MACXtF,OAAO,EAAE,OAAO;MAChB78B,OAAO,EAAE;QACLojC,WAAW,EAAE9G;MACjB;IACJ,CAAC,CAAC;EACN;EACAE,GAAGA,CAACC,SAAS,EAAEC,cAAc,EAAE18B,OAAO,GAAG,CAAC,CAAC,EAAE;IACzCA,OAAO,GAAGpE,MAAM,CAACs6B,MAAM,CAAC,CAAC,CAAC,EAAEl2B,OAAO,CAAC;IACpC,IAAI,IAAI,CAAC8gC,iBAAiB,KAAKpH,kDAAQ,CAACqH,IAAI,EAAE;MAC1C/gC,OAAO,CAACynB,EAAE,GAAGgV,SAAS;IAC1B,CAAC,MACI;MACDz8B,OAAO,CAAC,YAAY,CAAC,GAAGy8B,SAAS;IACrC;IACAz8B,OAAO,CAACmhC,YAAY,GAAGzE,cAAc;IACrC,IAAI,CAACyF,SAAS,CAAC;MAAEtF,OAAO,EAAE,KAAK;MAAE78B;IAAQ,CAAC,CAAC;EAC/C;EACA28B,IAAIA,CAACF,SAAS,EAAEC,cAAc,EAAE18B,OAAO,GAAG,CAAC,CAAC,EAAE;IAC1CA,OAAO,GAAGpE,MAAM,CAACs6B,MAAM,CAAC,CAAC,CAAC,EAAEl2B,OAAO,CAAC;IACpC,IAAI,IAAI,CAAC8gC,iBAAiB,KAAKpH,kDAAQ,CAACqH,IAAI,EAAE;MAC1C/gC,OAAO,CAACynB,EAAE,GAAGgV,SAAS;IAC1B,CAAC,MACI;MACDz8B,OAAO,CAAC,YAAY,CAAC,GAAGy8B,SAAS;IACrC;IACAz8B,OAAO,CAACmhC,YAAY,GAAGzE,cAAc;IACrC,OAAO,IAAI,CAACyF,SAAS,CAAC;MAAEtF,OAAO,EAAE,MAAM;MAAE78B;IAAQ,CAAC,CAAC;EACvD;AACJ;;;;;;;;;;;;;;;ACrYA;AACA;AACA;AACO,IAAIy5B,gBAAgB;AAC3B,CAAC,UAAUA,gBAAgB,EAAE;EACzBA,gBAAgB,CAACA,gBAAgB,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,GAAG,YAAY;EACnEA,gBAAgB,CAACA,gBAAgB,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM;EACvDA,gBAAgB,CAACA,gBAAgB,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,GAAG,SAAS;EAC7DA,gBAAgB,CAACA,gBAAgB,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ;AAC/D,CAAC,EAAEA,gBAAgB,GAAGA,gBAAgB,KAAKA,gBAAgB,GAAG,CAAC,CAAC,CAAC,CAAC;AAClE;AACA;AACA;AACO,IAAID,eAAe;AAC1B,CAAC,UAAUA,eAAe,EAAE;EACxBA,eAAe,CAACA,eAAe,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ;EACzDA,eAAe,CAACA,eAAe,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,GAAG,cAAc;EACrEA,eAAe,CAACA,eAAe,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,GAAG,UAAU;AACjE,CAAC,EAAEA,eAAe,GAAGA,eAAe,KAAKA,eAAe,GAAG,CAAC,CAAC,CAAC,CAAC;;;;;;;;;;;;;;AClB/D;AACA;AACA;AACA;AACA;AACO,MAAME,QAAQ,CAAC;EAClB;AACJ;AACA;AACA;AACA;AACA;EACIvxC,WAAWA,CAACk7C,QAAQ,EAAE;IAClB,IAAI,CAACA,QAAQ,GAAGA,QAAQ;EAC5B;EACA;AACJ;AACA;EACInB,iBAAiBA,CAAA,EAAG;IAChB,OAAO,IAAI,CAACmB,QAAQ,CAACjiC,IAAI,CAAC,GAAG,CAAC;EAClC;EACA;AACJ;AACA;EACIs6B,gBAAgBA,CAAA,EAAG;IACf,OAAO,IAAI,CAAC2H,QAAQ,CAACnsC,GAAG,CAACspB,CAAC,IAAK,IAAGA,CAAC,CAAC9jB,OAAO,CAAC,GAAG,EAAE,EAAE,CAAE,QAAO,CAAC;EACjE;AACJ;AACA;AACA;AACA;AACAg9B,QAAQ,CAAC4J,IAAI,GAAG,KAAK;AACrB;AACA;AACA;AACA5J,QAAQ,CAAC0I,IAAI,GAAG,KAAK;AACrB;AACA;AACA;AACA1I,QAAQ,CAACqH,IAAI,GAAG,KAAK;AACrB;AACA;AACA;AACArH,QAAQ,CAAC/I,OAAO,GAAG,IAAI+I,QAAQ,CAAC,CAC5BA,QAAQ,CAACqH,IAAI,EACbrH,QAAQ,CAAC0I,IAAI,EACb1I,QAAQ,CAAC4J,IAAI,CAChB,CAAC;;;;;;;;;;;;;;AC/CF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,SAASA,CAACC,KAAK,EAAEC,QAAQ,EAAE;EAClC,IAAI/gB,KAAK,GAAG,CAAC,CAAC;IACV92B,MAAM,GAAG43C,KAAK,IAAI,IAAI,GAAG,CAAC,GAAGA,KAAK,CAAC53C,MAAM;EAE7C,OAAO,EAAE82B,KAAK,GAAG92B,MAAM,EAAE;IACvB,IAAI63C,QAAQ,CAACD,KAAK,CAAC9gB,KAAK,CAAC,EAAEA,KAAK,EAAE8gB,KAAK,CAAC,KAAK,KAAK,EAAE;MAClD;IACF;EACF;EACA,OAAOA,KAAK;AACd;AAEA,iEAAeD,SAAS;;;;;;;;;;;;;;;ACrB4B;;AAEpD;AACA,IAAII,WAAW,GAAG,MAAM;;AAExB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,QAAQA,CAAC9nB,MAAM,EAAE;EACxB,OAAOA,MAAM,GACTA,MAAM,CAACrG,KAAK,CAAC,CAAC,EAAEiuB,+DAAe,CAAC5nB,MAAM,CAAC,GAAG,CAAC,CAAC,CAACpf,OAAO,CAACinC,WAAW,EAAE,EAAE,CAAC,GACrE7nB,MAAM;AACZ;AAEA,iEAAe8nB,QAAQ;;;;;;;;;;;;;;;AClBc;;AAErC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASE,YAAYA,CAACx2C,KAAK,EAAE;EAC3B,OAAO,OAAOA,KAAK,IAAI,UAAU,GAAGA,KAAK,GAAGu2C,oDAAQ;AACtD;AAEA,iEAAeC,YAAY;;;;;;;;;;;;;;ACb3B;AACA,IAAIC,YAAY,GAAG,IAAI;;AAEvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASL,eAAeA,CAAC5nB,MAAM,EAAE;EAC/B,IAAI4G,KAAK,GAAG5G,MAAM,CAAClwB,MAAM;EAEzB,OAAO82B,KAAK,EAAE,IAAIqhB,YAAY,CAACphB,IAAI,CAAC7G,MAAM,CAACkY,MAAM,CAACtR,KAAK,CAAC,CAAC,EAAE,CAAC;EAC5D,OAAOA,KAAK;AACd;AAEA,iEAAeghB,eAAe;;;;;;;;;;;;;;;;;;AClBU;AACF;AACQ;AACX;;AAEnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS7nC,OAAOA,CAACooC,UAAU,EAAER,QAAQ,EAAE;EACrC,IAAIS,IAAI,GAAG5nB,uDAAO,CAAC2nB,UAAU,CAAC,GAAGV,qDAAS,GAAGS,oDAAQ;EACrD,OAAOE,IAAI,CAACD,UAAU,EAAEH,4DAAY,CAACL,QAAQ,CAAC,CAAC;AACjD;AAEA,iEAAe5nC,OAAO;;;;;;;;;;;;;;;ACxCe;;AAErC;AACA,IAAIuoC,QAAQ,GAAG,CAAC,GAAG,CAAC;EAChBC,WAAW,GAAG,uBAAuB;;AAEzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,QAAQA,CAACh3C,KAAK,EAAE;EACvB,IAAI,CAACA,KAAK,EAAE;IACV,OAAOA,KAAK,KAAK,CAAC,GAAGA,KAAK,GAAG,CAAC;EAChC;EACAA,KAAK,GAAG62C,wDAAQ,CAAC72C,KAAK,CAAC;EACvB,IAAIA,KAAK,KAAK82C,QAAQ,IAAI92C,KAAK,KAAK,CAAC82C,QAAQ,EAAE;IAC7C,IAAIG,IAAI,GAAIj3C,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAE;IAC/B,OAAOi3C,IAAI,GAAGF,WAAW;EAC3B;EACA,OAAO/2C,KAAK,KAAKA,KAAK,GAAGA,KAAK,GAAG,CAAC;AACpC;AAEA,iEAAeg3C,QAAQ;;;;;;;;;;;;;;;ACzCc;;AAErC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASlkB,SAASA,CAAC9yB,KAAK,EAAE;EACxB,IAAI6kB,MAAM,GAAGmyB,wDAAQ,CAACh3C,KAAK,CAAC;IACxBk3C,SAAS,GAAGryB,MAAM,GAAG,CAAC;EAE1B,OAAOA,MAAM,KAAKA,MAAM,GAAIqyB,SAAS,GAAGryB,MAAM,GAAGqyB,SAAS,GAAGryB,MAAM,GAAI,CAAC;AAC1E;AAEA,iEAAeiO,SAAS;;;;;;;;;;;;;;;;;ACnCc;AACD;AACA;;AAErC;AACA,IAAIskB,GAAG,GAAG,CAAC,GAAG,CAAC;;AAEf;AACA,IAAIC,UAAU,GAAG,oBAAoB;;AAErC;AACA,IAAIC,UAAU,GAAG,YAAY;;AAE7B;AACA,IAAIC,SAAS,GAAG,aAAa;;AAE7B;AACA,IAAIC,YAAY,GAAGrV,QAAQ;;AAE3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS0U,QAAQA,CAAC72C,KAAK,EAAE;EACvB,IAAI,OAAOA,KAAK,IAAI,QAAQ,EAAE;IAC5B,OAAOA,KAAK;EACd;EACA,IAAIm3C,wDAAQ,CAACn3C,KAAK,CAAC,EAAE;IACnB,OAAOo3C,GAAG;EACZ;EACA,IAAI3rB,wDAAQ,CAACzrB,KAAK,CAAC,EAAE;IACnB,IAAIy3C,KAAK,GAAG,OAAOz3C,KAAK,CAAC03C,OAAO,IAAI,UAAU,GAAG13C,KAAK,CAAC03C,OAAO,CAAC,CAAC,GAAG13C,KAAK;IACxEA,KAAK,GAAGyrB,wDAAQ,CAACgsB,KAAK,CAAC,GAAIA,KAAK,GAAG,EAAE,GAAIA,KAAK;EAChD;EACA,IAAI,OAAOz3C,KAAK,IAAI,QAAQ,EAAE;IAC5B,OAAOA,KAAK,KAAK,CAAC,GAAGA,KAAK,GAAG,CAACA,KAAK;EACrC;EACAA,KAAK,GAAGs2C,wDAAQ,CAACt2C,KAAK,CAAC;EACvB,IAAI23C,QAAQ,GAAGL,UAAU,CAACjiB,IAAI,CAACr1B,KAAK,CAAC;EACrC,OAAQ23C,QAAQ,IAAIJ,SAAS,CAACliB,IAAI,CAACr1B,KAAK,CAAC,GACrCw3C,YAAY,CAACx3C,KAAK,CAACmoB,KAAK,CAAC,CAAC,CAAC,EAAEwvB,QAAQ,GAAG,CAAC,GAAG,CAAC,CAAC,GAC7CN,UAAU,CAAChiB,IAAI,CAACr1B,KAAK,CAAC,GAAGo3C,GAAG,GAAG,CAACp3C,KAAM;AAC7C;AAEA,iEAAe62C,QAAQ;;;;;;;;;;;;;;;;AC/Da;AAC4B;AACF;;AAE9D;AACA;AACA;AACA,MAAM9jD,aAAa,CAAC;EAChB8H,WAAWA,CAACsxB,QAAQ;EACpB;EACA8rB,UAAU,EAAE;IACR,IAAI,CAAC9rB,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAAC8rB,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAACC,oBAAoB,GAAGH,kEAAiB,CAAC,IAAI,CAACE,UAAU,CAAC;EAClE;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,OAAOE,eAAeA,CAAC7kC,IAAI,EAAE;IACzB,MAAM8kC,WAAW,GAAG9kC,IAAI,CAAClE,OAAO,CAAC,0BAA0B,EAAE,MAAM,CAAC;IACpE,OAAO,IAAI+lB,MAAM,CAAC,MAAM,GAAGijB,WAAW,GAAG,QAAQ,GAAGA,WAAW,GAAG,gBAAgB,EAAE,GAAG,CAAC;EAC5F;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,OAAOC,sBAAsBA,CAACC,mBAAmB,EAAE;IAC/C,IAAI;MACA,OAAO9zB,kBAAkB,CAAC8zB,mBAAmB,CAAC;IAClD,CAAC,CACD,MAAM;MACF;MACA,OAAOA,mBAAmB;IAC9B;EACJ;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACItkC,KAAKA,CAACV,IAAI,EAAE;IACR,IAAI,CAAC,IAAI,CAAC4kC,oBAAoB,EAAE;MAC5B,OAAO,KAAK;IAChB;IACA5kC,IAAI,GAAG3S,kBAAkB,CAAC2S,IAAI,CAAC;IAC/B,MAAMilC,MAAM,GAAGxlD,aAAa,CAAColD,eAAe,CAAC7kC,IAAI,CAAC;IAClD,OAAOilC,MAAM,CAACljB,IAAI,CAAC,IAAI,CAAClJ,QAAQ,CAACqsB,MAAM,CAAC;EAC5C;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIp4C,GAAGA,CAACkT,IAAI,EAAE;IACN,IAAI,IAAI,CAAC4kC,oBAAoB,IAAI,IAAI,CAAClkC,KAAK,CAACV,IAAI,CAAC,EAAE;MAC/CA,IAAI,GAAG3S,kBAAkB,CAAC2S,IAAI,CAAC;MAC/B,MAAMilC,MAAM,GAAGxlD,aAAa,CAAColD,eAAe,CAAC7kC,IAAI,CAAC;MAClD,MAAMuR,MAAM,GAAG0zB,MAAM,CAAC90B,IAAI,CAAC,IAAI,CAAC0I,QAAQ,CAACqsB,MAAM,CAAC;MAChD,OAAO3zB,MAAM,CAAC,CAAC,CAAC,GAAG9xB,aAAa,CAACslD,sBAAsB,CAACxzB,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE;IAC3E,CAAC,MACI;MACD,OAAO,EAAE;IACb;EACJ;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACI4zB,MAAMA,CAAA,EAAG;IACL,IAAI,CAAC,IAAI,CAACP,oBAAoB,EAAE;MAC5B,OAAO,CAAC,CAAC;IACb;IACA,MAAMQ,OAAO,GAAG,CAAC,CAAC;IAClB,MAAMvsB,QAAQ,GAAG,IAAI,CAACA,QAAQ;IAC9B,IAAIA,QAAQ,CAACqsB,MAAM,IAAIrsB,QAAQ,CAACqsB,MAAM,KAAK,EAAE,EAAE;MAC3CrsB,QAAQ,CAACqsB,MAAM,CAACv5C,KAAK,CAAC,GAAG,CAAC,CAACsP,OAAO,CAAEoqC,aAAa,IAAK;QAClD,MAAM,CAACC,UAAU,EAAEC,WAAW,CAAC,GAAGF,aAAa,CAAC15C,KAAK,CAAC,GAAG,CAAC;QAC1Dy5C,OAAO,CAAC3lD,aAAa,CAACslD,sBAAsB,CAACO,UAAU,CAACxpC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC,GAAGrc,aAAa,CAACslD,sBAAsB,CAACQ,WAAW,CAAC;MACnI,CAAC,CAAC;IACN;IACA,OAAOH,OAAO;EAClB;EACAz4C,GAAGA,CAACqT,IAAI,EAAEtT,KAAK,EAAE84C,gBAAgB,EAAE54C,IAAI,EAAEgU,MAAM,EAAE4a,MAAM,EAAE7a,QAAQ,EAAE;IAC/D,IAAI,CAAC,IAAI,CAACikC,oBAAoB,EAAE;MAC5B;IACJ;IACA,IAAI,OAAOY,gBAAgB,KAAK,QAAQ,IAAIA,gBAAgB,YAAYpxB,IAAI,IAAIxnB,IAAI,IAAIgU,MAAM,IAAI4a,MAAM,IAAI7a,QAAQ,EAAE;MAClH,MAAM8kC,WAAW,GAAG;QAChBC,OAAO,EAAEF,gBAAgB;QACzB54C,IAAI;QACJgU,MAAM;QACN4a,MAAM;QACN7a,QAAQ,EAAEA,QAAQ,GAAGA,QAAQ,GAAG;MACpC,CAAC;MACD,IAAI,CAAChU,GAAG,CAACqT,IAAI,EAAEtT,KAAK,EAAE+4C,WAAW,CAAC;MAClC;IACJ;IACA,IAAIE,YAAY,GAAGt4C,kBAAkB,CAAC2S,IAAI,CAAC,GAAG,GAAG,GAAG3S,kBAAkB,CAACX,KAAK,CAAC,GAAG,GAAG;IACnF,MAAMyS,OAAO,GAAGqmC,gBAAgB,GAAGA,gBAAgB,GAAG,CAAC,CAAC;IACxD,IAAIrmC,OAAO,CAACumC,OAAO,EAAE;MACjB,IAAI,OAAOvmC,OAAO,CAACumC,OAAO,KAAK,QAAQ,EAAE;QACrC,MAAME,WAAW,GAAG,IAAIxxB,IAAI,CAAC,IAAIA,IAAI,CAAC,CAAC,CAACmkB,OAAO,CAAC,CAAC,GAAGp5B,OAAO,CAACumC,OAAO,GAAG,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;QAC1FC,YAAY,IAAI,UAAU,GAAGC,WAAW,CAACC,WAAW,CAAC,CAAC,GAAG,GAAG;MAChE,CAAC,MACI;QACDF,YAAY,IAAI,UAAU,GAAGxmC,OAAO,CAACumC,OAAO,CAACG,WAAW,CAAC,CAAC,GAAG,GAAG;MACpE;IACJ;IACA,IAAI1mC,OAAO,CAACvS,IAAI,EAAE;MACd+4C,YAAY,IAAI,OAAO,GAAGxmC,OAAO,CAACvS,IAAI,GAAG,GAAG;IAChD;IACA,IAAIuS,OAAO,CAACyB,MAAM,EAAE;MAChB+kC,YAAY,IAAI,SAAS,GAAGxmC,OAAO,CAACyB,MAAM,GAAG,GAAG;IACpD;IACA,IAAIzB,OAAO,CAACqc,MAAM,KAAK,KAAK,IAAIrc,OAAO,CAACwB,QAAQ,KAAK,MAAM,EAAE;MACzDxB,OAAO,CAACqc,MAAM,GAAG,IAAI;MACrByR,OAAO,CAACtS,IAAI,CAAE,+BAA8B3a,IAAK,qDAAoD,GAChG,qGAAoG,CAAC;IAC9G;IACA,IAAIb,OAAO,CAACqc,MAAM,EAAE;MAChBmqB,YAAY,IAAI,SAAS;IAC7B;IACA,IAAI,CAACxmC,OAAO,CAACwB,QAAQ,EAAE;MACnBxB,OAAO,CAACwB,QAAQ,GAAG,KAAK;IAC5B;IACAglC,YAAY,IAAI,WAAW,GAAGxmC,OAAO,CAACwB,QAAQ,GAAG,GAAG;IACpD,IAAI,CAACkY,QAAQ,CAACqsB,MAAM,GAAGS,YAAY;EACvC;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI95C,MAAMA,CAACmU,IAAI,EAAEpT,IAAI,EAAEgU,MAAM,EAAE4a,MAAM,EAAE7a,QAAQ,GAAG,KAAK,EAAE;IACjD,IAAI,CAAC,IAAI,CAACikC,oBAAoB,EAAE;MAC5B;IACJ;IACA,MAAMkB,WAAW,GAAG,IAAI1xB,IAAI,CAAC,+BAA+B,CAAC;IAC7D,IAAI,CAACznB,GAAG,CAACqT,IAAI,EAAE,EAAE,EAAE;MAAE0lC,OAAO,EAAEI,WAAW;MAAEl5C,IAAI;MAAEgU,MAAM;MAAE4a,MAAM;MAAE7a;IAAS,CAAC,CAAC;EAChF;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIolC,SAASA,CAACn5C,IAAI,EAAEgU,MAAM,EAAE4a,MAAM,EAAE7a,QAAQ,GAAG,KAAK,EAAE;IAC9C,IAAI,CAAC,IAAI,CAACikC,oBAAoB,EAAE;MAC5B;IACJ;IACA,MAAMQ,OAAO,GAAG,IAAI,CAACD,MAAM,CAAC,CAAC;IAC7B,KAAK,MAAMG,UAAU,IAAIF,OAAO,EAAE;MAC9B,IAAIA,OAAO,CAACt0B,cAAc,CAACw0B,UAAU,CAAC,EAAE;QACpC,IAAI,CAACz5C,MAAM,CAACy5C,UAAU,EAAE14C,IAAI,EAAEgU,MAAM,EAAE4a,MAAM,EAAE7a,QAAQ,CAAC;MAC3D;IACJ;EACJ;EAAC,QAAA1X,CAAA,GACQ,IAAI,CAACkN,IAAI,YAAA6vC,sBAAAhxB,CAAA;IAAA,YAAAA,CAAA,IAAwFv1B,aAAa,EAAvBK,sDAAE,CAAuC4kD,qDAAQ,GAAjD5kD,sDAAE,CAA4DwkD,sDAAW;EAAA,CAA6C;EAAA,QAAA70C,EAAA,GAC7M,IAAI,CAACw2C,KAAK,kBAD6EnmD,gEAAE;IAAAqmD,KAAA,EACY1mD,aAAa;IAAAyW,OAAA,EAAbzW,aAAa,CAAA0W,IAAA;IAAAC,UAAA,EAAc;EAAM,EAAG;AACtJ;AACA;EAAA,QAAAgwC,SAAA,oBAAAA,SAAA,KAHoGtmD,+DAAE,CAGXL,aAAa,EAAc,CAAC;IAC3GgrB,IAAI,EAAE85B,qDAAU;IAChB9wB,IAAI,EAAE,CAAC;MACCrd,UAAU,EAAE;IAChB,CAAC;EACT,CAAC,CAAC,EAAkB,MAAM,CAAC;IAAEqU,IAAI,EAAE67B,QAAQ;IAAEC,UAAU,EAAE,CAAC;MAC9C97B,IAAI,EAAE+5B,iDAAM;MACZ/wB,IAAI,EAAE,CAACixB,qDAAQ;IACnB,CAAC;EAAE,CAAC,EAAE;IAAEj6B,IAAI,EAAEpM,SAAS;IAAEkoC,UAAU,EAAE,CAAC;MAClC97B,IAAI,EAAE+5B,iDAAM;MACZ/wB,IAAI,EAAE,CAAC6wB,sDAAW;IACtB,CAAC;EAAE,CAAC,CAAC;AAAA;;AAErB;AACA;AACA;;AAEA;AACA;AACA","sources":["./libs/shared/ocapi/src/index.ts","./libs/shared/ocapi/src/lib/components/index.ts","./libs/shared/ocapi/src/lib/components/login.component.ts","./libs/shared/ocapi/src/lib/components/login.component.html","./libs/shared/ocapi/src/lib/constants/index.ts","./libs/shared/ocapi/src/lib/constants/login-details.constant.ts","./libs/shared/ocapi/src/lib/constants/sales.constant.ts","./libs/shared/ocapi/src/lib/enums/http-types.enum.ts","./libs/shared/ocapi/src/lib/enums/index.ts","./libs/shared/ocapi/src/lib/enums/login-status.enum.ts","./libs/shared/ocapi/src/lib/interfaces/index.ts","./libs/shared/ocapi/src/lib/interfaces/login-component.interface.ts","./libs/shared/ocapi/src/lib/interfaces/login-method.interface.ts","./libs/shared/ocapi/src/lib/interfaces/raw-login-details.interface.testfactory.ts","./libs/shared/ocapi/src/lib/interfaces/raw-login-details.interface.ts","./libs/shared/ocapi/src/lib/interfaces/raw-logout-details.interface.ts","./libs/shared/ocapi/src/lib/login-module.ts","./libs/shared/ocapi/src/lib/mappers/index.ts","./libs/shared/ocapi/src/lib/mappers/login-customer-name.mapper.ts","./libs/shared/ocapi/src/lib/mappers/login-details.mapper.ts","./libs/shared/ocapi/src/lib/mappers/logout.mapper.ts","./libs/shared/ocapi/src/lib/models/index.ts","./libs/shared/ocapi/src/lib/models/login-details.model.ts","./libs/shared/ocapi/src/lib/models/login-details.testfactory.ts","./libs/shared/ocapi/src/lib/models/logout-details.model.ts","./libs/shared/ocapi/src/lib/models/ocapi-call.model.ts","./libs/shared/ocapi/src/lib/services/authentication/factory/authentication.factory.ts","./libs/shared/ocapi/src/lib/services/authentication/factory/index.ts","./libs/shared/ocapi/src/lib/services/authentication/index.ts","./libs/shared/ocapi/src/lib/services/authentication/models/authentication-service.model.ts","./libs/shared/ocapi/src/lib/services/authentication/models/authentication.parameters.ts","./libs/shared/ocapi/src/lib/services/authentication/models/index.ts","./libs/shared/ocapi/src/lib/services/authentication/providers/authentication.provider.ts","./libs/shared/ocapi/src/lib/services/authentication/providers/index.ts","./libs/shared/ocapi/src/lib/services/authentication/providers/ocapi-authentication.provider.ts","./libs/shared/ocapi/src/lib/services/authentication/providers/openid-authentication.provider.ts","./libs/shared/ocapi/src/lib/services/authentication/services/authentication.service.ts","./libs/shared/ocapi/src/lib/services/authentication/services/index.ts","./libs/shared/ocapi/src/lib/services/authentication/services/jwt-authentication.service.ts","./libs/shared/ocapi/src/lib/services/authentication/services/transparent-authentication.service.ts","./libs/shared/ocapi/src/lib/services/authentication/state/authentication.state.ts","./libs/shared/ocapi/src/lib/services/authentication/tokens/authentication-provider.token.ts","./libs/shared/ocapi/src/lib/services/authentication/tokens/authentication-service.token.ts","./libs/shared/ocapi/src/lib/services/authentication/tokens/index.ts","./libs/shared/ocapi/src/lib/services/cache/cache.service.ts","./libs/shared/ocapi/src/lib/services/error-report.service.ts","./libs/shared/ocapi/src/lib/services/index.ts","./libs/shared/ocapi/src/lib/services/login.service.ts","./libs/shared/ocapi/src/lib/services/ocapi-socket.service.ts","./libs/shared/ocapi/src/lib/services/ocapi.service.ts","./libs/shared/ocapi/src/lib/services/user-details.service.ts","./libs/shared/ocapi/src/lib/utils/index.ts","./libs/shared/ocapi/src/lib/utils/ocapi.helper.ts","./node_modules/inherits/inherits_browser.js","./node_modules/ms/index.js","./node_modules/querystringify/index.js","./node_modules/requires-port/index.js","./node_modules/sockjs-client/lib/entry.js","./node_modules/sockjs-client/lib/event/close.js","./node_modules/sockjs-client/lib/event/emitter.js","./node_modules/sockjs-client/lib/event/event.js","./node_modules/sockjs-client/lib/event/eventtarget.js","./node_modules/sockjs-client/lib/event/trans-message.js","./node_modules/sockjs-client/lib/facade.js","./node_modules/sockjs-client/lib/iframe-bootstrap.js","./node_modules/sockjs-client/lib/info-ajax.js","./node_modules/sockjs-client/lib/info-iframe-receiver.js","./node_modules/sockjs-client/lib/info-iframe.js","./node_modules/sockjs-client/lib/info-receiver.js","./node_modules/sockjs-client/lib/location.js","./node_modules/sockjs-client/lib/main.js","./node_modules/sockjs-client/lib/shims.js","./node_modules/sockjs-client/lib/transport-list.js","./node_modules/sockjs-client/lib/transport/browser/abstract-xhr.js","./node_modules/sockjs-client/lib/transport/browser/eventsource.js","./node_modules/sockjs-client/lib/transport/browser/websocket.js","./node_modules/sockjs-client/lib/transport/eventsource.js","./node_modules/sockjs-client/lib/transport/htmlfile.js","./node_modules/sockjs-client/lib/transport/iframe.js","./node_modules/sockjs-client/lib/transport/jsonp-polling.js","./node_modules/sockjs-client/lib/transport/lib/ajax-based.js","./node_modules/sockjs-client/lib/transport/lib/buffered-sender.js","./node_modules/sockjs-client/lib/transport/lib/iframe-wrap.js","./node_modules/sockjs-client/lib/transport/lib/polling.js","./node_modules/sockjs-client/lib/transport/lib/sender-receiver.js","./node_modules/sockjs-client/lib/transport/receiver/eventsource.js","./node_modules/sockjs-client/lib/transport/receiver/htmlfile.js","./node_modules/sockjs-client/lib/transport/receiver/jsonp.js","./node_modules/sockjs-client/lib/transport/receiver/xhr.js","./node_modules/sockjs-client/lib/transport/sender/jsonp.js","./node_modules/sockjs-client/lib/transport/sender/xdr.js","./node_modules/sockjs-client/lib/transport/sender/xhr-cors.js","./node_modules/sockjs-client/lib/transport/sender/xhr-fake.js","./node_modules/sockjs-client/lib/transport/sender/xhr-local.js","./node_modules/sockjs-client/lib/transport/websocket.js","./node_modules/sockjs-client/lib/transport/xdr-polling.js","./node_modules/sockjs-client/lib/transport/xdr-streaming.js","./node_modules/sockjs-client/lib/transport/xhr-polling.js","./node_modules/sockjs-client/lib/transport/xhr-streaming.js","./node_modules/sockjs-client/lib/utils/browser-crypto.js","./node_modules/sockjs-client/lib/utils/browser.js","./node_modules/sockjs-client/lib/utils/escape.js","./node_modules/sockjs-client/lib/utils/event.js","./node_modules/sockjs-client/lib/utils/iframe.js","./node_modules/sockjs-client/lib/utils/log.js","./node_modules/sockjs-client/lib/utils/object.js","./node_modules/sockjs-client/lib/utils/random.js","./node_modules/sockjs-client/lib/utils/transport.js","./node_modules/sockjs-client/lib/utils/url.js","./node_modules/sockjs-client/lib/version.js","./node_modules/sockjs-client/node_modules/debug/src/browser.js","./node_modules/sockjs-client/node_modules/debug/src/common.js","./node_modules/url-parse/index.js","./node_modules/@stomp/rx-stomp/esm6/rx-stomp-state.js","./node_modules/@stomp/rx-stomp/esm6/rx-stomp.js","./node_modules/@stomp/stompjs/esm6/augment-websocket.js","./node_modules/@stomp/stompjs/esm6/byte.js","./node_modules/@stomp/stompjs/esm6/client.js","./node_modules/@stomp/stompjs/esm6/frame-impl.js","./node_modules/@stomp/stompjs/esm6/parser.js","./node_modules/@stomp/stompjs/esm6/stomp-handler.js","./node_modules/@stomp/stompjs/esm6/types.js","./node_modules/@stomp/stompjs/esm6/versions.js","./node_modules/lodash-es/_arrayEach.js","./node_modules/lodash-es/_baseTrim.js","./node_modules/lodash-es/_castFunction.js","./node_modules/lodash-es/_trimmedEndIndex.js","./node_modules/lodash-es/forEach.js","./node_modules/lodash-es/toFinite.js","./node_modules/lodash-es/toInteger.js","./node_modules/lodash-es/toNumber.js","./node_modules/ngx-cookie-service/fesm2022/ngx-cookie-service.mjs"],"sourcesContent":["export * from './lib/components';\nexport * from './lib/constants';\nexport * from './lib/enums';\nexport * from './lib/interfaces';\nexport * from './lib/mappers';\nexport * from './lib/models';\nexport * from './lib/services';\nexport * from './lib/utils';\nexport * from './lib/login-module';\n","export * from './login.component';\n","import { Component, EventEmitter, Inject, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { LoginDetails } from '../models';\nimport { LoginStatusEnum } from '../enums';\nimport { LoginService, UserDetailsService } from '../services';\nimport { ConfigConstants, ConfigService } from '@telenet/ng-lib-config';\nimport {\n  CustomerBrandEnum,\n  LanguageService,\n  PathCategorisationService,\n  QueryParamEnum,\n  UrlService,\n} from '@telenet/ng-lib-page';\nimport { each, isEmpty, some } from 'lodash-es';\nimport { LoginDetailsConstants } from '../constants';\nimport {\n  DataLayerAttributes,\n  DataLayerService,\n  EventNameEnum,\n  EventStatusEnum,\n  EventTypeEnum,\n} from '@telenet/ng-lib-datalayer';\nimport { CookieService } from 'ngx-cookie-service';\nimport { switchMap, takeLast, takeUntil } from 'rxjs/operators';\nimport { Subject } from 'rxjs';\n\n@Component({\n  selector: 'tg-login',\n  templateUrl: './login.component.html',\n})\nexport class LoginComponent implements OnInit, OnDestroy {\n  @Input() scopes: string[] = [];\n  @Input() messageGroupName: string;\n  @Input() autoRedirect = false;\n  @Input() styleHint: string = LoginDetailsConstants.STYLE_HINT;\n  @Input() mode: string;\n  @Input() registrationUrl: string;\n  @Input() showItsMeRegistrationOption: boolean;\n  @Input() hasInstallableProductType: boolean;\n  @Input() renderOnlyForOriginCustomer = false;\n  @Output() componentCanRender = new EventEmitter<LoginDetails>();\n  loginDetails: LoginDetails;\n  show = false;\n  loginEnum = LoginStatusEnum;\n  brand: string;\n  source: string;\n  action: string;\n\n  private readonly destroy$ = new Subject<void>();\n\n  constructor(\n    @Inject('Window') readonly window: Window,\n    private readonly loginService: LoginService,\n    private readonly userDetailsService: UserDetailsService,\n    private readonly configService: ConfigService,\n    private readonly urlService: UrlService,\n    private readonly pathCategorisationService: PathCategorisationService,\n    private readonly languageService: LanguageService,\n    private readonly dataLayerService: DataLayerService,\n    private readonly cookieService: CookieService\n  ) {}\n\n  ngOnInit(): void {\n    this.action = this.urlService.getRequestParamValue(QueryParamEnum.ACTION, '');\n    this.registerBasedOnAction();\n    this.brand = this.pathCategorisationService.getCustomerBrand();\n    this.initSource();\n    this.loginService\n      .getAuthenticationStatus()\n      .pipe(\n        switchMap((_) => this.userDetailsService.getUserDetails().pipe(takeLast(1))),\n        takeUntil(this.destroy$)\n      )\n      .subscribe((loginDetails) => {\n        this.loginDetails = loginDetails;\n\n        if (this.isLoggedIn() && this.canRenderComponentForLoggedInUser()) {\n          this.show = true;\n          this.componentCanRender.emit(loginDetails);\n        } else if (this.autoRedirect && this.configService.getConfig(ConfigConstants.IS_AUTHOR_MODE) !== 'true') {\n          this.forceRedirect();\n        } else {\n          this.show = true;\n          if (this.mode === 'overlay') {\n            this.sendPageStepData();\n          }\n        }\n      });\n  }\n\n  isLoggedIn(): boolean {\n    return this.getLoginStatus() === LoginStatusEnum.LOGGED_IN;\n  }\n\n  private canRenderComponentForLoggedInUser() {\n    if (this.renderOnlyForOriginCustomer) {\n      return this.loginDetails.isBssSystemNetcracker();\n    }\n    return true;\n  }\n  getLoginStatus(): LoginStatusEnum {\n    if (!this.loginDetails?.isLoggedIn()) {\n      this.window['telenetgroupLoader']?.hideMask();\n      return LoginStatusEnum.NOT_LOGGED_IN;\n    }\n\n    if (this.isNarrowed()) {\n      return LoginStatusEnum.NARROWED;\n    }\n    if (\n      !this.hasRequiredScopes() ||\n      (this.brand === CustomerBrandEnum.BRAND_BASE && this.hasInstallableProductType && this.loginDetails?.isChild())\n    ) {\n      this.window['telenetgroupLoader']?.hideMask();\n      return LoginStatusEnum.INSUFFICIENT_PERMISSIONS;\n    }\n\n    return LoginStatusEnum.LOGGED_IN;\n  }\n\n  login(force: boolean = false): void {\n    this.pushEventDataToAnalytics(EventNameEnum.EVENT_NAME_LOGIN);\n    const referrerUrl = this.urlService.getCurrentUrl();\n    if (!force) {\n      this.loginService.login(referrerUrl, this.styleHint);\n      return;\n    }\n    this.loginService.loginWithPrompt(referrerUrl, this.styleHint);\n  }\n\n  isNarrowed(): boolean {\n    return this.loginDetails.isNarrowed();\n  }\n\n  showRegistrationOptions(): boolean {\n    return (\n      this.source !== LoginDetailsConstants.SOURCE_EMAIL &&\n      this.getLoginStatus() !== LoginStatusEnum.INSUFFICIENT_PERMISSIONS &&\n      !isEmpty(this.styleHint)\n    );\n  }\n\n  register(idp: string): void {\n    const eventName = EventNameEnum.EVENT_NAME_REGISTER + '-' + idp;\n    this.pushEventDataToAnalytics(eventName);\n    this.redirectToRegistrationURL(idp);\n  }\n\n  private initSource(): void {\n    this.source = this.urlService.getRequestParamValue(QueryParamEnum.SOURCE, '');\n    this.source = this.source && this.source.toUpperCase();\n  }\n\n  private hasRequiredScopes(): boolean {\n    if (this.scopes && !this.scopes.length) {\n      return true;\n    }\n    return some(this.scopes, (scope: string) => {\n      return this.loginDetails.hasScope(scope);\n    });\n  }\n\n  private forceRedirect() {\n    const loginStatus = this.getLoginStatus();\n    const force = loginStatus !== LoginStatusEnum.NOT_LOGGED_IN;\n    this.login(force);\n  }\n\n  private redirectToRegistrationURL(idp: string): void {\n    this.cleanCookies();\n\n    if (idp === 'internal') {\n      this.redirectToInternalRegistrationURL(this.styleHint);\n    } else {\n      this.redirectToItsMePortal(this.styleHint);\n    }\n  }\n\n  private cleanCookies(): void {\n    const sessionKeys = this.getCookie(LoginDetailsConstants.COOKIE_KEYS);\n    if (sessionKeys) {\n      const keys = sessionKeys.split(',');\n      for (let i = 0; i <= keys.length; i++) {\n        this.cookieService.delete(keys[i], '/');\n      }\n      this.cookieService.delete(LoginDetailsConstants.COOKIE_KEYS, '/');\n    }\n  }\n\n  private initCookies(channel: string, idp: string): void {\n    const requestParameters = this.urlService.getRequestParameters();\n    each(requestParameters, (item: string, key: string) => {\n      this.addCookie(key, item);\n    });\n\n    this.addCookie(LoginDetailsConstants.CUSTOMER_REGISTRATION_URL, this.getCustomerRegistrationURL());\n    this.addCookie(LoginDetailsConstants.PARAM_CHANNEL, channel);\n    this.addCookie(LoginDetailsConstants.PARAM_IDP, idp);\n    this.addCookie(LoginDetailsConstants.PARAM_REFERRER_URL, this.urlService.getCurrentUrl());\n  }\n\n  private addCookie(key: string, value: string): void {\n    this.cookieService.set(key, value, { path: '/' });\n    let sessionKeys = this.getCookie(LoginDetailsConstants.COOKIE_KEYS);\n    sessionKeys = sessionKeys ? sessionKeys.concat(',', key) : key;\n    this.cookieService.set(LoginDetailsConstants.COOKIE_KEYS, sessionKeys, { path: '/' });\n  }\n\n  private getCookie(key: string): string {\n    return this.cookieService.get(key);\n  }\n\n  private redirectToInternalRegistrationURL(channel: string): void {\n    let referrer_url;\n    let registrationUrl = this.registrationUrl + '?channel=' + channel + '&idp=' + 'internal';\n    const sdata = this.urlService.getRequestParamValue(LoginDetailsConstants.PARAM_SDATA, '');\n    if (sdata) {\n      registrationUrl += '&sdata=' + sdata;\n    }\n    if (this.action === 'register') {\n      const newUrl = this.urlService.getActionParametersRemovedURL();\n      referrer_url = encodeURIComponent(newUrl);\n    } else {\n      referrer_url = encodeURIComponent(this.urlService.getCurrentUrl());\n    }\n    registrationUrl += '&referrer_url=' + referrer_url;\n    this.urlService.redirectTo(registrationUrl);\n  }\n\n  private redirectToItsMePortal(channel: string): void {\n    this.initCookies(channel, 'itsme');\n    const redirectURI = this.getRedirectURI();\n\n    const params = {\n      redirect_uri: redirectURI,\n      language: this.languageService.getLanguage(),\n    };\n\n    const itsMePortalUrl =\n      this.getItsMeRegisterUrl() +\n      '?language=' +\n      params.language +\n      '&redirect_uri=' +\n      redirectURI +\n      '&brand=' +\n      this.brand;\n\n    this.urlService.redirectTo(itsMePortalUrl);\n  }\n\n  private getItsMeRegisterUrl(): string {\n    return this.configService.getConfig(ConfigConstants.OCAPI_URl) + LoginDetailsConstants.ITS_ME_REGISTER_ENDPOINT;\n  }\n\n  private getRedirectURI(): string {\n    const redirect_uri = this.getCookie(LoginDetailsConstants.CUSTOMER_REGISTRATION_URL);\n    return encodeURIComponent(redirect_uri);\n  }\n\n  private getCustomerRegistrationURL(): string {\n    return this.urlService.getOrigin().concat(this.registrationUrl);\n  }\n\n  private pushEventDataToAnalytics(eventName: string): void {\n    const eventInfoData = this.dataLayerService.createEventInfo(eventName, EventTypeEnum.EVENT_TYPE_CLICK);\n    eventInfoData.setEventStatus(EventStatusEnum.EVENT_STATUS_SUCCESS);\n    const attributes = this.buildCommonEventAttributes();\n    this.dataLayerService.sendEvent({ eventInfo: eventInfoData, attributes });\n  }\n\n  private buildCommonEventAttributes(): DataLayerAttributes {\n    const styleHint = this.styleHint ? this.styleHint : 'care';\n    const flowType = this.urlService.getRequestParamValue(LoginDetailsConstants.PARAM_FLOW, '') || styleHint;\n    return { flowType: flowType } as DataLayerAttributes;\n  }\n\n  private sendPageStepData(): void {\n    const attributes = this.buildCommonEventAttributes();\n    attributes.stepId = LoginDetailsConstants.STEP_ID_LOGIN_REGISTER;\n    this.dataLayerService.addStepViewEvent(attributes);\n  }\n\n  private registerBasedOnAction(): void {\n    if (this.action === 'register') {\n      return this.register('internal');\n    } else if (this.action === 'register-via-itsme') {\n      return this.register('external');\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n}\n","<ng-container *ngIf=\"show\">\n  <ng-container *ngIf=\"isLoggedIn()\">\n    <ng-content></ng-content>\n  </ng-container>\n\n  <div *ngIf=\"!isLoggedIn()\">\n    <div *ngIf=\"mode === 'overlay'; else noOverlay\">\n      <ng-container [ngTemplateOutlet]=\"overlay\"> </ng-container>\n    </div>\n  </div>\n</ng-container>\n<ng-template #noOverlay>\n  <ng-container [ngSwitch]=\"getLoginStatus()\">\n    <ng-container *ngSwitchCase=\"loginEnum.NOT_LOGGED_IN\">\n      <div class=\"notification notification--warning\">\n        <span class=\"icon icon-error-shape warn\">{{ 'ng.general-login.lbl.not-logged-in' | translate }}</span>\n        <a (click)=\"login()\" class=\"button button--primary cta-secondary\" [attr.data-cy]=\"'login-button-link'\">{{\n          'ng.general-login.btn.not-logged-in' | translate\n        }}</a>\n      </div>\n    </ng-container>\n\n    <div *ngSwitchCase=\"loginEnum.NARROWED\" class=\"notification notification--warning\">\n      <span class=\"icon icon-error-shape warn\">{{ 'ng.general.login.lbl.narrowed' | translate }}</span>\n      <div (click)=\"login(true)\" class=\"button button--primary cta-secondary\">\n        {{ 'ng.general.login.btn.narrowed' | translate }}\n      </div>\n    </div>\n\n    <div *ngSwitchCase=\"loginEnum.INSUFFICIENT_PERMISSIONS\" class=\"notification notification--warning\">\n      <span class=\"icon icon-alert-shape warn\">{{ 'ng.general-login.insufficient-rights-link.text' | translate }}</span>\n      <div (click)=\"login(true)\" class=\"button button--primary cta-secondary button--width-auto\">\n        {{ 'ng.general-login.insufficient-rights-link' | translate }}\n      </div>\n    </div>\n  </ng-container>\n</ng-template>\n\n<ng-template #overlay>\n  <ng-container [ngTemplateOutlet]=\"headerTitleAndSubtitle\"> </ng-container>\n  <div class=\"end-journey__section__content__action\">\n    <div\n      class=\"login-sales-journey row align-items--stretch justify-content--center col-lg-6 col-md-10 col-12 m--auto mb--g\">\n      <ng-container [ngSwitch]=\"getLoginStatus()\">\n        <ng-container *ngSwitchCase=\"loginEnum.NOT_LOGGED_IN\">\n          <ng-container [ngTemplateOutlet]=\"loginOrRegister\"> </ng-container>\n        </ng-container>\n\n        <ng-container *ngSwitchCase=\"loginEnum.NARROWED\">\n          <ng-container [ngTemplateOutlet]=\"loginOrRegister\"> </ng-container>\n        </ng-container>\n\n        <ng-container *ngSwitchCase=\"loginEnum.INSUFFICIENT_PERMISSIONS\">\n          <ng-container [ngTemplateOutlet]=\"onlyLogin\"> </ng-container>\n        </ng-container>\n      </ng-container>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #headerTitleAndSubtitle>\n  <div class=\"login-sales-journey-title px--xm px--n--md col-lg-5 col-md-7 col-12 m--auto\">\n    <div\n      *ngIf=\"getLoginStatus() === loginEnum.INSUFFICIENT_PERMISSIONS; else otherThanInsufficientRights\"\n      class=\"display--flex flex-direction--column\">\n      <h3>\n        {{ 'general.lbl.overlay-login-title-insufficient-rights' | translate }}\n      </h3>\n      <p class=\"font--body-regular pb--s\">\n        {{ 'general.lbl.overlay-login-sub-title-insufficient-rights' | translate }}\n      </p>\n    </div>\n    <ng-template #otherThanInsufficientRights>\n      <div *ngIf=\"getLoginStatus() !== loginEnum.INSUFFICIENT_PERMISSIONS\">\n        <div *ngIf=\"source === 'EMAIL'\" class=\"display--flex flex-direction--column\">\n          <h3>\n            {{ 'general.lbl.overlay-login-title-abandon-cart' | translate }}\n          </h3>\n          <p class=\"font--body-regular pb--s\">\n            {{ 'general.lbl.overlay-login-sub-title-abandon-cart' | translate }}\n          </p>\n        </div>\n        <div *ngIf=\"source !== 'EMAIL'\" class=\"display--flex flex-direction--column\">\n          <h3>\n            {{ 'general.lbl.overlay-login-title' | translate }}\n          </h3>\n          <p class=\"font--body-regular pb--s\">\n            {{ 'general.lbl.overlay-login-sub-title' | translate }}\n          </p>\n        </div>\n      </div>\n    </ng-template>\n  </div>\n</ng-template>\n<ng-template #onlyRegister>\n  <div\n    class=\"display--flex flex-direction--column justify-content--between background-white col-lg-5 col-md-4 col-12 px--xl pb--xl pt--xxs\">\n    <div class=\"text-align--center\">\n      <h5 class=\"heading--5\">\n        {{ 'general.lbl.not-a-customer' | translate: { brand: brand } }}\n      </h5>\n    </div>\n    <div *ngIf=\"brand !== 'BASE'\">\n      <div class=\"display--block\" *ngIf=\"styleHint === 'sales'\">\n        <div>\n          <div class=\"display--block\">\n            <div\n              ng-class=\"showItsMeRegistrationOption ? 'mb--xxl' : 'mt--xxxl mb--xs'\"\n              class=\"pb--xs text-align--center\">\n              <span class=\"font--caption\" [innerHtml]=\"'general.lbl.need-more-info' | translate\"> </span>\n            </div>\n            <div *ngIf=\"showItsMeRegistrationOption\" class=\"width--full\">\n              <div class=\"font--caption text-align--center pb--xs\">\n                {{ 'general.lbl.register-with-itsme-help' | translate }}\n              </div>\n              <button\n                class=\"button button--secondary button--fullwidth register-with-itsme\"\n                (click)=\"register('itsme')\">\n                <span>\n                  {{ 'general.lbl.register-with-itsme' | translate }}\n                </span>\n              </button>\n              <div class=\"divider--xxs__mid-grey my--xl\"></div>\n            </div>\n            <button class=\"button button--secondary button--fullwidth\" (click)=\"register('internal')\">\n              {{ 'general.lbl.register' | translate }}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div *ngIf=\"brand === 'BASE'\">\n      <div class=\"display--block\" *ngIf=\"styleHint === 'sales'\">\n        <div>\n          <div class=\"display--block mt--xs\">\n            <div *ngIf=\"showItsMeRegistrationOption\" class=\"width--full mb--xs\">\n              <div class=\"font--caption pb--xs text-align--center\">\n                {{ 'general.lbl.register-with-itsme-help' | translate }}\n              </div>\n              <button\n                class=\"button button--secondary button--fullwidth button__icon--position-left register-with-itsme pt--m pb--m\"\n                (click)=\"register('itsme')\">\n                <span class=\"ml--s--md\">\n                  {{ 'general.lbl.register-with-itsme' | translate }}\n                </span>\n              </button>\n              <div class=\"divider--xxs__mid-grey my--xl\"></div>\n            </div>\n            <button\n              class=\"button button--secondary button--fullwidth button__icon--position-left pt-10 pb-10\"\n              (click)=\"register('internal')\">\n              {{ 'general.lbl.register' | translate }}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</ng-template>\n<ng-template #onlyLogin>\n  <div\n    class=\"display--flex flex-direction--column justify-content--between background-white col-lg-5 col-md-4 col-12 px--xl pb--xl pt--xxs mr--xm--md mr--n mb--n--md mb--m\">\n    <div class=\"text-align--center\">\n      <h5 class=\"heading--5\" *ngIf=\"getLoginStatus() === loginEnum.INSUFFICIENT_PERMISSIONS\">\n        {{ 'general.lbl.login-again-insufficient-rights' | translate }}\n      </h5>\n      <div *ngIf=\"getLoginStatus() !== loginEnum.INSUFFICIENT_PERMISSIONS\">\n        <h5 class=\"heading--5\" *ngIf=\"source === 'EMAIL'\">\n          {{ 'general.lbl.login-again-abandon-cart' | translate }}\n        </h5>\n        <h5 class=\"heading--5\" *ngIf=\"source !== 'EMAIL'\">\n          {{ 'general.lbl.already-a-customer' | translate: { brand: brand } }}\n        </h5>\n      </div>\n    </div>\n    <div class=\"m--auto\">\n      <img\n        class=\"hide-until-md\"\n        src=\"/etc/designs/aff-telenetgroup/atomic/clientlibs/clientlib-atomic/graphics/base-login-desktop.svg\"\n        alt=\"login\"\n        *ngIf=\"brand === 'BASE'\" />\n      <img\n        class=\"hide-from-md\"\n        src=\"/etc/designs/aff-telenetgroup/atomic/clientlibs/clientlib-atomic/graphics/base-login-mobile.svg\"\n        alt=\"login\"\n        *ngIf=\"brand === 'BASE'\" />\n      <img\n        class=\"hide-until-md\"\n        src=\"/etc/designs/aff-telenetgroup/atomic/clientlibs/clientlib-atomic/graphics/telenet-login-desktop.svg\"\n        alt=\"login\"\n        *ngIf=\"brand !== 'BASE'\" />\n      <img\n        class=\"hide-from-md\"\n        src=\"/etc/designs/aff-telenetgroup/atomic/clientlibs/clientlib-atomic/graphics/telenet-login-mobile.svg\"\n        alt=\"login\"\n        *ngIf=\"brand !== 'BASE'\" />\n    </div>\n    <button\n      class=\"button button--primary button--fullwidth\"\n      *ngIf=\"getLoginStatus() === loginEnum.INSUFFICIENT_PERMISSIONS\"\n      (click)=\"login(true)\">\n      {{ 'general.login-link' | translate }}\n    </button>\n    <button\n      class=\"button button--primary button--fullwidth\"\n      *ngIf=\"getLoginStatus() !== loginEnum.INSUFFICIENT_PERMISSIONS\"\n      (click)=\"login()\">\n      {{ 'general.login-link' | translate }}\n    </button>\n  </div>\n</ng-template>\n<ng-template #loginOrRegister>\n  <ng-container [ngTemplateOutlet]=\"onlyLogin\"> </ng-container>\n  <ng-container *ngIf=\"showRegistrationOptions()\" [ngTemplateOutlet]=\"onlyRegister\"> </ng-container>\n</ng-template>\n","export * from './login-details.constant';\nexport * from './sales.constant';\n","export class LoginDetailsConstants {\n  static EMPTY = '';\n  static MASTER_ROLES = ['MASTER_USER', 'PREPAID_MASTER_USER', 'MANAGER'];\n  static CHILD_ROLES = ['CHILD_USER', 'PREPAID_CHILD_USER'];\n  static FLEET_MANAGER_ROLE = 'FLEET MANAGER';\n  static FLEET_USER_ROLE = 'FLEET USER';\n  static MEMBER_ROLE = 'MEMBER';\n  static MANAGER_ROLE = 'MANAGER';\n  static ORPHAN_ROLE = 'ORPHAN';\n  static INTERNET_MASTER_ROLE = 'INTERNET_MASTER';\n  static CUSTOMER_ADMIN_ROLE = 'CUSTOMER_ADMIN';\n  static CONTRACT_HOLDER_ROLE = 'CONTRACT_HOLDER';\n  static MANAGER_ROLES = [\n    LoginDetailsConstants.MANAGER_ROLE,\n    LoginDetailsConstants.INTERNET_MASTER_ROLE,\n    LoginDetailsConstants.CUSTOMER_ADMIN_ROLE,\n    LoginDetailsConstants.CONTRACT_HOLDER_ROLE,\n  ];\n  static CHARACTER_LIMIT = 39;\n  static SUFFIX = '...';\n  static BSS_SYSTEM_BASE_LEGACY = 'BASE_LEGACY';\n  static BSS_SYSTEM_TELENET_LEGACY = 'TELENET_LEGACY';\n  static BSS_SYSTEM_NETCRACKER = 'NETCRACKER';\n  static STYLE_HINT = 'care';\n  static PROMPT_NONE = 'none';\n  static PROMPT_LOGIN = 'login';\n  static CODE = 'code';\n  static CLAIMS = '{\"id_token\":{\"http://telenet.be/claims/roles\":null,\"http://telenet.be/claims/licenses\":null}}';\n  static CLIENT_ID_OCAPI_BASE = 'ocapi_base';\n  static SOURCE_EMAIL = 'EMAIL';\n  static CUSTOMER_REGISTRATION_URL = 'customer_registration_url';\n  static COOKIE_KEYS = 'cookie_keys';\n  static PARAM_CHANNEL = 'channel';\n  static PARAM_IDP = 'idp';\n  static PARAM_FLOW = 'flow';\n  static PARAM_SDATA = 'sdata';\n  static PARAM_REFERRER_URL = 'referrer_url';\n  static ITS_ME_REGISTER_ENDPOINT = '/itsme/register';\n  static STEP_ID_LOGIN_REGISTER = 'login-register';\n  static LOGIN = 'LOGIN';\n  static LOGIN_STATUS_COOKIENAME = 'loginStatus';\n}\n","export class SalesConstants {\n  static QUERY_URL = 'queryurl';\n  static SPEC_URL = 'specurl';\n}\n","export enum HttpTypesEnum {\n  GET = 'GET',\n  POST = 'POST',\n  PUT = 'PUT',\n  PATCH = 'PATCH',\n  DELETE = 'DELETE',\n  HEAD = 'HEAD',\n}\n","export * from './http-types.enum';\nexport * from './login-status.enum';\n","export enum LoginStatusEnum {\n  LOGGED_IN = 'LOGGED_IN',\n  NOT_LOGGED_IN = 'NOT_LOGGED_IN',\n  INSUFFICIENT_PERMISSIONS = 'INSUFFICIENT_PERMISSIONS',\n  NARROWED = 'NARROWED',\n  UNKNOWN = 'UNKNOWN',\n}\n","export * from './login-component.interface';\nexport * from './login-method.interface';\nexport * from './raw-login-details.interface';\nexport * from './raw-logout-details.interface';\nexport {\n  RawLoginDetailsInterface as RawLoginDetailsInterfaceFactoryInterface,\n  rawLoginDetailsInterfaceFactory,\n} from './raw-login-details.interface.testfactory';\n","import { LoginDetails } from '../models';\n\nexport interface LoginComponentInterface {\n  initAfterLoggedIn(loginDetails?: LoginDetails): void;\n}\n","import { Observable } from 'rxjs';\n\nexport interface LoginMethodInterface {\n  doAuthCall(): Observable<unknown>;\n}\n","import { makeFactory } from 'factory.ts';\n\nexport interface RawLoginDetailsInterface {\n  customer_number: string;\n  identity_id: string;\n  username: string;\n  first_name: string;\n  last_name: string;\n  is_telenet_login?: boolean;\n  is_sub_login?: boolean;\n  scopes?: string[];\n  explicit_login: boolean;\n  narrowed_scope?: boolean;\n  auth_age: number;\n  is_pid?: boolean;\n  bss_system?: string;\n  role: string;\n  impersonated?: boolean;\n  login_alias: string;\n  status: string;\n  identity_request_id?: string;\n  pega_service_case_id?: string;\n  contact_number?: string;\n  advisorId?: string;\n}\n\nexport const rawLoginDetailsInterfaceFactory = makeFactory<RawLoginDetailsInterface>({\n  status: 'active',\n  customer_number: '1208338235',\n  identity_id: '817624297',\n  username: 'kolatest@gmail.com',\n  login_alias: '0625ad87-0a2e-4e02-9b5a-28c71c70f63c',\n  first_name: 'kola',\n  last_name: 'psc1',\n  scopes: ['groupbundles', 'acceptoffer', 'D_manageusers'],\n  explicit_login: true,\n  narrowed_scope: false,\n  bss_system: 'NETCRACKER',\n  auth_age: 18,\n  role: 'CONTRACT_HOLDER',\n});\n\nexport const rawFormerLoginDetailsInterfaceFactory = makeFactory<RawLoginDetailsInterface>({\n  status: 'Former',\n  customer_number: '1208338235',\n  identity_id: '817624297',\n  username: 'kolatest@gmail.com',\n  login_alias: '0625ad87-0a2e-4e02-9b5a-28c71c70f63c',\n  first_name: 'kola',\n  last_name: 'psc1',\n  scopes: ['groupbundles', 'acceptoffer', 'D_manageusers'],\n  explicit_login: true,\n  narrowed_scope: false,\n  bss_system: 'NETCRACKER',\n  auth_age: 18,\n  role: 'CONTRACT_HOLDER',\n});\n","export interface RawLoginDetailsInterface {\n  customer_number: string;\n  identity_id: string;\n  username: string;\n  first_name: string;\n  last_name: string;\n  is_telenet_login?: boolean;\n  is_sub_login?: boolean;\n  scopes?: string[];\n  explicit_login: boolean;\n  narrowed_scope?: boolean;\n  auth_age: number;\n  is_pid?: boolean;\n  bss_system?: string;\n  role: string;\n  impersonated?: boolean;\n  login_alias: string;\n  status: string;\n  identity_request_id?: string;\n  pega_service_case_id?: string;\n  contact_number?: string;\n  advisorId?: string;\n}\n","export interface RawLogOutDetailsInterface {\n  logout_redirect_uri: string;\n  OCASESSIONID: string;\n  oauth_token: string;\n  ['TOKEN-XSRF']: string;\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { LoginComponent } from './components';\n\n@NgModule({\n  imports: [CommonModule, TranslateModule],\n  declarations: [LoginComponent],\n  exports: [LoginComponent],\n})\nexport class LoginModule {}\n","export * from './login-customer-name.mapper';\nexport * from './login-details.mapper';\nexport * from './logout.mapper';\n","import { MapperInterface } from '@telenet/ng-lib-shared';\nimport { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class LoginCustomerNameMapper implements MapperInterface<null, null> {\n  toModel() {\n    return null;\n  }\n}\n","// @ts-nocheck\nimport { Injectable } from '@angular/core';\nimport { LoginDetails } from '../models/login-details.model';\nimport { RawLoginDetailsInterface } from '../interfaces/raw-login-details.interface';\nimport { MapperInterface } from '@telenet/ng-lib-shared';\nimport { map } from 'lodash-es';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class LoginDetailsMapper implements MapperInterface<unknown, LoginDetails> {\n  toModel(rawResponse: Record<string, unknown>): LoginDetails {\n    if (rawResponse.status && rawResponse.status === 401) {\n      return this.getLoginDetails(rawResponse.data as Record<string, unknown>, rawResponse.status);\n    } else {\n      return this.getLoginDetails(rawResponse, 200);\n    }\n  }\n\n  private getLoginDetails(rawResponse: Record<string, unknown>, status: number): LoginDetails {\n    const loginDetails = new LoginDetails(status);\n    if (loginDetails.isLoggedIn()) {\n      this.createLoginDetails(rawResponse as RawLoginDetailsInterface, loginDetails);\n    } else {\n      this.createStatAndNonce(rawResponse as string, loginDetails);\n    }\n    return loginDetails;\n  }\n\n  private createStatAndNonce(rawResponse: string, loginDetails: LoginDetails) {\n    loginDetails.state = rawResponse?.split?.(',')?.[0];\n    loginDetails.nonce = rawResponse?.split?.(',')?.[1];\n  }\n\n  private createLoginDetails(rawResponse: RawLoginDetailsInterface, loginDetails: LoginDetails) {\n    const rawLoginDetails: RawLoginDetailsInterface = rawResponse;\n    loginDetails.customerNumber = rawLoginDetails.customer_number;\n    loginDetails.identityId = rawLoginDetails.identity_id;\n    loginDetails.username = rawLoginDetails.username;\n    loginDetails.firstName = rawLoginDetails.first_name;\n    loginDetails.lastName = rawLoginDetails.last_name;\n    loginDetails.narrowedScope = rawLoginDetails.narrowed_scope;\n    loginDetails.scopes = this.createScopes(rawLoginDetails.scopes ? rawLoginDetails.scopes : []);\n    loginDetails.authAge = rawLoginDetails.auth_age;\n    loginDetails.isPid = rawLoginDetails.is_pid;\n    loginDetails.bssSystem = rawLoginDetails.bss_system;\n    loginDetails.isImpersonated = rawLoginDetails.impersonated;\n    loginDetails.role = rawLoginDetails.role;\n    loginDetails.isExplicitLogin = rawLoginDetails.explicit_login;\n    loginDetails.isTelenetLogin = rawLoginDetails.is_telenet_login;\n    loginDetails.isSubLogin = rawLoginDetails.is_sub_login;\n    loginDetails.loginAlias = rawLoginDetails.login_alias;\n    loginDetails.status = rawLoginDetails.status;\n    loginDetails.identityRequestId = rawLoginDetails.identity_request_id;\n    loginDetails.pegaServiceCaseId = rawLoginDetails.pega_service_case_id;\n    loginDetails.contactNumber = rawLoginDetails.contact_number;\n    loginDetails.advisorId = rawLoginDetails.advisorId || '';\n  }\n\n  private createScopes(rawScopes: string[]): string[] {\n    return map(rawScopes, this.createScope);\n  }\n\n  private createScope(rawScope: string): string {\n    return rawScope.split(':')[0];\n  }\n}\n","import { MapperInterface } from '@telenet/ng-lib-shared';\nimport { Injectable } from '@angular/core';\nimport { LogoutDetails } from '../models';\nimport { RawLogOutDetailsInterface } from '../interfaces';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class LogoutMapper implements MapperInterface<RawLogOutDetailsInterface, LogoutDetails> {\n  toModel(rawLogoutResponse: RawLogOutDetailsInterface): LogoutDetails {\n    const logoutDetails: LogoutDetails = new LogoutDetails();\n\n    logoutDetails.logout_redirect_uri = rawLogoutResponse.logout_redirect_uri;\n    return logoutDetails;\n  }\n}\n","export * from './login-details.model';\nexport * from './login-details.testfactory';\nexport * from './logout-details.model';\nexport * from './ocapi-call.model';\n","import { ContextHubModelInterface } from '@telenet/ng-lib-page';\nimport { includes, some, isEmpty, merge } from 'lodash-es';\nimport { LoginDetailsConstants } from '../constants';\n\nexport class LoginDetails implements ContextHubModelInterface<LoginDetails> {\n  state: string;\n  nonce: string;\n  status: string;\n  narrowed = false;\n  httpStatus: number;\n  scopes: string[];\n  bssSystem: string;\n  customerNumber: string;\n  identityId: string;\n  username: string;\n  firstName: string;\n  lastName: string;\n  narrowedScope: boolean;\n  authAge: number;\n  isPid: boolean;\n  bssSytem: string;\n  isImpersonated: boolean;\n  role: string;\n  isExplicitLogin: boolean;\n  isTelenetLogin: boolean;\n  isSubLogin: boolean;\n  loginAlias: string;\n  identityRequestId?: string;\n  pegaServiceCaseId?: string;\n  contactNumber?: string;\n  advisorId?: string;\n\n  msisdn?: string;\n\n  constructor(httpStatus: number) {\n    this.httpStatus = httpStatus;\n  }\n\n  isLoggedIn(): boolean {\n    return this.httpStatus === 200;\n  }\n\n  isNarrowed(): boolean {\n    return this.isLoggedIn() && this.narrowedScope;\n  }\n\n  invalidResponse(): boolean {\n    return this.httpStatus === 0;\n  }\n\n  isAuthenticated(): boolean {\n    return this.isLoggedIn() && !this.isNarrowed() && !this.invalidResponse();\n  }\n\n  isMaster(): boolean {\n    return !isEmpty(this.role) && includes(LoginDetailsConstants.MASTER_ROLES, this.role);\n  }\n\n  isChild(): boolean {\n    return !isEmpty(this.role) && includes(LoginDetailsConstants.CHILD_ROLES, this.role);\n  }\n\n  isMember(): boolean {\n    return !isEmpty(this.role) && this.role.toUpperCase().includes(LoginDetailsConstants.MEMBER_ROLE);\n  }\n\n  isContractHolder(): boolean {\n    return !isEmpty(this.role) && this.role.toUpperCase().includes(LoginDetailsConstants.CONTRACT_HOLDER_ROLE);\n  }\n\n  isOrphan(): boolean {\n    return !isEmpty(this.role) && this.role.toUpperCase().includes(LoginDetailsConstants.ORPHAN_ROLE);\n  }\n\n  isNewlyRegisteredUser(): boolean {\n    return !!isEmpty(this.role) && !isEmpty(this.firstName);\n  }\n\n  getName(): string {\n    return this.firstName.concat(LoginDetailsConstants.EMPTY).concat(this.lastName);\n  }\n\n  getShortenedName(): string {\n    return this.getName().length <= LoginDetailsConstants.CHARACTER_LIMIT\n      ? this.getName()\n      : this.getName()\n          .substring(0, LoginDetailsConstants.CHARACTER_LIMIT - LoginDetailsConstants.SUFFIX.length)\n          .concat(LoginDetailsConstants.SUFFIX);\n  }\n\n  isCafeUser(): boolean {\n    return this.bssSystem === LoginDetailsConstants.BSS_SYSTEM_TELENET_LEGACY;\n  }\n\n  isBaseLegacyCustomer(): boolean {\n    return this.bssSystem === LoginDetailsConstants.BSS_SYSTEM_BASE_LEGACY;\n  }\n\n  isBssSystemNetcracker(): boolean {\n    return this.bssSystem === LoginDetailsConstants.BSS_SYSTEM_NETCRACKER;\n  }\n\n  hasScope(scopeName: string): boolean {\n    return some(this.scopes, function (scope) {\n      return scope.toUpperCase() === scopeName.toUpperCase();\n    });\n  }\n\n  isFleetManager(): boolean {\n    return !isEmpty(this.role) && this.role === LoginDetailsConstants.FLEET_MANAGER_ROLE;\n  }\n\n  isFleetUser(): boolean {\n    return !isEmpty(this.role) && this.role === LoginDetailsConstants.FLEET_USER_ROLE;\n  }\n\n  isManager(): boolean {\n    return !isEmpty(this.role) && this.role === LoginDetailsConstants.MANAGER_ROLE;\n  }\n\n  hasManagerRole(): boolean {\n    return !isEmpty(this.role) && LoginDetailsConstants.MANAGER_ROLES.includes(this.role);\n  }\n\n  enrich(loginDetailsJSON: unknown): LoginDetails {\n    let enrichedLoginDetails = new LoginDetails(401);\n    if (!isEmpty(loginDetailsJSON)) {\n      enrichedLoginDetails = merge(enrichedLoginDetails, loginDetailsJSON);\n    }\n    return enrichedLoginDetails;\n  }\n\n  isNotLoggedInOrDoesNotHaveScope(scope: string) {\n    return !this.isLoggedIn() || !this.hasScope(scope);\n  }\n\n  get isSuccess(): boolean {\n    return this.httpStatus === 200;\n  }\n\n  // useless setter but needed to avoid 'cannot set property on [object Object] which only has getter\n  set isSuccess(success: boolean) {\n    if (success) {\n      this.httpStatus = 200;\n    }\n  }\n}\n","import { LoginDetails } from './login-details.model';\n\nexport class LoginDetailsTestfactory {\n  static build(properties?: unknown): LoginDetails {\n    const loginDetails = new LoginDetails(200);\n    loginDetails.customerNumber = '12345';\n    loginDetails.state = 'test_state';\n    loginDetails.nonce = 'test_nonce';\n    loginDetails.status = 'test_status';\n    loginDetails.scopes = [];\n    loginDetails.bssSystem = 'test_bss_system';\n    loginDetails.identityId = '';\n    loginDetails.username = 'test_user';\n    loginDetails.firstName = 'test_firstname';\n    loginDetails.lastName = 'test_lastname';\n    loginDetails.narrowed = false;\n    loginDetails.authAge = 18;\n    loginDetails.isPid = false;\n    loginDetails.bssSytem = 'test_bssSytem';\n    loginDetails.isImpersonated = false;\n    loginDetails.role = '';\n    loginDetails.isExplicitLogin = false;\n    loginDetails.isTelenetLogin = true;\n    loginDetails.isSubLogin = false;\n    loginDetails.loginAlias = 'test_login_alias';\n    loginDetails.advisorId = 'adminfmc';\n\n    if (properties) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      Object.keys(properties).forEach((key) => {\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        loginDetails[key] = properties[key];\n      });\n    }\n    return loginDetails;\n  }\n}\n","export class LogoutDetails {\n  logout_redirect_uri?: string;\n}\n","import { MapperInterface } from '@telenet/ng-lib-shared';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { HttpTypesEnum } from '../enums';\n\nexport class OcapiCallConfig<T, G> {\n  messageGroupName: string;\n  endpoint: string;\n  mapper?: MapperInterface<T, G>;\n  data: unknown;\n  withCredentials = true;\n  withDefaultContentType = true;\n  errorHandler: (errorHandler: HttpErrorResponse, config: OcapiCallConfig<T, G>) => Observable<unknown>;\n  httpType: HttpTypesEnum;\n  customHeaders: Record<string, string | string[]>;\n  observeAsResponse?: boolean;\n  responseType?: string;\n  useAdaptorEndpoint?: boolean;\n  silentlyHandleError: boolean;\n  authNeeded = true;\n\n  constructor(\n    messageGroupName: string,\n    endpoint: string,\n    mapper?: MapperInterface<T, G>,\n    data?: unknown,\n    customHeaders: Record<string, string | string[]> = {},\n    observeAsResponse?: boolean,\n    responseType?: string,\n    useAdaptorEndpoint?: boolean,\n    silentlyHandleError = false\n  ) {\n    this.messageGroupName = messageGroupName;\n    this.endpoint = endpoint;\n    this.mapper = mapper;\n    this.data = data;\n    this.customHeaders = customHeaders;\n    this.observeAsResponse = observeAsResponse;\n    this.responseType = responseType;\n    this.useAdaptorEndpoint = useAdaptorEndpoint;\n    this.silentlyHandleError = silentlyHandleError;\n  }\n\n  getEndpoint(): string {\n    return this.useAdaptorEndpoint ? this.endpoint.replace('/public', '-adaptor/public') : this.endpoint;\n  }\n}\n","import { ConfigConstants, ConfigService } from '@telenet/ng-lib-config';\nimport { AuthenticationProvider, OcapiAuthenticationProvider, OpenidAuthenticationProvider } from '../providers';\nimport { UrlService } from '@telenet/ng-lib-page';\nimport { JWTAuthenticationService, TransparentAuthenticationService } from '../services';\nimport { AuthenticationService } from '../models';\n\nconst extractJwtParameter = (urlService: UrlService): string => {\n  return urlService.getHashParameter('jwt') || urlService.getRequestParamValue('jwt', '');\n};\n\nexport const authenticationProviderFactory = (\n  urlService: UrlService,\n  configService: ConfigService\n): AuthenticationProvider => {\n  const jwtParameter = extractJwtParameter(urlService);\n  if (\n    (configService.getConfig(ConfigConstants.AUTH_PROVIDER) === OcapiAuthenticationProvider.PROVIDER_TYPE ||\n      urlService.getRequestParamValue('loginFlow', '') === 'oktaLogin') &&\n    !jwtParameter\n  ) {\n    return new OcapiAuthenticationProvider();\n  }\n  return new OpenidAuthenticationProvider();\n};\n\nexport const authenticationServiceFactory = (urlService: UrlService): AuthenticationService => {\n  const jwtParameter = extractJwtParameter(urlService);\n\n  if (jwtParameter) {\n    return new JWTAuthenticationService();\n  } else {\n    return new TransparentAuthenticationService();\n  }\n};\n","export * from './authentication.factory';\n","export * from './tokens';\nexport * from './models';\n","import { AuthenticationParameters } from './authentication.parameters';\nimport { Observable } from 'rxjs';\n\nexport interface AuthenticationService {\n  authenticate: (authenticationParameters: AuthenticationParameters) => void;\n  setAuthenticatedStatus: (isAuthenticated: boolean) => void;\n  getAuthenticationUrl: (authenticationParameters: AuthenticationParameters) => string | null;\n  getAuthenticationStatus: () => Observable<boolean>;\n}\n","export interface AuthenticationParameters {\n  prompt?: AuthenticationPrompt;\n  state?: string;\n  nonce?: string;\n  styleHint?: string;\n  referrerUrl?: string;\n}\n\nexport enum AuthenticationPrompt {\n  NONE = 'none',\n  LOGIN = 'login',\n}\n","export * from './authentication.parameters';\nexport * from './authentication-service.model';\n","import { ConfigService } from '@telenet/ng-lib-config';\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport { LanguageService, UrlService } from '@telenet/ng-lib-page';\nimport { Observable } from 'rxjs';\nimport { OcapiHelper } from '../../../utils';\nimport { LoginDetailsConstants } from '../../../constants';\nimport { AuthenticationParameters } from '../models';\nimport { inject } from '@angular/core';\n\nexport abstract class AuthenticationProvider {\n  protected readonly configService = inject(ConfigService);\n  protected readonly languageService = inject(LanguageService);\n  protected readonly urlService = inject(UrlService);\n  protected readonly httpClient = inject(HttpClient);\n  protected readonly ocapiHelper = inject(OcapiHelper);\n\n  abstract getAuthenticationUrl(): string | null;\n\n  abstract getType(): string;\n\n  public getParameters(authenticationParameters: AuthenticationParameters): HttpParams {\n    const { styleHint = LoginDetailsConstants.STYLE_HINT, prompt } = authenticationParameters;\n    let httpParams = new HttpParams().set('lang', this.languageService.getLanguage()).set('style_hint', styleHint);\n\n    if (prompt) {\n      httpParams = httpParams.append('prompt', prompt);\n    }\n    return httpParams;\n  }\n\n  abstract sendAuthCall(params: HttpParams): Observable<{ data: string }>;\n}\n","export * from './authentication.provider';\nexport * from './ocapi-authentication.provider';\nexport * from './openid-authentication.provider';\n","import { ConfigConstants } from '@telenet/ng-lib-config';\nimport { HttpErrorResponse, HttpParams } from '@angular/common/http';\nimport { Observable, throwError } from 'rxjs';\nimport { AuthenticationProvider } from './authentication.provider';\nimport { AuthenticationParameters } from '../models';\nimport { Log, LogFactory } from '@telenet/ng-lib-shared';\n\nexport class OcapiAuthenticationProvider extends AuthenticationProvider {\n  public static PROVIDER_TYPE = 'ocapi';\n\n  private static readonly LOG: Log = LogFactory.createLogger(OcapiAuthenticationProvider);\n\n  constructor() {\n    super();\n    OcapiAuthenticationProvider.LOG.logDebug('Use OcapiAuthenticationProvider for authentication');\n  }\n\n  public getType(): string {\n    return OcapiAuthenticationProvider.PROVIDER_TYPE;\n  }\n\n  public getAuthenticationUrl(): string | null {\n    const ocapiUrl = this.configService.getConfig(ConfigConstants.OCAPI_URl);\n    const clientId = this.configService.getConfig(ConfigConstants.OCAPI_CLIENT_ID);\n\n    if (!ocapiUrl || !clientId) {\n      OcapiAuthenticationProvider.LOG.logError('OCAPI_URL or OCAPI_CLIENT_ID has no been configured');\n      return null;\n    }\n    return ocapiUrl + '/login/authorization/' + clientId;\n  }\n\n  public override getParameters(authenticationParameters: AuthenticationParameters): HttpParams {\n    const { referrerUrl } = authenticationParameters;\n\n    let httpParams = super.getParameters(authenticationParameters);\n    httpParams = httpParams.appendAll({\n      targetUrl: (referrerUrl || undefined) ?? this.urlService.getCurrentUrl(),\n    });\n    return httpParams;\n  }\n\n  public sendAuthCall(params: HttpParams): Observable<{ data: string }> {\n    OcapiAuthenticationProvider.LOG.logDebug(\n      `Sending jsonp request without prompt to ocapi authentication endpoint: ${this.getAuthenticationUrl()}, with parameters ${params.toString()}`\n    );\n    const authUrl = this.getAuthenticationUrl();\n    if (!authUrl) {\n      return throwError(\n        () => new HttpErrorResponse({ error: { text: 'Authentication url of ocapi provider could not be determined' } })\n      );\n    }\n\n    const url = `${authUrl}?${params.toString()}`;\n    return this.httpClient.jsonp(url, 'callback') as Observable<{ data: string }>;\n  }\n}\n","import { ConfigConstants } from '@telenet/ng-lib-config';\nimport { HttpErrorResponse, HttpParams } from '@angular/common/http';\nimport { Observable, throwError } from 'rxjs';\nimport { AuthenticationProvider } from './authentication.provider';\nimport { AuthenticationParameters } from '../models';\nimport { LoginDetailsConstants } from '../../../constants';\nimport { Log, LogFactory } from '@telenet/ng-lib-shared';\n\nexport class OpenidAuthenticationProvider extends AuthenticationProvider {\n  private static readonly LOG: Log = LogFactory.createLogger(OpenidAuthenticationProvider);\n\n  public static PROVIDER_TYPE = 'openid';\n\n  constructor() {\n    super();\n    OpenidAuthenticationProvider.LOG.logDebug('Use OpenidAuthenticationProvider for authentication');\n  }\n\n  public getType(): string {\n    return OpenidAuthenticationProvider.PROVIDER_TYPE;\n  }\n\n  public getAuthenticationUrl(): string | null {\n    if (!this.configService.getConfig(ConfigConstants.OPENID_AUTH_URL)) {\n      OpenidAuthenticationProvider.LOG.logError('OPENID_AUTH_URL has not been configured');\n      return null;\n    }\n    return this.configService.getConfig(ConfigConstants.OPENID_AUTH_URL);\n  }\n\n  public override getParameters(authenticationParameters: AuthenticationParameters): HttpParams {\n    const { referrerUrl, state, nonce } = authenticationParameters;\n\n    let httpParams = super.getParameters(authenticationParameters);\n    httpParams = httpParams.appendAll({\n      client_id: this.configService.getConfig(ConfigConstants.OPENID_CLIENT_ID),\n      response_type: LoginDetailsConstants.CODE,\n      claims: LoginDetailsConstants.CLAIMS,\n    });\n\n    if (state && nonce) {\n      httpParams = httpParams.appendAll({\n        state,\n        nonce,\n      });\n    }\n\n    if (referrerUrl) {\n      httpParams = httpParams.append('referrer_url', referrerUrl);\n    }\n\n    if (this.configService.getConfig(ConfigConstants.OAUTH_CALLBACK_URL)) {\n      httpParams = httpParams.append('redirect_uri', this.configService.getConfig(ConfigConstants.OAUTH_CALLBACK_URL));\n    }\n\n    return httpParams;\n  }\n\n  public sendAuthCall(params: HttpParams): Observable<{ data: string }> {\n    OpenidAuthenticationProvider.LOG.logDebug(\n      `Sending GET request without prompt to openid authentication endpoint: ${this.getAuthenticationUrl()}, with parameters ${params.toString()}`\n    );\n\n    const authUrl = this.getAuthenticationUrl();\n    if (!authUrl) {\n      return throwError(\n        () =>\n          new HttpErrorResponse({ error: { text: 'Authentication url of openid provider could not be determined' } })\n      );\n    }\n\n    const url = `${authUrl}?${params.toString()}`;\n    const options = {\n      withCredentials: true,\n      headers: this.ocapiHelper.getHttpHeaders(),\n    };\n    return this.httpClient.get(url, options) as Observable<{ data: string }>;\n  }\n}\n","import { UserDetailsService } from '../../user-details.service';\nimport { inject } from '@angular/core';\nimport { UrlService } from '@telenet/ng-lib-page';\nimport { AuthenticationState } from '../state/authentication.state';\nimport { LoginDetailsConstants } from '../../../constants';\nimport { LoginStatusEnum } from '../../../enums';\nimport { CookieService } from 'ngx-cookie-service';\nimport { Observable, of } from 'rxjs';\nimport { AuthenticationParameters, AuthenticationService } from '../models';\nimport { catchError, shareReplay, take, tap } from 'rxjs/operators';\nimport { Log } from '@telenet/ng-lib-shared';\nimport { AUTH_PROVIDER } from '../tokens';\n\nexport abstract class AbstractAuthenticationService implements AuthenticationService {\n  protected readonly userDetailsService = inject(UserDetailsService);\n  protected readonly cookieService = inject(CookieService);\n  protected readonly urlService = inject(UrlService);\n  protected readonly authenticationState = inject(AuthenticationState);\n  protected readonly authenticationProvider = inject(AUTH_PROVIDER);\n\n  private authenticationStatus: Observable<boolean>;\n\n  protected constructor() {\n    this.getLog().logDebug(`Authenticate on load using service: ${this.constructor.name}`);\n  }\n\n  public authenticate(authenticationParameters: AuthenticationParameters) {\n    const authUrl = this.getAuthenticationUrl(authenticationParameters);\n    if (authUrl) {\n      this.urlService.openWindow(authUrl);\n    }\n  }\n\n  private getRootDomain(): string {\n    return location.hostname.split('.').reverse().splice(0, 2).reverse().join('.');\n  }\n\n  public setAuthenticatedStatus(isAuthenticated: boolean) {\n    if (!this.cookieService.check(LoginDetailsConstants.LOGIN_STATUS_COOKIENAME)) {\n      this.cookieService.set(\n        LoginDetailsConstants.LOGIN_STATUS_COOKIENAME,\n        isAuthenticated ? LoginStatusEnum.LOGGED_IN.toString() : LoginStatusEnum.NOT_LOGGED_IN.toString(),\n        {\n          path: '/',\n          sameSite: 'Lax',\n          domain: `.${this.getRootDomain()}`,\n        }\n      );\n    }\n\n    this.authenticationState.setAuthenticated(isAuthenticated);\n  }\n\n  public getAuthenticationUrl(authenticationParameters: AuthenticationParameters) {\n    const parameters = this.authenticationProvider.getParameters(authenticationParameters);\n    const url = this.authenticationProvider.getAuthenticationUrl();\n    if (!url) {\n      return null;\n    }\n    return `${url}?${parameters.toString()}`;\n  }\n\n  public getAuthenticationStatus(): Observable<boolean> {\n    if (!this.authenticationStatus) {\n      this.authenticationStatus = this.isAuthenticated().pipe(\n        take(1),\n        shareReplay({ bufferSize: 1, refCount: false }),\n        tap((isAuthenticated) => this.setAuthenticatedStatus(isAuthenticated)),\n        catchError((error) => {\n          this.getLog().logError(`Failed to retrieve authentication status`, error);\n          return of(false);\n        })\n      );\n    }\n    return this.authenticationStatus;\n  }\n\n  protected abstract isAuthenticated(): Observable<boolean>;\n\n  protected abstract getLog(): Log;\n}\n","export * from './authentication.service';\nexport * from './jwt-authentication.service';\nexport * from './transparent-authentication.service';\n","import { AbstractAuthenticationService } from './authentication.service';\nimport { catchError, map } from 'rxjs/operators';\nimport { Observable, of } from 'rxjs';\nimport { Log, LogFactory } from '@telenet/ng-lib-shared';\nimport { AuthenticationService } from '../models';\n\nexport class JWTAuthenticationService extends AbstractAuthenticationService implements AuthenticationService {\n  private static readonly LOG: Log = LogFactory.createLogger(JWTAuthenticationService);\n\n  constructor() {\n    super();\n  }\n\n  protected override isAuthenticated(): Observable<boolean> {\n    return this.userDetailsService.getUserDetails().pipe(\n      map((loginDetails) => {\n        const isLoggedIn = loginDetails.isLoggedIn();\n        JWTAuthenticationService.LOG.logDebug(`Authentication: ${loginDetails}`);\n        return isLoggedIn;\n      }),\n      catchError((_e: unknown) => {\n        JWTAuthenticationService.LOG.logDebug(`Authentication: false}`);\n        return of(false);\n      })\n    );\n  }\n\n  protected getLog(): Log {\n    return JWTAuthenticationService.LOG;\n  }\n}\n","import { AbstractAuthenticationService } from './authentication.service';\nimport { HttpClient, HttpErrorResponse, HttpHeaders } from '@angular/common/http';\nimport { Observable, of, throwError } from 'rxjs';\nimport { catchError, concatMap, map, switchMap } from 'rxjs/operators';\nimport { inject } from '@angular/core';\nimport { AuthenticationPrompt, AuthenticationService } from '../models';\nimport { Log, LogFactory } from '@telenet/ng-lib-shared';\nimport { OcapiAuthenticationProvider } from '../providers';\n\nexport class TransparentAuthenticationService extends AbstractAuthenticationService implements AuthenticationService {\n  private static readonly LOG: Log = LogFactory.createLogger(TransparentAuthenticationService);\n\n  protected readonly httpClient = inject(HttpClient);\n\n  constructor() {\n    super();\n  }\n\n  protected override isAuthenticated(): Observable<boolean> {\n    return this.userDetailsService.getUserDetails().pipe(\n      switchMap((loginDetails) => {\n        if (loginDetails.isLoggedIn()) {\n          return of(loginDetails.isLoggedIn());\n        }\n\n        return this.attemptAuthenticate(loginDetails.state, loginDetails.nonce).pipe(\n          switchMap(() => {\n            this.userDetailsService.reset();\n            return this.userDetailsService.getUserDetails().pipe(map((loginDetails) => loginDetails.isLoggedIn()));\n          }),\n          catchError((error) => {\n            this.getLog().logError('Failed to authenticate', error);\n            return of(false);\n          })\n        );\n      })\n    );\n  }\n\n  protected override getLog(): Log {\n    return TransparentAuthenticationService.LOG;\n  }\n\n  private attemptAuthenticate(state: string, nonce: string): Observable<unknown> {\n    let params = this.authenticationProvider.getParameters({ prompt: AuthenticationPrompt.NONE });\n\n    if (state && nonce) {\n      params = params.append('state', state).append('nonce', nonce);\n    }\n\n    this.getLog().logDebug(`Trying authenticate with provider ${this.authenticationProvider.getType()}`);\n\n    if (!this.authenticationProvider.getAuthenticationUrl()) {\n      return throwError(() => new Error('Authentication url is not defined, not trying to authenticate'));\n    }\n\n    return this.authenticationProvider.sendAuthCall(params).pipe(\n      catchError((error: HttpErrorResponse) => {\n        if (error?.error?.text?.includes('callback')) {\n          TransparentAuthenticationService.LOG.logDebug(\n            `Error during attempt to authenticate, with callback: ${error.error.text}`\n          );\n          return of({ data: error.error.text });\n        } else {\n          TransparentAuthenticationService.LOG.logDebug(\n            `Error during attempt to authenticate, rethrowing: ${error?.error?.text}`\n          );\n          return of({ data: error.error.text });\n        }\n      }),\n      concatMap((res: { data: string }) => {\n        TransparentAuthenticationService.LOG.logDebug(`Executing callback: ${res.data}`);\n        if (this.authenticationProvider.getType() === OcapiAuthenticationProvider.PROVIDER_TYPE) {\n          // For ocapi we don't want to manually get a callback, this already happened via jsonp\n          return of(undefined);\n        }\n        return this.httpClient.get(res.data, this.getCallBackOptions());\n      })\n    );\n  }\n\n  private getCallBackOptions(): Record<string, unknown> {\n    return {\n      withCredentials: true,\n      headers: new HttpHeaders({\n        'X-Requested-With': 'XMLHttpRequest',\n        Accept: 'text/plain',\n        'Content-Type': 'text/plain;charset=UTF-8',\n      }),\n      responseType: 'text',\n    };\n  }\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { Observable, ReplaySubject } from 'rxjs';\nimport { take } from 'rxjs/operators';\nimport { AUTH_SERVICE } from '../tokens';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AuthenticationState {\n  private readonly authenticatedSubject = new ReplaySubject<boolean>(1);\n\n  private isStatusKnown = false;\n\n  constructor(private readonly injector: Injector) {}\n\n  setAuthenticated(authenticated: boolean): void {\n    this.authenticatedSubject.next(authenticated);\n    this.isStatusKnown = true;\n  }\n\n  getAuthenticated(): Observable<boolean> {\n    if (!this.isStatusKnown) {\n      const authenticationService = this.injector.get(AUTH_SERVICE);\n      return authenticationService.getAuthenticationStatus();\n    }\n    return this.authenticatedSubject.pipe(take(1));\n  }\n}\n","import { inject, InjectionToken } from '@angular/core';\nimport { AuthenticationProvider } from '../providers';\nimport { authenticationProviderFactory } from '../factory';\nimport { UrlService } from '@telenet/ng-lib-page';\nimport { ConfigService } from '@telenet/ng-lib-config';\n\nexport const AUTH_PROVIDER = new InjectionToken<AuthenticationProvider>('AuthProvider', {\n  providedIn: 'root',\n  factory: () => {\n    const urlService = inject(UrlService);\n    const configService = inject(ConfigService);\n    return authenticationProviderFactory(urlService, configService);\n  },\n});\n","import { inject, InjectionToken } from '@angular/core';\nimport { UrlService } from '@telenet/ng-lib-page';\nimport { authenticationServiceFactory } from '../factory';\nimport { AuthenticationService } from '../models';\n\nexport const AUTH_SERVICE = new InjectionToken<AuthenticationService>('AuthService', {\n  providedIn: 'root',\n  factory: () => {\n    const urlService = inject(UrlService);\n    return authenticationServiceFactory(urlService);\n  },\n});\n","export * from './authentication-service.token';\nexport * from './authentication-provider.token';\n","import { shareReplay } from 'rxjs/operators';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CacheService {\n  private cache: Record<string, Observable<unknown>> = {};\n\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  add(key: string, response$: Observable<unknown | Object>): void {\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    this.cache[key] = response$.pipe(shareReplay({ bufferSize: 1 }));\n  }\n\n  get(key: string): Observable<unknown> {\n    return this.cache[key];\n  }\n\n  remove(key: string): void {\n    delete this.cache[key];\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  DataLayerService,\n  DataLayerAttributes,\n  EventNameEnum,\n  EventTypeEnum,\n  EventStatusEnum,\n} from '@telenet/ng-lib-datalayer';\nimport { OcapiCallConfig } from '../models';\nimport { QueryParamEnum, UrlService } from '@telenet/ng-lib-page';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ErrorReportService {\n  constructor(\n    private readonly dataLayerService: DataLayerService,\n    private readonly urlService: UrlService\n  ) {}\n\n  sendErrorEventToAnalytics<T, G>(ocapiCall: OcapiCallConfig<T, G>, errorResponse?: unknown, errorCode?: string): void {\n    const eventInfo = this.dataLayerService.createEventInfo(\n      EventNameEnum.EVENT_NAME_ERROR_OCCURRED,\n      EventTypeEnum.EVENT_TYPE_ERROR\n    );\n    eventInfo.setEventStatus(EventStatusEnum.EVENT_STATUS_FAILED);\n    let errorMessage: string | undefined = errorCode;\n    if (errorResponse && errorResponse['errorDetails'] && errorResponse['errorDetails'].length) {\n      errorMessage =\n        errorMessage +\n        '|' +\n        errorResponse['errorDetails'][0].errorDetailCode +\n        '|' +\n        errorResponse['errorDetails'][0].message;\n    }\n\n    if (errorMessage) {\n      eventInfo.setEventStatusMessage(errorMessage);\n    }\n\n    const attributes: DataLayerAttributes = {\n      itemName: ocapiCall.messageGroupName,\n      itemData: ocapiCall.httpType + ' ' + ocapiCall.endpoint,\n      itemGroup: errorResponse ? errorResponse['cause'] : '',\n      itemIdentifier: errorResponse ? errorResponse['correlationId'] : '',\n    };\n\n    const flow = this.urlService.getRequestParamValue(QueryParamEnum.FLOW, '');\n    const sData = this.urlService.getRequestParamValue(QueryParamEnum.SDATA, '');\n    const sId = this.urlService.getRequestParamValue(QueryParamEnum.SALES_ORDER_ID, '');\n    if (!flow || (!sData && !sId)) {\n      this.dataLayerService.sendEvent({ eventInfo, attributes });\n    }\n  }\n}\n","export * from './login.service';\nexport * from './ocapi-socket.service';\nexport * from './ocapi.service';\nexport * from './cache/cache.service';\nexport * from './authentication';\nexport * from './user-details.service';\n","import { Observable, of, throwError } from 'rxjs';\nimport { Inject, Injectable, NgZone } from '@angular/core';\nimport { map, tap } from 'rxjs/operators';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { UrlService } from '@telenet/ng-lib-page';\nimport { ErrorMessage, MessageService } from '@telenet/ng-lib-message';\nimport { LoginCustomerNameMapper, LogoutMapper } from '../mappers';\nimport { OcapiService } from './ocapi.service';\nimport { LoginDetails, LogoutDetails, OcapiCallConfig } from '../models';\nimport { UserDetailsService } from './user-details.service';\nimport { AUTH_SERVICE, AuthenticationPrompt, AuthenticationService } from './authentication';\n\ntype Window = Record<string, object>;\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class LoginService {\n  constructor(\n    protected _ngZone: NgZone,\n    @Inject('Window') protected window: Window,\n    @Inject(AUTH_SERVICE) private readonly authenticationService: AuthenticationService,\n    private readonly ocapiService: OcapiService,\n    private readonly urlService: UrlService,\n    private readonly messageService: MessageService,\n    private readonly loginCustomerNameMapper: LoginCustomerNameMapper,\n    private readonly logoutMapper: LogoutMapper,\n    private readonly userDetailsService: UserDetailsService\n  ) {}\n\n  /**\n   * @deprecated This function is deprecated, please use getUserDetails from UserDetailsService instead.\n   */\n  getLoginDetails(withCredentials = true, referrerUrl?: string, _isRoleRequired = true): Observable<LoginDetails> {\n    return this.userDetailsService.getUserDetails({\n      withCredentials,\n      referrerUrl,\n    });\n  }\n\n  login(referrerUrl?: string, styleHint?: string): void {\n    this.getStateAndNonce(referrerUrl).subscribe((loginDetails) => {\n      const authParameters = {\n        state: loginDetails.state,\n        nonce: loginDetails.nonce,\n        referrerUrl,\n        styleHint,\n      };\n      this.authenticationService.authenticate(authParameters);\n    });\n  }\n\n  loginWithPrompt(referrerUrl?: string, styleHint?: string): void {\n    this.getStateAndNonce(referrerUrl).subscribe((loginDetails) => {\n      const authParameters = {\n        state: loginDetails.state,\n        nonce: loginDetails.nonce,\n        referrerUrl,\n        styleHint,\n        prompt: AuthenticationPrompt.LOGIN,\n      };\n      this.authenticationService.authenticate(authParameters);\n    });\n  }\n\n  logout(messageGroupName: string, logoutPath: string): Observable<LogoutDetails> {\n    const endpoint = '/logout?targetUrl=' + encodeURIComponent(this.getLogoutRedirectUrl(logoutPath));\n\n    const ocapiConfig = new OcapiCallConfig(messageGroupName, endpoint, this.logoutMapper, {});\n    ocapiConfig.errorHandler = this.handleErrorResponse.bind(this);\n\n    return this.ocapiService.doGet(ocapiConfig).pipe(\n      map((response) => {\n        this.authenticationService.setAuthenticatedStatus(false);\n        if (response && response.logout_redirect_uri) {\n          this.urlService.redirectTo(response.logout_redirect_uri);\n          return {};\n        }\n        return response;\n      })\n    );\n  }\n\n  getLogoutRedirectUrl(logoutPath: string) {\n    let logoutRedirectUrl = this.urlService.getCurrentUrl();\n    if (logoutPath) {\n      logoutRedirectUrl = logoutPath.startsWith('https://')\n        ? logoutPath\n        : location.protocol + '//' + location.host + logoutPath;\n    }\n    return this.urlService.removeParametersFromUrl(logoutRedirectUrl, 'jwt');\n  }\n\n  private getStateAndNonce(refererUrl?: string): Observable<LoginDetails> {\n    return this.userDetailsService.getUserDetails({\n      withCredentials: false,\n      referrerUrl: refererUrl,\n    });\n  }\n\n  loginWithCustomerNumber(\n    messageGroupName: string,\n    _customerNumber: string,\n    key: string,\n    value: string,\n    mobileNumber: string\n  ) {\n    const endpoint = '/oauth/login?' + key + '=' + value + '&mobilenumber=' + mobileNumber;\n    const ocapiConfig = new OcapiCallConfig(messageGroupName, endpoint, this.loginCustomerNameMapper, {});\n    ocapiConfig.errorHandler = this.handleErrorResponse.bind(this);\n\n    return this.ocapiService.doPost(ocapiConfig).pipe(\n      tap(() => {\n        this.authenticationService.setAuthenticatedStatus(true);\n        this.userDetailsService.reset();\n      }),\n      map((response) => response)\n    );\n  }\n\n  private handleErrorResponse<T, G>(error: HttpErrorResponse, ocapiCall: OcapiCallConfig<T, G>) {\n    if (error.status === 401) {\n      return of({ data: error.error, status: error.status });\n    } else if (error.status === 400 && error.error && error.error.code) {\n      const errorCode = error.status.toString().concat('-').concat(error.error.code);\n      this.messageService.addMessage(new ErrorMessage(ocapiCall.messageGroupName, 'ocapi.' + errorCode));\n    } else {\n      this.messageService.addMessage(new ErrorMessage(ocapiCall.messageGroupName, 'ocapi.' + error.status));\n    }\n    return throwError(() => 'An error occured while trying to fetch ' + ocapiCall.messageGroupName);\n  }\n\n  public getAuthenticationStatus(): Observable<boolean> {\n    return this.authenticationService.getAuthenticationStatus();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport SockJS from 'sockjs-client';\nimport { ConfigConstants, ConfigService } from '@telenet/ng-lib-config';\nimport { Observable } from 'rxjs';\nimport { RxStomp, RxStompConfig } from '@stomp/rx-stomp';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class OcapiSocketService {\n  baseUrl: string;\n  isAnonymous = false;\n  TOPIC_PREFIX: string;\n  ANONYMOUS_TOPIC_PREFIX: string;\n  stompClient: RxStomp;\n  private isInitialised: boolean;\n\n  constructor(readonly configService: ConfigService) {\n    this.TOPIC_PREFIX = '/user/topic/';\n    this.ANONYMOUS_TOPIC_PREFIX = '/topic/action/';\n    this.baseUrl = configService.getConfig(ConfigConstants.OCAPI_URl) + '/notify/';\n    this.isInitialised = false;\n  }\n\n  init(): void {\n    this.initializeWebSocketConnection();\n    this.isInitialised = true;\n  }\n\n  setAnonymous(anonymous: boolean) {\n    this.isAnonymous = anonymous;\n  }\n\n  getTopicPrefix(): string {\n    return this.isAnonymous ? this.ANONYMOUS_TOPIC_PREFIX : this.TOPIC_PREFIX;\n  }\n\n  initializeWebSocketConnection(): void {\n    this.stompClient = new RxStomp();\n\n    const stompConfig: RxStompConfig = {\n      webSocketFactory: () => {\n        return new SockJS(this.baseUrl);\n      },\n    };\n\n    this.stompClient.configure(stompConfig);\n    this.stompClient.activate();\n  }\n\n  watchStompClientOnTopic(topic: string): Observable<unknown> {\n    if (!this.isInitialised) {\n      this.init();\n    }\n\n    return this.stompClient.watch(this.getTopicPrefix() + topic);\n  }\n}\n","// @ts-nocheck\nimport { isEmpty, forEach } from 'lodash-es';\nimport { Observable, of, throwError } from 'rxjs';\nimport { Injectable } from '@angular/core';\nimport { ConfigConstants, ConfigService } from '@telenet/ng-lib-config';\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { ErrorMessage, MessageService } from '@telenet/ng-lib-message';\nimport { catchError, concatMap, map, mergeMap, take, tap } from 'rxjs/operators';\n\nimport { OmapiProductService, RawOmapiProductInterface } from '@telenet/ng-lib-omapi';\nimport { DataLayerService } from '@telenet/ng-lib-datalayer';\nimport { UrlService } from '@telenet/ng-lib-page';\nimport { OcapiHelper } from '../utils';\nimport { OcapiCallConfig } from '../models';\nimport { HttpTypesEnum } from '../enums';\nimport { OmapiQueryProductService, RawOmapiQueryProductInterface } from '@telenet/ng-lib-omapi-query';\nimport { SalesConstants } from '../constants';\nimport { AuthenticationState } from './authentication/state/authentication.state';\nimport { Log, LogFactory } from '@telenet/ng-lib-shared';\nimport { ErrorReportService } from './error-report.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class OcapiService {\n  private static readonly LOG: Log = LogFactory.createLogger(OcapiService);\n\n  constructor(\n    private readonly http: HttpClient,\n    private readonly configService: ConfigService,\n    private readonly messageService: MessageService,\n    private readonly omapiProductService: OmapiProductService,\n    private readonly omapiQueryProductService: OmapiQueryProductService,\n    private readonly ocapiHelper: OcapiHelper,\n    private readonly dataLayerService: DataLayerService,\n    private readonly urlService: UrlService,\n    private readonly authenticationState: AuthenticationState,\n    private readonly errorReportService: ErrorReportService\n  ) {}\n\n  public doGet<T, G>(ocapiCallConfig: OcapiCallConfig<T, G>): Observable<G> {\n    return this.doResolve(HttpTypesEnum.GET, ocapiCallConfig);\n  }\n\n  public doPost<T, G>(ocapiCallConfig: OcapiCallConfig<T, G>): Observable<G> {\n    return this.doResolve(HttpTypesEnum.POST, ocapiCallConfig);\n  }\n\n  public doPut<T, G>(ocapiCallConfig: OcapiCallConfig<T, G>): Observable<G> {\n    return this.doResolve(HttpTypesEnum.PUT, ocapiCallConfig);\n  }\n\n  public doRestHead<T, G>(ocapiCallConfig: OcapiCallConfig<T, G>): Observable<G> {\n    return this.doResolve(HttpTypesEnum.HEAD, ocapiCallConfig);\n  }\n\n  public doPatch<T, G>(ocapiCallConfig: OcapiCallConfig<T, G>): Observable<G> {\n    return this.doResolve(HttpTypesEnum.PATCH, ocapiCallConfig);\n  }\n\n  public doDelete<T, G>(ocapiCallConfig: OcapiCallConfig<T, G>): Observable<G> {\n    return this.doResolve(HttpTypesEnum.DELETE, ocapiCallConfig);\n  }\n\n  private doResolve<T, G>(httpType: HttpTypesEnum, ocapiCallConfig: OcapiCallConfig<T, G>): Observable<G> {\n    ocapiCallConfig.httpType = httpType;\n    try {\n      return this.doRequest(ocapiCallConfig).pipe(\n        mergeMap((ocapiResponse: T) => {\n          return this.ocapiResponseEnrichedWithOmapiData$<T>(\n            ocapiCallConfig.messageGroupName,\n            ocapiResponse,\n            ocapiCallConfig.observeAsResponse,\n            ocapiCallConfig.silentlyHandleError\n          );\n        }),\n        mergeMap((ocapiResponse: T) => {\n          return this.ocapiResponseEnrichedWithOmapiQueryData$<T>(\n            ocapiCallConfig.messageGroupName,\n            ocapiResponse,\n            ocapiCallConfig.observeAsResponse\n          );\n        }),\n        map((ocapiResponseEnrichedWithOmapiData: T) => {\n          return (\n            ocapiCallConfig.mapper?.toModel(ocapiResponseEnrichedWithOmapiData) || ocapiResponseEnrichedWithOmapiData\n          );\n        })\n      );\n    } catch (e) {\n      this.errorReportService.sendErrorEventToAnalytics(ocapiCallConfig);\n      this.messageService.addMessage(\n        new ErrorMessage(\n          ocapiCallConfig.messageGroupName,\n          'Ocapi call failed:' + ocapiCallConfig.endpoint + 'with data ' + JSON.stringify(ocapiCallConfig.data)\n        )\n      );\n    }\n  }\n\n  private ocapiResponseEnrichedWithOmapiQueryData$<T>(\n    messageGroup: string,\n    ocapiResponse: T,\n    isResponseObservable: boolean | undefined\n  ): Observable<T> {\n    const queryUrls = this.recursiveUrls(ocapiResponse, SalesConstants.QUERY_URL);\n    let responseBody = ocapiResponse;\n    if (isResponseObservable) {\n      responseBody = ocapiResponse['body'];\n    }\n    if (!isEmpty(queryUrls)) {\n      return this.omapiQueryProductService.rawQueryProductsFromEndpoints$(messageGroup, queryUrls).pipe(\n        tap((omapiQueryResponses: RawOmapiQueryProductInterface[]) => {\n          forEach(omapiQueryResponses, (omapiQueryResponse: RawOmapiQueryProductInterface) =>\n            this.recursiveAddDataToOcapiResponse(responseBody, omapiQueryResponse, SalesConstants.QUERY_URL)\n          );\n        }),\n        map(() => {\n          return ocapiResponse;\n        })\n      );\n    } else {\n      return of(ocapiResponse);\n    }\n  }\n\n  private ocapiResponseEnrichedWithOmapiData$<T>(\n    messageGroup: string,\n    ocapiResponse: T,\n    isResponseObservable: boolean | undefined,\n    silentlyHandleError: boolean\n  ): Observable<T> {\n    const specUrls = this.recursiveUrls(ocapiResponse, SalesConstants.SPEC_URL);\n    let responseBody = ocapiResponse;\n    if (isResponseObservable) {\n      responseBody = ocapiResponse['body'];\n    }\n    if (!isEmpty(specUrls)) {\n      return this.omapiProductService.rawProductsFromEndpoints$(messageGroup, specUrls, silentlyHandleError).pipe(\n        tap((omapiResponses: RawOmapiProductInterface[]) => {\n          forEach(omapiResponses, (omapiResponse: RawOmapiProductInterface) =>\n            this.recursiveAddDataToOcapiResponse(responseBody, omapiResponse, SalesConstants.SPEC_URL)\n          );\n        }),\n        map(() => {\n          return ocapiResponse;\n        })\n      );\n    } else {\n      return of(ocapiResponse);\n    }\n  }\n\n  private doRequest<T, G>(ocapiCall: OcapiCallConfig<T, G>): Observable<unknown> {\n    const options = this.ocapiHelper.getHttpOptions(ocapiCall);\n\n    switch (ocapiCall.httpType) {\n      case HttpTypesEnum.GET: {\n        const request$ = this.http\n          .get(this.configService.getConfig(ConfigConstants.OCAPI_URl) + ocapiCall.getEndpoint(), options)\n          .pipe(catchError((error: unknown) => this.handleError(error as HttpErrorResponse, ocapiCall)));\n\n        if (ocapiCall.authNeeded) {\n          OcapiService.LOG.logDebug(`Auth is needed for request: ${ocapiCall.getEndpoint()}`);\n          return this.authenticationState.getAuthenticated().pipe(\n            concatMap(() => {\n              return request$;\n            })\n          );\n        }\n        OcapiService.LOG.logDebug(`Auth is not needed for request: ${ocapiCall.getEndpoint()}`);\n        return request$;\n      }\n      case HttpTypesEnum.POST:\n        return this.http\n          .post(this.configService.getConfig(ConfigConstants.OCAPI_URl) + ocapiCall.endpoint, ocapiCall.data, options)\n          .pipe(\n            take(1),\n            catchError((error: unknown) => this.handleError(error as HttpErrorResponse, ocapiCall))\n          );\n\n      case HttpTypesEnum.PUT:\n        return this.http\n          .put(this.configService.getConfig(ConfigConstants.OCAPI_URl) + ocapiCall.endpoint, ocapiCall.data, options)\n          .pipe(\n            take(1),\n            catchError((error: unknown) => this.handleError(error as HttpErrorResponse, ocapiCall))\n          );\n\n      case HttpTypesEnum.PATCH:\n        return this.http\n          .patch(this.configService.getConfig(ConfigConstants.OCAPI_URl) + ocapiCall.endpoint, ocapiCall.data, options)\n          .pipe(\n            take(1),\n            catchError((error: unknown) => this.handleError(error as HttpErrorResponse, ocapiCall))\n          );\n\n      case HttpTypesEnum.HEAD:\n        return this.http\n          .head(this.configService.getConfig(ConfigConstants.OCAPI_URl) + ocapiCall.endpoint, options)\n          .pipe(\n            take(1),\n            catchError((error: unknown) => this.handleError(error as HttpErrorResponse, ocapiCall))\n          );\n\n      case HttpTypesEnum.DELETE:\n        return this.http\n          .delete(this.configService.getConfig(ConfigConstants.OCAPI_URl) + ocapiCall.endpoint, options)\n          .pipe(\n            take(1),\n            catchError((error: unknown) => {\n              return this.handleError(error as HttpErrorResponse, ocapiCall);\n            })\n          );\n    }\n  }\n\n  private recursiveAddDataToOcapiResponse(data: unknown, omapiorOmapiQueryResponse: unknown, type: string) {\n    if (data) {\n      Object.entries(data).forEach(([key, value]) => {\n        if (key === SalesConstants.SPEC_URL && type === SalesConstants.SPEC_URL) {\n          this.isSpecUrl(value, data, omapiorOmapiQueryResponse);\n        } else if (key === SalesConstants.QUERY_URL && type === SalesConstants.QUERY_URL) {\n          this.isQueryUrl(value, data, omapiorOmapiQueryResponse);\n        }\n        if (typeof value === 'object') {\n          this.recursiveAddDataToOcapiResponse(value, omapiorOmapiQueryResponse, type);\n        }\n      });\n    }\n    return data;\n  }\n\n  private isQueryUrl(value, data, omapiorOmapiQueryResponse) {\n    const itemCodeFromQueryUrl: string = this.urlService.getParamsValueFromUrl(value.toString(), 'itemcodes');\n    const itemCodeFromOmapiQuery = this.getProductIdFromOmapiResponse(omapiorOmapiQueryResponse, itemCodeFromQueryUrl);\n    if (\n      (itemCodeFromQueryUrl && itemCodeFromQueryUrl.toString()) ===\n        (itemCodeFromOmapiQuery && itemCodeFromOmapiQuery.toString()) ||\n      isEmpty(omapiorOmapiQueryResponse.products)\n    ) {\n      data['rawOmapiQuery'] = omapiorOmapiQueryResponse;\n    }\n  }\n\n  private isSpecUrl(value, data, omapiorOmapiQueryResponse) {\n    const epcFromSpecUrl = value.toString() && value.toString().split('/').pop();\n    const epcFromOmapi = omapiorOmapiQueryResponse.product && omapiorOmapiQueryResponse.product.productid;\n    if ((epcFromSpecUrl && epcFromSpecUrl.toString()) === (epcFromOmapi && epcFromOmapi.toString())) {\n      data['rawOmapi'] = omapiorOmapiQueryResponse;\n    }\n  }\n\n  private getProductIdFromOmapiResponse(omapiQueryResponse: unknown, itemCode: string): string {\n    if (!isEmpty(omapiQueryResponse.products) && !isEmpty(omapiQueryResponse.products[0].variants)) {\n      const filteredVariant = omapiQueryResponse.products[0].variants.find((varaint) => {\n        return varaint.productId === itemCode;\n      });\n      return !isEmpty(filteredVariant) ? filteredVariant.productId : '';\n    } else {\n      return '';\n    }\n  }\n\n  private recursiveUrls(data, type: string, urls = []) {\n    if (data) {\n      Object.entries(data).forEach(([key, value]) => {\n        if (key === type && value !== null) {\n          urls.push(value.toString());\n        }\n        if (value !== null && typeof value === 'object') {\n          this.recursiveUrls(value, type, urls);\n        }\n      });\n    }\n    return urls;\n  }\n\n  private handleError<T, G>(error: HttpErrorResponse, ocapiCall: OcapiCallConfig<T, G>) {\n    if (ocapiCall.errorHandler !== undefined) {\n      this.sendErrorEventToAnalyticsForCustomError(error, ocapiCall);\n      return ocapiCall.errorHandler(error, ocapiCall);\n    }\n\n    let errorCode = 'ocapi.'.concat(error.status.toString());\n    switch (error.status) {\n      case 401:\n        break;\n      case 400:\n      case 500:\n        this.messageService.addMessage(new ErrorMessage(ocapiCall.messageGroupName, errorCode));\n        this.errorReportService.sendErrorEventToAnalytics(ocapiCall, error.error, errorCode);\n        break;\n      default:\n        errorCode = this.getDetailedErrorCode(error, errorCode);\n        if (errorCode !== 'ocapi.422-OCAPI-ERR-ODSO156') {\n          this.messageService.addMessage(new ErrorMessage(ocapiCall.messageGroupName, errorCode));\n        }\n        this.errorReportService.sendErrorEventToAnalytics(ocapiCall, error.error, errorCode);\n        break;\n    }\n    const errorDetails = 'An error occured while trying to fetch ' + ocapiCall.messageGroupName + ' | ' + errorCode;\n    const throwErrorDetails =\n      errorCode && errorCode.includes('VM000061') ? errorDetails + ' | ' + error.error.cause : errorDetails;\n    return throwError(() => throwErrorDetails);\n  }\n\n  private sendErrorEventToAnalyticsForCustomError<T, G>(error: HttpErrorResponse, ocapiCall: OcapiCallConfig<T, G>) {\n    if (error && error.status !== 401) {\n      let errorCode = 'ocapi.'.concat(error.status.toString());\n      errorCode = this.getDetailedErrorCode(error, errorCode);\n      this.errorReportService.sendErrorEventToAnalytics(ocapiCall, error.error, errorCode);\n    }\n  }\n\n  private getDetailedErrorCode(error: HttpErrorResponse, errorCode: string) {\n    if (error.error && error.error.code) {\n      return errorCode.concat('-').concat(error.error.code);\n    }\n    return errorCode;\n  }\n}\n","import { inject, Injectable } from '@angular/core';\nimport { catchError, finalize, map, shareReplay, take } from 'rxjs/operators';\nimport { HttpClient, HttpContext, HttpErrorResponse, HttpHeaders, HttpParams } from '@angular/common/http';\nimport { Observable, of, ReplaySubject, throwError } from 'rxjs';\nimport { ErrorMessage, MessageService } from '@telenet/ng-lib-message';\nimport { LoginDetails, OcapiCallConfig } from '../models';\nimport { LoginDetailsMapper } from '../mappers';\nimport { ConfigConstants, ConfigService } from '@telenet/ng-lib-config';\nimport { OcapiHelper } from '../utils';\nimport { ErrorReportService } from './error-report.service';\nimport { QueryParamEnum, UrlService } from '@telenet/ng-lib-page';\nimport { Log, LogFactory } from '@telenet/ng-lib-shared';\n\ninterface UserDetailsOptions {\n  withCredentials?: boolean;\n  jwtToken?: string;\n  referrerUrl?: string;\n  errorHandler?: (\n    errorHandler: HttpErrorResponse,\n    config: OcapiCallConfig<Record<string, unknown>, LoginDetails>\n  ) => Observable<unknown>;\n  forceUpdate?: boolean;\n}\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class UserDetailsService {\n  private static readonly LOG: Log = LogFactory.createLogger(UserDetailsService);\n\n  private readonly endpoint = '/oauth/userdetails';\n\n  private readonly cache: Map<string, ReplaySubject<LoginDetails>> = new Map<string, ReplaySubject<LoginDetails>>();\n\n  private readonly loginDetailsMapper: LoginDetailsMapper = inject(LoginDetailsMapper);\n  private readonly messageService: MessageService = inject(MessageService);\n  private readonly ocapiHelper: OcapiHelper = inject(OcapiHelper);\n  private readonly configService: ConfigService = inject(ConfigService);\n  private readonly http = inject(HttpClient);\n  private readonly errorReportService = inject(ErrorReportService);\n  private readonly urlService = inject(UrlService);\n\n  reset() {\n    this.cache.clear();\n  }\n\n  getUserDetails(options: UserDetailsOptions = {}) {\n    const { withCredentials = true, referrerUrl, jwtToken } = options;\n\n    let endpointWithParameters = this.endpoint;\n    const jwt = jwtToken ? jwtToken : this.extractJwtFromUrl();\n\n    if (jwt) {\n      endpointWithParameters = `${endpointWithParameters}?jwt=${jwt}`;\n    }\n    const ocapiConfig = new OcapiCallConfig('', endpointWithParameters, this.loginDetailsMapper);\n    ocapiConfig.withCredentials = withCredentials;\n    ocapiConfig.authNeeded = false;\n\n    if (referrerUrl && referrerUrl.length > 0) {\n      ocapiConfig.customHeaders = { ...(ocapiConfig.customHeaders || {}), 'x-alt-referer': referrerUrl };\n    }\n    return this.getUserDetailsForConfig(ocapiConfig).pipe(\n      shareReplay({ bufferSize: 1, refCount: false }),\n      catchError((error: HttpErrorResponse) => {\n        if (error.status !== 401) {\n          return throwError(() => error);\n        }\n        const { status, error: errorMessage } = error;\n        const [state, nonce] = String(errorMessage).split(',');\n        const loginDetails = new LoginDetails(status);\n        loginDetails.state = state;\n        loginDetails.nonce = nonce;\n\n        return of(loginDetails);\n      })\n    );\n  }\n\n  private extractJwtFromUrl(): string | null {\n    const jwtToken = this.urlService.getRequestParamValue(QueryParamEnum.JWT_TOKEN, '');\n    return jwtToken ? jwtToken : this.urlService.getHashParameter(QueryParamEnum.JWT_TOKEN);\n  }\n\n  private createHashKey(ocapiCall: OcapiCallConfig<Record<string, unknown>, LoginDetails>) {\n    const { errorHandler: _, endpoint: __, ...otherProps } = ocapiCall;\n    return btoa(JSON.stringify(otherProps));\n  }\n\n  private hasJwtParameter(endpoint: string) {\n    return !!endpoint && endpoint.includes('jwt');\n  }\n\n  private getUserDetailsForConfig(\n    config: OcapiCallConfig<Record<string, unknown>, LoginDetails>\n  ): Observable<LoginDetails> {\n    const cacheKey = this.createHashKey(config);\n\n    if (!this.hasJwtParameter(config.endpoint) && this.cache.has(cacheKey)) {\n      const replaySubject$ = this.cache.get(cacheKey);\n      if (replaySubject$) {\n        return replaySubject$.asObservable();\n      }\n    }\n    return this.getCacheableUserDetailsObservable(cacheKey, config);\n  }\n\n  private getCacheableUserDetailsObservable(\n    cacheKey: string,\n    config: OcapiCallConfig<Record<string, unknown>, LoginDetails>\n  ) {\n    const freshReplaySubject$ = new ReplaySubject<LoginDetails>(1);\n    this.cache.set(cacheKey, freshReplaySubject$);\n    this.doResolve(config)\n      .pipe(\n        take(1),\n        finalize(() => {\n          freshReplaySubject$.complete();\n        })\n      )\n      .subscribe({\n        next: (loginDetails: LoginDetails | unknown) => {\n          if (loginDetails instanceof LoginDetails) {\n            freshReplaySubject$.next(loginDetails);\n          }\n        },\n        error: (error) => freshReplaySubject$.error(error),\n      });\n    return freshReplaySubject$.asObservable();\n  }\n\n  private handleError(ocapiCallConfig: { messageGroupName: string }) {\n    return (error: HttpErrorResponse) => {\n      if (error.status !== 401) {\n        this.messageService.addMessage(new ErrorMessage(ocapiCallConfig.messageGroupName, 'ocapi.' + error.status));\n        UserDetailsService.LOG.logDebug(\n          `An error occurred while trying to fetch ${ocapiCallConfig.messageGroupName}`,\n          error\n        );\n        return throwError(() => 'An error occured while trying to fetch ' + ocapiCallConfig.messageGroupName);\n      }\n      return throwError(() => error);\n    };\n  }\n\n  private doResolve<LoginDetails>(\n    ocapiCallConfig: OcapiCallConfig<unknown, LoginDetails>\n  ): Observable<LoginDetails | unknown> {\n    try {\n      const options = this.getHttpOptions(ocapiCallConfig);\n      return this.http\n        .get(this.configService.getConfig(ConfigConstants.OCAPI_URl) + ocapiCallConfig.getEndpoint(), options)\n        .pipe(\n          map((ocapiResponse: unknown) => {\n            return ocapiCallConfig.mapper?.toModel(ocapiResponse) || ocapiResponse;\n          }),\n          catchError(this.handleError(ocapiCallConfig))\n        );\n    } catch (e) {\n      this.errorReportService.sendErrorEventToAnalytics(ocapiCallConfig);\n      this.messageService.addMessage(\n        new ErrorMessage(\n          ocapiCallConfig.messageGroupName,\n          'Ocapi call failed:' + ocapiCallConfig.endpoint + 'with data ' + JSON.stringify(ocapiCallConfig.data)\n        )\n      );\n      return throwError(() => new Error('An error occured while trying to fetch ' + ocapiCallConfig.endpoint));\n    }\n  }\n\n  private getHttpOptions<LoginDetails>(ocapiConfig: OcapiCallConfig<unknown, LoginDetails>) {\n    const httpOptions: {\n      headers: HttpHeaders;\n      context?: HttpContext;\n      observe?: 'body';\n      params?: HttpParams | Record<string, string | number | boolean | readonly (string | number | boolean)[]>;\n      reportProgress?: boolean;\n      responseType: 'json' | undefined;\n      withCredentials?: boolean;\n    } = {\n      withCredentials: ocapiConfig.withCredentials,\n      headers: this.ocapiHelper.getHttpHeaders(ocapiConfig),\n      responseType: 'json',\n    };\n\n    return httpOptions;\n  }\n}\n","export * from './ocapi.helper';\n","import { HttpContext, HttpHeaders, HttpParams } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { OcapiCallConfig } from '../models';\nimport { UrlService } from '@telenet/ng-lib-page';\nimport { CookieService } from 'ngx-cookie-service';\nimport { isEmpty } from 'lodash-es';\nimport { ConfigConstants, ConfigService } from '@telenet/ng-lib-config';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class OcapiHelper {\n  constructor(\n    private readonly urlService: UrlService,\n    private readonly cookieService: CookieService,\n    private readonly configService: ConfigService\n  ) {}\n\n  getHttpHeaders<T, G>(ocapiConfig?: OcapiCallConfig<T, G>): HttpHeaders {\n    return this.createHttpHeaders(ocapiConfig);\n  }\n\n  createHttpHeaders<T, G>(ocapiConfig?: OcapiCallConfig<T, G>): HttpHeaders {\n    let httpHeaders = new HttpHeaders();\n    const accessToken = sessionStorage.getItem('TOKEN-ACCESS');\n\n    httpHeaders = httpHeaders.set('x-alt-referer', this.urlService.getCurrentUrl());\n    httpHeaders = httpHeaders.set('X-Requested-With', 'XMLHttpRequest');\n\n    if (ocapiConfig?.withDefaultContentType) {\n      httpHeaders = httpHeaders.set('Content-Type', 'application/json;charset=UTF-8');\n    }\n\n    if (accessToken) {\n      httpHeaders = httpHeaders.set('Authorization', this.getAccessToken(accessToken));\n    } else {\n      const TOKEN_XSRF = this.cookieService.get('TOKEN-XSRF');\n\n      if (!isEmpty(TOKEN_XSRF)) {\n        httpHeaders = httpHeaders.set('X-TOKEN-XSRF', TOKEN_XSRF);\n      }\n    }\n\n    if (ocapiConfig && ocapiConfig.customHeaders) {\n      for (const [key, value] of Object.entries(ocapiConfig.customHeaders)) {\n        httpHeaders = httpHeaders.set(key, value);\n      }\n    }\n    const oauthClientId = this.configService.getConfig(ConfigConstants.OPENID_CLIENT_ID);\n    if (oauthClientId === 'fleet_portal' || oauthClientId === 'tip_portal') {\n      httpHeaders = httpHeaders.set('X-Client-Id', oauthClientId);\n    }\n    return httpHeaders;\n  }\n\n  getHttpOptions<T, G>(ocapiConfig: OcapiCallConfig<T, G>) {\n    const httpOptions: {\n      headers: HttpHeaders;\n      context?: HttpContext;\n      observe?: 'body' | 'response';\n      params?: HttpParams | Record<string, string | number | boolean | readonly (string | number | boolean)[]>;\n      reportProgress?: boolean;\n      responseType?: string;\n      withCredentials?: boolean;\n    } = {\n      withCredentials: ocapiConfig.withCredentials,\n      headers: this.getHttpHeaders(ocapiConfig),\n    };\n\n    if (ocapiConfig.observeAsResponse) {\n      httpOptions.observe = 'response';\n    }\n    if (ocapiConfig.responseType) {\n      httpOptions.responseType = ocapiConfig.responseType;\n    }\n\n    return httpOptions;\n  }\n\n  private getAccessToken(accessToken: string): string {\n    return `Bearer ${accessToken}`;\n  }\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , undef;\n\n/**\n * Decode a URI encoded string.\n *\n * @param {String} input The URI encoded string.\n * @returns {String|Null} The decoded string.\n * @api private\n */\nfunction decode(input) {\n  try {\n    return decodeURIComponent(input.replace(/\\+/g, ' '));\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Attempts to encode a given input.\n *\n * @param {String} input The string that needs to be encoded.\n * @returns {String|Null} The encoded string.\n * @api private\n */\nfunction encode(input) {\n  try {\n    return encodeURIComponent(input);\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Simple query string parser.\n *\n * @param {String} query The query string that needs to be parsed.\n * @returns {Object}\n * @api public\n */\nfunction querystring(query) {\n  var parser = /([^=?#&]+)=?([^&]*)/g\n    , result = {}\n    , part;\n\n  while (part = parser.exec(query)) {\n    var key = decode(part[1])\n      , value = decode(part[2]);\n\n    //\n    // Prevent overriding of existing properties. This ensures that build-in\n    // methods like `toString` or __proto__ are not overriden by malicious\n    // querystrings.\n    //\n    // In the case if failed decoding, we want to omit the key/value pairs\n    // from the result.\n    //\n    if (key === null || value === null || key in result) continue;\n    result[key] = value;\n  }\n\n  return result;\n}\n\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\nfunction querystringify(obj, prefix) {\n  prefix = prefix || '';\n\n  var pairs = []\n    , value\n    , key;\n\n  //\n  // Optionally prefix with a '?' if needed\n  //\n  if ('string' !== typeof prefix) prefix = '?';\n\n  for (key in obj) {\n    if (has.call(obj, key)) {\n      value = obj[key];\n\n      //\n      // Edge cases where we actually want to encode the value to an empty\n      // string instead of the stringified value.\n      //\n      if (!value && (value === null || value === undef || isNaN(value))) {\n        value = '';\n      }\n\n      key = encode(key);\n      value = encode(value);\n\n      //\n      // If we failed to encode the strings, we should bail out as we don't\n      // want to add invalid strings to the query.\n      //\n      if (key === null || value === null) continue;\n      pairs.push(key +'='+ value);\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : '';\n}\n\n//\n// Expose the module.\n//\nexports.stringify = querystringify;\nexports.parse = querystring;\n","'use strict';\n\n/**\n * Check if we're required to add a port number.\n *\n * @see https://url.spec.whatwg.org/#default-port\n * @param {Number|String} port Port number we need to check\n * @param {String} protocol Protocol we need to check against.\n * @returns {Boolean} Is it a default port for the given protocol\n * @api private\n */\nmodule.exports = function required(port, protocol) {\n  protocol = protocol.split(':')[0];\n  port = +port;\n\n  if (!port) return false;\n\n  switch (protocol) {\n    case 'http':\n    case 'ws':\n    return port !== 80;\n\n    case 'https':\n    case 'wss':\n    return port !== 443;\n\n    case 'ftp':\n    return port !== 21;\n\n    case 'gopher':\n    return port !== 70;\n\n    case 'file':\n    return false;\n  }\n\n  return port !== 0;\n};\n","'use strict';\n\nvar transportList = require('./transport-list');\n\nmodule.exports = require('./main')(transportList);\n\n// TODO can't get rid of this until all servers do\nif ('_sockjs_onload' in global) {\n  setTimeout(global._sockjs_onload, 1);\n}\n","'use strict';\n\nvar inherits = require('inherits')\n  , Event = require('./event')\n  ;\n\nfunction CloseEvent() {\n  Event.call(this);\n  this.initEvent('close', false, false);\n  this.wasClean = false;\n  this.code = 0;\n  this.reason = '';\n}\n\ninherits(CloseEvent, Event);\n\nmodule.exports = CloseEvent;\n","'use strict';\n\nvar inherits = require('inherits')\n  , EventTarget = require('./eventtarget')\n  ;\n\nfunction EventEmitter() {\n  EventTarget.call(this);\n}\n\ninherits(EventEmitter, EventTarget);\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  if (type) {\n    delete this._listeners[type];\n  } else {\n    this._listeners = {};\n  }\n};\n\nEventEmitter.prototype.once = function(type, listener) {\n  var self = this\n    , fired = false;\n\n  function g() {\n    self.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  this.on(type, g);\n};\n\nEventEmitter.prototype.emit = function() {\n  var type = arguments[0];\n  var listeners = this._listeners[type];\n  if (!listeners) {\n    return;\n  }\n  // equivalent of Array.prototype.slice.call(arguments, 1);\n  var l = arguments.length;\n  var args = new Array(l - 1);\n  for (var ai = 1; ai < l; ai++) {\n    args[ai - 1] = arguments[ai];\n  }\n  for (var i = 0; i < listeners.length; i++) {\n    listeners[i].apply(this, args);\n  }\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener = EventTarget.prototype.addEventListener;\nEventEmitter.prototype.removeListener = EventTarget.prototype.removeEventListener;\n\nmodule.exports.EventEmitter = EventEmitter;\n","'use strict';\n\nfunction Event(eventType) {\n  this.type = eventType;\n}\n\nEvent.prototype.initEvent = function(eventType, canBubble, cancelable) {\n  this.type = eventType;\n  this.bubbles = canBubble;\n  this.cancelable = cancelable;\n  this.timeStamp = +new Date();\n  return this;\n};\n\nEvent.prototype.stopPropagation = function() {};\nEvent.prototype.preventDefault = function() {};\n\nEvent.CAPTURING_PHASE = 1;\nEvent.AT_TARGET = 2;\nEvent.BUBBLING_PHASE = 3;\n\nmodule.exports = Event;\n","'use strict';\n\n/* Simplified implementation of DOM2 EventTarget.\n *   http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventTarget\n */\n\nfunction EventTarget() {\n  this._listeners = {};\n}\n\nEventTarget.prototype.addEventListener = function(eventType, listener) {\n  if (!(eventType in this._listeners)) {\n    this._listeners[eventType] = [];\n  }\n  var arr = this._listeners[eventType];\n  // #4\n  if (arr.indexOf(listener) === -1) {\n    // Make a copy so as not to interfere with a current dispatchEvent.\n    arr = arr.concat([listener]);\n  }\n  this._listeners[eventType] = arr;\n};\n\nEventTarget.prototype.removeEventListener = function(eventType, listener) {\n  var arr = this._listeners[eventType];\n  if (!arr) {\n    return;\n  }\n  var idx = arr.indexOf(listener);\n  if (idx !== -1) {\n    if (arr.length > 1) {\n      // Make a copy so as not to interfere with a current dispatchEvent.\n      this._listeners[eventType] = arr.slice(0, idx).concat(arr.slice(idx + 1));\n    } else {\n      delete this._listeners[eventType];\n    }\n    return;\n  }\n};\n\nEventTarget.prototype.dispatchEvent = function() {\n  var event = arguments[0];\n  var t = event.type;\n  // equivalent of Array.prototype.slice.call(arguments, 0);\n  var args = arguments.length === 1 ? [event] : Array.apply(null, arguments);\n  // TODO: This doesn't match the real behavior; per spec, onfoo get\n  // their place in line from the /first/ time they're set from\n  // non-null. Although WebKit bumps it to the end every time it's\n  // set.\n  if (this['on' + t]) {\n    this['on' + t].apply(this, args);\n  }\n  if (t in this._listeners) {\n    // Grab a reference to the listeners list. removeEventListener may alter the list.\n    var listeners = this._listeners[t];\n    for (var i = 0; i < listeners.length; i++) {\n      listeners[i].apply(this, args);\n    }\n  }\n};\n\nmodule.exports = EventTarget;\n","'use strict';\n\nvar inherits = require('inherits')\n  , Event = require('./event')\n  ;\n\nfunction TransportMessageEvent(data) {\n  Event.call(this);\n  this.initEvent('message', false, false);\n  this.data = data;\n}\n\ninherits(TransportMessageEvent, Event);\n\nmodule.exports = TransportMessageEvent;\n","'use strict';\n\nvar iframeUtils = require('./utils/iframe')\n  ;\n\nfunction FacadeJS(transport) {\n  this._transport = transport;\n  transport.on('message', this._transportMessage.bind(this));\n  transport.on('close', this._transportClose.bind(this));\n}\n\nFacadeJS.prototype._transportClose = function(code, reason) {\n  iframeUtils.postMessage('c', JSON.stringify([code, reason]));\n};\nFacadeJS.prototype._transportMessage = function(frame) {\n  iframeUtils.postMessage('t', frame);\n};\nFacadeJS.prototype._send = function(data) {\n  this._transport.send(data);\n};\nFacadeJS.prototype._close = function() {\n  this._transport.close();\n  this._transport.removeAllListeners();\n};\n\nmodule.exports = FacadeJS;\n","'use strict';\n\nvar urlUtils = require('./utils/url')\n  , eventUtils = require('./utils/event')\n  , FacadeJS = require('./facade')\n  , InfoIframeReceiver = require('./info-iframe-receiver')\n  , iframeUtils = require('./utils/iframe')\n  , loc = require('./location')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:iframe-bootstrap');\n}\n\nmodule.exports = function(SockJS, availableTransports) {\n  var transportMap = {};\n  availableTransports.forEach(function(at) {\n    if (at.facadeTransport) {\n      transportMap[at.facadeTransport.transportName] = at.facadeTransport;\n    }\n  });\n\n  // hard-coded for the info iframe\n  // TODO see if we can make this more dynamic\n  transportMap[InfoIframeReceiver.transportName] = InfoIframeReceiver;\n  var parentOrigin;\n\n  /* eslint-disable camelcase */\n  SockJS.bootstrap_iframe = function() {\n    /* eslint-enable camelcase */\n    var facade;\n    iframeUtils.currentWindowId = loc.hash.slice(1);\n    var onMessage = function(e) {\n      if (e.source !== parent) {\n        return;\n      }\n      if (typeof parentOrigin === 'undefined') {\n        parentOrigin = e.origin;\n      }\n      if (e.origin !== parentOrigin) {\n        return;\n      }\n\n      var iframeMessage;\n      try {\n        iframeMessage = JSON.parse(e.data);\n      } catch (ignored) {\n        debug('bad json', e.data);\n        return;\n      }\n\n      if (iframeMessage.windowId !== iframeUtils.currentWindowId) {\n        return;\n      }\n      switch (iframeMessage.type) {\n      case 's':\n        var p;\n        try {\n          p = JSON.parse(iframeMessage.data);\n        } catch (ignored) {\n          debug('bad json', iframeMessage.data);\n          break;\n        }\n        var version = p[0];\n        var transport = p[1];\n        var transUrl = p[2];\n        var baseUrl = p[3];\n        debug(version, transport, transUrl, baseUrl);\n        // change this to semver logic\n        if (version !== SockJS.version) {\n          throw new Error('Incompatible SockJS! Main site uses:' +\n                    ' \"' + version + '\", the iframe:' +\n                    ' \"' + SockJS.version + '\".');\n        }\n\n        if (!urlUtils.isOriginEqual(transUrl, loc.href) ||\n            !urlUtils.isOriginEqual(baseUrl, loc.href)) {\n          throw new Error('Can\\'t connect to different domain from within an ' +\n                    'iframe. (' + loc.href + ', ' + transUrl + ', ' + baseUrl + ')');\n        }\n        facade = new FacadeJS(new transportMap[transport](transUrl, baseUrl));\n        break;\n      case 'm':\n        facade._send(iframeMessage.data);\n        break;\n      case 'c':\n        if (facade) {\n          facade._close();\n        }\n        facade = null;\n        break;\n      }\n    };\n\n    eventUtils.attachEvent('message', onMessage);\n\n    // Start\n    iframeUtils.postMessage('s');\n  };\n};\n","'use strict';\n\nvar EventEmitter = require('events').EventEmitter\n  , inherits = require('inherits')\n  , objectUtils = require('./utils/object')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:info-ajax');\n}\n\nfunction InfoAjax(url, AjaxObject) {\n  EventEmitter.call(this);\n\n  var self = this;\n  var t0 = +new Date();\n  this.xo = new AjaxObject('GET', url);\n\n  this.xo.once('finish', function(status, text) {\n    var info, rtt;\n    if (status === 200) {\n      rtt = (+new Date()) - t0;\n      if (text) {\n        try {\n          info = JSON.parse(text);\n        } catch (e) {\n          debug('bad json', text);\n        }\n      }\n\n      if (!objectUtils.isObject(info)) {\n        info = {};\n      }\n    }\n    self.emit('finish', info, rtt);\n    self.removeAllListeners();\n  });\n}\n\ninherits(InfoAjax, EventEmitter);\n\nInfoAjax.prototype.close = function() {\n  this.removeAllListeners();\n  this.xo.close();\n};\n\nmodule.exports = InfoAjax;\n","'use strict';\n\nvar inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  , XHRLocalObject = require('./transport/sender/xhr-local')\n  , InfoAjax = require('./info-ajax')\n  ;\n\nfunction InfoReceiverIframe(transUrl) {\n  var self = this;\n  EventEmitter.call(this);\n\n  this.ir = new InfoAjax(transUrl, XHRLocalObject);\n  this.ir.once('finish', function(info, rtt) {\n    self.ir = null;\n    self.emit('message', JSON.stringify([info, rtt]));\n  });\n}\n\ninherits(InfoReceiverIframe, EventEmitter);\n\nInfoReceiverIframe.transportName = 'iframe-info-receiver';\n\nInfoReceiverIframe.prototype.close = function() {\n  if (this.ir) {\n    this.ir.close();\n    this.ir = null;\n  }\n  this.removeAllListeners();\n};\n\nmodule.exports = InfoReceiverIframe;\n","'use strict';\n\nvar EventEmitter = require('events').EventEmitter\n  , inherits = require('inherits')\n  , utils = require('./utils/event')\n  , IframeTransport = require('./transport/iframe')\n  , InfoReceiverIframe = require('./info-iframe-receiver')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:info-iframe');\n}\n\nfunction InfoIframe(baseUrl, url) {\n  var self = this;\n  EventEmitter.call(this);\n\n  var go = function() {\n    var ifr = self.ifr = new IframeTransport(InfoReceiverIframe.transportName, url, baseUrl);\n\n    ifr.once('message', function(msg) {\n      if (msg) {\n        var d;\n        try {\n          d = JSON.parse(msg);\n        } catch (e) {\n          debug('bad json', msg);\n          self.emit('finish');\n          self.close();\n          return;\n        }\n\n        var info = d[0], rtt = d[1];\n        self.emit('finish', info, rtt);\n      }\n      self.close();\n    });\n\n    ifr.once('close', function() {\n      self.emit('finish');\n      self.close();\n    });\n  };\n\n  // TODO this seems the same as the 'needBody' from transports\n  if (!global.document.body) {\n    utils.attachEvent('load', go);\n  } else {\n    go();\n  }\n}\n\ninherits(InfoIframe, EventEmitter);\n\nInfoIframe.enabled = function() {\n  return IframeTransport.enabled();\n};\n\nInfoIframe.prototype.close = function() {\n  if (this.ifr) {\n    this.ifr.close();\n  }\n  this.removeAllListeners();\n  this.ifr = null;\n};\n\nmodule.exports = InfoIframe;\n","'use strict';\n\nvar EventEmitter = require('events').EventEmitter\n  , inherits = require('inherits')\n  , urlUtils = require('./utils/url')\n  , XDR = require('./transport/sender/xdr')\n  , XHRCors = require('./transport/sender/xhr-cors')\n  , XHRLocal = require('./transport/sender/xhr-local')\n  , XHRFake = require('./transport/sender/xhr-fake')\n  , InfoIframe = require('./info-iframe')\n  , InfoAjax = require('./info-ajax')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:info-receiver');\n}\n\nfunction InfoReceiver(baseUrl, urlInfo) {\n  debug(baseUrl);\n  var self = this;\n  EventEmitter.call(this);\n\n  setTimeout(function() {\n    self.doXhr(baseUrl, urlInfo);\n  }, 0);\n}\n\ninherits(InfoReceiver, EventEmitter);\n\n// TODO this is currently ignoring the list of available transports and the whitelist\n\nInfoReceiver._getReceiver = function(baseUrl, url, urlInfo) {\n  // determine method of CORS support (if needed)\n  if (urlInfo.sameOrigin) {\n    return new InfoAjax(url, XHRLocal);\n  }\n  if (XHRCors.enabled) {\n    return new InfoAjax(url, XHRCors);\n  }\n  if (XDR.enabled && urlInfo.sameScheme) {\n    return new InfoAjax(url, XDR);\n  }\n  if (InfoIframe.enabled()) {\n    return new InfoIframe(baseUrl, url);\n  }\n  return new InfoAjax(url, XHRFake);\n};\n\nInfoReceiver.prototype.doXhr = function(baseUrl, urlInfo) {\n  var self = this\n    , url = urlUtils.addPath(baseUrl, '/info')\n    ;\n  debug('doXhr', url);\n\n  this.xo = InfoReceiver._getReceiver(baseUrl, url, urlInfo);\n\n  this.timeoutRef = setTimeout(function() {\n    debug('timeout');\n    self._cleanup(false);\n    self.emit('finish');\n  }, InfoReceiver.timeout);\n\n  this.xo.once('finish', function(info, rtt) {\n    debug('finish', info, rtt);\n    self._cleanup(true);\n    self.emit('finish', info, rtt);\n  });\n};\n\nInfoReceiver.prototype._cleanup = function(wasClean) {\n  debug('_cleanup');\n  clearTimeout(this.timeoutRef);\n  this.timeoutRef = null;\n  if (!wasClean && this.xo) {\n    this.xo.close();\n  }\n  this.xo = null;\n};\n\nInfoReceiver.prototype.close = function() {\n  debug('close');\n  this.removeAllListeners();\n  this._cleanup(false);\n};\n\nInfoReceiver.timeout = 8000;\n\nmodule.exports = InfoReceiver;\n","'use strict';\n\nmodule.exports = global.location || {\n  origin: 'http://localhost:80'\n, protocol: 'http:'\n, host: 'localhost'\n, port: 80\n, href: 'http://localhost/'\n, hash: ''\n};\n","'use strict';\n\nrequire('./shims');\n\nvar URL = require('url-parse')\n  , inherits = require('inherits')\n  , random = require('./utils/random')\n  , escape = require('./utils/escape')\n  , urlUtils = require('./utils/url')\n  , eventUtils = require('./utils/event')\n  , transport = require('./utils/transport')\n  , objectUtils = require('./utils/object')\n  , browser = require('./utils/browser')\n  , log = require('./utils/log')\n  , Event = require('./event/event')\n  , EventTarget = require('./event/eventtarget')\n  , loc = require('./location')\n  , CloseEvent = require('./event/close')\n  , TransportMessageEvent = require('./event/trans-message')\n  , InfoReceiver = require('./info-receiver')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:main');\n}\n\nvar transports;\n\n// follow constructor steps defined at http://dev.w3.org/html5/websockets/#the-websocket-interface\nfunction SockJS(url, protocols, options) {\n  if (!(this instanceof SockJS)) {\n    return new SockJS(url, protocols, options);\n  }\n  if (arguments.length < 1) {\n    throw new TypeError(\"Failed to construct 'SockJS: 1 argument required, but only 0 present\");\n  }\n  EventTarget.call(this);\n\n  this.readyState = SockJS.CONNECTING;\n  this.extensions = '';\n  this.protocol = '';\n\n  // non-standard extension\n  options = options || {};\n  if (options.protocols_whitelist) {\n    log.warn(\"'protocols_whitelist' is DEPRECATED. Use 'transports' instead.\");\n  }\n  this._transportsWhitelist = options.transports;\n  this._transportOptions = options.transportOptions || {};\n  this._timeout = options.timeout || 0;\n\n  var sessionId = options.sessionId || 8;\n  if (typeof sessionId === 'function') {\n    this._generateSessionId = sessionId;\n  } else if (typeof sessionId === 'number') {\n    this._generateSessionId = function() {\n      return random.string(sessionId);\n    };\n  } else {\n    throw new TypeError('If sessionId is used in the options, it needs to be a number or a function.');\n  }\n\n  this._server = options.server || random.numberString(1000);\n\n  // Step 1 of WS spec - parse and validate the url. Issue #8\n  var parsedUrl = new URL(url);\n  if (!parsedUrl.host || !parsedUrl.protocol) {\n    throw new SyntaxError(\"The URL '\" + url + \"' is invalid\");\n  } else if (parsedUrl.hash) {\n    throw new SyntaxError('The URL must not contain a fragment');\n  } else if (parsedUrl.protocol !== 'http:' && parsedUrl.protocol !== 'https:') {\n    throw new SyntaxError(\"The URL's scheme must be either 'http:' or 'https:'. '\" + parsedUrl.protocol + \"' is not allowed.\");\n  }\n\n  var secure = parsedUrl.protocol === 'https:';\n  // Step 2 - don't allow secure origin with an insecure protocol\n  if (loc.protocol === 'https:' && !secure) {\n    // exception is 127.0.0.0/8 and ::1 urls\n    if (!urlUtils.isLoopbackAddr(parsedUrl.hostname)) {\n      throw new Error('SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS');\n    }\n  }\n\n  // Step 3 - check port access - no need here\n  // Step 4 - parse protocols argument\n  if (!protocols) {\n    protocols = [];\n  } else if (!Array.isArray(protocols)) {\n    protocols = [protocols];\n  }\n\n  // Step 5 - check protocols argument\n  var sortedProtocols = protocols.sort();\n  sortedProtocols.forEach(function(proto, i) {\n    if (!proto) {\n      throw new SyntaxError(\"The protocols entry '\" + proto + \"' is invalid.\");\n    }\n    if (i < (sortedProtocols.length - 1) && proto === sortedProtocols[i + 1]) {\n      throw new SyntaxError(\"The protocols entry '\" + proto + \"' is duplicated.\");\n    }\n  });\n\n  // Step 6 - convert origin\n  var o = urlUtils.getOrigin(loc.href);\n  this._origin = o ? o.toLowerCase() : null;\n\n  // remove the trailing slash\n  parsedUrl.set('pathname', parsedUrl.pathname.replace(/\\/+$/, ''));\n\n  // store the sanitized url\n  this.url = parsedUrl.href;\n  debug('using url', this.url);\n\n  // Step 7 - start connection in background\n  // obtain server info\n  // http://sockjs.github.io/sockjs-protocol/sockjs-protocol-0.3.3.html#section-26\n  this._urlInfo = {\n    nullOrigin: !browser.hasDomain()\n  , sameOrigin: urlUtils.isOriginEqual(this.url, loc.href)\n  , sameScheme: urlUtils.isSchemeEqual(this.url, loc.href)\n  };\n\n  this._ir = new InfoReceiver(this.url, this._urlInfo);\n  this._ir.once('finish', this._receiveInfo.bind(this));\n}\n\ninherits(SockJS, EventTarget);\n\nfunction userSetCode(code) {\n  return code === 1000 || (code >= 3000 && code <= 4999);\n}\n\nSockJS.prototype.close = function(code, reason) {\n  // Step 1\n  if (code && !userSetCode(code)) {\n    throw new Error('InvalidAccessError: Invalid code');\n  }\n  // Step 2.4 states the max is 123 bytes, but we are just checking length\n  if (reason && reason.length > 123) {\n    throw new SyntaxError('reason argument has an invalid length');\n  }\n\n  // Step 3.1\n  if (this.readyState === SockJS.CLOSING || this.readyState === SockJS.CLOSED) {\n    return;\n  }\n\n  // TODO look at docs to determine how to set this\n  var wasClean = true;\n  this._close(code || 1000, reason || 'Normal closure', wasClean);\n};\n\nSockJS.prototype.send = function(data) {\n  // #13 - convert anything non-string to string\n  // TODO this currently turns objects into [object Object]\n  if (typeof data !== 'string') {\n    data = '' + data;\n  }\n  if (this.readyState === SockJS.CONNECTING) {\n    throw new Error('InvalidStateError: The connection has not been established yet');\n  }\n  if (this.readyState !== SockJS.OPEN) {\n    return;\n  }\n  this._transport.send(escape.quote(data));\n};\n\nSockJS.version = require('./version');\n\nSockJS.CONNECTING = 0;\nSockJS.OPEN = 1;\nSockJS.CLOSING = 2;\nSockJS.CLOSED = 3;\n\nSockJS.prototype._receiveInfo = function(info, rtt) {\n  debug('_receiveInfo', rtt);\n  this._ir = null;\n  if (!info) {\n    this._close(1002, 'Cannot connect to server');\n    return;\n  }\n\n  // establish a round-trip timeout (RTO) based on the\n  // round-trip time (RTT)\n  this._rto = this.countRTO(rtt);\n  // allow server to override url used for the actual transport\n  this._transUrl = info.base_url ? info.base_url : this.url;\n  info = objectUtils.extend(info, this._urlInfo);\n  debug('info', info);\n  // determine list of desired and supported transports\n  var enabledTransports = transports.filterToEnabled(this._transportsWhitelist, info);\n  this._transports = enabledTransports.main;\n  debug(this._transports.length + ' enabled transports');\n\n  this._connect();\n};\n\nSockJS.prototype._connect = function() {\n  for (var Transport = this._transports.shift(); Transport; Transport = this._transports.shift()) {\n    debug('attempt', Transport.transportName);\n    if (Transport.needBody) {\n      if (!global.document.body ||\n          (typeof global.document.readyState !== 'undefined' &&\n            global.document.readyState !== 'complete' &&\n            global.document.readyState !== 'interactive')) {\n        debug('waiting for body');\n        this._transports.unshift(Transport);\n        eventUtils.attachEvent('load', this._connect.bind(this));\n        return;\n      }\n    }\n\n    // calculate timeout based on RTO and round trips. Default to 5s\n    var timeoutMs = Math.max(this._timeout, (this._rto * Transport.roundTrips) || 5000);\n    this._transportTimeoutId = setTimeout(this._transportTimeout.bind(this), timeoutMs);\n    debug('using timeout', timeoutMs);\n\n    var transportUrl = urlUtils.addPath(this._transUrl, '/' + this._server + '/' + this._generateSessionId());\n    var options = this._transportOptions[Transport.transportName];\n    debug('transport url', transportUrl);\n    var transportObj = new Transport(transportUrl, this._transUrl, options);\n    transportObj.on('message', this._transportMessage.bind(this));\n    transportObj.once('close', this._transportClose.bind(this));\n    transportObj.transportName = Transport.transportName;\n    this._transport = transportObj;\n\n    return;\n  }\n  this._close(2000, 'All transports failed', false);\n};\n\nSockJS.prototype._transportTimeout = function() {\n  debug('_transportTimeout');\n  if (this.readyState === SockJS.CONNECTING) {\n    if (this._transport) {\n      this._transport.close();\n    }\n\n    this._transportClose(2007, 'Transport timed out');\n  }\n};\n\nSockJS.prototype._transportMessage = function(msg) {\n  debug('_transportMessage', msg);\n  var self = this\n    , type = msg.slice(0, 1)\n    , content = msg.slice(1)\n    , payload\n    ;\n\n  // first check for messages that don't need a payload\n  switch (type) {\n    case 'o':\n      this._open();\n      return;\n    case 'h':\n      this.dispatchEvent(new Event('heartbeat'));\n      debug('heartbeat', this.transport);\n      return;\n  }\n\n  if (content) {\n    try {\n      payload = JSON.parse(content);\n    } catch (e) {\n      debug('bad json', content);\n    }\n  }\n\n  if (typeof payload === 'undefined') {\n    debug('empty payload', content);\n    return;\n  }\n\n  switch (type) {\n    case 'a':\n      if (Array.isArray(payload)) {\n        payload.forEach(function(p) {\n          debug('message', self.transport, p);\n          self.dispatchEvent(new TransportMessageEvent(p));\n        });\n      }\n      break;\n    case 'm':\n      debug('message', this.transport, payload);\n      this.dispatchEvent(new TransportMessageEvent(payload));\n      break;\n    case 'c':\n      if (Array.isArray(payload) && payload.length === 2) {\n        this._close(payload[0], payload[1], true);\n      }\n      break;\n  }\n};\n\nSockJS.prototype._transportClose = function(code, reason) {\n  debug('_transportClose', this.transport, code, reason);\n  if (this._transport) {\n    this._transport.removeAllListeners();\n    this._transport = null;\n    this.transport = null;\n  }\n\n  if (!userSetCode(code) && code !== 2000 && this.readyState === SockJS.CONNECTING) {\n    this._connect();\n    return;\n  }\n\n  this._close(code, reason);\n};\n\nSockJS.prototype._open = function() {\n  debug('_open', this._transport && this._transport.transportName, this.readyState);\n  if (this.readyState === SockJS.CONNECTING) {\n    if (this._transportTimeoutId) {\n      clearTimeout(this._transportTimeoutId);\n      this._transportTimeoutId = null;\n    }\n    this.readyState = SockJS.OPEN;\n    this.transport = this._transport.transportName;\n    this.dispatchEvent(new Event('open'));\n    debug('connected', this.transport);\n  } else {\n    // The server might have been restarted, and lost track of our\n    // connection.\n    this._close(1006, 'Server lost session');\n  }\n};\n\nSockJS.prototype._close = function(code, reason, wasClean) {\n  debug('_close', this.transport, code, reason, wasClean, this.readyState);\n  var forceFail = false;\n\n  if (this._ir) {\n    forceFail = true;\n    this._ir.close();\n    this._ir = null;\n  }\n  if (this._transport) {\n    this._transport.close();\n    this._transport = null;\n    this.transport = null;\n  }\n\n  if (this.readyState === SockJS.CLOSED) {\n    throw new Error('InvalidStateError: SockJS has already been closed');\n  }\n\n  this.readyState = SockJS.CLOSING;\n  setTimeout(function() {\n    this.readyState = SockJS.CLOSED;\n\n    if (forceFail) {\n      this.dispatchEvent(new Event('error'));\n    }\n\n    var e = new CloseEvent('close');\n    e.wasClean = wasClean || false;\n    e.code = code || 1000;\n    e.reason = reason;\n\n    this.dispatchEvent(e);\n    this.onmessage = this.onclose = this.onerror = null;\n    debug('disconnected');\n  }.bind(this), 0);\n};\n\n// See: http://www.erg.abdn.ac.uk/~gerrit/dccp/notes/ccid2/rto_estimator/\n// and RFC 2988.\nSockJS.prototype.countRTO = function(rtt) {\n  // In a local environment, when using IE8/9 and the `jsonp-polling`\n  // transport the time needed to establish a connection (the time that pass\n  // from the opening of the transport to the call of `_dispatchOpen`) is\n  // around 200msec (the lower bound used in the article above) and this\n  // causes spurious timeouts. For this reason we calculate a value slightly\n  // larger than that used in the article.\n  if (rtt > 100) {\n    return 4 * rtt; // rto > 400msec\n  }\n  return 300 + rtt; // 300msec < rto <= 400msec\n};\n\nmodule.exports = function(availableTransports) {\n  transports = transport(availableTransports);\n  require('./iframe-bootstrap')(SockJS, availableTransports);\n  return SockJS;\n};\n","/* eslint-disable */\n/* jscs: disable */\n'use strict';\n\n// pulled specific shims from https://github.com/es-shims/es5-shim\n\nvar ArrayPrototype = Array.prototype;\nvar ObjectPrototype = Object.prototype;\nvar FunctionPrototype = Function.prototype;\nvar StringPrototype = String.prototype;\nvar array_slice = ArrayPrototype.slice;\n\nvar _toString = ObjectPrototype.toString;\nvar isFunction = function (val) {\n    return ObjectPrototype.toString.call(val) === '[object Function]';\n};\nvar isArray = function isArray(obj) {\n    return _toString.call(obj) === '[object Array]';\n};\nvar isString = function isString(obj) {\n    return _toString.call(obj) === '[object String]';\n};\n\nvar supportsDescriptors = Object.defineProperty && (function () {\n    try {\n        Object.defineProperty({}, 'x', {});\n        return true;\n    } catch (e) { /* this is ES3 */\n        return false;\n    }\n}());\n\n// Define configurable, writable and non-enumerable props\n// if they don't exist.\nvar defineProperty;\nif (supportsDescriptors) {\n    defineProperty = function (object, name, method, forceAssign) {\n        if (!forceAssign && (name in object)) { return; }\n        Object.defineProperty(object, name, {\n            configurable: true,\n            enumerable: false,\n            writable: true,\n            value: method\n        });\n    };\n} else {\n    defineProperty = function (object, name, method, forceAssign) {\n        if (!forceAssign && (name in object)) { return; }\n        object[name] = method;\n    };\n}\nvar defineProperties = function (object, map, forceAssign) {\n    for (var name in map) {\n        if (ObjectPrototype.hasOwnProperty.call(map, name)) {\n          defineProperty(object, name, map[name], forceAssign);\n        }\n    }\n};\n\nvar toObject = function (o) {\n    if (o == null) { // this matches both null and undefined\n        throw new TypeError(\"can't convert \" + o + ' to object');\n    }\n    return Object(o);\n};\n\n//\n// Util\n// ======\n//\n\n// ES5 9.4\n// http://es5.github.com/#x9.4\n// http://jsperf.com/to-integer\n\nfunction toInteger(num) {\n    var n = +num;\n    if (n !== n) { // isNaN\n        n = 0;\n    } else if (n !== 0 && n !== (1 / 0) && n !== -(1 / 0)) {\n        n = (n > 0 || -1) * Math.floor(Math.abs(n));\n    }\n    return n;\n}\n\nfunction ToUint32(x) {\n    return x >>> 0;\n}\n\n//\n// Function\n// ========\n//\n\n// ES-5 15.3.4.5\n// http://es5.github.com/#x15.3.4.5\n\nfunction Empty() {}\n\ndefineProperties(FunctionPrototype, {\n    bind: function bind(that) { // .length is 1\n        // 1. Let Target be the this value.\n        var target = this;\n        // 2. If IsCallable(Target) is false, throw a TypeError exception.\n        if (!isFunction(target)) {\n            throw new TypeError('Function.prototype.bind called on incompatible ' + target);\n        }\n        // 3. Let A be a new (possibly empty) internal list of all of the\n        //   argument values provided after thisArg (arg1, arg2 etc), in order.\n        // XXX slicedArgs will stand in for \"A\" if used\n        var args = array_slice.call(arguments, 1); // for normal call\n        // 4. Let F be a new native ECMAScript object.\n        // 11. Set the [[Prototype]] internal property of F to the standard\n        //   built-in Function prototype object as specified in 15.3.3.1.\n        // 12. Set the [[Call]] internal property of F as described in\n        //   15.3.4.5.1.\n        // 13. Set the [[Construct]] internal property of F as described in\n        //   15.3.4.5.2.\n        // 14. Set the [[HasInstance]] internal property of F as described in\n        //   15.3.4.5.3.\n        var binder = function () {\n\n            if (this instanceof bound) {\n                // 15.3.4.5.2 [[Construct]]\n                // When the [[Construct]] internal method of a function object,\n                // F that was created using the bind function is called with a\n                // list of arguments ExtraArgs, the following steps are taken:\n                // 1. Let target be the value of F's [[TargetFunction]]\n                //   internal property.\n                // 2. If target has no [[Construct]] internal method, a\n                //   TypeError exception is thrown.\n                // 3. Let boundArgs be the value of F's [[BoundArgs]] internal\n                //   property.\n                // 4. Let args be a new list containing the same values as the\n                //   list boundArgs in the same order followed by the same\n                //   values as the list ExtraArgs in the same order.\n                // 5. Return the result of calling the [[Construct]] internal\n                //   method of target providing args as the arguments.\n\n                var result = target.apply(\n                    this,\n                    args.concat(array_slice.call(arguments))\n                );\n                if (Object(result) === result) {\n                    return result;\n                }\n                return this;\n\n            } else {\n                // 15.3.4.5.1 [[Call]]\n                // When the [[Call]] internal method of a function object, F,\n                // which was created using the bind function is called with a\n                // this value and a list of arguments ExtraArgs, the following\n                // steps are taken:\n                // 1. Let boundArgs be the value of F's [[BoundArgs]] internal\n                //   property.\n                // 2. Let boundThis be the value of F's [[BoundThis]] internal\n                //   property.\n                // 3. Let target be the value of F's [[TargetFunction]] internal\n                //   property.\n                // 4. Let args be a new list containing the same values as the\n                //   list boundArgs in the same order followed by the same\n                //   values as the list ExtraArgs in the same order.\n                // 5. Return the result of calling the [[Call]] internal method\n                //   of target providing boundThis as the this value and\n                //   providing args as the arguments.\n\n                // equiv: target.call(this, ...boundArgs, ...args)\n                return target.apply(\n                    that,\n                    args.concat(array_slice.call(arguments))\n                );\n\n            }\n\n        };\n\n        // 15. If the [[Class]] internal property of Target is \"Function\", then\n        //     a. Let L be the length property of Target minus the length of A.\n        //     b. Set the length own property of F to either 0 or L, whichever is\n        //       larger.\n        // 16. Else set the length own property of F to 0.\n\n        var boundLength = Math.max(0, target.length - args.length);\n\n        // 17. Set the attributes of the length own property of F to the values\n        //   specified in 15.3.5.1.\n        var boundArgs = [];\n        for (var i = 0; i < boundLength; i++) {\n            boundArgs.push('$' + i);\n        }\n\n        // XXX Build a dynamic function with desired amount of arguments is the only\n        // way to set the length property of a function.\n        // In environments where Content Security Policies enabled (Chrome extensions,\n        // for ex.) all use of eval or Function costructor throws an exception.\n        // However in all of these environments Function.prototype.bind exists\n        // and so this code will never be executed.\n        var bound = Function('binder', 'return function (' + boundArgs.join(',') + '){ return binder.apply(this, arguments); }')(binder);\n\n        if (target.prototype) {\n            Empty.prototype = target.prototype;\n            bound.prototype = new Empty();\n            // Clean up dangling references.\n            Empty.prototype = null;\n        }\n\n        // TODO\n        // 18. Set the [[Extensible]] internal property of F to true.\n\n        // TODO\n        // 19. Let thrower be the [[ThrowTypeError]] function Object (13.2.3).\n        // 20. Call the [[DefineOwnProperty]] internal method of F with\n        //   arguments \"caller\", PropertyDescriptor {[[Get]]: thrower, [[Set]]:\n        //   thrower, [[Enumerable]]: false, [[Configurable]]: false}, and\n        //   false.\n        // 21. Call the [[DefineOwnProperty]] internal method of F with\n        //   arguments \"arguments\", PropertyDescriptor {[[Get]]: thrower,\n        //   [[Set]]: thrower, [[Enumerable]]: false, [[Configurable]]: false},\n        //   and false.\n\n        // TODO\n        // NOTE Function objects created using Function.prototype.bind do not\n        // have a prototype property or the [[Code]], [[FormalParameters]], and\n        // [[Scope]] internal properties.\n        // XXX can't delete prototype in pure-js.\n\n        // 22. Return F.\n        return bound;\n    }\n});\n\n//\n// Array\n// =====\n//\n\n// ES5 15.4.3.2\n// http://es5.github.com/#x15.4.3.2\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/isArray\ndefineProperties(Array, { isArray: isArray });\n\n\nvar boxedString = Object('a');\nvar splitString = boxedString[0] !== 'a' || !(0 in boxedString);\n\nvar properlyBoxesContext = function properlyBoxed(method) {\n    // Check node 0.6.21 bug where third parameter is not boxed\n    var properlyBoxesNonStrict = true;\n    var properlyBoxesStrict = true;\n    if (method) {\n        method.call('foo', function (_, __, context) {\n            if (typeof context !== 'object') { properlyBoxesNonStrict = false; }\n        });\n\n        method.call([1], function () {\n            'use strict';\n            properlyBoxesStrict = typeof this === 'string';\n        }, 'x');\n    }\n    return !!method && properlyBoxesNonStrict && properlyBoxesStrict;\n};\n\ndefineProperties(ArrayPrototype, {\n    forEach: function forEach(fun /*, thisp*/) {\n        var object = toObject(this),\n            self = splitString && isString(this) ? this.split('') : object,\n            thisp = arguments[1],\n            i = -1,\n            length = self.length >>> 0;\n\n        // If no callback function or if callback is not a callable function\n        if (!isFunction(fun)) {\n            throw new TypeError(); // TODO message\n        }\n\n        while (++i < length) {\n            if (i in self) {\n                // Invoke the callback function with call, passing arguments:\n                // context, property value, property key, thisArg object\n                // context\n                fun.call(thisp, self[i], i, object);\n            }\n        }\n    }\n}, !properlyBoxesContext(ArrayPrototype.forEach));\n\n// ES5 15.4.4.14\n// http://es5.github.com/#x15.4.4.14\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf\nvar hasFirefox2IndexOfBug = Array.prototype.indexOf && [0, 1].indexOf(1, 2) !== -1;\ndefineProperties(ArrayPrototype, {\n    indexOf: function indexOf(sought /*, fromIndex */ ) {\n        var self = splitString && isString(this) ? this.split('') : toObject(this),\n            length = self.length >>> 0;\n\n        if (!length) {\n            return -1;\n        }\n\n        var i = 0;\n        if (arguments.length > 1) {\n            i = toInteger(arguments[1]);\n        }\n\n        // handle negative indices\n        i = i >= 0 ? i : Math.max(0, length + i);\n        for (; i < length; i++) {\n            if (i in self && self[i] === sought) {\n                return i;\n            }\n        }\n        return -1;\n    }\n}, hasFirefox2IndexOfBug);\n\n//\n// String\n// ======\n//\n\n// ES5 15.5.4.14\n// http://es5.github.com/#x15.5.4.14\n\n// [bugfix, IE lt 9, firefox 4, Konqueror, Opera, obscure browsers]\n// Many browsers do not split properly with regular expressions or they\n// do not perform the split correctly under obscure conditions.\n// See http://blog.stevenlevithan.com/archives/cross-browser-split\n// I've tested in many browsers and this seems to cover the deviant ones:\n//    'ab'.split(/(?:ab)*/) should be [\"\", \"\"], not [\"\"]\n//    '.'.split(/(.?)(.?)/) should be [\"\", \".\", \"\", \"\"], not [\"\", \"\"]\n//    'tesst'.split(/(s)*/) should be [\"t\", undefined, \"e\", \"s\", \"t\"], not\n//       [undefined, \"t\", undefined, \"e\", ...]\n//    ''.split(/.?/) should be [], not [\"\"]\n//    '.'.split(/()()/) should be [\".\"], not [\"\", \"\", \".\"]\n\nvar string_split = StringPrototype.split;\nif (\n    'ab'.split(/(?:ab)*/).length !== 2 ||\n    '.'.split(/(.?)(.?)/).length !== 4 ||\n    'tesst'.split(/(s)*/)[1] === 't' ||\n    'test'.split(/(?:)/, -1).length !== 4 ||\n    ''.split(/.?/).length ||\n    '.'.split(/()()/).length > 1\n) {\n    (function () {\n        var compliantExecNpcg = /()??/.exec('')[1] === void 0; // NPCG: nonparticipating capturing group\n\n        StringPrototype.split = function (separator, limit) {\n            var string = this;\n            if (separator === void 0 && limit === 0) {\n                return [];\n            }\n\n            // If `separator` is not a regex, use native split\n            if (_toString.call(separator) !== '[object RegExp]') {\n                return string_split.call(this, separator, limit);\n            }\n\n            var output = [],\n                flags = (separator.ignoreCase ? 'i' : '') +\n                        (separator.multiline  ? 'm' : '') +\n                        (separator.extended   ? 'x' : '') + // Proposed for ES6\n                        (separator.sticky     ? 'y' : ''), // Firefox 3+\n                lastLastIndex = 0,\n                // Make `global` and avoid `lastIndex` issues by working with a copy\n                separator2, match, lastIndex, lastLength;\n            separator = new RegExp(separator.source, flags + 'g');\n            string += ''; // Type-convert\n            if (!compliantExecNpcg) {\n                // Doesn't need flags gy, but they don't hurt\n                separator2 = new RegExp('^' + separator.source + '$(?!\\\\s)', flags);\n            }\n            /* Values for `limit`, per the spec:\n             * If undefined: 4294967295 // Math.pow(2, 32) - 1\n             * If 0, Infinity, or NaN: 0\n             * If positive number: limit = Math.floor(limit); if (limit > 4294967295) limit -= 4294967296;\n             * If negative number: 4294967296 - Math.floor(Math.abs(limit))\n             * If other: Type-convert, then use the above rules\n             */\n            limit = limit === void 0 ?\n                -1 >>> 0 : // Math.pow(2, 32) - 1\n                ToUint32(limit);\n            while (match = separator.exec(string)) {\n                // `separator.lastIndex` is not reliable cross-browser\n                lastIndex = match.index + match[0].length;\n                if (lastIndex > lastLastIndex) {\n                    output.push(string.slice(lastLastIndex, match.index));\n                    // Fix browsers whose `exec` methods don't consistently return `undefined` for\n                    // nonparticipating capturing groups\n                    if (!compliantExecNpcg && match.length > 1) {\n                        match[0].replace(separator2, function () {\n                            for (var i = 1; i < arguments.length - 2; i++) {\n                                if (arguments[i] === void 0) {\n                                    match[i] = void 0;\n                                }\n                            }\n                        });\n                    }\n                    if (match.length > 1 && match.index < string.length) {\n                        ArrayPrototype.push.apply(output, match.slice(1));\n                    }\n                    lastLength = match[0].length;\n                    lastLastIndex = lastIndex;\n                    if (output.length >= limit) {\n                        break;\n                    }\n                }\n                if (separator.lastIndex === match.index) {\n                    separator.lastIndex++; // Avoid an infinite loop\n                }\n            }\n            if (lastLastIndex === string.length) {\n                if (lastLength || !separator.test('')) {\n                    output.push('');\n                }\n            } else {\n                output.push(string.slice(lastLastIndex));\n            }\n            return output.length > limit ? output.slice(0, limit) : output;\n        };\n    }());\n\n// [bugfix, chrome]\n// If separator is undefined, then the result array contains just one String,\n// which is the this value (converted to a String). If limit is not undefined,\n// then the output array is truncated so that it contains no more than limit\n// elements.\n// \"0\".split(undefined, 0) -> []\n} else if ('0'.split(void 0, 0).length) {\n    StringPrototype.split = function split(separator, limit) {\n        if (separator === void 0 && limit === 0) { return []; }\n        return string_split.call(this, separator, limit);\n    };\n}\n\n// ECMA-262, 3rd B.2.3\n// Not an ECMAScript standard, although ECMAScript 3rd Edition has a\n// non-normative section suggesting uniform semantics and it should be\n// normalized across all browsers\n// [bugfix, IE lt 9] IE < 9 substr() with negative value not working in IE\nvar string_substr = StringPrototype.substr;\nvar hasNegativeSubstrBug = ''.substr && '0b'.substr(-1) !== 'b';\ndefineProperties(StringPrototype, {\n    substr: function substr(start, length) {\n        return string_substr.call(\n            this,\n            start < 0 ? ((start = this.length + start) < 0 ? 0 : start) : start,\n            length\n        );\n    }\n}, hasNegativeSubstrBug);\n","'use strict';\n\nmodule.exports = [\n  // streaming transports\n  require('./transport/websocket')\n, require('./transport/xhr-streaming')\n, require('./transport/xdr-streaming')\n, require('./transport/eventsource')\n, require('./transport/lib/iframe-wrap')(require('./transport/eventsource'))\n\n  // polling transports\n, require('./transport/htmlfile')\n, require('./transport/lib/iframe-wrap')(require('./transport/htmlfile'))\n, require('./transport/xhr-polling')\n, require('./transport/xdr-polling')\n, require('./transport/lib/iframe-wrap')(require('./transport/xhr-polling'))\n, require('./transport/jsonp-polling')\n];\n","'use strict';\n\nvar EventEmitter = require('events').EventEmitter\n  , inherits = require('inherits')\n  , utils = require('../../utils/event')\n  , urlUtils = require('../../utils/url')\n  , XHR = global.XMLHttpRequest\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:browser:xhr');\n}\n\nfunction AbstractXHRObject(method, url, payload, opts) {\n  debug(method, url);\n  var self = this;\n  EventEmitter.call(this);\n\n  setTimeout(function () {\n    self._start(method, url, payload, opts);\n  }, 0);\n}\n\ninherits(AbstractXHRObject, EventEmitter);\n\nAbstractXHRObject.prototype._start = function(method, url, payload, opts) {\n  var self = this;\n\n  try {\n    this.xhr = new XHR();\n  } catch (x) {\n    // intentionally empty\n  }\n\n  if (!this.xhr) {\n    debug('no xhr');\n    this.emit('finish', 0, 'no xhr support');\n    this._cleanup();\n    return;\n  }\n\n  // several browsers cache POSTs\n  url = urlUtils.addQuery(url, 't=' + (+new Date()));\n\n  // Explorer tends to keep connection open, even after the\n  // tab gets closed: http://bugs.jquery.com/ticket/5280\n  this.unloadRef = utils.unloadAdd(function() {\n    debug('unload cleanup');\n    self._cleanup(true);\n  });\n  try {\n    this.xhr.open(method, url, true);\n    if (this.timeout && 'timeout' in this.xhr) {\n      this.xhr.timeout = this.timeout;\n      this.xhr.ontimeout = function() {\n        debug('xhr timeout');\n        self.emit('finish', 0, '');\n        self._cleanup(false);\n      };\n    }\n  } catch (e) {\n    debug('exception', e);\n    // IE raises an exception on wrong port.\n    this.emit('finish', 0, '');\n    this._cleanup(false);\n    return;\n  }\n\n  if ((!opts || !opts.noCredentials) && AbstractXHRObject.supportsCORS) {\n    debug('withCredentials');\n    // Mozilla docs says https://developer.mozilla.org/en/XMLHttpRequest :\n    // \"This never affects same-site requests.\"\n\n    this.xhr.withCredentials = true;\n  }\n  if (opts && opts.headers) {\n    for (var key in opts.headers) {\n      this.xhr.setRequestHeader(key, opts.headers[key]);\n    }\n  }\n\n  this.xhr.onreadystatechange = function() {\n    if (self.xhr) {\n      var x = self.xhr;\n      var text, status;\n      debug('readyState', x.readyState);\n      switch (x.readyState) {\n      case 3:\n        // IE doesn't like peeking into responseText or status\n        // on Microsoft.XMLHTTP and readystate=3\n        try {\n          status = x.status;\n          text = x.responseText;\n        } catch (e) {\n          // intentionally empty\n        }\n        debug('status', status);\n        // IE returns 1223 for 204: http://bugs.jquery.com/ticket/1450\n        if (status === 1223) {\n          status = 204;\n        }\n\n        // IE does return readystate == 3 for 404 answers.\n        if (status === 200 && text && text.length > 0) {\n          debug('chunk');\n          self.emit('chunk', status, text);\n        }\n        break;\n      case 4:\n        status = x.status;\n        debug('status', status);\n        // IE returns 1223 for 204: http://bugs.jquery.com/ticket/1450\n        if (status === 1223) {\n          status = 204;\n        }\n        // IE returns this for a bad port\n        // http://msdn.microsoft.com/en-us/library/windows/desktop/aa383770(v=vs.85).aspx\n        if (status === 12005 || status === 12029) {\n          status = 0;\n        }\n\n        debug('finish', status, x.responseText);\n        self.emit('finish', status, x.responseText);\n        self._cleanup(false);\n        break;\n      }\n    }\n  };\n\n  try {\n    self.xhr.send(payload);\n  } catch (e) {\n    self.emit('finish', 0, '');\n    self._cleanup(false);\n  }\n};\n\nAbstractXHRObject.prototype._cleanup = function(abort) {\n  debug('cleanup');\n  if (!this.xhr) {\n    return;\n  }\n  this.removeAllListeners();\n  utils.unloadDel(this.unloadRef);\n\n  // IE needs this field to be a function\n  this.xhr.onreadystatechange = function() {};\n  if (this.xhr.ontimeout) {\n    this.xhr.ontimeout = null;\n  }\n\n  if (abort) {\n    try {\n      this.xhr.abort();\n    } catch (x) {\n      // intentionally empty\n    }\n  }\n  this.unloadRef = this.xhr = null;\n};\n\nAbstractXHRObject.prototype.close = function() {\n  debug('close');\n  this._cleanup(true);\n};\n\nAbstractXHRObject.enabled = !!XHR;\n// override XMLHttpRequest for IE6/7\n// obfuscate to avoid firewalls\nvar axo = ['Active'].concat('Object').join('X');\nif (!AbstractXHRObject.enabled && (axo in global)) {\n  debug('overriding xmlhttprequest');\n  XHR = function() {\n    try {\n      return new global[axo]('Microsoft.XMLHTTP');\n    } catch (e) {\n      return null;\n    }\n  };\n  AbstractXHRObject.enabled = !!new XHR();\n}\n\nvar cors = false;\ntry {\n  cors = 'withCredentials' in new XHR();\n} catch (ignored) {\n  // intentionally empty\n}\n\nAbstractXHRObject.supportsCORS = cors;\n\nmodule.exports = AbstractXHRObject;\n","module.exports = global.EventSource;\n","'use strict';\n\nvar Driver = global.WebSocket || global.MozWebSocket;\nif (Driver) {\n\tmodule.exports = function WebSocketBrowserDriver(url) {\n\t\treturn new Driver(url);\n\t};\n} else {\n\tmodule.exports = undefined;\n}\n","'use strict';\n\nvar inherits = require('inherits')\n  , AjaxBasedTransport = require('./lib/ajax-based')\n  , EventSourceReceiver = require('./receiver/eventsource')\n  , XHRCorsObject = require('./sender/xhr-cors')\n  , EventSourceDriver = require('eventsource')\n  ;\n\nfunction EventSourceTransport(transUrl) {\n  if (!EventSourceTransport.enabled()) {\n    throw new Error('Transport created when disabled');\n  }\n\n  AjaxBasedTransport.call(this, transUrl, '/eventsource', EventSourceReceiver, XHRCorsObject);\n}\n\ninherits(EventSourceTransport, AjaxBasedTransport);\n\nEventSourceTransport.enabled = function() {\n  return !!EventSourceDriver;\n};\n\nEventSourceTransport.transportName = 'eventsource';\nEventSourceTransport.roundTrips = 2;\n\nmodule.exports = EventSourceTransport;\n","'use strict';\n\nvar inherits = require('inherits')\n  , HtmlfileReceiver = require('./receiver/htmlfile')\n  , XHRLocalObject = require('./sender/xhr-local')\n  , AjaxBasedTransport = require('./lib/ajax-based')\n  ;\n\nfunction HtmlFileTransport(transUrl) {\n  if (!HtmlfileReceiver.enabled) {\n    throw new Error('Transport created when disabled');\n  }\n  AjaxBasedTransport.call(this, transUrl, '/htmlfile', HtmlfileReceiver, XHRLocalObject);\n}\n\ninherits(HtmlFileTransport, AjaxBasedTransport);\n\nHtmlFileTransport.enabled = function(info) {\n  return HtmlfileReceiver.enabled && info.sameOrigin;\n};\n\nHtmlFileTransport.transportName = 'htmlfile';\nHtmlFileTransport.roundTrips = 2;\n\nmodule.exports = HtmlFileTransport;\n","'use strict';\n\n// Few cool transports do work only for same-origin. In order to make\n// them work cross-domain we shall use iframe, served from the\n// remote domain. New browsers have capabilities to communicate with\n// cross domain iframe using postMessage(). In IE it was implemented\n// from IE 8+, but of course, IE got some details wrong:\n//    http://msdn.microsoft.com/en-us/library/cc197015(v=VS.85).aspx\n//    http://stevesouders.com/misc/test-postmessage.php\n\nvar inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  , version = require('../version')\n  , urlUtils = require('../utils/url')\n  , iframeUtils = require('../utils/iframe')\n  , eventUtils = require('../utils/event')\n  , random = require('../utils/random')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:transport:iframe');\n}\n\nfunction IframeTransport(transport, transUrl, baseUrl) {\n  if (!IframeTransport.enabled()) {\n    throw new Error('Transport created when disabled');\n  }\n  EventEmitter.call(this);\n\n  var self = this;\n  this.origin = urlUtils.getOrigin(baseUrl);\n  this.baseUrl = baseUrl;\n  this.transUrl = transUrl;\n  this.transport = transport;\n  this.windowId = random.string(8);\n\n  var iframeUrl = urlUtils.addPath(baseUrl, '/iframe.html') + '#' + this.windowId;\n  debug(transport, transUrl, iframeUrl);\n\n  this.iframeObj = iframeUtils.createIframe(iframeUrl, function(r) {\n    debug('err callback');\n    self.emit('close', 1006, 'Unable to load an iframe (' + r + ')');\n    self.close();\n  });\n\n  this.onmessageCallback = this._message.bind(this);\n  eventUtils.attachEvent('message', this.onmessageCallback);\n}\n\ninherits(IframeTransport, EventEmitter);\n\nIframeTransport.prototype.close = function() {\n  debug('close');\n  this.removeAllListeners();\n  if (this.iframeObj) {\n    eventUtils.detachEvent('message', this.onmessageCallback);\n    try {\n      // When the iframe is not loaded, IE raises an exception\n      // on 'contentWindow'.\n      this.postMessage('c');\n    } catch (x) {\n      // intentionally empty\n    }\n    this.iframeObj.cleanup();\n    this.iframeObj = null;\n    this.onmessageCallback = this.iframeObj = null;\n  }\n};\n\nIframeTransport.prototype._message = function(e) {\n  debug('message', e.data);\n  if (!urlUtils.isOriginEqual(e.origin, this.origin)) {\n    debug('not same origin', e.origin, this.origin);\n    return;\n  }\n\n  var iframeMessage;\n  try {\n    iframeMessage = JSON.parse(e.data);\n  } catch (ignored) {\n    debug('bad json', e.data);\n    return;\n  }\n\n  if (iframeMessage.windowId !== this.windowId) {\n    debug('mismatched window id', iframeMessage.windowId, this.windowId);\n    return;\n  }\n\n  switch (iframeMessage.type) {\n  case 's':\n    this.iframeObj.loaded();\n    // window global dependency\n    this.postMessage('s', JSON.stringify([\n      version\n    , this.transport\n    , this.transUrl\n    , this.baseUrl\n    ]));\n    break;\n  case 't':\n    this.emit('message', iframeMessage.data);\n    break;\n  case 'c':\n    var cdata;\n    try {\n      cdata = JSON.parse(iframeMessage.data);\n    } catch (ignored) {\n      debug('bad json', iframeMessage.data);\n      return;\n    }\n    this.emit('close', cdata[0], cdata[1]);\n    this.close();\n    break;\n  }\n};\n\nIframeTransport.prototype.postMessage = function(type, data) {\n  debug('postMessage', type, data);\n  this.iframeObj.post(JSON.stringify({\n    windowId: this.windowId\n  , type: type\n  , data: data || ''\n  }), this.origin);\n};\n\nIframeTransport.prototype.send = function(message) {\n  debug('send', message);\n  this.postMessage('m', message);\n};\n\nIframeTransport.enabled = function() {\n  return iframeUtils.iframeEnabled;\n};\n\nIframeTransport.transportName = 'iframe';\nIframeTransport.roundTrips = 2;\n\nmodule.exports = IframeTransport;\n","'use strict';\n\n// The simplest and most robust transport, using the well-know cross\n// domain hack - JSONP. This transport is quite inefficient - one\n// message could use up to one http request. But at least it works almost\n// everywhere.\n// Known limitations:\n//   o you will get a spinning cursor\n//   o for Konqueror a dumb timer is needed to detect errors\n\nvar inherits = require('inherits')\n  , SenderReceiver = require('./lib/sender-receiver')\n  , JsonpReceiver = require('./receiver/jsonp')\n  , jsonpSender = require('./sender/jsonp')\n  ;\n\nfunction JsonPTransport(transUrl) {\n  if (!JsonPTransport.enabled()) {\n    throw new Error('Transport created when disabled');\n  }\n  SenderReceiver.call(this, transUrl, '/jsonp', jsonpSender, JsonpReceiver);\n}\n\ninherits(JsonPTransport, SenderReceiver);\n\nJsonPTransport.enabled = function() {\n  return !!global.document;\n};\n\nJsonPTransport.transportName = 'jsonp-polling';\nJsonPTransport.roundTrips = 1;\nJsonPTransport.needBody = true;\n\nmodule.exports = JsonPTransport;\n","'use strict';\n\nvar inherits = require('inherits')\n  , urlUtils = require('../../utils/url')\n  , SenderReceiver = require('./sender-receiver')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:ajax-based');\n}\n\nfunction createAjaxSender(AjaxObject) {\n  return function(url, payload, callback) {\n    debug('create ajax sender', url, payload);\n    var opt = {};\n    if (typeof payload === 'string') {\n      opt.headers = {'Content-type': 'text/plain'};\n    }\n    var ajaxUrl = urlUtils.addPath(url, '/xhr_send');\n    var xo = new AjaxObject('POST', ajaxUrl, payload, opt);\n    xo.once('finish', function(status) {\n      debug('finish', status);\n      xo = null;\n\n      if (status !== 200 && status !== 204) {\n        return callback(new Error('http status ' + status));\n      }\n      callback();\n    });\n    return function() {\n      debug('abort');\n      xo.close();\n      xo = null;\n\n      var err = new Error('Aborted');\n      err.code = 1000;\n      callback(err);\n    };\n  };\n}\n\nfunction AjaxBasedTransport(transUrl, urlSuffix, Receiver, AjaxObject) {\n  SenderReceiver.call(this, transUrl, urlSuffix, createAjaxSender(AjaxObject), Receiver, AjaxObject);\n}\n\ninherits(AjaxBasedTransport, SenderReceiver);\n\nmodule.exports = AjaxBasedTransport;\n","'use strict';\n\nvar inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:buffered-sender');\n}\n\nfunction BufferedSender(url, sender) {\n  debug(url);\n  EventEmitter.call(this);\n  this.sendBuffer = [];\n  this.sender = sender;\n  this.url = url;\n}\n\ninherits(BufferedSender, EventEmitter);\n\nBufferedSender.prototype.send = function(message) {\n  debug('send', message);\n  this.sendBuffer.push(message);\n  if (!this.sendStop) {\n    this.sendSchedule();\n  }\n};\n\n// For polling transports in a situation when in the message callback,\n// new message is being send. If the sending connection was started\n// before receiving one, it is possible to saturate the network and\n// timeout due to the lack of receiving socket. To avoid that we delay\n// sending messages by some small time, in order to let receiving\n// connection be started beforehand. This is only a halfmeasure and\n// does not fix the big problem, but it does make the tests go more\n// stable on slow networks.\nBufferedSender.prototype.sendScheduleWait = function() {\n  debug('sendScheduleWait');\n  var self = this;\n  var tref;\n  this.sendStop = function() {\n    debug('sendStop');\n    self.sendStop = null;\n    clearTimeout(tref);\n  };\n  tref = setTimeout(function() {\n    debug('timeout');\n    self.sendStop = null;\n    self.sendSchedule();\n  }, 25);\n};\n\nBufferedSender.prototype.sendSchedule = function() {\n  debug('sendSchedule', this.sendBuffer.length);\n  var self = this;\n  if (this.sendBuffer.length > 0) {\n    var payload = '[' + this.sendBuffer.join(',') + ']';\n    this.sendStop = this.sender(this.url, payload, function(err) {\n      self.sendStop = null;\n      if (err) {\n        debug('error', err);\n        self.emit('close', err.code || 1006, 'Sending error: ' + err);\n        self.close();\n      } else {\n        self.sendScheduleWait();\n      }\n    });\n    this.sendBuffer = [];\n  }\n};\n\nBufferedSender.prototype._cleanup = function() {\n  debug('_cleanup');\n  this.removeAllListeners();\n};\n\nBufferedSender.prototype.close = function() {\n  debug('close');\n  this._cleanup();\n  if (this.sendStop) {\n    this.sendStop();\n    this.sendStop = null;\n  }\n};\n\nmodule.exports = BufferedSender;\n","'use strict';\n\nvar inherits = require('inherits')\n  , IframeTransport = require('../iframe')\n  , objectUtils = require('../../utils/object')\n  ;\n\nmodule.exports = function(transport) {\n\n  function IframeWrapTransport(transUrl, baseUrl) {\n    IframeTransport.call(this, transport.transportName, transUrl, baseUrl);\n  }\n\n  inherits(IframeWrapTransport, IframeTransport);\n\n  IframeWrapTransport.enabled = function(url, info) {\n    if (!global.document) {\n      return false;\n    }\n\n    var iframeInfo = objectUtils.extend({}, info);\n    iframeInfo.sameOrigin = true;\n    return transport.enabled(iframeInfo) && IframeTransport.enabled();\n  };\n\n  IframeWrapTransport.transportName = 'iframe-' + transport.transportName;\n  IframeWrapTransport.needBody = true;\n  IframeWrapTransport.roundTrips = IframeTransport.roundTrips + transport.roundTrips - 1; // html, javascript (2) + transport - no CORS (1)\n\n  IframeWrapTransport.facadeTransport = transport;\n\n  return IframeWrapTransport;\n};\n","'use strict';\n\nvar inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:polling');\n}\n\nfunction Polling(Receiver, receiveUrl, AjaxObject) {\n  debug(receiveUrl);\n  EventEmitter.call(this);\n  this.Receiver = Receiver;\n  this.receiveUrl = receiveUrl;\n  this.AjaxObject = AjaxObject;\n  this._scheduleReceiver();\n}\n\ninherits(Polling, EventEmitter);\n\nPolling.prototype._scheduleReceiver = function() {\n  debug('_scheduleReceiver');\n  var self = this;\n  var poll = this.poll = new this.Receiver(this.receiveUrl, this.AjaxObject);\n\n  poll.on('message', function(msg) {\n    debug('message', msg);\n    self.emit('message', msg);\n  });\n\n  poll.once('close', function(code, reason) {\n    debug('close', code, reason, self.pollIsClosing);\n    self.poll = poll = null;\n\n    if (!self.pollIsClosing) {\n      if (reason === 'network') {\n        self._scheduleReceiver();\n      } else {\n        self.emit('close', code || 1006, reason);\n        self.removeAllListeners();\n      }\n    }\n  });\n};\n\nPolling.prototype.abort = function() {\n  debug('abort');\n  this.removeAllListeners();\n  this.pollIsClosing = true;\n  if (this.poll) {\n    this.poll.abort();\n  }\n};\n\nmodule.exports = Polling;\n","'use strict';\n\nvar inherits = require('inherits')\n  , urlUtils = require('../../utils/url')\n  , BufferedSender = require('./buffered-sender')\n  , Polling = require('./polling')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:sender-receiver');\n}\n\nfunction SenderReceiver(transUrl, urlSuffix, senderFunc, Receiver, AjaxObject) {\n  var pollUrl = urlUtils.addPath(transUrl, urlSuffix);\n  debug(pollUrl);\n  var self = this;\n  BufferedSender.call(this, transUrl, senderFunc);\n\n  this.poll = new Polling(Receiver, pollUrl, AjaxObject);\n  this.poll.on('message', function(msg) {\n    debug('poll message', msg);\n    self.emit('message', msg);\n  });\n  this.poll.once('close', function(code, reason) {\n    debug('poll close', code, reason);\n    self.poll = null;\n    self.emit('close', code, reason);\n    self.close();\n  });\n}\n\ninherits(SenderReceiver, BufferedSender);\n\nSenderReceiver.prototype.close = function() {\n  BufferedSender.prototype.close.call(this);\n  debug('close');\n  this.removeAllListeners();\n  if (this.poll) {\n    this.poll.abort();\n    this.poll = null;\n  }\n};\n\nmodule.exports = SenderReceiver;\n","'use strict';\n\nvar inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  , EventSourceDriver = require('eventsource')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:receiver:eventsource');\n}\n\nfunction EventSourceReceiver(url) {\n  debug(url);\n  EventEmitter.call(this);\n\n  var self = this;\n  var es = this.es = new EventSourceDriver(url);\n  es.onmessage = function(e) {\n    debug('message', e.data);\n    self.emit('message', decodeURI(e.data));\n  };\n  es.onerror = function(e) {\n    debug('error', es.readyState, e);\n    // ES on reconnection has readyState = 0 or 1.\n    // on network error it's CLOSED = 2\n    var reason = (es.readyState !== 2 ? 'network' : 'permanent');\n    self._cleanup();\n    self._close(reason);\n  };\n}\n\ninherits(EventSourceReceiver, EventEmitter);\n\nEventSourceReceiver.prototype.abort = function() {\n  debug('abort');\n  this._cleanup();\n  this._close('user');\n};\n\nEventSourceReceiver.prototype._cleanup = function() {\n  debug('cleanup');\n  var es = this.es;\n  if (es) {\n    es.onmessage = es.onerror = null;\n    es.close();\n    this.es = null;\n  }\n};\n\nEventSourceReceiver.prototype._close = function(reason) {\n  debug('close', reason);\n  var self = this;\n  // Safari and chrome < 15 crash if we close window before\n  // waiting for ES cleanup. See:\n  // https://code.google.com/p/chromium/issues/detail?id=89155\n  setTimeout(function() {\n    self.emit('close', null, reason);\n    self.removeAllListeners();\n  }, 200);\n};\n\nmodule.exports = EventSourceReceiver;\n","'use strict';\n\nvar inherits = require('inherits')\n  , iframeUtils = require('../../utils/iframe')\n  , urlUtils = require('../../utils/url')\n  , EventEmitter = require('events').EventEmitter\n  , random = require('../../utils/random')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:receiver:htmlfile');\n}\n\nfunction HtmlfileReceiver(url) {\n  debug(url);\n  EventEmitter.call(this);\n  var self = this;\n  iframeUtils.polluteGlobalNamespace();\n\n  this.id = 'a' + random.string(6);\n  url = urlUtils.addQuery(url, 'c=' + decodeURIComponent(iframeUtils.WPrefix + '.' + this.id));\n\n  debug('using htmlfile', HtmlfileReceiver.htmlfileEnabled);\n  var constructFunc = HtmlfileReceiver.htmlfileEnabled ?\n      iframeUtils.createHtmlfile : iframeUtils.createIframe;\n\n  global[iframeUtils.WPrefix][this.id] = {\n    start: function() {\n      debug('start');\n      self.iframeObj.loaded();\n    }\n  , message: function(data) {\n      debug('message', data);\n      self.emit('message', data);\n    }\n  , stop: function() {\n      debug('stop');\n      self._cleanup();\n      self._close('network');\n    }\n  };\n  this.iframeObj = constructFunc(url, function() {\n    debug('callback');\n    self._cleanup();\n    self._close('permanent');\n  });\n}\n\ninherits(HtmlfileReceiver, EventEmitter);\n\nHtmlfileReceiver.prototype.abort = function() {\n  debug('abort');\n  this._cleanup();\n  this._close('user');\n};\n\nHtmlfileReceiver.prototype._cleanup = function() {\n  debug('_cleanup');\n  if (this.iframeObj) {\n    this.iframeObj.cleanup();\n    this.iframeObj = null;\n  }\n  delete global[iframeUtils.WPrefix][this.id];\n};\n\nHtmlfileReceiver.prototype._close = function(reason) {\n  debug('_close', reason);\n  this.emit('close', null, reason);\n  this.removeAllListeners();\n};\n\nHtmlfileReceiver.htmlfileEnabled = false;\n\n// obfuscate to avoid firewalls\nvar axo = ['Active'].concat('Object').join('X');\nif (axo in global) {\n  try {\n    HtmlfileReceiver.htmlfileEnabled = !!new global[axo]('htmlfile');\n  } catch (x) {\n    // intentionally empty\n  }\n}\n\nHtmlfileReceiver.enabled = HtmlfileReceiver.htmlfileEnabled || iframeUtils.iframeEnabled;\n\nmodule.exports = HtmlfileReceiver;\n","'use strict';\n\nvar utils = require('../../utils/iframe')\n  , random = require('../../utils/random')\n  , browser = require('../../utils/browser')\n  , urlUtils = require('../../utils/url')\n  , inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:receiver:jsonp');\n}\n\nfunction JsonpReceiver(url) {\n  debug(url);\n  var self = this;\n  EventEmitter.call(this);\n\n  utils.polluteGlobalNamespace();\n\n  this.id = 'a' + random.string(6);\n  var urlWithId = urlUtils.addQuery(url, 'c=' + encodeURIComponent(utils.WPrefix + '.' + this.id));\n\n  global[utils.WPrefix][this.id] = this._callback.bind(this);\n  this._createScript(urlWithId);\n\n  // Fallback mostly for Konqueror - stupid timer, 35 seconds shall be plenty.\n  this.timeoutId = setTimeout(function() {\n    debug('timeout');\n    self._abort(new Error('JSONP script loaded abnormally (timeout)'));\n  }, JsonpReceiver.timeout);\n}\n\ninherits(JsonpReceiver, EventEmitter);\n\nJsonpReceiver.prototype.abort = function() {\n  debug('abort');\n  if (global[utils.WPrefix][this.id]) {\n    var err = new Error('JSONP user aborted read');\n    err.code = 1000;\n    this._abort(err);\n  }\n};\n\nJsonpReceiver.timeout = 35000;\nJsonpReceiver.scriptErrorTimeout = 1000;\n\nJsonpReceiver.prototype._callback = function(data) {\n  debug('_callback', data);\n  this._cleanup();\n\n  if (this.aborting) {\n    return;\n  }\n\n  if (data) {\n    debug('message', data);\n    this.emit('message', data);\n  }\n  this.emit('close', null, 'network');\n  this.removeAllListeners();\n};\n\nJsonpReceiver.prototype._abort = function(err) {\n  debug('_abort', err);\n  this._cleanup();\n  this.aborting = true;\n  this.emit('close', err.code, err.message);\n  this.removeAllListeners();\n};\n\nJsonpReceiver.prototype._cleanup = function() {\n  debug('_cleanup');\n  clearTimeout(this.timeoutId);\n  if (this.script2) {\n    this.script2.parentNode.removeChild(this.script2);\n    this.script2 = null;\n  }\n  if (this.script) {\n    var script = this.script;\n    // Unfortunately, you can't really abort script loading of\n    // the script.\n    script.parentNode.removeChild(script);\n    script.onreadystatechange = script.onerror =\n        script.onload = script.onclick = null;\n    this.script = null;\n  }\n  delete global[utils.WPrefix][this.id];\n};\n\nJsonpReceiver.prototype._scriptError = function() {\n  debug('_scriptError');\n  var self = this;\n  if (this.errorTimer) {\n    return;\n  }\n\n  this.errorTimer = setTimeout(function() {\n    if (!self.loadedOkay) {\n      self._abort(new Error('JSONP script loaded abnormally (onerror)'));\n    }\n  }, JsonpReceiver.scriptErrorTimeout);\n};\n\nJsonpReceiver.prototype._createScript = function(url) {\n  debug('_createScript', url);\n  var self = this;\n  var script = this.script = global.document.createElement('script');\n  var script2;  // Opera synchronous load trick.\n\n  script.id = 'a' + random.string(8);\n  script.src = url;\n  script.type = 'text/javascript';\n  script.charset = 'UTF-8';\n  script.onerror = this._scriptError.bind(this);\n  script.onload = function() {\n    debug('onload');\n    self._abort(new Error('JSONP script loaded abnormally (onload)'));\n  };\n\n  // IE9 fires 'error' event after onreadystatechange or before, in random order.\n  // Use loadedOkay to determine if actually errored\n  script.onreadystatechange = function() {\n    debug('onreadystatechange', script.readyState);\n    if (/loaded|closed/.test(script.readyState)) {\n      if (script && script.htmlFor && script.onclick) {\n        self.loadedOkay = true;\n        try {\n          // In IE, actually execute the script.\n          script.onclick();\n        } catch (x) {\n          // intentionally empty\n        }\n      }\n      if (script) {\n        self._abort(new Error('JSONP script loaded abnormally (onreadystatechange)'));\n      }\n    }\n  };\n  // IE: event/htmlFor/onclick trick.\n  // One can't rely on proper order for onreadystatechange. In order to\n  // make sure, set a 'htmlFor' and 'event' properties, so that\n  // script code will be installed as 'onclick' handler for the\n  // script object. Later, onreadystatechange, manually execute this\n  // code. FF and Chrome doesn't work with 'event' and 'htmlFor'\n  // set. For reference see:\n  //   http://jaubourg.net/2010/07/loading-script-as-onclick-handler-of.html\n  // Also, read on that about script ordering:\n  //   http://wiki.whatwg.org/wiki/Dynamic_Script_Execution_Order\n  if (typeof script.async === 'undefined' && global.document.attachEvent) {\n    // According to mozilla docs, in recent browsers script.async defaults\n    // to 'true', so we may use it to detect a good browser:\n    // https://developer.mozilla.org/en/HTML/Element/script\n    if (!browser.isOpera()) {\n      // Naively assume we're in IE\n      try {\n        script.htmlFor = script.id;\n        script.event = 'onclick';\n      } catch (x) {\n        // intentionally empty\n      }\n      script.async = true;\n    } else {\n      // Opera, second sync script hack\n      script2 = this.script2 = global.document.createElement('script');\n      script2.text = \"try{var a = document.getElementById('\" + script.id + \"'); if(a)a.onerror();}catch(x){};\";\n      script.async = script2.async = false;\n    }\n  }\n  if (typeof script.async !== 'undefined') {\n    script.async = true;\n  }\n\n  var head = global.document.getElementsByTagName('head')[0];\n  head.insertBefore(script, head.firstChild);\n  if (script2) {\n    head.insertBefore(script2, head.firstChild);\n  }\n};\n\nmodule.exports = JsonpReceiver;\n","'use strict';\n\nvar inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:receiver:xhr');\n}\n\nfunction XhrReceiver(url, AjaxObject) {\n  debug(url);\n  EventEmitter.call(this);\n  var self = this;\n\n  this.bufferPosition = 0;\n\n  this.xo = new AjaxObject('POST', url, null);\n  this.xo.on('chunk', this._chunkHandler.bind(this));\n  this.xo.once('finish', function(status, text) {\n    debug('finish', status, text);\n    self._chunkHandler(status, text);\n    self.xo = null;\n    var reason = status === 200 ? 'network' : 'permanent';\n    debug('close', reason);\n    self.emit('close', null, reason);\n    self._cleanup();\n  });\n}\n\ninherits(XhrReceiver, EventEmitter);\n\nXhrReceiver.prototype._chunkHandler = function(status, text) {\n  debug('_chunkHandler', status);\n  if (status !== 200 || !text) {\n    return;\n  }\n\n  for (var idx = -1; ; this.bufferPosition += idx + 1) {\n    var buf = text.slice(this.bufferPosition);\n    idx = buf.indexOf('\\n');\n    if (idx === -1) {\n      break;\n    }\n    var msg = buf.slice(0, idx);\n    if (msg) {\n      debug('message', msg);\n      this.emit('message', msg);\n    }\n  }\n};\n\nXhrReceiver.prototype._cleanup = function() {\n  debug('_cleanup');\n  this.removeAllListeners();\n};\n\nXhrReceiver.prototype.abort = function() {\n  debug('abort');\n  if (this.xo) {\n    this.xo.close();\n    debug('close');\n    this.emit('close', null, 'user');\n    this.xo = null;\n  }\n  this._cleanup();\n};\n\nmodule.exports = XhrReceiver;\n","'use strict';\n\nvar random = require('../../utils/random')\n  , urlUtils = require('../../utils/url')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:sender:jsonp');\n}\n\nvar form, area;\n\nfunction createIframe(id) {\n  debug('createIframe', id);\n  try {\n    // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n    return global.document.createElement('<iframe name=\"' + id + '\">');\n  } catch (x) {\n    var iframe = global.document.createElement('iframe');\n    iframe.name = id;\n    return iframe;\n  }\n}\n\nfunction createForm() {\n  debug('createForm');\n  form = global.document.createElement('form');\n  form.style.display = 'none';\n  form.style.position = 'absolute';\n  form.method = 'POST';\n  form.enctype = 'application/x-www-form-urlencoded';\n  form.acceptCharset = 'UTF-8';\n\n  area = global.document.createElement('textarea');\n  area.name = 'd';\n  form.appendChild(area);\n\n  global.document.body.appendChild(form);\n}\n\nmodule.exports = function(url, payload, callback) {\n  debug(url, payload);\n  if (!form) {\n    createForm();\n  }\n  var id = 'a' + random.string(8);\n  form.target = id;\n  form.action = urlUtils.addQuery(urlUtils.addPath(url, '/jsonp_send'), 'i=' + id);\n\n  var iframe = createIframe(id);\n  iframe.id = id;\n  iframe.style.display = 'none';\n  form.appendChild(iframe);\n\n  try {\n    area.value = payload;\n  } catch (e) {\n    // seriously broken browsers get here\n  }\n  form.submit();\n\n  var completed = function(err) {\n    debug('completed', id, err);\n    if (!iframe.onerror) {\n      return;\n    }\n    iframe.onreadystatechange = iframe.onerror = iframe.onload = null;\n    // Opera mini doesn't like if we GC iframe\n    // immediately, thus this timeout.\n    setTimeout(function() {\n      debug('cleaning up', id);\n      iframe.parentNode.removeChild(iframe);\n      iframe = null;\n    }, 500);\n    area.value = '';\n    // It is not possible to detect if the iframe succeeded or\n    // failed to submit our form.\n    callback(err);\n  };\n  iframe.onerror = function() {\n    debug('onerror', id);\n    completed();\n  };\n  iframe.onload = function() {\n    debug('onload', id);\n    completed();\n  };\n  iframe.onreadystatechange = function(e) {\n    debug('onreadystatechange', id, iframe.readyState, e);\n    if (iframe.readyState === 'complete') {\n      completed();\n    }\n  };\n  return function() {\n    debug('aborted', id);\n    completed(new Error('Aborted'));\n  };\n};\n","'use strict';\n\nvar EventEmitter = require('events').EventEmitter\n  , inherits = require('inherits')\n  , eventUtils = require('../../utils/event')\n  , browser = require('../../utils/browser')\n  , urlUtils = require('../../utils/url')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:sender:xdr');\n}\n\n// References:\n//   http://ajaxian.com/archives/100-line-ajax-wrapper\n//   http://msdn.microsoft.com/en-us/library/cc288060(v=VS.85).aspx\n\nfunction XDRObject(method, url, payload) {\n  debug(method, url);\n  var self = this;\n  EventEmitter.call(this);\n\n  setTimeout(function() {\n    self._start(method, url, payload);\n  }, 0);\n}\n\ninherits(XDRObject, EventEmitter);\n\nXDRObject.prototype._start = function(method, url, payload) {\n  debug('_start');\n  var self = this;\n  var xdr = new global.XDomainRequest();\n  // IE caches even POSTs\n  url = urlUtils.addQuery(url, 't=' + (+new Date()));\n\n  xdr.onerror = function() {\n    debug('onerror');\n    self._error();\n  };\n  xdr.ontimeout = function() {\n    debug('ontimeout');\n    self._error();\n  };\n  xdr.onprogress = function() {\n    debug('progress', xdr.responseText);\n    self.emit('chunk', 200, xdr.responseText);\n  };\n  xdr.onload = function() {\n    debug('load');\n    self.emit('finish', 200, xdr.responseText);\n    self._cleanup(false);\n  };\n  this.xdr = xdr;\n  this.unloadRef = eventUtils.unloadAdd(function() {\n    self._cleanup(true);\n  });\n  try {\n    // Fails with AccessDenied if port number is bogus\n    this.xdr.open(method, url);\n    if (this.timeout) {\n      this.xdr.timeout = this.timeout;\n    }\n    this.xdr.send(payload);\n  } catch (x) {\n    this._error();\n  }\n};\n\nXDRObject.prototype._error = function() {\n  this.emit('finish', 0, '');\n  this._cleanup(false);\n};\n\nXDRObject.prototype._cleanup = function(abort) {\n  debug('cleanup', abort);\n  if (!this.xdr) {\n    return;\n  }\n  this.removeAllListeners();\n  eventUtils.unloadDel(this.unloadRef);\n\n  this.xdr.ontimeout = this.xdr.onerror = this.xdr.onprogress = this.xdr.onload = null;\n  if (abort) {\n    try {\n      this.xdr.abort();\n    } catch (x) {\n      // intentionally empty\n    }\n  }\n  this.unloadRef = this.xdr = null;\n};\n\nXDRObject.prototype.close = function() {\n  debug('close');\n  this._cleanup(true);\n};\n\n// IE 8/9 if the request target uses the same scheme - #79\nXDRObject.enabled = !!(global.XDomainRequest && browser.hasDomain());\n\nmodule.exports = XDRObject;\n","'use strict';\n\nvar inherits = require('inherits')\n  , XhrDriver = require('../driver/xhr')\n  ;\n\nfunction XHRCorsObject(method, url, payload, opts) {\n  XhrDriver.call(this, method, url, payload, opts);\n}\n\ninherits(XHRCorsObject, XhrDriver);\n\nXHRCorsObject.enabled = XhrDriver.enabled && XhrDriver.supportsCORS;\n\nmodule.exports = XHRCorsObject;\n","'use strict';\n\nvar EventEmitter = require('events').EventEmitter\n  , inherits = require('inherits')\n  ;\n\nfunction XHRFake(/* method, url, payload, opts */) {\n  var self = this;\n  EventEmitter.call(this);\n\n  this.to = setTimeout(function() {\n    self.emit('finish', 200, '{}');\n  }, XHRFake.timeout);\n}\n\ninherits(XHRFake, EventEmitter);\n\nXHRFake.prototype.close = function() {\n  clearTimeout(this.to);\n};\n\nXHRFake.timeout = 2000;\n\nmodule.exports = XHRFake;\n","'use strict';\n\nvar inherits = require('inherits')\n  , XhrDriver = require('../driver/xhr')\n  ;\n\nfunction XHRLocalObject(method, url, payload /*, opts */) {\n  XhrDriver.call(this, method, url, payload, {\n    noCredentials: true\n  });\n}\n\ninherits(XHRLocalObject, XhrDriver);\n\nXHRLocalObject.enabled = XhrDriver.enabled;\n\nmodule.exports = XHRLocalObject;\n","'use strict';\n\nvar utils = require('../utils/event')\n  , urlUtils = require('../utils/url')\n  , inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  , WebsocketDriver = require('./driver/websocket')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:websocket');\n}\n\nfunction WebSocketTransport(transUrl, ignore, options) {\n  if (!WebSocketTransport.enabled()) {\n    throw new Error('Transport created when disabled');\n  }\n\n  EventEmitter.call(this);\n  debug('constructor', transUrl);\n\n  var self = this;\n  var url = urlUtils.addPath(transUrl, '/websocket');\n  if (url.slice(0, 5) === 'https') {\n    url = 'wss' + url.slice(5);\n  } else {\n    url = 'ws' + url.slice(4);\n  }\n  this.url = url;\n\n  this.ws = new WebsocketDriver(this.url, [], options);\n  this.ws.onmessage = function(e) {\n    debug('message event', e.data);\n    self.emit('message', e.data);\n  };\n  // Firefox has an interesting bug. If a websocket connection is\n  // created after onunload, it stays alive even when user\n  // navigates away from the page. In such situation let's lie -\n  // let's not open the ws connection at all. See:\n  // https://github.com/sockjs/sockjs-client/issues/28\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=696085\n  this.unloadRef = utils.unloadAdd(function() {\n    debug('unload');\n    self.ws.close();\n  });\n  this.ws.onclose = function(e) {\n    debug('close event', e.code, e.reason);\n    self.emit('close', e.code, e.reason);\n    self._cleanup();\n  };\n  this.ws.onerror = function(e) {\n    debug('error event', e);\n    self.emit('close', 1006, 'WebSocket connection broken');\n    self._cleanup();\n  };\n}\n\ninherits(WebSocketTransport, EventEmitter);\n\nWebSocketTransport.prototype.send = function(data) {\n  var msg = '[' + data + ']';\n  debug('send', msg);\n  this.ws.send(msg);\n};\n\nWebSocketTransport.prototype.close = function() {\n  debug('close');\n  var ws = this.ws;\n  this._cleanup();\n  if (ws) {\n    ws.close();\n  }\n};\n\nWebSocketTransport.prototype._cleanup = function() {\n  debug('_cleanup');\n  var ws = this.ws;\n  if (ws) {\n    ws.onmessage = ws.onclose = ws.onerror = null;\n  }\n  utils.unloadDel(this.unloadRef);\n  this.unloadRef = this.ws = null;\n  this.removeAllListeners();\n};\n\nWebSocketTransport.enabled = function() {\n  debug('enabled');\n  return !!WebsocketDriver;\n};\nWebSocketTransport.transportName = 'websocket';\n\n// In theory, ws should require 1 round trip. But in chrome, this is\n// not very stable over SSL. Most likely a ws connection requires a\n// separate SSL connection, in which case 2 round trips are an\n// absolute minumum.\nWebSocketTransport.roundTrips = 2;\n\nmodule.exports = WebSocketTransport;\n","'use strict';\n\nvar inherits = require('inherits')\n  , AjaxBasedTransport = require('./lib/ajax-based')\n  , XdrStreamingTransport = require('./xdr-streaming')\n  , XhrReceiver = require('./receiver/xhr')\n  , XDRObject = require('./sender/xdr')\n  ;\n\nfunction XdrPollingTransport(transUrl) {\n  if (!XDRObject.enabled) {\n    throw new Error('Transport created when disabled');\n  }\n  AjaxBasedTransport.call(this, transUrl, '/xhr', XhrReceiver, XDRObject);\n}\n\ninherits(XdrPollingTransport, AjaxBasedTransport);\n\nXdrPollingTransport.enabled = XdrStreamingTransport.enabled;\nXdrPollingTransport.transportName = 'xdr-polling';\nXdrPollingTransport.roundTrips = 2; // preflight, ajax\n\nmodule.exports = XdrPollingTransport;\n","'use strict';\n\nvar inherits = require('inherits')\n  , AjaxBasedTransport = require('./lib/ajax-based')\n  , XhrReceiver = require('./receiver/xhr')\n  , XDRObject = require('./sender/xdr')\n  ;\n\n// According to:\n//   http://stackoverflow.com/questions/1641507/detect-browser-support-for-cross-domain-xmlhttprequests\n//   http://hacks.mozilla.org/2009/07/cross-site-xmlhttprequest-with-cors/\n\nfunction XdrStreamingTransport(transUrl) {\n  if (!XDRObject.enabled) {\n    throw new Error('Transport created when disabled');\n  }\n  AjaxBasedTransport.call(this, transUrl, '/xhr_streaming', XhrReceiver, XDRObject);\n}\n\ninherits(XdrStreamingTransport, AjaxBasedTransport);\n\nXdrStreamingTransport.enabled = function(info) {\n  if (info.cookie_needed || info.nullOrigin) {\n    return false;\n  }\n  return XDRObject.enabled && info.sameScheme;\n};\n\nXdrStreamingTransport.transportName = 'xdr-streaming';\nXdrStreamingTransport.roundTrips = 2; // preflight, ajax\n\nmodule.exports = XdrStreamingTransport;\n","'use strict';\n\nvar inherits = require('inherits')\n  , AjaxBasedTransport = require('./lib/ajax-based')\n  , XhrReceiver = require('./receiver/xhr')\n  , XHRCorsObject = require('./sender/xhr-cors')\n  , XHRLocalObject = require('./sender/xhr-local')\n  ;\n\nfunction XhrPollingTransport(transUrl) {\n  if (!XHRLocalObject.enabled && !XHRCorsObject.enabled) {\n    throw new Error('Transport created when disabled');\n  }\n  AjaxBasedTransport.call(this, transUrl, '/xhr', XhrReceiver, XHRCorsObject);\n}\n\ninherits(XhrPollingTransport, AjaxBasedTransport);\n\nXhrPollingTransport.enabled = function(info) {\n  if (info.nullOrigin) {\n    return false;\n  }\n\n  if (XHRLocalObject.enabled && info.sameOrigin) {\n    return true;\n  }\n  return XHRCorsObject.enabled;\n};\n\nXhrPollingTransport.transportName = 'xhr-polling';\nXhrPollingTransport.roundTrips = 2; // preflight, ajax\n\nmodule.exports = XhrPollingTransport;\n","'use strict';\n\nvar inherits = require('inherits')\n  , AjaxBasedTransport = require('./lib/ajax-based')\n  , XhrReceiver = require('./receiver/xhr')\n  , XHRCorsObject = require('./sender/xhr-cors')\n  , XHRLocalObject = require('./sender/xhr-local')\n  , browser = require('../utils/browser')\n  ;\n\nfunction XhrStreamingTransport(transUrl) {\n  if (!XHRLocalObject.enabled && !XHRCorsObject.enabled) {\n    throw new Error('Transport created when disabled');\n  }\n  AjaxBasedTransport.call(this, transUrl, '/xhr_streaming', XhrReceiver, XHRCorsObject);\n}\n\ninherits(XhrStreamingTransport, AjaxBasedTransport);\n\nXhrStreamingTransport.enabled = function(info) {\n  if (info.nullOrigin) {\n    return false;\n  }\n  // Opera doesn't support xhr-streaming #60\n  // But it might be able to #92\n  if (browser.isOpera()) {\n    return false;\n  }\n\n  return XHRCorsObject.enabled;\n};\n\nXhrStreamingTransport.transportName = 'xhr-streaming';\nXhrStreamingTransport.roundTrips = 2; // preflight, ajax\n\n// Safari gets confused when a streaming ajax request is started\n// before onload. This causes the load indicator to spin indefinetely.\n// Only require body when used in a browser\nXhrStreamingTransport.needBody = !!global.document;\n\nmodule.exports = XhrStreamingTransport;\n","'use strict';\n\nif (global.crypto && global.crypto.getRandomValues) {\n  module.exports.randomBytes = function(length) {\n    var bytes = new Uint8Array(length);\n    global.crypto.getRandomValues(bytes);\n    return bytes;\n  };\n} else {\n  module.exports.randomBytes = function(length) {\n    var bytes = new Array(length);\n    for (var i = 0; i < length; i++) {\n      bytes[i] = Math.floor(Math.random() * 256);\n    }\n    return bytes;\n  };\n}\n","'use strict';\n\nmodule.exports = {\n  isOpera: function() {\n    return global.navigator &&\n      /opera/i.test(global.navigator.userAgent);\n  }\n\n, isKonqueror: function() {\n    return global.navigator &&\n      /konqueror/i.test(global.navigator.userAgent);\n  }\n\n  // #187 wrap document.domain in try/catch because of WP8 from file:///\n, hasDomain: function () {\n    // non-browser client always has a domain\n    if (!global.document) {\n      return true;\n    }\n\n    try {\n      return !!global.document.domain;\n    } catch (e) {\n      return false;\n    }\n  }\n};\n","'use strict';\n\n// Some extra characters that Chrome gets wrong, and substitutes with\n// something else on the wire.\n// eslint-disable-next-line no-control-regex, no-misleading-character-class\nvar extraEscapable = /[\\x00-\\x1f\\ud800-\\udfff\\ufffe\\uffff\\u0300-\\u0333\\u033d-\\u0346\\u034a-\\u034c\\u0350-\\u0352\\u0357-\\u0358\\u035c-\\u0362\\u0374\\u037e\\u0387\\u0591-\\u05af\\u05c4\\u0610-\\u0617\\u0653-\\u0654\\u0657-\\u065b\\u065d-\\u065e\\u06df-\\u06e2\\u06eb-\\u06ec\\u0730\\u0732-\\u0733\\u0735-\\u0736\\u073a\\u073d\\u073f-\\u0741\\u0743\\u0745\\u0747\\u07eb-\\u07f1\\u0951\\u0958-\\u095f\\u09dc-\\u09dd\\u09df\\u0a33\\u0a36\\u0a59-\\u0a5b\\u0a5e\\u0b5c-\\u0b5d\\u0e38-\\u0e39\\u0f43\\u0f4d\\u0f52\\u0f57\\u0f5c\\u0f69\\u0f72-\\u0f76\\u0f78\\u0f80-\\u0f83\\u0f93\\u0f9d\\u0fa2\\u0fa7\\u0fac\\u0fb9\\u1939-\\u193a\\u1a17\\u1b6b\\u1cda-\\u1cdb\\u1dc0-\\u1dcf\\u1dfc\\u1dfe\\u1f71\\u1f73\\u1f75\\u1f77\\u1f79\\u1f7b\\u1f7d\\u1fbb\\u1fbe\\u1fc9\\u1fcb\\u1fd3\\u1fdb\\u1fe3\\u1feb\\u1fee-\\u1fef\\u1ff9\\u1ffb\\u1ffd\\u2000-\\u2001\\u20d0-\\u20d1\\u20d4-\\u20d7\\u20e7-\\u20e9\\u2126\\u212a-\\u212b\\u2329-\\u232a\\u2adc\\u302b-\\u302c\\uaab2-\\uaab3\\uf900-\\ufa0d\\ufa10\\ufa12\\ufa15-\\ufa1e\\ufa20\\ufa22\\ufa25-\\ufa26\\ufa2a-\\ufa2d\\ufa30-\\ufa6d\\ufa70-\\ufad9\\ufb1d\\ufb1f\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufb4e\\ufff0-\\uffff]/g\n  , extraLookup;\n\n// This may be quite slow, so let's delay until user actually uses bad\n// characters.\nvar unrollLookup = function(escapable) {\n  var i;\n  var unrolled = {};\n  var c = [];\n  for (i = 0; i < 65536; i++) {\n    c.push( String.fromCharCode(i) );\n  }\n  escapable.lastIndex = 0;\n  c.join('').replace(escapable, function(a) {\n    unrolled[ a ] = '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n    return '';\n  });\n  escapable.lastIndex = 0;\n  return unrolled;\n};\n\n// Quote string, also taking care of unicode characters that browsers\n// often break. Especially, take care of unicode surrogates:\n// http://en.wikipedia.org/wiki/Mapping_of_Unicode_characters#Surrogates\nmodule.exports = {\n  quote: function(string) {\n    var quoted = JSON.stringify(string);\n\n    // In most cases this should be very fast and good enough.\n    extraEscapable.lastIndex = 0;\n    if (!extraEscapable.test(quoted)) {\n      return quoted;\n    }\n\n    if (!extraLookup) {\n      extraLookup = unrollLookup(extraEscapable);\n    }\n\n    return quoted.replace(extraEscapable, function(a) {\n      return extraLookup[a];\n    });\n  }\n};\n","'use strict';\n\nvar random = require('./random');\n\nvar onUnload = {}\n  , afterUnload = false\n    // detect google chrome packaged apps because they don't allow the 'unload' event\n  , isChromePackagedApp = global.chrome && global.chrome.app && global.chrome.app.runtime\n  ;\n\nmodule.exports = {\n  attachEvent: function(event, listener) {\n    if (typeof global.addEventListener !== 'undefined') {\n      global.addEventListener(event, listener, false);\n    } else if (global.document && global.attachEvent) {\n      // IE quirks.\n      // According to: http://stevesouders.com/misc/test-postmessage.php\n      // the message gets delivered only to 'document', not 'window'.\n      global.document.attachEvent('on' + event, listener);\n      // I get 'window' for ie8.\n      global.attachEvent('on' + event, listener);\n    }\n  }\n\n, detachEvent: function(event, listener) {\n    if (typeof global.addEventListener !== 'undefined') {\n      global.removeEventListener(event, listener, false);\n    } else if (global.document && global.detachEvent) {\n      global.document.detachEvent('on' + event, listener);\n      global.detachEvent('on' + event, listener);\n    }\n  }\n\n, unloadAdd: function(listener) {\n    if (isChromePackagedApp) {\n      return null;\n    }\n\n    var ref = random.string(8);\n    onUnload[ref] = listener;\n    if (afterUnload) {\n      setTimeout(this.triggerUnloadCallbacks, 0);\n    }\n    return ref;\n  }\n\n, unloadDel: function(ref) {\n    if (ref in onUnload) {\n      delete onUnload[ref];\n    }\n  }\n\n, triggerUnloadCallbacks: function() {\n    for (var ref in onUnload) {\n      onUnload[ref]();\n      delete onUnload[ref];\n    }\n  }\n};\n\nvar unloadTriggered = function() {\n  if (afterUnload) {\n    return;\n  }\n  afterUnload = true;\n  module.exports.triggerUnloadCallbacks();\n};\n\n// 'unload' alone is not reliable in opera within an iframe, but we\n// can't use `beforeunload` as IE fires it on javascript: links.\nif (!isChromePackagedApp) {\n  module.exports.attachEvent('unload', unloadTriggered);\n}\n","'use strict';\n\nvar eventUtils = require('./event')\n  , browser = require('./browser')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:utils:iframe');\n}\n\nmodule.exports = {\n  WPrefix: '_jp'\n, currentWindowId: null\n\n, polluteGlobalNamespace: function() {\n    if (!(module.exports.WPrefix in global)) {\n      global[module.exports.WPrefix] = {};\n    }\n  }\n\n, postMessage: function(type, data) {\n    if (global.parent !== global) {\n      global.parent.postMessage(JSON.stringify({\n        windowId: module.exports.currentWindowId\n      , type: type\n      , data: data || ''\n      }), '*');\n    } else {\n      debug('Cannot postMessage, no parent window.', type, data);\n    }\n  }\n\n, createIframe: function(iframeUrl, errorCallback) {\n    var iframe = global.document.createElement('iframe');\n    var tref, unloadRef;\n    var unattach = function() {\n      debug('unattach');\n      clearTimeout(tref);\n      // Explorer had problems with that.\n      try {\n        iframe.onload = null;\n      } catch (x) {\n        // intentionally empty\n      }\n      iframe.onerror = null;\n    };\n    var cleanup = function() {\n      debug('cleanup');\n      if (iframe) {\n        unattach();\n        // This timeout makes chrome fire onbeforeunload event\n        // within iframe. Without the timeout it goes straight to\n        // onunload.\n        setTimeout(function() {\n          if (iframe) {\n            iframe.parentNode.removeChild(iframe);\n          }\n          iframe = null;\n        }, 0);\n        eventUtils.unloadDel(unloadRef);\n      }\n    };\n    var onerror = function(err) {\n      debug('onerror', err);\n      if (iframe) {\n        cleanup();\n        errorCallback(err);\n      }\n    };\n    var post = function(msg, origin) {\n      debug('post', msg, origin);\n      setTimeout(function() {\n        try {\n          // When the iframe is not loaded, IE raises an exception\n          // on 'contentWindow'.\n          if (iframe && iframe.contentWindow) {\n            iframe.contentWindow.postMessage(msg, origin);\n          }\n        } catch (x) {\n          // intentionally empty\n        }\n      }, 0);\n    };\n\n    iframe.src = iframeUrl;\n    iframe.style.display = 'none';\n    iframe.style.position = 'absolute';\n    iframe.onerror = function() {\n      onerror('onerror');\n    };\n    iframe.onload = function() {\n      debug('onload');\n      // `onload` is triggered before scripts on the iframe are\n      // executed. Give it few seconds to actually load stuff.\n      clearTimeout(tref);\n      tref = setTimeout(function() {\n        onerror('onload timeout');\n      }, 2000);\n    };\n    global.document.body.appendChild(iframe);\n    tref = setTimeout(function() {\n      onerror('timeout');\n    }, 15000);\n    unloadRef = eventUtils.unloadAdd(cleanup);\n    return {\n      post: post\n    , cleanup: cleanup\n    , loaded: unattach\n    };\n  }\n\n/* eslint no-undef: \"off\", new-cap: \"off\" */\n, createHtmlfile: function(iframeUrl, errorCallback) {\n    var axo = ['Active'].concat('Object').join('X');\n    var doc = new global[axo]('htmlfile');\n    var tref, unloadRef;\n    var iframe;\n    var unattach = function() {\n      clearTimeout(tref);\n      iframe.onerror = null;\n    };\n    var cleanup = function() {\n      if (doc) {\n        unattach();\n        eventUtils.unloadDel(unloadRef);\n        iframe.parentNode.removeChild(iframe);\n        iframe = doc = null;\n        CollectGarbage();\n      }\n    };\n    var onerror = function(r) {\n      debug('onerror', r);\n      if (doc) {\n        cleanup();\n        errorCallback(r);\n      }\n    };\n    var post = function(msg, origin) {\n      try {\n        // When the iframe is not loaded, IE raises an exception\n        // on 'contentWindow'.\n        setTimeout(function() {\n          if (iframe && iframe.contentWindow) {\n              iframe.contentWindow.postMessage(msg, origin);\n          }\n        }, 0);\n      } catch (x) {\n        // intentionally empty\n      }\n    };\n\n    doc.open();\n    doc.write('<html><s' + 'cript>' +\n              'document.domain=\"' + global.document.domain + '\";' +\n              '</s' + 'cript></html>');\n    doc.close();\n    doc.parentWindow[module.exports.WPrefix] = global[module.exports.WPrefix];\n    var c = doc.createElement('div');\n    doc.body.appendChild(c);\n    iframe = doc.createElement('iframe');\n    c.appendChild(iframe);\n    iframe.src = iframeUrl;\n    iframe.onerror = function() {\n      onerror('onerror');\n    };\n    tref = setTimeout(function() {\n      onerror('timeout');\n    }, 15000);\n    unloadRef = eventUtils.unloadAdd(cleanup);\n    return {\n      post: post\n    , cleanup: cleanup\n    , loaded: unattach\n    };\n  }\n};\n\nmodule.exports.iframeEnabled = false;\nif (global.document) {\n  // postMessage misbehaves in konqueror 4.6.5 - the messages are delivered with\n  // huge delay, or not at all.\n  module.exports.iframeEnabled = (typeof global.postMessage === 'function' ||\n    typeof global.postMessage === 'object') && (!browser.isKonqueror());\n}\n","'use strict';\n\nvar logObject = {};\n['log', 'debug', 'warn'].forEach(function (level) {\n  var levelExists;\n\n  try {\n    levelExists = global.console && global.console[level] && global.console[level].apply;\n  } catch(e) {\n    // do nothing\n  }\n\n  logObject[level] = levelExists ? function () {\n    return global.console[level].apply(global.console, arguments);\n  } : (level === 'log' ? function () {} : logObject.log);\n});\n\nmodule.exports = logObject;\n","'use strict';\n\nmodule.exports = {\n  isObject: function(obj) {\n    var type = typeof obj;\n    return type === 'function' || type === 'object' && !!obj;\n  }\n\n, extend: function(obj) {\n    if (!this.isObject(obj)) {\n      return obj;\n    }\n    var source, prop;\n    for (var i = 1, length = arguments.length; i < length; i++) {\n      source = arguments[i];\n      for (prop in source) {\n        if (Object.prototype.hasOwnProperty.call(source, prop)) {\n          obj[prop] = source[prop];\n        }\n      }\n    }\n    return obj;\n  }\n};\n","'use strict';\n\nvar crypto = require('crypto');\n\n// This string has length 32, a power of 2, so the modulus doesn't introduce a\n// bias.\nvar _randomStringChars = 'abcdefghijklmnopqrstuvwxyz012345';\nmodule.exports = {\n  string: function(length) {\n    var max = _randomStringChars.length;\n    var bytes = crypto.randomBytes(length);\n    var ret = [];\n    for (var i = 0; i < length; i++) {\n      ret.push(_randomStringChars.substr(bytes[i] % max, 1));\n    }\n    return ret.join('');\n  }\n\n, number: function(max) {\n    return Math.floor(Math.random() * max);\n  }\n\n, numberString: function(max) {\n    var t = ('' + (max - 1)).length;\n    var p = new Array(t + 1).join('0');\n    return (p + this.number(max)).slice(-t);\n  }\n};\n","'use strict';\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:utils:transport');\n}\n\nmodule.exports = function(availableTransports) {\n  return {\n    filterToEnabled: function(transportsWhitelist, info) {\n      var transports = {\n        main: []\n      , facade: []\n      };\n      if (!transportsWhitelist) {\n        transportsWhitelist = [];\n      } else if (typeof transportsWhitelist === 'string') {\n        transportsWhitelist = [transportsWhitelist];\n      }\n\n      availableTransports.forEach(function(trans) {\n        if (!trans) {\n          return;\n        }\n\n        if (trans.transportName === 'websocket' && info.websocket === false) {\n          debug('disabled from server', 'websocket');\n          return;\n        }\n\n        if (transportsWhitelist.length &&\n            transportsWhitelist.indexOf(trans.transportName) === -1) {\n          debug('not in whitelist', trans.transportName);\n          return;\n        }\n\n        if (trans.enabled(info)) {\n          debug('enabled', trans.transportName);\n          transports.main.push(trans);\n          if (trans.facadeTransport) {\n            transports.facade.push(trans.facadeTransport);\n          }\n        } else {\n          debug('disabled', trans.transportName);\n        }\n      });\n      return transports;\n    }\n  };\n};\n","'use strict';\n\nvar URL = require('url-parse');\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:utils:url');\n}\n\nmodule.exports = {\n  getOrigin: function(url) {\n    if (!url) {\n      return null;\n    }\n\n    var p = new URL(url);\n    if (p.protocol === 'file:') {\n      return null;\n    }\n\n    var port = p.port;\n    if (!port) {\n      port = (p.protocol === 'https:') ? '443' : '80';\n    }\n\n    return p.protocol + '//' + p.hostname + ':' + port;\n  }\n\n, isOriginEqual: function(a, b) {\n    var res = this.getOrigin(a) === this.getOrigin(b);\n    debug('same', a, b, res);\n    return res;\n  }\n\n, isSchemeEqual: function(a, b) {\n    return (a.split(':')[0] === b.split(':')[0]);\n  }\n\n, addPath: function (url, path) {\n    var qs = url.split('?');\n    return qs[0] + path + (qs[1] ? '?' + qs[1] : '');\n  }\n\n, addQuery: function (url, q) {\n    return url + (url.indexOf('?') === -1 ? ('?' + q) : ('&' + q));\n  }\n\n, isLoopbackAddr: function (addr) {\n    return /^127\\.([0-9]{1,3})\\.([0-9]{1,3})\\.([0-9]{1,3})$/i.test(addr) || /^\\[::1\\]$/.test(addr);\n  }\n};\n","module.exports = '1.6.1';\n","\"use strict\";\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\n/**\n * Colors.\n */\n\nexports.colors = ['#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC', '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF', '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC', '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF', '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC', '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033', '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366', '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933', '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC', '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF', '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'];\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n// eslint-disable-next-line complexity\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n    return true;\n  } // Internet Explorer and Edge do not support colors.\n\n\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  } // Is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\n\n  return typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773\n  typeof window !== 'undefined' && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?\n  // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/);\n}\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\n\nfunction formatArgs(args) {\n  args[0] = (this.useColors ? '%c' : '') + this.namespace + (this.useColors ? ' %c' : ' ') + args[0] + (this.useColors ? '%c ' : ' ') + '+' + module.exports.humanize(this.diff);\n\n  if (!this.useColors) {\n    return;\n  }\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit'); // The final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function (match) {\n    if (match === '%%') {\n      return;\n    }\n\n    index++;\n\n    if (match === '%c') {\n      // We only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n  args.splice(lastC, 0, c);\n}\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\n\nfunction log() {\n  var _console;\n\n  // This hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return (typeof console === \"undefined\" ? \"undefined\" : _typeof(console)) === 'object' && console.log && (_console = console).log.apply(_console, arguments);\n}\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\n\nfunction save(namespaces) {\n  try {\n    if (namespaces) {\n      exports.storage.setItem('debug', namespaces);\n    } else {\n      exports.storage.removeItem('debug');\n    }\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\n\nfunction load() {\n  var r;\n\n  try {\n    r = exports.storage.getItem('debug');\n  } catch (error) {} // Swallow\n  // XXX (@Qix-) should we be logging these?\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\n\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\n\nfunction localstorage() {\n  try {\n    // TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n    // The Browser also has localStorage in the global context.\n    return localStorage;\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n\nmodule.exports = require('./common')(exports);\nvar formatters = module.exports.formatters;\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n  try {\n    return JSON.stringify(v);\n  } catch (error) {\n    return '[UnexpectedJSONParseError]: ' + error.message;\n  }\n};\n\n","\"use strict\";\n\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\nfunction setup(env) {\n  createDebug.debug = createDebug;\n  createDebug.default = createDebug;\n  createDebug.coerce = coerce;\n  createDebug.disable = disable;\n  createDebug.enable = enable;\n  createDebug.enabled = enabled;\n  createDebug.humanize = require('ms');\n  Object.keys(env).forEach(function (key) {\n    createDebug[key] = env[key];\n  });\n  /**\n  * Active `debug` instances.\n  */\n\n  createDebug.instances = [];\n  /**\n  * The currently active debug mode names, and names to skip.\n  */\n\n  createDebug.names = [];\n  createDebug.skips = [];\n  /**\n  * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n  *\n  * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n  */\n\n  createDebug.formatters = {};\n  /**\n  * Selects a color for a debug namespace\n  * @param {String} namespace The namespace string for the for the debug instance to be colored\n  * @return {Number|String} An ANSI color code for the given namespace\n  * @api private\n  */\n\n  function selectColor(namespace) {\n    var hash = 0;\n\n    for (var i = 0; i < namespace.length; i++) {\n      hash = (hash << 5) - hash + namespace.charCodeAt(i);\n      hash |= 0; // Convert to 32bit integer\n    }\n\n    return createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n  }\n\n  createDebug.selectColor = selectColor;\n  /**\n  * Create a debugger with the given `namespace`.\n  *\n  * @param {String} namespace\n  * @return {Function}\n  * @api public\n  */\n\n  function createDebug(namespace) {\n    var prevTime;\n\n    function debug() {\n      // Disabled?\n      if (!debug.enabled) {\n        return;\n      }\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      var self = debug; // Set `diff` timestamp\n\n      var curr = Number(new Date());\n      var ms = curr - (prevTime || curr);\n      self.diff = ms;\n      self.prev = prevTime;\n      self.curr = curr;\n      prevTime = curr;\n      args[0] = createDebug.coerce(args[0]);\n\n      if (typeof args[0] !== 'string') {\n        // Anything else let's inspect with %O\n        args.unshift('%O');\n      } // Apply any `formatters` transformations\n\n\n      var index = 0;\n      args[0] = args[0].replace(/%([a-zA-Z%])/g, function (match, format) {\n        // If we encounter an escaped % then don't increase the array index\n        if (match === '%%') {\n          return match;\n        }\n\n        index++;\n        var formatter = createDebug.formatters[format];\n\n        if (typeof formatter === 'function') {\n          var val = args[index];\n          match = formatter.call(self, val); // Now we need to remove `args[index]` since it's inlined in the `format`\n\n          args.splice(index, 1);\n          index--;\n        }\n\n        return match;\n      }); // Apply env-specific formatting (colors, etc.)\n\n      createDebug.formatArgs.call(self, args);\n      var logFn = self.log || createDebug.log;\n      logFn.apply(self, args);\n    }\n\n    debug.namespace = namespace;\n    debug.enabled = createDebug.enabled(namespace);\n    debug.useColors = createDebug.useColors();\n    debug.color = selectColor(namespace);\n    debug.destroy = destroy;\n    debug.extend = extend; // Debug.formatArgs = formatArgs;\n    // debug.rawLog = rawLog;\n    // env-specific initialization logic for debug instances\n\n    if (typeof createDebug.init === 'function') {\n      createDebug.init(debug);\n    }\n\n    createDebug.instances.push(debug);\n    return debug;\n  }\n\n  function destroy() {\n    var index = createDebug.instances.indexOf(this);\n\n    if (index !== -1) {\n      createDebug.instances.splice(index, 1);\n      return true;\n    }\n\n    return false;\n  }\n\n  function extend(namespace, delimiter) {\n    return createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n  }\n  /**\n  * Enables a debug mode by namespaces. This can include modes\n  * separated by a colon and wildcards.\n  *\n  * @param {String} namespaces\n  * @api public\n  */\n\n\n  function enable(namespaces) {\n    createDebug.save(namespaces);\n    createDebug.names = [];\n    createDebug.skips = [];\n    var i;\n    var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n    var len = split.length;\n\n    for (i = 0; i < len; i++) {\n      if (!split[i]) {\n        // ignore empty strings\n        continue;\n      }\n\n      namespaces = split[i].replace(/\\*/g, '.*?');\n\n      if (namespaces[0] === '-') {\n        createDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n      } else {\n        createDebug.names.push(new RegExp('^' + namespaces + '$'));\n      }\n    }\n\n    for (i = 0; i < createDebug.instances.length; i++) {\n      var instance = createDebug.instances[i];\n      instance.enabled = createDebug.enabled(instance.namespace);\n    }\n  }\n  /**\n  * Disable debug output.\n  *\n  * @api public\n  */\n\n\n  function disable() {\n    createDebug.enable('');\n  }\n  /**\n  * Returns true if the given mode name is enabled, false otherwise.\n  *\n  * @param {String} name\n  * @return {Boolean}\n  * @api public\n  */\n\n\n  function enabled(name) {\n    if (name[name.length - 1] === '*') {\n      return true;\n    }\n\n    var i;\n    var len;\n\n    for (i = 0, len = createDebug.skips.length; i < len; i++) {\n      if (createDebug.skips[i].test(name)) {\n        return false;\n      }\n    }\n\n    for (i = 0, len = createDebug.names.length; i < len; i++) {\n      if (createDebug.names[i].test(name)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n  /**\n  * Coerce `val`.\n  *\n  * @param {Mixed} val\n  * @return {Mixed}\n  * @api private\n  */\n\n\n  function coerce(val) {\n    if (val instanceof Error) {\n      return val.stack || val.message;\n    }\n\n    return val;\n  }\n\n  createDebug.enable(createDebug.load());\n  return createDebug;\n}\n\nmodule.exports = setup;\n\n","'use strict';\n\nvar required = require('requires-port')\n  , qs = require('querystringify')\n  , controlOrWhitespace = /^[\\x00-\\x20\\u00a0\\u1680\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff]+/\n  , CRHTLF = /[\\n\\r\\t]/g\n  , slashes = /^[A-Za-z][A-Za-z0-9+-.]*:\\/\\//\n  , port = /:\\d+$/\n  , protocolre = /^([a-z][a-z0-9.+-]*:)?(\\/\\/)?([\\\\/]+)?([\\S\\s]*)/i\n  , windowsDriveLetter = /^[a-zA-Z]:/;\n\n/**\n * Remove control characters and whitespace from the beginning of a string.\n *\n * @param {Object|String} str String to trim.\n * @returns {String} A new string representing `str` stripped of control\n *     characters and whitespace from its beginning.\n * @public\n */\nfunction trimLeft(str) {\n  return (str ? str : '').toString().replace(controlOrWhitespace, '');\n}\n\n/**\n * These are the parse rules for the URL parser, it informs the parser\n * about:\n *\n * 0. The char it Needs to parse, if it's a string it should be done using\n *    indexOf, RegExp using exec and NaN means set as current value.\n * 1. The property we should set when parsing this value.\n * 2. Indication if it's backwards or forward parsing, when set as number it's\n *    the value of extra chars that should be split off.\n * 3. Inherit from location if non existing in the parser.\n * 4. `toLowerCase` the resulting value.\n */\nvar rules = [\n  ['#', 'hash'],                        // Extract from the back.\n  ['?', 'query'],                       // Extract from the back.\n  function sanitize(address, url) {     // Sanitize what is left of the address\n    return isSpecial(url.protocol) ? address.replace(/\\\\/g, '/') : address;\n  },\n  ['/', 'pathname'],                    // Extract from the back.\n  ['@', 'auth', 1],                     // Extract from the front.\n  [NaN, 'host', undefined, 1, 1],       // Set left over value.\n  [/:(\\d*)$/, 'port', undefined, 1],    // RegExp the back.\n  [NaN, 'hostname', undefined, 1, 1]    // Set left over.\n];\n\n/**\n * These properties should not be copied or inherited from. This is only needed\n * for all non blob URL's as a blob URL does not include a hash, only the\n * origin.\n *\n * @type {Object}\n * @private\n */\nvar ignore = { hash: 1, query: 1 };\n\n/**\n * The location object differs when your code is loaded through a normal page,\n * Worker or through a worker using a blob. And with the blobble begins the\n * trouble as the location object will contain the URL of the blob, not the\n * location of the page where our code is loaded in. The actual origin is\n * encoded in the `pathname` so we can thankfully generate a good \"default\"\n * location from it so we can generate proper relative URL's again.\n *\n * @param {Object|String} loc Optional default location object.\n * @returns {Object} lolcation object.\n * @public\n */\nfunction lolcation(loc) {\n  var globalVar;\n\n  if (typeof window !== 'undefined') globalVar = window;\n  else if (typeof global !== 'undefined') globalVar = global;\n  else if (typeof self !== 'undefined') globalVar = self;\n  else globalVar = {};\n\n  var location = globalVar.location || {};\n  loc = loc || location;\n\n  var finaldestination = {}\n    , type = typeof loc\n    , key;\n\n  if ('blob:' === loc.protocol) {\n    finaldestination = new Url(unescape(loc.pathname), {});\n  } else if ('string' === type) {\n    finaldestination = new Url(loc, {});\n    for (key in ignore) delete finaldestination[key];\n  } else if ('object' === type) {\n    for (key in loc) {\n      if (key in ignore) continue;\n      finaldestination[key] = loc[key];\n    }\n\n    if (finaldestination.slashes === undefined) {\n      finaldestination.slashes = slashes.test(loc.href);\n    }\n  }\n\n  return finaldestination;\n}\n\n/**\n * Check whether a protocol scheme is special.\n *\n * @param {String} The protocol scheme of the URL\n * @return {Boolean} `true` if the protocol scheme is special, else `false`\n * @private\n */\nfunction isSpecial(scheme) {\n  return (\n    scheme === 'file:' ||\n    scheme === 'ftp:' ||\n    scheme === 'http:' ||\n    scheme === 'https:' ||\n    scheme === 'ws:' ||\n    scheme === 'wss:'\n  );\n}\n\n/**\n * @typedef ProtocolExtract\n * @type Object\n * @property {String} protocol Protocol matched in the URL, in lowercase.\n * @property {Boolean} slashes `true` if protocol is followed by \"//\", else `false`.\n * @property {String} rest Rest of the URL that is not part of the protocol.\n */\n\n/**\n * Extract protocol information from a URL with/without double slash (\"//\").\n *\n * @param {String} address URL we want to extract from.\n * @param {Object} location\n * @return {ProtocolExtract} Extracted information.\n * @private\n */\nfunction extractProtocol(address, location) {\n  address = trimLeft(address);\n  address = address.replace(CRHTLF, '');\n  location = location || {};\n\n  var match = protocolre.exec(address);\n  var protocol = match[1] ? match[1].toLowerCase() : '';\n  var forwardSlashes = !!match[2];\n  var otherSlashes = !!match[3];\n  var slashesCount = 0;\n  var rest;\n\n  if (forwardSlashes) {\n    if (otherSlashes) {\n      rest = match[2] + match[3] + match[4];\n      slashesCount = match[2].length + match[3].length;\n    } else {\n      rest = match[2] + match[4];\n      slashesCount = match[2].length;\n    }\n  } else {\n    if (otherSlashes) {\n      rest = match[3] + match[4];\n      slashesCount = match[3].length;\n    } else {\n      rest = match[4]\n    }\n  }\n\n  if (protocol === 'file:') {\n    if (slashesCount >= 2) {\n      rest = rest.slice(2);\n    }\n  } else if (isSpecial(protocol)) {\n    rest = match[4];\n  } else if (protocol) {\n    if (forwardSlashes) {\n      rest = rest.slice(2);\n    }\n  } else if (slashesCount >= 2 && isSpecial(location.protocol)) {\n    rest = match[4];\n  }\n\n  return {\n    protocol: protocol,\n    slashes: forwardSlashes || isSpecial(protocol),\n    slashesCount: slashesCount,\n    rest: rest\n  };\n}\n\n/**\n * Resolve a relative URL pathname against a base URL pathname.\n *\n * @param {String} relative Pathname of the relative URL.\n * @param {String} base Pathname of the base URL.\n * @return {String} Resolved pathname.\n * @private\n */\nfunction resolve(relative, base) {\n  if (relative === '') return base;\n\n  var path = (base || '/').split('/').slice(0, -1).concat(relative.split('/'))\n    , i = path.length\n    , last = path[i - 1]\n    , unshift = false\n    , up = 0;\n\n  while (i--) {\n    if (path[i] === '.') {\n      path.splice(i, 1);\n    } else if (path[i] === '..') {\n      path.splice(i, 1);\n      up++;\n    } else if (up) {\n      if (i === 0) unshift = true;\n      path.splice(i, 1);\n      up--;\n    }\n  }\n\n  if (unshift) path.unshift('');\n  if (last === '.' || last === '..') path.push('');\n\n  return path.join('/');\n}\n\n/**\n * The actual URL instance. Instead of returning an object we've opted-in to\n * create an actual constructor as it's much more memory efficient and\n * faster and it pleases my OCD.\n *\n * It is worth noting that we should not use `URL` as class name to prevent\n * clashes with the global URL instance that got introduced in browsers.\n *\n * @constructor\n * @param {String} address URL we want to parse.\n * @param {Object|String} [location] Location defaults for relative paths.\n * @param {Boolean|Function} [parser] Parser for the query string.\n * @private\n */\nfunction Url(address, location, parser) {\n  address = trimLeft(address);\n  address = address.replace(CRHTLF, '');\n\n  if (!(this instanceof Url)) {\n    return new Url(address, location, parser);\n  }\n\n  var relative, extracted, parse, instruction, index, key\n    , instructions = rules.slice()\n    , type = typeof location\n    , url = this\n    , i = 0;\n\n  //\n  // The following if statements allows this module two have compatibility with\n  // 2 different API:\n  //\n  // 1. Node.js's `url.parse` api which accepts a URL, boolean as arguments\n  //    where the boolean indicates that the query string should also be parsed.\n  //\n  // 2. The `URL` interface of the browser which accepts a URL, object as\n  //    arguments. The supplied object will be used as default values / fall-back\n  //    for relative paths.\n  //\n  if ('object' !== type && 'string' !== type) {\n    parser = location;\n    location = null;\n  }\n\n  if (parser && 'function' !== typeof parser) parser = qs.parse;\n\n  location = lolcation(location);\n\n  //\n  // Extract protocol information before running the instructions.\n  //\n  extracted = extractProtocol(address || '', location);\n  relative = !extracted.protocol && !extracted.slashes;\n  url.slashes = extracted.slashes || relative && location.slashes;\n  url.protocol = extracted.protocol || location.protocol || '';\n  address = extracted.rest;\n\n  //\n  // When the authority component is absent the URL starts with a path\n  // component.\n  //\n  if (\n    extracted.protocol === 'file:' && (\n      extracted.slashesCount !== 2 || windowsDriveLetter.test(address)) ||\n    (!extracted.slashes &&\n      (extracted.protocol ||\n        extracted.slashesCount < 2 ||\n        !isSpecial(url.protocol)))\n  ) {\n    instructions[3] = [/(.*)/, 'pathname'];\n  }\n\n  for (; i < instructions.length; i++) {\n    instruction = instructions[i];\n\n    if (typeof instruction === 'function') {\n      address = instruction(address, url);\n      continue;\n    }\n\n    parse = instruction[0];\n    key = instruction[1];\n\n    if (parse !== parse) {\n      url[key] = address;\n    } else if ('string' === typeof parse) {\n      index = parse === '@'\n        ? address.lastIndexOf(parse)\n        : address.indexOf(parse);\n\n      if (~index) {\n        if ('number' === typeof instruction[2]) {\n          url[key] = address.slice(0, index);\n          address = address.slice(index + instruction[2]);\n        } else {\n          url[key] = address.slice(index);\n          address = address.slice(0, index);\n        }\n      }\n    } else if ((index = parse.exec(address))) {\n      url[key] = index[1];\n      address = address.slice(0, index.index);\n    }\n\n    url[key] = url[key] || (\n      relative && instruction[3] ? location[key] || '' : ''\n    );\n\n    //\n    // Hostname, host and protocol should be lowercased so they can be used to\n    // create a proper `origin`.\n    //\n    if (instruction[4]) url[key] = url[key].toLowerCase();\n  }\n\n  //\n  // Also parse the supplied query string in to an object. If we're supplied\n  // with a custom parser as function use that instead of the default build-in\n  // parser.\n  //\n  if (parser) url.query = parser(url.query);\n\n  //\n  // If the URL is relative, resolve the pathname against the base URL.\n  //\n  if (\n      relative\n    && location.slashes\n    && url.pathname.charAt(0) !== '/'\n    && (url.pathname !== '' || location.pathname !== '')\n  ) {\n    url.pathname = resolve(url.pathname, location.pathname);\n  }\n\n  //\n  // Default to a / for pathname if none exists. This normalizes the URL\n  // to always have a /\n  //\n  if (url.pathname.charAt(0) !== '/' && isSpecial(url.protocol)) {\n    url.pathname = '/' + url.pathname;\n  }\n\n  //\n  // We should not add port numbers if they are already the default port number\n  // for a given protocol. As the host also contains the port number we're going\n  // override it with the hostname which contains no port number.\n  //\n  if (!required(url.port, url.protocol)) {\n    url.host = url.hostname;\n    url.port = '';\n  }\n\n  //\n  // Parse down the `auth` for the username and password.\n  //\n  url.username = url.password = '';\n\n  if (url.auth) {\n    index = url.auth.indexOf(':');\n\n    if (~index) {\n      url.username = url.auth.slice(0, index);\n      url.username = encodeURIComponent(decodeURIComponent(url.username));\n\n      url.password = url.auth.slice(index + 1);\n      url.password = encodeURIComponent(decodeURIComponent(url.password))\n    } else {\n      url.username = encodeURIComponent(decodeURIComponent(url.auth));\n    }\n\n    url.auth = url.password ? url.username +':'+ url.password : url.username;\n  }\n\n  url.origin = url.protocol !== 'file:' && isSpecial(url.protocol) && url.host\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  //\n  // The href is just the compiled result.\n  //\n  url.href = url.toString();\n}\n\n/**\n * This is convenience method for changing properties in the URL instance to\n * insure that they all propagate correctly.\n *\n * @param {String} part          Property we need to adjust.\n * @param {Mixed} value          The newly assigned value.\n * @param {Boolean|Function} fn  When setting the query, it will be the function\n *                               used to parse the query.\n *                               When setting the protocol, double slash will be\n *                               removed from the final url if it is true.\n * @returns {URL} URL instance for chaining.\n * @public\n */\nfunction set(part, value, fn) {\n  var url = this;\n\n  switch (part) {\n    case 'query':\n      if ('string' === typeof value && value.length) {\n        value = (fn || qs.parse)(value);\n      }\n\n      url[part] = value;\n      break;\n\n    case 'port':\n      url[part] = value;\n\n      if (!required(value, url.protocol)) {\n        url.host = url.hostname;\n        url[part] = '';\n      } else if (value) {\n        url.host = url.hostname +':'+ value;\n      }\n\n      break;\n\n    case 'hostname':\n      url[part] = value;\n\n      if (url.port) value += ':'+ url.port;\n      url.host = value;\n      break;\n\n    case 'host':\n      url[part] = value;\n\n      if (port.test(value)) {\n        value = value.split(':');\n        url.port = value.pop();\n        url.hostname = value.join(':');\n      } else {\n        url.hostname = value;\n        url.port = '';\n      }\n\n      break;\n\n    case 'protocol':\n      url.protocol = value.toLowerCase();\n      url.slashes = !fn;\n      break;\n\n    case 'pathname':\n    case 'hash':\n      if (value) {\n        var char = part === 'pathname' ? '/' : '#';\n        url[part] = value.charAt(0) !== char ? char + value : value;\n      } else {\n        url[part] = value;\n      }\n      break;\n\n    case 'username':\n    case 'password':\n      url[part] = encodeURIComponent(value);\n      break;\n\n    case 'auth':\n      var index = value.indexOf(':');\n\n      if (~index) {\n        url.username = value.slice(0, index);\n        url.username = encodeURIComponent(decodeURIComponent(url.username));\n\n        url.password = value.slice(index + 1);\n        url.password = encodeURIComponent(decodeURIComponent(url.password));\n      } else {\n        url.username = encodeURIComponent(decodeURIComponent(value));\n      }\n  }\n\n  for (var i = 0; i < rules.length; i++) {\n    var ins = rules[i];\n\n    if (ins[4]) url[ins[1]] = url[ins[1]].toLowerCase();\n  }\n\n  url.auth = url.password ? url.username +':'+ url.password : url.username;\n\n  url.origin = url.protocol !== 'file:' && isSpecial(url.protocol) && url.host\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  url.href = url.toString();\n\n  return url;\n}\n\n/**\n * Transform the properties back in to a valid and full URL string.\n *\n * @param {Function} stringify Optional query stringify function.\n * @returns {String} Compiled version of the URL.\n * @public\n */\nfunction toString(stringify) {\n  if (!stringify || 'function' !== typeof stringify) stringify = qs.stringify;\n\n  var query\n    , url = this\n    , host = url.host\n    , protocol = url.protocol;\n\n  if (protocol && protocol.charAt(protocol.length - 1) !== ':') protocol += ':';\n\n  var result =\n    protocol +\n    ((url.protocol && url.slashes) || isSpecial(url.protocol) ? '//' : '');\n\n  if (url.username) {\n    result += url.username;\n    if (url.password) result += ':'+ url.password;\n    result += '@';\n  } else if (url.password) {\n    result += ':'+ url.password;\n    result += '@';\n  } else if (\n    url.protocol !== 'file:' &&\n    isSpecial(url.protocol) &&\n    !host &&\n    url.pathname !== '/'\n  ) {\n    //\n    // Add back the empty userinfo, otherwise the original invalid URL\n    // might be transformed into a valid one with `url.pathname` as host.\n    //\n    result += '@';\n  }\n\n  //\n  // Trailing colon is removed from `url.host` when it is parsed. If it still\n  // ends with a colon, then add back the trailing colon that was removed. This\n  // prevents an invalid URL from being transformed into a valid one.\n  //\n  if (host[host.length - 1] === ':' || (port.test(url.hostname) && !url.port)) {\n    host += ':';\n  }\n\n  result += host + url.pathname;\n\n  query = 'object' === typeof url.query ? stringify(url.query) : url.query;\n  if (query) result += '?' !== query.charAt(0) ? '?'+ query : query;\n\n  if (url.hash) result += url.hash;\n\n  return result;\n}\n\nUrl.prototype = { set: set, toString: toString };\n\n//\n// Expose the URL parser and some additional properties that might be useful for\n// others or testing.\n//\nUrl.extractProtocol = extractProtocol;\nUrl.location = lolcation;\nUrl.trimLeft = trimLeft;\nUrl.qs = qs;\n\nmodule.exports = Url;\n","/**\n * Possible states for the RxStomp\n *\n * Part of `@stomp/rx-stomp`\n */\nexport var RxStompState;\n(function (RxStompState) {\n    RxStompState[RxStompState[\"CONNECTING\"] = 0] = \"CONNECTING\";\n    RxStompState[RxStompState[\"OPEN\"] = 1] = \"OPEN\";\n    RxStompState[RxStompState[\"CLOSING\"] = 2] = \"CLOSING\";\n    RxStompState[RxStompState[\"CLOSED\"] = 3] = \"CLOSED\";\n})(RxStompState = RxStompState || (RxStompState = {}));\n","import { BehaviorSubject, filter, firstValueFrom, Observable, share, Subject, take, } from 'rxjs';\nimport { Client, } from '@stomp/stompjs';\nimport { RxStompState } from './rx-stomp-state.js';\n/**\n * This is the main Stomp Client.\n * Typically, you will create an instance of this to connect to the STOMP broker.\n *\n * This wraps an instance of [@stomp/stompjs]{@link https://github.com/stomp-js/stompjs}\n * {@link Client}.\n *\n * The key difference is that it exposes operations as RxJS Observables.\n * For example, when a STOMP endpoint is subscribed it returns an Observable\n * that will stream all received messages.\n *\n * With exception to beforeConnect, functionality related to all callbacks in\n * [@stomp/stompjs Client]{@link Client}\n * is exposed as Observables/Subjects/BehaviorSubjects.\n *\n * RxStomp also tries to transparently handle connection failures.\n *\n * Part of `@stomp/rx-stomp`\n */\nexport class RxStomp {\n    /**\n     * Instance of actual\n     * [@stomp/stompjs]{@link https://github.com/stomp-js/stompjs}\n     * {@link Client}.\n     *\n     * **Be careful in calling methods on it directly - you may get unintended consequences.**\n     */\n    get stompClient() {\n        return this._stompClient;\n    }\n    /**\n     * Constructor\n     *\n     * @param stompClient optionally inject the\n     * [@stomp/stompjs]{@link https://github.com/stomp-js/stompjs}\n     * {@link Client} to wrap. If this is not provided, a client will\n     * be constructed internally.\n     */\n    constructor(stompClient) {\n        /**\n         * Internal array to hold locally queued messages when STOMP broker is not connected.\n         */\n        this._queuedMessages = [];\n        const client = stompClient ? stompClient : new Client();\n        this._stompClient = client;\n        const noOp = () => { };\n        // Before connect is no op by default\n        this._beforeConnect = noOp;\n        // Correlate errors is falsey op by default\n        this._correlateErrors = () => undefined;\n        // debug is no-op by default\n        this._debug = noOp;\n        // Initial state is CLOSED\n        this._connectionStatePre$ = new BehaviorSubject(RxStompState.CLOSED);\n        this._connectedPre$ = this._connectionStatePre$.pipe(filter((currentState) => {\n            return currentState === RxStompState.OPEN;\n        }));\n        // Initial state is CLOSED\n        this.connectionState$ = new BehaviorSubject(RxStompState.CLOSED);\n        this.connected$ = this.connectionState$.pipe(filter((currentState) => {\n            return currentState === RxStompState.OPEN;\n        }));\n        // Setup sending queuedMessages\n        this.connected$.subscribe(() => {\n            this._sendQueuedMessages();\n        });\n        this._serverHeadersBehaviourSubject$ =\n            new BehaviorSubject(null);\n        this.serverHeaders$ = this._serverHeadersBehaviourSubject$.pipe(filter((headers) => {\n            return headers !== null;\n        }));\n        this.stompErrors$ = new Subject();\n        this.unhandledMessage$ = new Subject();\n        this.unhandledReceipts$ = new Subject();\n        this.unhandledFrame$ = new Subject();\n        this.webSocketErrors$ = new Subject();\n    }\n    /**\n     * Set configuration. This method may be called multiple times.\n     * Each call will add to the existing configuration.\n     *\n     * Example:\n     *\n     * ```javascript\n     *        const rxStomp = new RxStomp();\n     *        rxStomp.configure({\n     *          brokerURL: 'ws://127.0.0.1:15674/ws',\n     *          connectHeaders: {\n     *            login: 'guest',\n     *            passcode: 'guest'\n     *          },\n     *          heartbeatIncoming: 0,\n     *          heartbeatOutgoing: 20000,\n     *          reconnectDelay: 200,\n     *          debug: (msg: string): void => {\n     *            console.log(new Date(), msg);\n     *          }\n     *        });\n     *        rxStomp.activate();\n     * ```\n     *\n     * Maps to: [Client#configure]{@link Client#configure}\n     */\n    configure(rxStompConfig) {\n        const stompConfig = Object.assign({}, rxStompConfig);\n        if (stompConfig.beforeConnect) {\n            this._beforeConnect = stompConfig.beforeConnect;\n            delete stompConfig.beforeConnect;\n        }\n        if (stompConfig.correlateErrors) {\n            this._correlateErrors = stompConfig.correlateErrors;\n            delete stompConfig.correlateErrors;\n        }\n        // RxStompConfig has subset of StompConfig fields\n        this._stompClient.configure(stompConfig);\n        if (stompConfig.debug) {\n            this._debug = stompConfig.debug;\n        }\n    }\n    /**\n     * Initiate the connection with the broker.\n     * If the connection breaks, as per [RxStompConfig#reconnectDelay]{@link RxStompConfig#reconnectDelay},\n     * it will keep trying to reconnect.\n     *\n     * Call [RxStomp#deactivate]{@link RxStomp#deactivate} to disconnect and stop reconnection attempts.\n     *\n     * Maps to: [Client#activate]{@link Client#activate}\n     */\n    activate() {\n        this._stompClient.configure({\n            beforeConnect: async () => {\n                this._changeState(RxStompState.CONNECTING);\n                // Call handler\n                await this._beforeConnect(this);\n            },\n            onConnect: (frame) => {\n                this._serverHeadersBehaviourSubject$.next(frame.headers);\n                // Indicate our connected state to observers\n                this._changeState(RxStompState.OPEN);\n            },\n            onStompError: (frame) => {\n                // Trigger the frame subject\n                this.stompErrors$.next(frame);\n            },\n            onWebSocketClose: () => {\n                this._changeState(RxStompState.CLOSED);\n            },\n            onUnhandledMessage: (message) => {\n                this.unhandledMessage$.next(message);\n            },\n            onUnhandledReceipt: (frame) => {\n                this.unhandledReceipts$.next(frame);\n            },\n            onUnhandledFrame: (frame) => {\n                this.unhandledFrame$.next(frame);\n            },\n            onWebSocketError: (evt) => {\n                this.webSocketErrors$.next(evt);\n            },\n        });\n        // Attempt connection\n        this._stompClient.activate();\n    }\n    /**\n     * Disconnect if connected and stop auto reconnect loop.\n     * Appropriate callbacks will be invoked if the underlying STOMP connection was connected.\n     *\n     * To reactivate, you can call [RxStomp#activate]{@link RxStomp#activate}.\n     *\n     * This call is async. It will resolve immediately if there is no underlying active websocket,\n     * otherwise, it will resolve after the underlying websocket is properly disposed of.\n     *\n     * Experimental: Since version 2.0.0, pass `force: true` to immediately discard the underlying connection.\n     * See [Client#deactivate]{@link Client#deactivate} for details.\n     *\n     * Maps to: [Client#deactivate]{@link Client#deactivate}\n     */\n    async deactivate(options = {}) {\n        this._changeState(RxStompState.CLOSING);\n        // The promise will be resolved immediately if there is no active connection\n        // otherwise, after it has successfully disconnected.\n        await this._stompClient.deactivate(options);\n        this._changeState(RxStompState.CLOSED);\n    }\n    /**\n     * It will return `true` if STOMP broker is connected and `false` otherwise.\n     */\n    connected() {\n        return this.connectionState$.getValue() === RxStompState.OPEN;\n    }\n    /**\n     * If the client is active (connected or going to reconnect).\n     *\n     *  Maps to: [Client#active]{@link Client#active}\n     */\n    get active() {\n        return this.stompClient.active;\n    }\n    /**\n     * Send a message to a named destination. Refer to your STOMP broker documentation for types\n     * and naming of destinations.\n     *\n     * STOMP protocol specifies and suggests some headers and also allows broker-specific headers.\n     *\n     * `body` must be String.\n     * You will need to covert the payload to string in case it is not string (e.g. JSON).\n     *\n     * To send a binary message body, use binaryBody parameter. It should be a\n     * [Uint8Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array).\n     * Sometimes brokers may not support binary frames out of the box.\n     * Please check your broker documentation.\n     *\n     * The ` content-length` header is automatically added to the STOMP Frame sent to the broker.\n     * Set `skipContentLengthHeader` to indicate that `content-length` header should not be added.\n     * For binary messages, `content-length` header is always added.\n     *\n     * Caution: The broker will, most likely, report an error and disconnect if the message body has NULL octet(s)\n     * and `content-length` header is missing.\n     *\n     * The message will get locally queued if the STOMP broker is not connected. It will attempt to\n     * publish queued messages as soon as the broker gets connected.\n     * If you do not want that behavior,\n     * please set [retryIfDisconnected]{@link IRxStompPublishParams#retryIfDisconnected} to `false`\n     * in the parameters.\n     * When `false`, this function will raise an error if a message could not be sent immediately.\n     *\n     * Maps to: [Client#publish]{@link Client#publish}\n     *\n     * See: {@link IRxStompPublishParams} and {@link IPublishParams}\n     *\n     * ```javascript\n     *        rxStomp.publish({destination: \"/queue/test\", headers: {priority: 9}, body: \"Hello, STOMP\"});\n     *\n     *        // Only destination is mandatory parameter\n     *        rxStomp.publish({destination: \"/queue/test\", body: \"Hello, STOMP\"});\n     *\n     *        // Skip content-length header in the frame to the broker\n     *        rxStomp.publish({\"/queue/test\", body: \"Hello, STOMP\", skipContentLengthHeader: true});\n     *\n     *        var binaryData = generateBinaryData(); // This need to be of type Uint8Array\n     *        // setting content-type header is not mandatory, however a good practice\n     *        rxStomp.publish({destination: '/topic/special', binaryBody: binaryData,\n     *                         headers: {'content-type': 'application/octet-stream'}});\n     * ```\n     */\n    publish(parameters) {\n        // retry behaviour is defaulted to true\n        const shouldRetry = parameters.retryIfDisconnected == null\n            ? true\n            : parameters.retryIfDisconnected;\n        if (this.connected()) {\n            this._stompClient.publish(parameters);\n        }\n        else if (shouldRetry) {\n            this._debug(`Not connected, queueing`);\n            this._queuedMessages.push(parameters);\n        }\n        else {\n            throw new Error('Cannot publish while broker is not connected');\n        }\n    }\n    /** It will send queued messages. */\n    _sendQueuedMessages() {\n        const queuedMessages = this._queuedMessages;\n        this._queuedMessages = [];\n        if (queuedMessages.length === 0) {\n            return;\n        }\n        this._debug(`Will try sending  ${queuedMessages.length} queued message(s)`);\n        for (const queuedMessage of queuedMessages) {\n            this._debug(`Attempting to send ${queuedMessage}`);\n            this.publish(queuedMessage);\n        }\n    }\n    watch(opts, headers = {}) {\n        const defaults = {\n            subHeaders: {},\n            unsubHeaders: {},\n            subscribeOnlyOnce: false,\n        };\n        let params;\n        if (typeof opts === 'string') {\n            params = Object.assign({}, defaults, {\n                destination: opts,\n                subHeaders: headers,\n            });\n        }\n        else {\n            params = Object.assign({}, defaults, opts);\n        }\n        /* Well, the logic is complicated but works beautifully. RxJS is indeed wonderful.\n         *\n         * We need to activate the underlying subscription immediately if Stomp is connected. If not, it should\n         * subscribe when it gets next connected. Further, it should re-establish the subscription whenever Stomp\n         * successfully reconnects.\n         *\n         * Actual implementation is simple, we filter the BehaviourSubject 'state' so that we can trigger whenever Stomp is\n         * connected. Since 'state' is a BehaviourSubject, if Stomp is already connected, it will immediately trigger.\n         *\n         * The observable that we return to the caller remains the same across all reconnects, so no special handling needed at\n         * the message subscriber.\n         */\n        this._debug(`Request to subscribe ${params.destination}`);\n        const coldObservable = Observable.create((messages) => {\n            /*\n             * These variables will be used as part of the closure and work their magic during unsubscribe\n             */\n            let stompSubscription; // Stomp\n            let stompConnectedSubscription; // RxJS\n            let connectedPre$ = this._connectedPre$;\n            if (params.subscribeOnlyOnce) {\n                connectedPre$ = connectedPre$.pipe(take(1));\n            }\n            const stompErrorsSubscription = this.stompErrors$.subscribe((error) => {\n                const correlatedDestination = this._correlateErrors(error);\n                if (correlatedDestination === params.destination) {\n                    messages.error(error);\n                }\n            });\n            stompConnectedSubscription = connectedPre$.subscribe(() => {\n                this._debug(`Will subscribe to ${params.destination}`);\n                let subHeaders = params.subHeaders;\n                if (typeof subHeaders === 'function') {\n                    subHeaders = subHeaders();\n                }\n                stompSubscription = this._stompClient.subscribe(params.destination, (message) => {\n                    messages.next(message);\n                }, subHeaders);\n            });\n            return () => {\n                /* cleanup function, it will be called when no subscribers are left */\n                this._debug(`Stop watching connection state (for ${params.destination})`);\n                stompConnectedSubscription.unsubscribe();\n                stompErrorsSubscription.unsubscribe();\n                if (this.connected()) {\n                    this._debug(`Will unsubscribe from ${params.destination} at Stomp`);\n                    let unsubHeaders = params.unsubHeaders;\n                    if (typeof unsubHeaders === 'function') {\n                        unsubHeaders = unsubHeaders();\n                    }\n                    stompSubscription.unsubscribe(unsubHeaders);\n                }\n                else {\n                    this._debug(`Stomp not connected, no need to unsubscribe from ${params.destination} at Stomp`);\n                }\n            };\n        });\n        /**\n         * Important - convert it to hot Observable - otherwise, if the user code subscribes\n         * to this observable twice, it will subscribe twice to Stomp broker. (This was happening in the current example).\n         * A long but good explanatory article at https://medium.com/@benlesh/hot-vs-cold-observables-f8094ed53339\n         */\n        return coldObservable.pipe(share());\n    }\n    /**\n     * **Deprecated** Please use {@link asyncReceipt}.\n     */\n    watchForReceipt(receiptId, callback) {\n        this._stompClient.watchForReceipt(receiptId, callback);\n    }\n    /**\n     * STOMP brokers may carry out operation asynchronously and allow requesting for acknowledgement.\n     * To request an acknowledgement, a `receipt` header needs to be sent with the actual request.\n     * The value (say receipt-id) for this header needs to be unique for each use. Typically, a sequence, a UUID, a\n     * random number or a combination may be used.\n     *\n     * A complaint broker will send a RECEIPT frame when an operation has actually been completed.\n     * The operation needs to be matched based on the value of the receipt-id.\n     *\n     * This method allows watching for a receipt and invoking the callback\n     * when the corresponding receipt has been received.\n     *\n     * The promise will yield the actual {@link IFrame}.\n     *\n     * Example:\n     * ```javascript\n     *        // Publishing with acknowledgement\n     *        let receiptId = randomText();\n     *\n     *        rxStomp.publish({destination: '/topic/special', headers: {receipt: receiptId}, body: msg});\n     *        await rxStomp.asyncReceipt(receiptId);; // it yields the actual Frame\n     * ```\n     *\n     * Maps to: [Client#watchForReceipt]{@link Client#watchForReceipt}\n     */\n    asyncReceipt(receiptId) {\n        return firstValueFrom(this.unhandledReceipts$.pipe(filter(frame => frame.headers['receipt-id'] === receiptId)));\n    }\n    _changeState(state) {\n        this._connectionStatePre$.next(state);\n        this.connectionState$.next(state);\n    }\n}\n","/**\n * @internal\n */\nexport function augmentWebsocket(webSocket, debug) {\n    webSocket.terminate = function () {\n        const noOp = () => { };\n        // set all callbacks to no op\n        this.onerror = noOp;\n        this.onmessage = noOp;\n        this.onopen = noOp;\n        const ts = new Date();\n        const id = Math.random().toString().substring(2, 8); // A simulated id\n        const origOnClose = this.onclose;\n        // Track delay in actual closure of the socket\n        this.onclose = closeEvent => {\n            const delay = new Date().getTime() - ts.getTime();\n            debug(`Discarded socket (#${id})  closed after ${delay}ms, with code/reason: ${closeEvent.code}/${closeEvent.reason}`);\n        };\n        this.close();\n        origOnClose?.call(webSocket, {\n            code: 4001,\n            reason: `Quick discarding socket (#${id}) without waiting for the shutdown sequence.`,\n            wasClean: false,\n        });\n    };\n}\n","/**\n * Some byte values, used as per STOMP specifications.\n *\n * Part of `@stomp/stompjs`.\n *\n * @internal\n */\nexport const BYTE = {\n    // LINEFEED byte (octet 10)\n    LF: '\\x0A',\n    // NULL byte (octet 0)\n    NULL: '\\x00',\n};\n","import { StompHandler } from './stomp-handler.js';\nimport { ActivationState, StompSocketState, } from './types.js';\nimport { Versions } from './versions.js';\n/**\n * STOMP Client Class.\n *\n * Part of `@stomp/stompjs`.\n */\nexport class Client {\n    /**\n     * Create an instance.\n     */\n    constructor(conf = {}) {\n        /**\n         * STOMP versions to attempt during STOMP handshake. By default, versions `1.2`, `1.1`, and `1.0` are attempted.\n         *\n         * Example:\n         * ```javascript\n         *        // Try only versions 1.1 and 1.0\n         *        client.stompVersions = new Versions(['1.1', '1.0'])\n         * ```\n         */\n        this.stompVersions = Versions.default;\n        /**\n         * Will retry if Stomp connection is not established in specified milliseconds.\n         * Default 0, which switches off automatic reconnection.\n         */\n        this.connectionTimeout = 0;\n        /**\n         *  automatically reconnect with delay in milliseconds, set to 0 to disable.\n         */\n        this.reconnectDelay = 5000;\n        /**\n         * Incoming heartbeat interval in milliseconds. Set to 0 to disable.\n         */\n        this.heartbeatIncoming = 10000;\n        /**\n         * Outgoing heartbeat interval in milliseconds. Set to 0 to disable.\n         */\n        this.heartbeatOutgoing = 10000;\n        /**\n         * This switches on a non-standard behavior while sending WebSocket packets.\n         * It splits larger (text) packets into chunks of [maxWebSocketChunkSize]{@link Client#maxWebSocketChunkSize}.\n         * Only Java Spring brokers seem to support this mode.\n         *\n         * WebSockets, by itself, split large (text) packets,\n         * so it is not needed with a truly compliant STOMP/WebSocket broker.\n         * Setting it for such a broker will cause large messages to fail.\n         *\n         * `false` by default.\n         *\n         * Binary frames are never split.\n         */\n        this.splitLargeFrames = false;\n        /**\n         * See [splitLargeFrames]{@link Client#splitLargeFrames}.\n         * This has no effect if [splitLargeFrames]{@link Client#splitLargeFrames} is `false`.\n         */\n        this.maxWebSocketChunkSize = 8 * 1024;\n        /**\n         * Usually the\n         * [type of WebSocket frame]{@link https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send#Parameters}\n         * is automatically decided by type of the payload.\n         * Default is `false`, which should work with all compliant brokers.\n         *\n         * Set this flag to force binary frames.\n         */\n        this.forceBinaryWSFrames = false;\n        /**\n         * A bug in ReactNative chops a string on occurrence of a NULL.\n         * See issue [https://github.com/stomp-js/stompjs/issues/89]{@link https://github.com/stomp-js/stompjs/issues/89}.\n         * This makes incoming WebSocket messages invalid STOMP packets.\n         * Setting this flag attempts to reverse the damage by appending a NULL.\n         * If the broker splits a large message into multiple WebSocket messages,\n         * this flag will cause data loss and abnormal termination of connection.\n         *\n         * This is not an ideal solution, but a stop gap until the underlying issue is fixed at ReactNative library.\n         */\n        this.appendMissingNULLonIncoming = false;\n        /**\n         * Browsers do not immediately close WebSockets when `.close` is issued.\n         * This may cause reconnection to take a significantly long time in case\n         *  of some types of failures.\n         * In case of incoming heartbeat failure, this experimental flag instructs\n         * the library to discard the socket immediately\n         * (even before it is actually closed).\n         */\n        this.discardWebsocketOnCommFailure = false;\n        /**\n         * Activation state.\n         *\n         * It will usually be ACTIVE or INACTIVE.\n         * When deactivating, it may go from ACTIVE to INACTIVE without entering DEACTIVATING.\n         */\n        this.state = ActivationState.INACTIVE;\n        // No op callbacks\n        const noOp = () => { };\n        this.debug = noOp;\n        this.beforeConnect = noOp;\n        this.onConnect = noOp;\n        this.onDisconnect = noOp;\n        this.onUnhandledMessage = noOp;\n        this.onUnhandledReceipt = noOp;\n        this.onUnhandledFrame = noOp;\n        this.onStompError = noOp;\n        this.onWebSocketClose = noOp;\n        this.onWebSocketError = noOp;\n        this.logRawCommunication = false;\n        this.onChangeState = noOp;\n        // These parameters would typically get proper values before connect is called\n        this.connectHeaders = {};\n        this._disconnectHeaders = {};\n        // Apply configuration\n        this.configure(conf);\n    }\n    /**\n     * Underlying WebSocket instance, READONLY.\n     */\n    get webSocket() {\n        return this._stompHandler?._webSocket;\n    }\n    /**\n     * Disconnection headers.\n     */\n    get disconnectHeaders() {\n        return this._disconnectHeaders;\n    }\n    set disconnectHeaders(value) {\n        this._disconnectHeaders = value;\n        if (this._stompHandler) {\n            this._stompHandler.disconnectHeaders = this._disconnectHeaders;\n        }\n    }\n    /**\n     * `true` if there is an active connection to STOMP Broker\n     */\n    get connected() {\n        return !!this._stompHandler && this._stompHandler.connected;\n    }\n    /**\n     * version of STOMP protocol negotiated with the server, READONLY\n     */\n    get connectedVersion() {\n        return this._stompHandler ? this._stompHandler.connectedVersion : undefined;\n    }\n    /**\n     * if the client is active (connected or going to reconnect)\n     */\n    get active() {\n        return this.state === ActivationState.ACTIVE;\n    }\n    _changeState(state) {\n        this.state = state;\n        this.onChangeState(state);\n    }\n    /**\n     * Update configuration.\n     */\n    configure(conf) {\n        // bulk assign all properties to this\n        Object.assign(this, conf);\n    }\n    /**\n     * Initiate the connection with the broker.\n     * If the connection breaks, as per [Client#reconnectDelay]{@link Client#reconnectDelay},\n     * it will keep trying to reconnect.\n     *\n     * Call [Client#deactivate]{@link Client#deactivate} to disconnect and stop reconnection attempts.\n     */\n    activate() {\n        const _activate = () => {\n            if (this.active) {\n                this.debug('Already ACTIVE, ignoring request to activate');\n                return;\n            }\n            this._changeState(ActivationState.ACTIVE);\n            this._connect();\n        };\n        // if it is deactivating, wait for it to complete before activating.\n        if (this.state === ActivationState.DEACTIVATING) {\n            this.debug('Waiting for deactivation to finish before activating');\n            this.deactivate().then(() => {\n                _activate();\n            });\n        }\n        else {\n            _activate();\n        }\n    }\n    async _connect() {\n        await this.beforeConnect();\n        if (this._stompHandler) {\n            this.debug('There is already a stompHandler, skipping the call to connect');\n            return;\n        }\n        if (!this.active) {\n            this.debug('Client has been marked inactive, will not attempt to connect');\n            return;\n        }\n        // setup connection watcher\n        if (this.connectionTimeout > 0) {\n            // clear first\n            if (this._connectionWatcher) {\n                clearTimeout(this._connectionWatcher);\n            }\n            this._connectionWatcher = setTimeout(() => {\n                if (this.connected) {\n                    return;\n                }\n                // Connection not established, close the underlying socket\n                // a reconnection will be attempted\n                this.debug(`Connection not established in ${this.connectionTimeout}ms, closing socket`);\n                this.forceDisconnect();\n            }, this.connectionTimeout);\n        }\n        this.debug('Opening Web Socket...');\n        // Get the actual WebSocket (or a similar object)\n        const webSocket = this._createWebSocket();\n        this._stompHandler = new StompHandler(this, webSocket, {\n            debug: this.debug,\n            stompVersions: this.stompVersions,\n            connectHeaders: this.connectHeaders,\n            disconnectHeaders: this._disconnectHeaders,\n            heartbeatIncoming: this.heartbeatIncoming,\n            heartbeatOutgoing: this.heartbeatOutgoing,\n            splitLargeFrames: this.splitLargeFrames,\n            maxWebSocketChunkSize: this.maxWebSocketChunkSize,\n            forceBinaryWSFrames: this.forceBinaryWSFrames,\n            logRawCommunication: this.logRawCommunication,\n            appendMissingNULLonIncoming: this.appendMissingNULLonIncoming,\n            discardWebsocketOnCommFailure: this.discardWebsocketOnCommFailure,\n            onConnect: frame => {\n                // Successfully connected, stop the connection watcher\n                if (this._connectionWatcher) {\n                    clearTimeout(this._connectionWatcher);\n                    this._connectionWatcher = undefined;\n                }\n                if (!this.active) {\n                    this.debug('STOMP got connected while deactivate was issued, will disconnect now');\n                    this._disposeStompHandler();\n                    return;\n                }\n                this.onConnect(frame);\n            },\n            onDisconnect: frame => {\n                this.onDisconnect(frame);\n            },\n            onStompError: frame => {\n                this.onStompError(frame);\n            },\n            onWebSocketClose: evt => {\n                this._stompHandler = undefined; // a new one will be created in case of a reconnect\n                if (this.state === ActivationState.DEACTIVATING) {\n                    // Mark deactivation complete\n                    this._changeState(ActivationState.INACTIVE);\n                }\n                // The callback is called before attempting to reconnect, this would allow the client\n                // to be `deactivated` in the callback.\n                this.onWebSocketClose(evt);\n                if (this.active) {\n                    this._schedule_reconnect();\n                }\n            },\n            onWebSocketError: evt => {\n                this.onWebSocketError(evt);\n            },\n            onUnhandledMessage: message => {\n                this.onUnhandledMessage(message);\n            },\n            onUnhandledReceipt: frame => {\n                this.onUnhandledReceipt(frame);\n            },\n            onUnhandledFrame: frame => {\n                this.onUnhandledFrame(frame);\n            },\n        });\n        this._stompHandler.start();\n    }\n    _createWebSocket() {\n        let webSocket;\n        if (this.webSocketFactory) {\n            webSocket = this.webSocketFactory();\n        }\n        else if (this.brokerURL) {\n            webSocket = new WebSocket(this.brokerURL, this.stompVersions.protocolVersions());\n        }\n        else {\n            throw new Error('Either brokerURL or webSocketFactory must be provided');\n        }\n        webSocket.binaryType = 'arraybuffer';\n        return webSocket;\n    }\n    _schedule_reconnect() {\n        if (this.reconnectDelay > 0) {\n            this.debug(`STOMP: scheduling reconnection in ${this.reconnectDelay}ms`);\n            this._reconnector = setTimeout(() => {\n                this._connect();\n            }, this.reconnectDelay);\n        }\n    }\n    /**\n     * Disconnect if connected and stop auto reconnect loop.\n     * Appropriate callbacks will be invoked if there is an underlying STOMP connection.\n     *\n     * This call is async. It will resolve immediately if there is no underlying active websocket,\n     * otherwise, it will resolve after the underlying websocket is properly disposed of.\n     *\n     * It is not an error to invoke this method more than once.\n     * Each of those would resolve on completion of deactivation.\n     *\n     * To reactivate, you can call [Client#activate]{@link Client#activate}.\n     *\n     * Experimental: pass `force: true` to immediately discard the underlying connection.\n     * This mode will skip both the STOMP and the Websocket shutdown sequences.\n     * In some cases, browsers take a long time in the Websocket shutdown\n     * if the underlying connection had gone stale.\n     * Using this mode can speed up.\n     * When this mode is used, the actual Websocket may linger for a while\n     * and the broker may not realize that the connection is no longer in use.\n     *\n     * It is possible to invoke this method initially without the `force` option\n     * and subsequently, say after a wait, with the `force` option.\n     */\n    async deactivate(options = {}) {\n        const force = options.force || false;\n        const needToDispose = this.active;\n        let retPromise;\n        if (this.state === ActivationState.INACTIVE) {\n            this.debug(`Already INACTIVE, nothing more to do`);\n            return Promise.resolve();\n        }\n        this._changeState(ActivationState.DEACTIVATING);\n        // Clear if a reconnection was scheduled\n        if (this._reconnector) {\n            clearTimeout(this._reconnector);\n            this._reconnector = undefined;\n        }\n        if (this._stompHandler &&\n            // @ts-ignore - if there is a _stompHandler, there is the webSocket\n            this.webSocket.readyState !== StompSocketState.CLOSED) {\n            const origOnWebSocketClose = this._stompHandler.onWebSocketClose;\n            // we need to wait for the underlying websocket to close\n            retPromise = new Promise((resolve, reject) => {\n                // @ts-ignore - there is a _stompHandler\n                this._stompHandler.onWebSocketClose = evt => {\n                    origOnWebSocketClose(evt);\n                    resolve();\n                };\n            });\n        }\n        else {\n            // indicate that auto reconnect loop should terminate\n            this._changeState(ActivationState.INACTIVE);\n            return Promise.resolve();\n        }\n        if (force) {\n            this._stompHandler?.discardWebsocket();\n        }\n        else if (needToDispose) {\n            this._disposeStompHandler();\n        }\n        return retPromise;\n    }\n    /**\n     * Force disconnect if there is an active connection by directly closing the underlying WebSocket.\n     * This is different from a normal disconnect where a DISCONNECT sequence is carried out with the broker.\n     * After forcing disconnect, automatic reconnect will be attempted.\n     * To stop further reconnects call [Client#deactivate]{@link Client#deactivate} as well.\n     */\n    forceDisconnect() {\n        if (this._stompHandler) {\n            this._stompHandler.forceDisconnect();\n        }\n    }\n    _disposeStompHandler() {\n        // Dispose STOMP Handler\n        if (this._stompHandler) {\n            this._stompHandler.dispose();\n        }\n    }\n    /**\n     * Send a message to a named destination. Refer to your STOMP broker documentation for types\n     * and naming of destinations.\n     *\n     * STOMP protocol specifies and suggests some headers and also allows broker-specific headers.\n     *\n     * `body` must be String.\n     * You will need to covert the payload to string in case it is not string (e.g. JSON).\n     *\n     * To send a binary message body, use `binaryBody` parameter. It should be a\n     * [Uint8Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array).\n     * Sometimes brokers may not support binary frames out of the box.\n     * Please check your broker documentation.\n     *\n     * `content-length` header is automatically added to the STOMP Frame sent to the broker.\n     * Set `skipContentLengthHeader` to indicate that `content-length` header should not be added.\n     * For binary messages, `content-length` header is always added.\n     *\n     * Caution: The broker will, most likely, report an error and disconnect\n     * if the message body has NULL octet(s) and `content-length` header is missing.\n     *\n     * ```javascript\n     *        client.publish({destination: \"/queue/test\", headers: {priority: 9}, body: \"Hello, STOMP\"});\n     *\n     *        // Only destination is mandatory parameter\n     *        client.publish({destination: \"/queue/test\", body: \"Hello, STOMP\"});\n     *\n     *        // Skip content-length header in the frame to the broker\n     *        client.publish({\"/queue/test\", body: \"Hello, STOMP\", skipContentLengthHeader: true});\n     *\n     *        var binaryData = generateBinaryData(); // This need to be of type Uint8Array\n     *        // setting content-type header is not mandatory, however a good practice\n     *        client.publish({destination: '/topic/special', binaryBody: binaryData,\n     *                         headers: {'content-type': 'application/octet-stream'}});\n     * ```\n     */\n    publish(params) {\n        this._checkConnection();\n        // @ts-ignore - we already checked that there is a _stompHandler, and it is connected\n        this._stompHandler.publish(params);\n    }\n    _checkConnection() {\n        if (!this.connected) {\n            throw new TypeError('There is no underlying STOMP connection');\n        }\n    }\n    /**\n     * STOMP brokers may carry out operation asynchronously and allow requesting for acknowledgement.\n     * To request an acknowledgement, a `receipt` header needs to be sent with the actual request.\n     * The value (say receipt-id) for this header needs to be unique for each use.\n     * Typically, a sequence, a UUID, a random number or a combination may be used.\n     *\n     * A complaint broker will send a RECEIPT frame when an operation has actually been completed.\n     * The operation needs to be matched based on the value of the receipt-id.\n     *\n     * This method allows watching for a receipt and invoking the callback\n     *  when the corresponding receipt has been received.\n     *\n     * The actual {@link IFrame} will be passed as parameter to the callback.\n     *\n     * Example:\n     * ```javascript\n     *        // Subscribing with acknowledgement\n     *        let receiptId = randomText();\n     *\n     *        client.watchForReceipt(receiptId, function() {\n     *          // Will be called after server acknowledges\n     *        });\n     *\n     *        client.subscribe(TEST.destination, onMessage, {receipt: receiptId});\n     *\n     *\n     *        // Publishing with acknowledgement\n     *        receiptId = randomText();\n     *\n     *        client.watchForReceipt(receiptId, function() {\n     *          // Will be called after server acknowledges\n     *        });\n     *        client.publish({destination: TEST.destination, headers: {receipt: receiptId}, body: msg});\n     * ```\n     */\n    watchForReceipt(receiptId, callback) {\n        this._checkConnection();\n        // @ts-ignore - we already checked that there is a _stompHandler, and it is connected\n        this._stompHandler.watchForReceipt(receiptId, callback);\n    }\n    /**\n     * Subscribe to a STOMP Broker location. The callback will be invoked for each\n     * received message with the {@link IMessage} as argument.\n     *\n     * Note: The library will generate a unique ID if there is none provided in the headers.\n     *       To use your own ID, pass it using the `headers` argument.\n     *\n     * ```javascript\n     *        callback = function(message) {\n     *        // called when the client receives a STOMP message from the server\n     *          if (message.body) {\n     *            alert(\"got message with body \" + message.body)\n     *          } else {\n     *            alert(\"got empty message\");\n     *          }\n     *        });\n     *\n     *        var subscription = client.subscribe(\"/queue/test\", callback);\n     *\n     *        // Explicit subscription id\n     *        var mySubId = 'my-subscription-id-001';\n     *        var subscription = client.subscribe(destination, callback, { id: mySubId });\n     * ```\n     */\n    subscribe(destination, callback, headers = {}) {\n        this._checkConnection();\n        // @ts-ignore - we already checked that there is a _stompHandler, and it is connected\n        return this._stompHandler.subscribe(destination, callback, headers);\n    }\n    /**\n     * It is preferable to unsubscribe from a subscription by calling\n     * `unsubscribe()` directly on {@link StompSubscription} returned by `client.subscribe()`:\n     *\n     * ```javascript\n     *        var subscription = client.subscribe(destination, onmessage);\n     *        // ...\n     *        subscription.unsubscribe();\n     * ```\n     *\n     * See: https://stomp.github.com/stomp-specification-1.2.html#UNSUBSCRIBE UNSUBSCRIBE Frame\n     */\n    unsubscribe(id, headers = {}) {\n        this._checkConnection();\n        // @ts-ignore - we already checked that there is a _stompHandler, and it is connected\n        this._stompHandler.unsubscribe(id, headers);\n    }\n    /**\n     * Start a transaction, the returned {@link ITransaction} has methods - [commit]{@link ITransaction#commit}\n     * and [abort]{@link ITransaction#abort}.\n     *\n     * `transactionId` is optional, if not passed the library will generate it internally.\n     */\n    begin(transactionId) {\n        this._checkConnection();\n        // @ts-ignore - we already checked that there is a _stompHandler, and it is connected\n        return this._stompHandler.begin(transactionId);\n    }\n    /**\n     * Commit a transaction.\n     *\n     * It is preferable to commit a transaction by calling [commit]{@link ITransaction#commit} directly on\n     * {@link ITransaction} returned by [client.begin]{@link Client#begin}.\n     *\n     * ```javascript\n     *        var tx = client.begin(txId);\n     *        //...\n     *        tx.commit();\n     * ```\n     */\n    commit(transactionId) {\n        this._checkConnection();\n        // @ts-ignore - we already checked that there is a _stompHandler, and it is connected\n        this._stompHandler.commit(transactionId);\n    }\n    /**\n     * Abort a transaction.\n     * It is preferable to abort a transaction by calling [abort]{@link ITransaction#abort} directly on\n     * {@link ITransaction} returned by [client.begin]{@link Client#begin}.\n     *\n     * ```javascript\n     *        var tx = client.begin(txId);\n     *        //...\n     *        tx.abort();\n     * ```\n     */\n    abort(transactionId) {\n        this._checkConnection();\n        // @ts-ignore - we already checked that there is a _stompHandler, and it is connected\n        this._stompHandler.abort(transactionId);\n    }\n    /**\n     * ACK a message. It is preferable to acknowledge a message by calling [ack]{@link IMessage#ack} directly\n     * on the {@link IMessage} handled by a subscription callback:\n     *\n     * ```javascript\n     *        var callback = function (message) {\n     *          // process the message\n     *          // acknowledge it\n     *          message.ack();\n     *        };\n     *        client.subscribe(destination, callback, {'ack': 'client'});\n     * ```\n     */\n    ack(messageId, subscriptionId, headers = {}) {\n        this._checkConnection();\n        // @ts-ignore - we already checked that there is a _stompHandler, and it is connected\n        this._stompHandler.ack(messageId, subscriptionId, headers);\n    }\n    /**\n     * NACK a message. It is preferable to acknowledge a message by calling [nack]{@link IMessage#nack} directly\n     * on the {@link IMessage} handled by a subscription callback:\n     *\n     * ```javascript\n     *        var callback = function (message) {\n     *          // process the message\n     *          // an error occurs, nack it\n     *          message.nack();\n     *        };\n     *        client.subscribe(destination, callback, {'ack': 'client'});\n     * ```\n     */\n    nack(messageId, subscriptionId, headers = {}) {\n        this._checkConnection();\n        // @ts-ignore - we already checked that there is a _stompHandler, and it is connected\n        this._stompHandler.nack(messageId, subscriptionId, headers);\n    }\n}\n","import { BYTE } from './byte.js';\n/**\n * Frame class represents a STOMP frame.\n *\n * @internal\n */\nexport class FrameImpl {\n    /**\n     * Frame constructor. `command`, `headers` and `body` are available as properties.\n     *\n     * @internal\n     */\n    constructor(params) {\n        const { command, headers, body, binaryBody, escapeHeaderValues, skipContentLengthHeader, } = params;\n        this.command = command;\n        this.headers = Object.assign({}, headers || {});\n        if (binaryBody) {\n            this._binaryBody = binaryBody;\n            this.isBinaryBody = true;\n        }\n        else {\n            this._body = body || '';\n            this.isBinaryBody = false;\n        }\n        this.escapeHeaderValues = escapeHeaderValues || false;\n        this.skipContentLengthHeader = skipContentLengthHeader || false;\n    }\n    /**\n     * body of the frame\n     */\n    get body() {\n        if (!this._body && this.isBinaryBody) {\n            this._body = new TextDecoder().decode(this._binaryBody);\n        }\n        return this._body || '';\n    }\n    /**\n     * body as Uint8Array\n     */\n    get binaryBody() {\n        if (!this._binaryBody && !this.isBinaryBody) {\n            this._binaryBody = new TextEncoder().encode(this._body);\n        }\n        // At this stage it will definitely have a valid value\n        return this._binaryBody;\n    }\n    /**\n     * deserialize a STOMP Frame from raw data.\n     *\n     * @internal\n     */\n    static fromRawFrame(rawFrame, escapeHeaderValues) {\n        const headers = {};\n        const trim = (str) => str.replace(/^\\s+|\\s+$/g, '');\n        // In case of repeated headers, as per standards, first value need to be used\n        for (const header of rawFrame.headers.reverse()) {\n            const idx = header.indexOf(':');\n            const key = trim(header[0]);\n            let value = trim(header[1]);\n            if (escapeHeaderValues &&\n                rawFrame.command !== 'CONNECT' &&\n                rawFrame.command !== 'CONNECTED') {\n                value = FrameImpl.hdrValueUnEscape(value);\n            }\n            headers[key] = value;\n        }\n        return new FrameImpl({\n            command: rawFrame.command,\n            headers,\n            binaryBody: rawFrame.binaryBody,\n            escapeHeaderValues,\n        });\n    }\n    /**\n     * @internal\n     */\n    toString() {\n        return this.serializeCmdAndHeaders();\n    }\n    /**\n     * serialize this Frame in a format suitable to be passed to WebSocket.\n     * If the body is string the output will be string.\n     * If the body is binary (i.e. of type Unit8Array) it will be serialized to ArrayBuffer.\n     *\n     * @internal\n     */\n    serialize() {\n        const cmdAndHeaders = this.serializeCmdAndHeaders();\n        if (this.isBinaryBody) {\n            return FrameImpl.toUnit8Array(cmdAndHeaders, this._binaryBody).buffer;\n        }\n        else {\n            return cmdAndHeaders + this._body + BYTE.NULL;\n        }\n    }\n    serializeCmdAndHeaders() {\n        const lines = [this.command];\n        if (this.skipContentLengthHeader) {\n            delete this.headers['content-length'];\n        }\n        for (const name of Object.keys(this.headers || {})) {\n            const value = this.headers[name];\n            if (this.escapeHeaderValues &&\n                this.command !== 'CONNECT' &&\n                this.command !== 'CONNECTED') {\n                lines.push(`${name}:${FrameImpl.hdrValueEscape(`${value}`)}`);\n            }\n            else {\n                lines.push(`${name}:${value}`);\n            }\n        }\n        if (this.isBinaryBody ||\n            (!this.isBodyEmpty() && !this.skipContentLengthHeader)) {\n            lines.push(`content-length:${this.bodyLength()}`);\n        }\n        return lines.join(BYTE.LF) + BYTE.LF + BYTE.LF;\n    }\n    isBodyEmpty() {\n        return this.bodyLength() === 0;\n    }\n    bodyLength() {\n        const binaryBody = this.binaryBody;\n        return binaryBody ? binaryBody.length : 0;\n    }\n    /**\n     * Compute the size of a UTF-8 string by counting its number of bytes\n     * (and not the number of characters composing the string)\n     */\n    static sizeOfUTF8(s) {\n        return s ? new TextEncoder().encode(s).length : 0;\n    }\n    static toUnit8Array(cmdAndHeaders, binaryBody) {\n        const uint8CmdAndHeaders = new TextEncoder().encode(cmdAndHeaders);\n        const nullTerminator = new Uint8Array([0]);\n        const uint8Frame = new Uint8Array(uint8CmdAndHeaders.length + binaryBody.length + nullTerminator.length);\n        uint8Frame.set(uint8CmdAndHeaders);\n        uint8Frame.set(binaryBody, uint8CmdAndHeaders.length);\n        uint8Frame.set(nullTerminator, uint8CmdAndHeaders.length + binaryBody.length);\n        return uint8Frame;\n    }\n    /**\n     * Serialize a STOMP frame as per STOMP standards, suitable to be sent to the STOMP broker.\n     *\n     * @internal\n     */\n    static marshall(params) {\n        const frame = new FrameImpl(params);\n        return frame.serialize();\n    }\n    /**\n     *  Escape header values\n     */\n    static hdrValueEscape(str) {\n        return str\n            .replace(/\\\\/g, '\\\\\\\\')\n            .replace(/\\r/g, '\\\\r')\n            .replace(/\\n/g, '\\\\n')\n            .replace(/:/g, '\\\\c');\n    }\n    /**\n     * UnEscape header values\n     */\n    static hdrValueUnEscape(str) {\n        return str\n            .replace(/\\\\r/g, '\\r')\n            .replace(/\\\\n/g, '\\n')\n            .replace(/\\\\c/g, ':')\n            .replace(/\\\\\\\\/g, '\\\\');\n    }\n}\n","/**\n * @internal\n */\nconst NULL = 0;\n/**\n * @internal\n */\nconst LF = 10;\n/**\n * @internal\n */\nconst CR = 13;\n/**\n * @internal\n */\nconst COLON = 58;\n/**\n * This is an evented, rec descent parser.\n * A stream of Octets can be passed and whenever it recognizes\n * a complete Frame or an incoming ping it will invoke the registered callbacks.\n *\n * All incoming Octets are fed into _onByte function.\n * Depending on current state the _onByte function keeps changing.\n * Depending on the state it keeps accumulating into _token and _results.\n * State is indicated by current value of _onByte, all states are named as _collect.\n *\n * STOMP standards https://stomp.github.io/stomp-specification-1.2.html\n * imply that all lengths are considered in bytes (instead of string lengths).\n * So, before actual parsing, if the incoming data is String it is converted to Octets.\n * This allows faithful implementation of the protocol and allows NULL Octets to be present in the body.\n *\n * There is no peek function on the incoming data.\n * When a state change occurs based on an Octet without consuming the Octet,\n * the Octet, after state change, is fed again (_reinjectByte).\n * This became possible as the state change can be determined by inspecting just one Octet.\n *\n * There are two modes to collect the body, if content-length header is there then it by counting Octets\n * otherwise it is determined by NULL terminator.\n *\n * Following the standards, the command and headers are converted to Strings\n * and the body is returned as Octets.\n * Headers are returned as an array and not as Hash - to allow multiple occurrence of an header.\n *\n * This parser does not use Regular Expressions as that can only operate on Strings.\n *\n * It handles if multiple STOMP frames are given as one chunk, a frame is split into multiple chunks, or\n * any combination there of. The parser remembers its state (any partial frame) and continues when a new chunk\n * is pushed.\n *\n * Typically the higher level function will convert headers to Hash, handle unescaping of header values\n * (which is protocol version specific), and convert body to text.\n *\n * Check the parser.spec.js to understand cases that this parser is supposed to handle.\n *\n * Part of `@stomp/stompjs`.\n *\n * @internal\n */\nexport class Parser {\n    constructor(onFrame, onIncomingPing) {\n        this.onFrame = onFrame;\n        this.onIncomingPing = onIncomingPing;\n        this._encoder = new TextEncoder();\n        this._decoder = new TextDecoder();\n        this._token = [];\n        this._initState();\n    }\n    parseChunk(segment, appendMissingNULLonIncoming = false) {\n        let chunk;\n        if (typeof segment === 'string') {\n            chunk = this._encoder.encode(segment);\n        }\n        else {\n            chunk = new Uint8Array(segment);\n        }\n        // See https://github.com/stomp-js/stompjs/issues/89\n        // Remove when underlying issue is fixed.\n        //\n        // Send a NULL byte, if the last byte of a Text frame was not NULL.F\n        if (appendMissingNULLonIncoming && chunk[chunk.length - 1] !== 0) {\n            const chunkWithNull = new Uint8Array(chunk.length + 1);\n            chunkWithNull.set(chunk, 0);\n            chunkWithNull[chunk.length] = 0;\n            chunk = chunkWithNull;\n        }\n        // tslint:disable-next-line:prefer-for-of\n        for (let i = 0; i < chunk.length; i++) {\n            const byte = chunk[i];\n            this._onByte(byte);\n        }\n    }\n    // The following implements a simple Rec Descent Parser.\n    // The grammar is simple and just one byte tells what should be the next state\n    _collectFrame(byte) {\n        if (byte === NULL) {\n            // Ignore\n            return;\n        }\n        if (byte === CR) {\n            // Ignore CR\n            return;\n        }\n        if (byte === LF) {\n            // Incoming Ping\n            this.onIncomingPing();\n            return;\n        }\n        this._onByte = this._collectCommand;\n        this._reinjectByte(byte);\n    }\n    _collectCommand(byte) {\n        if (byte === CR) {\n            // Ignore CR\n            return;\n        }\n        if (byte === LF) {\n            this._results.command = this._consumeTokenAsUTF8();\n            this._onByte = this._collectHeaders;\n            return;\n        }\n        this._consumeByte(byte);\n    }\n    _collectHeaders(byte) {\n        if (byte === CR) {\n            // Ignore CR\n            return;\n        }\n        if (byte === LF) {\n            this._setupCollectBody();\n            return;\n        }\n        this._onByte = this._collectHeaderKey;\n        this._reinjectByte(byte);\n    }\n    _reinjectByte(byte) {\n        this._onByte(byte);\n    }\n    _collectHeaderKey(byte) {\n        if (byte === COLON) {\n            this._headerKey = this._consumeTokenAsUTF8();\n            this._onByte = this._collectHeaderValue;\n            return;\n        }\n        this._consumeByte(byte);\n    }\n    _collectHeaderValue(byte) {\n        if (byte === CR) {\n            // Ignore CR\n            return;\n        }\n        if (byte === LF) {\n            this._results.headers.push([\n                this._headerKey,\n                this._consumeTokenAsUTF8(),\n            ]);\n            this._headerKey = undefined;\n            this._onByte = this._collectHeaders;\n            return;\n        }\n        this._consumeByte(byte);\n    }\n    _setupCollectBody() {\n        const contentLengthHeader = this._results.headers.filter((header) => {\n            return header[0] === 'content-length';\n        })[0];\n        if (contentLengthHeader) {\n            this._bodyBytesRemaining = parseInt(contentLengthHeader[1], 10);\n            this._onByte = this._collectBodyFixedSize;\n        }\n        else {\n            this._onByte = this._collectBodyNullTerminated;\n        }\n    }\n    _collectBodyNullTerminated(byte) {\n        if (byte === NULL) {\n            this._retrievedBody();\n            return;\n        }\n        this._consumeByte(byte);\n    }\n    _collectBodyFixedSize(byte) {\n        // It is post decrement, so that we discard the trailing NULL octet\n        if (this._bodyBytesRemaining-- === 0) {\n            this._retrievedBody();\n            return;\n        }\n        this._consumeByte(byte);\n    }\n    _retrievedBody() {\n        this._results.binaryBody = this._consumeTokenAsRaw();\n        try {\n            this.onFrame(this._results);\n        }\n        catch (e) {\n            console.log(`Ignoring an exception thrown by a frame handler. Original exception: `, e);\n        }\n        this._initState();\n    }\n    // Rec Descent Parser helpers\n    _consumeByte(byte) {\n        this._token.push(byte);\n    }\n    _consumeTokenAsUTF8() {\n        return this._decoder.decode(this._consumeTokenAsRaw());\n    }\n    _consumeTokenAsRaw() {\n        const rawResult = new Uint8Array(this._token);\n        this._token = [];\n        return rawResult;\n    }\n    _initState() {\n        this._results = {\n            command: undefined,\n            headers: [],\n            binaryBody: undefined,\n        };\n        this._token = [];\n        this._headerKey = undefined;\n        this._onByte = this._collectFrame;\n    }\n}\n","import { BYTE } from './byte.js';\nimport { FrameImpl } from './frame-impl.js';\nimport { Parser } from './parser.js';\nimport { StompSocketState, } from './types.js';\nimport { Versions } from './versions.js';\nimport { augmentWebsocket } from './augment-websocket.js';\n/**\n * The STOMP protocol handler\n *\n * Part of `@stomp/stompjs`.\n *\n * @internal\n */\nexport class StompHandler {\n    constructor(_client, _webSocket, config) {\n        this._client = _client;\n        this._webSocket = _webSocket;\n        this._connected = false;\n        this._serverFrameHandlers = {\n            // [CONNECTED Frame](https://stomp.github.com/stomp-specification-1.2.html#CONNECTED_Frame)\n            CONNECTED: frame => {\n                this.debug(`connected to server ${frame.headers.server}`);\n                this._connected = true;\n                this._connectedVersion = frame.headers.version;\n                // STOMP version 1.2 needs header values to be escaped\n                if (this._connectedVersion === Versions.V1_2) {\n                    this._escapeHeaderValues = true;\n                }\n                this._setupHeartbeat(frame.headers);\n                this.onConnect(frame);\n            },\n            // [MESSAGE Frame](https://stomp.github.com/stomp-specification-1.2.html#MESSAGE)\n            MESSAGE: frame => {\n                // the callback is registered when the client calls\n                // `subscribe()`.\n                // If there is no registered subscription for the received message,\n                // the default `onUnhandledMessage` callback is used that the client can set.\n                // This is useful for subscriptions that are automatically created\n                // on the browser side (e.g. [RabbitMQ's temporary\n                // queues](https://www.rabbitmq.com/stomp.html)).\n                const subscription = frame.headers.subscription;\n                const onReceive = this._subscriptions[subscription] || this.onUnhandledMessage;\n                // bless the frame to be a Message\n                const message = frame;\n                const client = this;\n                const messageId = this._connectedVersion === Versions.V1_2\n                    ? message.headers.ack\n                    : message.headers['message-id'];\n                // add `ack()` and `nack()` methods directly to the returned frame\n                // so that a simple call to `message.ack()` can acknowledge the message.\n                message.ack = (headers = {}) => {\n                    return client.ack(messageId, subscription, headers);\n                };\n                message.nack = (headers = {}) => {\n                    return client.nack(messageId, subscription, headers);\n                };\n                onReceive(message);\n            },\n            // [RECEIPT Frame](https://stomp.github.com/stomp-specification-1.2.html#RECEIPT)\n            RECEIPT: frame => {\n                const callback = this._receiptWatchers[frame.headers['receipt-id']];\n                if (callback) {\n                    callback(frame);\n                    // Server will acknowledge only once, remove the callback\n                    delete this._receiptWatchers[frame.headers['receipt-id']];\n                }\n                else {\n                    this.onUnhandledReceipt(frame);\n                }\n            },\n            // [ERROR Frame](https://stomp.github.com/stomp-specification-1.2.html#ERROR)\n            ERROR: frame => {\n                this.onStompError(frame);\n            },\n        };\n        // used to index subscribers\n        this._counter = 0;\n        // subscription callbacks indexed by subscriber's ID\n        this._subscriptions = {};\n        // receipt-watchers indexed by receipts-ids\n        this._receiptWatchers = {};\n        this._partialData = '';\n        this._escapeHeaderValues = false;\n        this._lastServerActivityTS = Date.now();\n        this.debug = config.debug;\n        this.stompVersions = config.stompVersions;\n        this.connectHeaders = config.connectHeaders;\n        this.disconnectHeaders = config.disconnectHeaders;\n        this.heartbeatIncoming = config.heartbeatIncoming;\n        this.heartbeatOutgoing = config.heartbeatOutgoing;\n        this.splitLargeFrames = config.splitLargeFrames;\n        this.maxWebSocketChunkSize = config.maxWebSocketChunkSize;\n        this.forceBinaryWSFrames = config.forceBinaryWSFrames;\n        this.logRawCommunication = config.logRawCommunication;\n        this.appendMissingNULLonIncoming = config.appendMissingNULLonIncoming;\n        this.discardWebsocketOnCommFailure = config.discardWebsocketOnCommFailure;\n        this.onConnect = config.onConnect;\n        this.onDisconnect = config.onDisconnect;\n        this.onStompError = config.onStompError;\n        this.onWebSocketClose = config.onWebSocketClose;\n        this.onWebSocketError = config.onWebSocketError;\n        this.onUnhandledMessage = config.onUnhandledMessage;\n        this.onUnhandledReceipt = config.onUnhandledReceipt;\n        this.onUnhandledFrame = config.onUnhandledFrame;\n    }\n    get connectedVersion() {\n        return this._connectedVersion;\n    }\n    get connected() {\n        return this._connected;\n    }\n    start() {\n        const parser = new Parser(\n        // On Frame\n        rawFrame => {\n            const frame = FrameImpl.fromRawFrame(rawFrame, this._escapeHeaderValues);\n            // if this.logRawCommunication is set, the rawChunk is logged at this._webSocket.onmessage\n            if (!this.logRawCommunication) {\n                this.debug(`<<< ${frame}`);\n            }\n            const serverFrameHandler = this._serverFrameHandlers[frame.command] || this.onUnhandledFrame;\n            serverFrameHandler(frame);\n        }, \n        // On Incoming Ping\n        () => {\n            this.debug('<<< PONG');\n        });\n        this._webSocket.onmessage = (evt) => {\n            this.debug('Received data');\n            this._lastServerActivityTS = Date.now();\n            if (this.logRawCommunication) {\n                const rawChunkAsString = evt.data instanceof ArrayBuffer\n                    ? new TextDecoder().decode(evt.data)\n                    : evt.data;\n                this.debug(`<<< ${rawChunkAsString}`);\n            }\n            parser.parseChunk(evt.data, this.appendMissingNULLonIncoming);\n        };\n        this._webSocket.onclose = (closeEvent) => {\n            this.debug(`Connection closed to ${this._webSocket.url}`);\n            this._cleanUp();\n            this.onWebSocketClose(closeEvent);\n        };\n        this._webSocket.onerror = (errorEvent) => {\n            this.onWebSocketError(errorEvent);\n        };\n        this._webSocket.onopen = () => {\n            // Clone before updating\n            const connectHeaders = Object.assign({}, this.connectHeaders);\n            this.debug('Web Socket Opened...');\n            connectHeaders['accept-version'] = this.stompVersions.supportedVersions();\n            connectHeaders['heart-beat'] = [\n                this.heartbeatOutgoing,\n                this.heartbeatIncoming,\n            ].join(',');\n            this._transmit({ command: 'CONNECT', headers: connectHeaders });\n        };\n    }\n    _setupHeartbeat(headers) {\n        if (headers.version !== Versions.V1_1 &&\n            headers.version !== Versions.V1_2) {\n            return;\n        }\n        // It is valid for the server to not send this header\n        // https://stomp.github.io/stomp-specification-1.2.html#Heart-beating\n        if (!headers['heart-beat']) {\n            return;\n        }\n        // heart-beat header received from the server looks like:\n        //\n        //     heart-beat: sx, sy\n        const [serverOutgoing, serverIncoming] = headers['heart-beat']\n            .split(',')\n            .map((v) => parseInt(v, 10));\n        if (this.heartbeatOutgoing !== 0 && serverIncoming !== 0) {\n            const ttl = Math.max(this.heartbeatOutgoing, serverIncoming);\n            this.debug(`send PING every ${ttl}ms`);\n            this._pinger = setInterval(() => {\n                if (this._webSocket.readyState === StompSocketState.OPEN) {\n                    this._webSocket.send(BYTE.LF);\n                    this.debug('>>> PING');\n                }\n            }, ttl);\n        }\n        if (this.heartbeatIncoming !== 0 && serverOutgoing !== 0) {\n            const ttl = Math.max(this.heartbeatIncoming, serverOutgoing);\n            this.debug(`check PONG every ${ttl}ms`);\n            this._ponger = setInterval(() => {\n                const delta = Date.now() - this._lastServerActivityTS;\n                // We wait twice the TTL to be flexible on window's setInterval calls\n                if (delta > ttl * 2) {\n                    this.debug(`did not receive server activity for the last ${delta}ms`);\n                    this._closeOrDiscardWebsocket();\n                }\n            }, ttl);\n        }\n    }\n    _closeOrDiscardWebsocket() {\n        if (this.discardWebsocketOnCommFailure) {\n            this.debug('Discarding websocket, the underlying socket may linger for a while');\n            this.discardWebsocket();\n        }\n        else {\n            this.debug('Issuing close on the websocket');\n            this._closeWebsocket();\n        }\n    }\n    forceDisconnect() {\n        if (this._webSocket) {\n            if (this._webSocket.readyState === StompSocketState.CONNECTING ||\n                this._webSocket.readyState === StompSocketState.OPEN) {\n                this._closeOrDiscardWebsocket();\n            }\n        }\n    }\n    _closeWebsocket() {\n        this._webSocket.onmessage = () => { }; // ignore messages\n        this._webSocket.close();\n    }\n    discardWebsocket() {\n        if (typeof this._webSocket.terminate !== 'function') {\n            augmentWebsocket(this._webSocket, (msg) => this.debug(msg));\n        }\n        // @ts-ignore - this method will be there at this stage\n        this._webSocket.terminate();\n    }\n    _transmit(params) {\n        const { command, headers, body, binaryBody, skipContentLengthHeader } = params;\n        const frame = new FrameImpl({\n            command,\n            headers,\n            body,\n            binaryBody,\n            escapeHeaderValues: this._escapeHeaderValues,\n            skipContentLengthHeader,\n        });\n        let rawChunk = frame.serialize();\n        if (this.logRawCommunication) {\n            this.debug(`>>> ${rawChunk}`);\n        }\n        else {\n            this.debug(`>>> ${frame}`);\n        }\n        if (this.forceBinaryWSFrames && typeof rawChunk === 'string') {\n            rawChunk = new TextEncoder().encode(rawChunk);\n        }\n        if (typeof rawChunk !== 'string' || !this.splitLargeFrames) {\n            this._webSocket.send(rawChunk);\n        }\n        else {\n            let out = rawChunk;\n            while (out.length > 0) {\n                const chunk = out.substring(0, this.maxWebSocketChunkSize);\n                out = out.substring(this.maxWebSocketChunkSize);\n                this._webSocket.send(chunk);\n                this.debug(`chunk sent = ${chunk.length}, remaining = ${out.length}`);\n            }\n        }\n    }\n    dispose() {\n        if (this.connected) {\n            try {\n                // clone before updating\n                const disconnectHeaders = Object.assign({}, this.disconnectHeaders);\n                if (!disconnectHeaders.receipt) {\n                    disconnectHeaders.receipt = `close-${this._counter++}`;\n                }\n                this.watchForReceipt(disconnectHeaders.receipt, frame => {\n                    this._closeWebsocket();\n                    this._cleanUp();\n                    this.onDisconnect(frame);\n                });\n                this._transmit({ command: 'DISCONNECT', headers: disconnectHeaders });\n            }\n            catch (error) {\n                this.debug(`Ignoring error during disconnect ${error}`);\n            }\n        }\n        else {\n            if (this._webSocket.readyState === StompSocketState.CONNECTING ||\n                this._webSocket.readyState === StompSocketState.OPEN) {\n                this._closeWebsocket();\n            }\n        }\n    }\n    _cleanUp() {\n        this._connected = false;\n        if (this._pinger) {\n            clearInterval(this._pinger);\n            this._pinger = undefined;\n        }\n        if (this._ponger) {\n            clearInterval(this._ponger);\n            this._ponger = undefined;\n        }\n    }\n    publish(params) {\n        const { destination, headers, body, binaryBody, skipContentLengthHeader } = params;\n        const hdrs = Object.assign({ destination }, headers);\n        this._transmit({\n            command: 'SEND',\n            headers: hdrs,\n            body,\n            binaryBody,\n            skipContentLengthHeader,\n        });\n    }\n    watchForReceipt(receiptId, callback) {\n        this._receiptWatchers[receiptId] = callback;\n    }\n    subscribe(destination, callback, headers = {}) {\n        headers = Object.assign({}, headers);\n        if (!headers.id) {\n            headers.id = `sub-${this._counter++}`;\n        }\n        headers.destination = destination;\n        this._subscriptions[headers.id] = callback;\n        this._transmit({ command: 'SUBSCRIBE', headers });\n        const client = this;\n        return {\n            id: headers.id,\n            unsubscribe(hdrs) {\n                return client.unsubscribe(headers.id, hdrs);\n            },\n        };\n    }\n    unsubscribe(id, headers = {}) {\n        headers = Object.assign({}, headers);\n        delete this._subscriptions[id];\n        headers.id = id;\n        this._transmit({ command: 'UNSUBSCRIBE', headers });\n    }\n    begin(transactionId) {\n        const txId = transactionId || `tx-${this._counter++}`;\n        this._transmit({\n            command: 'BEGIN',\n            headers: {\n                transaction: txId,\n            },\n        });\n        const client = this;\n        return {\n            id: txId,\n            commit() {\n                client.commit(txId);\n            },\n            abort() {\n                client.abort(txId);\n            },\n        };\n    }\n    commit(transactionId) {\n        this._transmit({\n            command: 'COMMIT',\n            headers: {\n                transaction: transactionId,\n            },\n        });\n    }\n    abort(transactionId) {\n        this._transmit({\n            command: 'ABORT',\n            headers: {\n                transaction: transactionId,\n            },\n        });\n    }\n    ack(messageId, subscriptionId, headers = {}) {\n        headers = Object.assign({}, headers);\n        if (this._connectedVersion === Versions.V1_2) {\n            headers.id = messageId;\n        }\n        else {\n            headers['message-id'] = messageId;\n        }\n        headers.subscription = subscriptionId;\n        this._transmit({ command: 'ACK', headers });\n    }\n    nack(messageId, subscriptionId, headers = {}) {\n        headers = Object.assign({}, headers);\n        if (this._connectedVersion === Versions.V1_2) {\n            headers.id = messageId;\n        }\n        else {\n            headers['message-id'] = messageId;\n        }\n        headers.subscription = subscriptionId;\n        return this._transmit({ command: 'NACK', headers });\n    }\n}\n","/**\n * Possible states for the IStompSocket\n */\nexport var StompSocketState;\n(function (StompSocketState) {\n    StompSocketState[StompSocketState[\"CONNECTING\"] = 0] = \"CONNECTING\";\n    StompSocketState[StompSocketState[\"OPEN\"] = 1] = \"OPEN\";\n    StompSocketState[StompSocketState[\"CLOSING\"] = 2] = \"CLOSING\";\n    StompSocketState[StompSocketState[\"CLOSED\"] = 3] = \"CLOSED\";\n})(StompSocketState = StompSocketState || (StompSocketState = {}));\n/**\n * Possible activation state\n */\nexport var ActivationState;\n(function (ActivationState) {\n    ActivationState[ActivationState[\"ACTIVE\"] = 0] = \"ACTIVE\";\n    ActivationState[ActivationState[\"DEACTIVATING\"] = 1] = \"DEACTIVATING\";\n    ActivationState[ActivationState[\"INACTIVE\"] = 2] = \"INACTIVE\";\n})(ActivationState = ActivationState || (ActivationState = {}));\n","/**\n * Supported STOMP versions\n *\n * Part of `@stomp/stompjs`.\n */\nexport class Versions {\n    /**\n     * Takes an array of versions, typical elements '1.2', '1.1', or '1.0'\n     *\n     * You will be creating an instance of this class if you want to override\n     * supported versions to be declared during STOMP handshake.\n     */\n    constructor(versions) {\n        this.versions = versions;\n    }\n    /**\n     * Used as part of CONNECT STOMP Frame\n     */\n    supportedVersions() {\n        return this.versions.join(',');\n    }\n    /**\n     * Used while creating a WebSocket\n     */\n    protocolVersions() {\n        return this.versions.map(x => `v${x.replace('.', '')}.stomp`);\n    }\n}\n/**\n * Indicates protocol version 1.0\n */\nVersions.V1_0 = '1.0';\n/**\n * Indicates protocol version 1.1\n */\nVersions.V1_1 = '1.1';\n/**\n * Indicates protocol version 1.2\n */\nVersions.V1_2 = '1.2';\n/**\n * @internal\n */\nVersions.default = new Versions([\n    Versions.V1_2,\n    Versions.V1_1,\n    Versions.V1_0,\n]);\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nexport default arrayEach;\n","import trimmedEndIndex from './_trimmedEndIndex.js';\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nexport default baseTrim;\n","import identity from './identity.js';\n\n/**\n * Casts `value` to `identity` if it's not a function.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Function} Returns cast function.\n */\nfunction castFunction(value) {\n  return typeof value == 'function' ? value : identity;\n}\n\nexport default castFunction;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nexport default trimmedEndIndex;\n","import arrayEach from './_arrayEach.js';\nimport baseEach from './_baseEach.js';\nimport castFunction from './_castFunction.js';\nimport isArray from './isArray.js';\n\n/**\n * Iterates over elements of `collection` and invokes `iteratee` for each element.\n * The iteratee is invoked with three arguments: (value, index|key, collection).\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * **Note:** As with other \"Collections\" methods, objects with a \"length\"\n * property are iterated like arrays. To avoid this behavior use `_.forIn`\n * or `_.forOwn` for object iteration.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @alias each\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n * @see _.forEachRight\n * @example\n *\n * _.forEach([1, 2], function(value) {\n *   console.log(value);\n * });\n * // => Logs `1` then `2`.\n *\n * _.forEach({ 'a': 1, 'b': 2 }, function(value, key) {\n *   console.log(key);\n * });\n * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n */\nfunction forEach(collection, iteratee) {\n  var func = isArray(collection) ? arrayEach : baseEach;\n  return func(collection, castFunction(iteratee));\n}\n\nexport default forEach;\n","import toNumber from './toNumber.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nexport default toFinite;\n","import toFinite from './toFinite.js';\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nexport default toInteger;\n","import baseTrim from './_baseTrim.js';\nimport isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","import * as i0 from '@angular/core';\nimport { PLATFORM_ID, Injectable, Inject } from '@angular/core';\nimport { isPlatformBrowser, DOCUMENT } from '@angular/common';\n\n// This service is based on the `ng2-cookies` package which sadly is not a service and does\n// not use `DOCUMENT` injection and therefore doesn't work well with AoT production builds.\n// Package: https://github.com/BCJTI/ng2-cookies\nclass CookieService {\n    constructor(document, \n    // Get the `PLATFORM_ID` so we can check if we're in a browser.\n    platformId) {\n        this.document = document;\n        this.platformId = platformId;\n        this.documentIsAccessible = isPlatformBrowser(this.platformId);\n    }\n    /**\n     * Get cookie Regular Expression\n     *\n     * @param name Cookie name\n     * @returns property RegExp\n     *\n     * @author: Stepan Suvorov\n     * @since: 1.0.0\n     */\n    static getCookieRegExp(name) {\n        const escapedName = name.replace(/([\\[\\]{}()|=;+?,.*^$])/gi, '\\\\$1');\n        return new RegExp('(?:^' + escapedName + '|;\\\\s*' + escapedName + ')=(.*?)(?:;|$)', 'g');\n    }\n    /**\n     * Gets the unencoded version of an encoded component of a Uniform Resource Identifier (URI).\n     *\n     * @param encodedURIComponent A value representing an encoded URI component.\n     *\n     * @returns The unencoded version of an encoded component of a Uniform Resource Identifier (URI).\n     *\n     * @author: Stepan Suvorov\n     * @since: 1.0.0\n     */\n    static safeDecodeURIComponent(encodedURIComponent) {\n        try {\n            return decodeURIComponent(encodedURIComponent);\n        }\n        catch {\n            // probably it is not uri encoded. return as is\n            return encodedURIComponent;\n        }\n    }\n    /**\n     * Return `true` if {@link Document} is accessible, otherwise return `false`\n     *\n     * @param name Cookie name\n     * @returns boolean - whether cookie with specified name exists\n     *\n     * @author: Stepan Suvorov\n     * @since: 1.0.0\n     */\n    check(name) {\n        if (!this.documentIsAccessible) {\n            return false;\n        }\n        name = encodeURIComponent(name);\n        const regExp = CookieService.getCookieRegExp(name);\n        return regExp.test(this.document.cookie);\n    }\n    /**\n     * Get cookies by name\n     *\n     * @param name Cookie name\n     * @returns property value\n     *\n     * @author: Stepan Suvorov\n     * @since: 1.0.0\n     */\n    get(name) {\n        if (this.documentIsAccessible && this.check(name)) {\n            name = encodeURIComponent(name);\n            const regExp = CookieService.getCookieRegExp(name);\n            const result = regExp.exec(this.document.cookie);\n            return result[1] ? CookieService.safeDecodeURIComponent(result[1]) : '';\n        }\n        else {\n            return '';\n        }\n    }\n    /**\n     * Get all cookies in JSON format\n     *\n     * @returns all the cookies in json\n     *\n     * @author: Stepan Suvorov\n     * @since: 1.0.0\n     */\n    getAll() {\n        if (!this.documentIsAccessible) {\n            return {};\n        }\n        const cookies = {};\n        const document = this.document;\n        if (document.cookie && document.cookie !== '') {\n            document.cookie.split(';').forEach((currentCookie) => {\n                const [cookieName, cookieValue] = currentCookie.split('=');\n                cookies[CookieService.safeDecodeURIComponent(cookieName.replace(/^ /, ''))] = CookieService.safeDecodeURIComponent(cookieValue);\n            });\n        }\n        return cookies;\n    }\n    set(name, value, expiresOrOptions, path, domain, secure, sameSite) {\n        if (!this.documentIsAccessible) {\n            return;\n        }\n        if (typeof expiresOrOptions === 'number' || expiresOrOptions instanceof Date || path || domain || secure || sameSite) {\n            const optionsBody = {\n                expires: expiresOrOptions,\n                path,\n                domain,\n                secure,\n                sameSite: sameSite ? sameSite : 'Lax',\n            };\n            this.set(name, value, optionsBody);\n            return;\n        }\n        let cookieString = encodeURIComponent(name) + '=' + encodeURIComponent(value) + ';';\n        const options = expiresOrOptions ? expiresOrOptions : {};\n        if (options.expires) {\n            if (typeof options.expires === 'number') {\n                const dateExpires = new Date(new Date().getTime() + options.expires * 1000 * 60 * 60 * 24);\n                cookieString += 'expires=' + dateExpires.toUTCString() + ';';\n            }\n            else {\n                cookieString += 'expires=' + options.expires.toUTCString() + ';';\n            }\n        }\n        if (options.path) {\n            cookieString += 'path=' + options.path + ';';\n        }\n        if (options.domain) {\n            cookieString += 'domain=' + options.domain + ';';\n        }\n        if (options.secure === false && options.sameSite === 'None') {\n            options.secure = true;\n            console.warn(`[ngx-cookie-service] Cookie ${name} was forced with secure flag because sameSite=None.` +\n                `More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`);\n        }\n        if (options.secure) {\n            cookieString += 'secure;';\n        }\n        if (!options.sameSite) {\n            options.sameSite = 'Lax';\n        }\n        cookieString += 'sameSite=' + options.sameSite + ';';\n        this.document.cookie = cookieString;\n    }\n    /**\n     * Delete cookie by name\n     *\n     * @param name   Cookie name\n     * @param path   Cookie path\n     * @param domain Cookie domain\n     * @param secure Cookie secure flag\n     * @param sameSite Cookie sameSite flag - https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie/SameSite\n     *\n     * @author: Stepan Suvorov\n     * @since: 1.0.0\n     */\n    delete(name, path, domain, secure, sameSite = 'Lax') {\n        if (!this.documentIsAccessible) {\n            return;\n        }\n        const expiresDate = new Date('Thu, 01 Jan 1970 00:00:01 GMT');\n        this.set(name, '', { expires: expiresDate, path, domain, secure, sameSite });\n    }\n    /**\n     * Delete all cookies\n     *\n     * @param path   Cookie path\n     * @param domain Cookie domain\n     * @param secure Is the Cookie secure\n     * @param sameSite Is the cookie same site\n     *\n     * @author: Stepan Suvorov\n     * @since: 1.0.0\n     */\n    deleteAll(path, domain, secure, sameSite = 'Lax') {\n        if (!this.documentIsAccessible) {\n            return;\n        }\n        const cookies = this.getAll();\n        for (const cookieName in cookies) {\n            if (cookies.hasOwnProperty(cookieName)) {\n                this.delete(cookieName, path, domain, secure, sameSite);\n            }\n        }\n    }\n    static { this.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"17.0.6\", ngImport: i0, type: CookieService, deps: [{ token: DOCUMENT }, { token: PLATFORM_ID }], target: i0.FactoryTarget.Injectable }); }\n    static { this.prov = i0.ngDeclareInjectable({ minVersion: \"12.0.0\", version: \"17.0.6\", ngImport: i0, type: CookieService, providedIn: 'root' }); }\n}\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"17.0.6\", ngImport: i0, type: CookieService, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root',\n                }]\n        }], ctorParameters: () => [{ type: Document, decorators: [{\n                    type: Inject,\n                    args: [DOCUMENT]\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [PLATFORM_ID]\n                }] }] });\n\n/*\n * Public API Surface of ngx-cookie-service\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { CookieService };\n"],"names":["EventEmitter","LoginStatusEnum","LoginService","UserDetailsService","ConfigConstants","ConfigService","CustomerBrandEnum","LanguageService","PathCategorisationService","QueryParamEnum","UrlService","each","isEmpty","some","LoginDetailsConstants","DataLayerService","EventNameEnum","EventStatusEnum","EventTypeEnum","CookieService","switchMap","takeLast","takeUntil","Subject","i0","elementContainerStart","projection","elementContainerEnd","elementStart","elementContainer","elementEnd","advance","property","_r4","template","LoginComponent_ng_container_0_div_2_div_1_Template","ctx_r14","mode","_r2","LoginComponent_ng_container_0_ng_container_1_Template","LoginComponent_ng_container_0_div_2_Template","ctx_r0","isLoggedIn","text","listener","LoginComponent_ng_template_1_ng_container_1_Template_a_click_5_listener","restoreView","_r20","ctx_r19","nextContext","resetView","login","textInterpolate","pipeBind1","attribute","LoginComponent_ng_template_1_div_2_Template_div_click_4_listener","_r22","ctx_r21","textInterpolate1","LoginComponent_ng_template_1_div_3_Template_div_click_4_listener","_r24","ctx_r23","LoginComponent_ng_template_1_ng_container_1_Template","LoginComponent_ng_template_1_div_2_Template","LoginComponent_ng_template_1_div_3_Template","ctx_r1","getLoginStatus","loginEnum","NOT_LOGGED_IN","NARROWED","INSUFFICIENT_PERMISSIONS","_r12","_r10","LoginComponent_ng_template_3_ng_container_4_Template","LoginComponent_ng_template_3_ng_container_5_Template","LoginComponent_ng_template_3_ng_container_6_Template","_r6","ctx_r3","LoginComponent_ng_template_5_ng_template_2_div_0_div_1_Template","LoginComponent_ng_template_5_ng_template_2_div_0_div_2_Template","ctx_r31","source","LoginComponent_ng_template_5_ng_template_2_div_0_Template","ctx_r29","LoginComponent_ng_template_5_div_1_Template","LoginComponent_ng_template_5_ng_template_2_Template","templateRefExtractor","ctx_r5","_r30","LoginComponent_ng_template_7_div_5_div_1_div_6_Template_button_click_4_listener","_r39","ctx_r38","register","element","LoginComponent_ng_template_7_div_5_div_1_div_6_Template","LoginComponent_ng_template_7_div_5_div_1_Template_button_click_7_listener","_r41","ctx_r40","sanitizeHtml","ctx_r36","showItsMeRegistrationOption","LoginComponent_ng_template_7_div_5_div_1_Template","ctx_r34","styleHint","LoginComponent_ng_template_7_div_6_div_1_div_3_Template_button_click_4_listener","_r45","ctx_r44","LoginComponent_ng_template_7_div_6_div_1_div_3_Template","LoginComponent_ng_template_7_div_6_div_1_Template_button_click_4_listener","_r47","ctx_r46","ctx_r42","LoginComponent_ng_template_7_div_6_div_1_Template","ctx_r35","LoginComponent_ng_template_7_div_5_Template","LoginComponent_ng_template_7_div_6_Template","pipeBind2","pureFunction1","_c0","ctx_r7","brand","ctx_r57","LoginComponent_ng_template_9_div_3_h5_1_Template","LoginComponent_ng_template_9_div_3_h5_2_Template","ctx_r49","LoginComponent_ng_template_9_button_9_Template_button_click_0_listener","_r59","ctx_r58","LoginComponent_ng_template_9_button_10_Template_button_click_0_listener","_r61","ctx_r60","LoginComponent_ng_template_9_h5_2_Template","LoginComponent_ng_template_9_div_3_Template","LoginComponent_ng_template_9_img_5_Template","LoginComponent_ng_template_9_img_6_Template","LoginComponent_ng_template_9_img_7_Template","LoginComponent_ng_template_9_img_8_Template","LoginComponent_ng_template_9_button_9_Template","LoginComponent_ng_template_9_button_10_Template","ctx_r9","_r8","LoginComponent_ng_template_11_ng_container_1_Template","ctx_r11","showRegistrationOptions","LoginComponent","constructor","window","loginService","userDetailsService","configService","urlService","pathCategorisationService","languageService","dataLayerService","cookieService","scopes","autoRedirect","STYLE_HINT","renderOnlyForOriginCustomer","componentCanRender","show","destroy$","ngOnInit","action","getRequestParamValue","ACTION","registerBasedOnAction","getCustomerBrand","initSource","getAuthenticationStatus","pipe","_","getUserDetails","subscribe","loginDetails","canRenderComponentForLoggedInUser","emit","getConfig","IS_AUTHOR_MODE","forceRedirect","sendPageStepData","LOGGED_IN","isBssSystemNetcracker","hideMask","isNarrowed","hasRequiredScopes","BRAND_BASE","hasInstallableProductType","isChild","force","pushEventDataToAnalytics","EVENT_NAME_LOGIN","referrerUrl","getCurrentUrl","loginWithPrompt","SOURCE_EMAIL","idp","eventName","EVENT_NAME_REGISTER","redirectToRegistrationURL","SOURCE","toUpperCase","length","scope","hasScope","loginStatus","cleanCookies","redirectToInternalRegistrationURL","redirectToItsMePortal","sessionKeys","getCookie","COOKIE_KEYS","keys","split","i","delete","initCookies","channel","requestParameters","getRequestParameters","item","key","addCookie","CUSTOMER_REGISTRATION_URL","getCustomerRegistrationURL","PARAM_CHANNEL","PARAM_IDP","PARAM_REFERRER_URL","value","set","path","concat","get","referrer_url","registrationUrl","sdata","PARAM_SDATA","newUrl","getActionParametersRemovedURL","encodeURIComponent","redirectTo","redirectURI","getRedirectURI","params","redirect_uri","language","getLanguage","itsMePortalUrl","getItsMeRegisterUrl","OCAPI_URl","ITS_ME_REGISTER_ENDPOINT","getOrigin","eventInfoData","createEventInfo","EVENT_TYPE_CLICK","setEventStatus","EVENT_STATUS_SUCCESS","attributes","buildCommonEventAttributes","sendEvent","eventInfo","flowType","PARAM_FLOW","stepId","STEP_ID_LOGIN_REGISTER","addStepViewEvent","ngOnDestroy","next","complete","directiveInject","i1","i2","i3","i4","i5","_2","selectors","inputs","messageGroupName","outputs","ngContentSelectors","_c1","decls","vars","consts","template","LoginComponent_Template","rf","ctx","LoginComponent_ng_container_0_Template","LoginComponent_ng_template_1_Template","LoginComponent_ng_template_3_Template","LoginComponent_ng_template_5_Template","LoginComponent_ng_template_7_Template","LoginComponent_ng_template_9_Template","LoginComponent_ng_template_11_Template","EMPTY","MASTER_ROLES","_3","CHILD_ROLES","_4","FLEET_MANAGER_ROLE","_5","FLEET_USER_ROLE","_6","MEMBER_ROLE","_7","MANAGER_ROLE","_8","ORPHAN_ROLE","_9","INTERNET_MASTER_ROLE","_10","CUSTOMER_ADMIN_ROLE","_11","CONTRACT_HOLDER_ROLE","_12","MANAGER_ROLES","_13","CHARACTER_LIMIT","_14","SUFFIX","_15","BSS_SYSTEM_BASE_LEGACY","_16","BSS_SYSTEM_TELENET_LEGACY","_17","BSS_SYSTEM_NETCRACKER","_18","_19","PROMPT_NONE","_20","PROMPT_LOGIN","_21","CODE","_22","CLAIMS","_23","CLIENT_ID_OCAPI_BASE","_24","_25","_26","_27","_28","_29","_30","_31","_32","_33","_34","LOGIN","_35","LOGIN_STATUS_COOKIENAME","SalesConstants","QUERY_URL","SPEC_URL","HttpTypesEnum","rawLoginDetailsInterfaceFactory","makeFactory","status","customer_number","identity_id","username","login_alias","first_name","last_name","explicit_login","narrowed_scope","bss_system","auth_age","role","rawFormerLoginDetailsInterfaceFactory","CommonModule","TranslateModule","LoginModule","declarations","imports","exports","LoginCustomerNameMapper","toModel","factory","fac","providedIn","LoginDetails","map","LoginDetailsMapper","rawResponse","getLoginDetails","data","createLoginDetails","createStatAndNonce","state","nonce","rawLoginDetails","customerNumber","identityId","firstName","lastName","narrowedScope","createScopes","authAge","isPid","is_pid","bssSystem","isImpersonated","impersonated","isExplicitLogin","isTelenetLogin","is_telenet_login","isSubLogin","is_sub_login","loginAlias","identityRequestId","identity_request_id","pegaServiceCaseId","pega_service_case_id","contactNumber","contact_number","advisorId","rawScopes","createScope","rawScope","LogoutDetails","LogoutMapper","rawLogoutResponse","logoutDetails","logout_redirect_uri","includes","merge","httpStatus","narrowed","invalidResponse","isAuthenticated","isMaster","isMember","isContractHolder","isOrphan","isNewlyRegisteredUser","getName","getShortenedName","substring","isCafeUser","isBaseLegacyCustomer","scopeName","isFleetManager","isFleetUser","isManager","hasManagerRole","enrich","loginDetailsJSON","enrichedLoginDetails","isNotLoggedInOrDoesNotHaveScope","isSuccess","success","LoginDetailsTestfactory","build","properties","bssSytem","Object","forEach","OcapiCallConfig","endpoint","mapper","customHeaders","observeAsResponse","responseType","useAdaptorEndpoint","silentlyHandleError","withCredentials","withDefaultContentType","authNeeded","getEndpoint","replace","OcapiAuthenticationProvider","OpenidAuthenticationProvider","JWTAuthenticationService","TransparentAuthenticationService","extractJwtParameter","getHashParameter","authenticationProviderFactory","jwtParameter","AUTH_PROVIDER","PROVIDER_TYPE","authenticationServiceFactory","AuthenticationPrompt","HttpClient","HttpParams","OcapiHelper","inject","AuthenticationProvider","httpClient","ocapiHelper","getParameters","authenticationParameters","prompt","httpParams","append","HttpErrorResponse","throwError","LogFactory","LOG","createLogger","logDebug","getType","getAuthenticationUrl","ocapiUrl","clientId","OCAPI_CLIENT_ID","logError","appendAll","targetUrl","undefined","sendAuthCall","toString","authUrl","error","text","url","jsonp","OPENID_AUTH_URL","client_id","OPENID_CLIENT_ID","response_type","claims","OAUTH_CALLBACK_URL","options","headers","getHttpHeaders","AuthenticationState","of","catchError","shareReplay","take","tap","AbstractAuthenticationService","authenticationState","authenticationProvider","getLog","name","authenticate","openWindow","getRootDomain","location","hostname","reverse","splice","join","setAuthenticatedStatus","check","sameSite","domain","setAuthenticated","parameters","authenticationStatus","bufferSize","refCount","_e","HttpHeaders","concatMap","attemptAuthenticate","reset","NONE","Error","res","getCallBackOptions","Accept","Injector","ReplaySubject","AUTH_SERVICE","injector","authenticatedSubject","isStatusKnown","authenticated","getAuthenticated","authenticationService","inject","InjectionToken","CacheService","cache","add","response$","remove","ErrorReportService","sendErrorEventToAnalytics","ocapiCall","errorResponse","errorCode","EVENT_NAME_ERROR_OCCURRED","EVENT_TYPE_ERROR","EVENT_STATUS_FAILED","errorMessage","errorDetailCode","message","setEventStatusMessage","itemName","itemData","httpType","itemGroup","itemIdentifier","flow","FLOW","sData","SDATA","sId","SALES_ORDER_ID","NgZone","ErrorMessage","MessageService","OcapiService","_ngZone","ocapiService","messageService","loginCustomerNameMapper","logoutMapper","_isRoleRequired","getStateAndNonce","authParameters","logout","logoutPath","getLogoutRedirectUrl","ocapiConfig","errorHandler","handleErrorResponse","bind","doGet","response","logoutRedirectUrl","startsWith","protocol","host","removeParametersFromUrl","refererUrl","loginWithCustomerNumber","_customerNumber","mobileNumber","doPost","code","addMessage","SockJS","RxStomp","OcapiSocketService","isAnonymous","TOPIC_PREFIX","ANONYMOUS_TOPIC_PREFIX","baseUrl","isInitialised","init","initializeWebSocketConnection","setAnonymous","anonymous","getTopicPrefix","stompClient","stompConfig","webSocketFactory","configure","activate","watchStompClientOnTopic","topic","watch","mergeMap","OmapiProductService","OmapiQueryProductService","http","omapiProductService","omapiQueryProductService","errorReportService","ocapiCallConfig","doResolve","GET","POST","doPut","PUT","doRestHead","HEAD","doPatch","PATCH","doDelete","DELETE","doRequest","ocapiResponse","ocapiResponseEnrichedWithOmapiData$","ocapiResponseEnrichedWithOmapiQueryData$","ocapiResponseEnrichedWithOmapiData","e","JSON","stringify","messageGroup","isResponseObservable","queryUrls","recursiveUrls","responseBody","rawQueryProductsFromEndpoints$","omapiQueryResponses","omapiQueryResponse","recursiveAddDataToOcapiResponse","specUrls","rawProductsFromEndpoints$","omapiResponses","omapiResponse","getHttpOptions","request$","handleError","post","put","patch","head","omapiorOmapiQueryResponse","type","entries","isSpecUrl","isQueryUrl","itemCodeFromQueryUrl","getParamsValueFromUrl","itemCodeFromOmapiQuery","getProductIdFromOmapiResponse","products","epcFromSpecUrl","pop","epcFromOmapi","product","productid","itemCode","variants","filteredVariant","find","varaint","productId","urls","push","sendErrorEventToAnalyticsForCustomError","getDetailedErrorCode","errorDetails","throwErrorDetails","cause","i6","i7","i8","i9","i10","finalize","Map","loginDetailsMapper","clear","jwtToken","endpointWithParameters","jwt","extractJwtFromUrl","getUserDetailsForConfig","String","JWT_TOKEN","createHashKey","__","otherProps","btoa","hasJwtParameter","config","cacheKey","has","replaySubject$","asObservable","getCacheableUserDetailsObservable","freshReplaySubject$","httpOptions","createHttpHeaders","httpHeaders","accessToken","sessionStorage","getItem","getAccessToken","TOKEN_XSRF","oauthClientId","observe","create","module","inherits","ctor","superCtor","super_","prototype","enumerable","writable","configurable","TempCtor","s","m","h","d","w","y","val","parse","isFinite","long","fmtLong","fmtShort","str","match","exec","n","parseFloat","toLowerCase","ms","msAbs","Math","abs","round","plural","isPlural","hasOwnProperty","undef","decode","input","decodeURIComponent","encode","querystring","query","parser","result","part","querystringify","obj","prefix","pairs","call","isNaN","required","port","transportList","require","global","setTimeout","_sockjs_onload","Event","CloseEvent","initEvent","wasClean","reason","EventTarget","removeAllListeners","_listeners","once","listener","self","fired","g","removeListener","apply","arguments","on","listeners","l","args","Array","ai","addListener","addEventListener","removeEventListener","eventType","canBubble","cancelable","bubbles","timeStamp","Date","stopPropagation","preventDefault","CAPTURING_PHASE","AT_TARGET","BUBBLING_PHASE","arr","indexOf","idx","slice","dispatchEvent","event","t","TransportMessageEvent","iframeUtils","FacadeJS","transport","_transport","_transportMessage","_transportClose","postMessage","frame","_send","send","_close","close","urlUtils","eventUtils","InfoIframeReceiver","loc","debug","process","env","NODE_ENV","availableTransports","transportMap","at","facadeTransport","transportName","parentOrigin","bootstrap_iframe","facade","currentWindowId","hash","onMessage","parent","origin","iframeMessage","ignored","windowId","p","version","transUrl","isOriginEqual","href","attachEvent","objectUtils","InfoAjax","AjaxObject","t0","xo","info","rtt","isObject","XHRLocalObject","InfoReceiverIframe","ir","utils","IframeTransport","InfoIframe","go","ifr","msg","document","body","enabled","XDR","XHRCors","XHRLocal","XHRFake","InfoReceiver","urlInfo","doXhr","_getReceiver","sameOrigin","sameScheme","addPath","timeoutRef","_cleanup","timeout","clearTimeout","URL","random","escape","browser","log","transports","protocols","TypeError","readyState","CONNECTING","extensions","protocols_whitelist","warn","_transportsWhitelist","_transportOptions","transportOptions","_timeout","sessionId","_generateSessionId","string","_server","server","numberString","parsedUrl","SyntaxError","secure","isLoopbackAddr","isArray","sortedProtocols","sort","proto","o","_origin","pathname","_urlInfo","nullOrigin","hasDomain","isSchemeEqual","_ir","_receiveInfo","userSetCode","CLOSING","CLOSED","OPEN","quote","_rto","countRTO","_transUrl","base_url","extend","enabledTransports","filterToEnabled","_transports","main","_connect","Transport","shift","needBody","unshift","timeoutMs","max","roundTrips","_transportTimeoutId","_transportTimeout","transportUrl","transportObj","content","payload","_open","forceFail","onmessage","onclose","onerror","ArrayPrototype","ObjectPrototype","FunctionPrototype","Function","StringPrototype","array_slice","_toString","isFunction","isString","supportsDescriptors","defineProperty","object","method","forceAssign","defineProperties","toObject","toInteger","num","floor","ToUint32","x","Empty","that","target","binder","bound","boundLength","boundArgs","boxedString","splitString","properlyBoxesContext","properlyBoxed","properlyBoxesNonStrict","properlyBoxesStrict","context","fun","thisp","hasFirefox2IndexOfBug","sought","string_split","compliantExecNpcg","separator","limit","output","flags","ignoreCase","multiline","extended","sticky","lastLastIndex","separator2","lastIndex","lastLength","RegExp","index","test","string_substr","substr","hasNegativeSubstrBug","start","XHR","XMLHttpRequest","AbstractXHRObject","opts","_start","xhr","addQuery","unloadRef","unloadAdd","open","ontimeout","noCredentials","supportsCORS","setRequestHeader","onreadystatechange","responseText","abort","unloadDel","axo","cors","EventSource","Driver","WebSocket","MozWebSocket","WebSocketBrowserDriver","AjaxBasedTransport","EventSourceReceiver","XHRCorsObject","EventSourceDriver","EventSourceTransport","HtmlfileReceiver","HtmlFileTransport","iframeUrl","iframeObj","createIframe","r","onmessageCallback","_message","detachEvent","cleanup","loaded","cdata","iframeEnabled","SenderReceiver","JsonpReceiver","jsonpSender","JsonPTransport","createAjaxSender","callback","opt","ajaxUrl","err","urlSuffix","Receiver","BufferedSender","sender","sendBuffer","sendStop","sendSchedule","sendScheduleWait","tref","IframeWrapTransport","iframeInfo","Polling","receiveUrl","_scheduleReceiver","poll","pollIsClosing","senderFunc","pollUrl","es","decodeURI","polluteGlobalNamespace","id","WPrefix","htmlfileEnabled","constructFunc","createHtmlfile","stop","urlWithId","_callback","_createScript","timeoutId","_abort","scriptErrorTimeout","aborting","script2","parentNode","removeChild","script","onload","onclick","_scriptError","errorTimer","loadedOkay","createElement","src","charset","htmlFor","async","isOpera","getElementsByTagName","insertBefore","firstChild","XhrReceiver","bufferPosition","_chunkHandler","buf","form","area","iframe","createForm","style","display","position","enctype","acceptCharset","appendChild","submit","completed","XDRObject","xdr","XDomainRequest","_error","onprogress","XhrDriver","to","WebsocketDriver","WebSocketTransport","ignore","ws","XdrStreamingTransport","XdrPollingTransport","cookie_needed","XhrPollingTransport","XhrStreamingTransport","crypto","getRandomValues","randomBytes","bytes","Uint8Array","navigator","userAgent","isKonqueror","extraEscapable","extraLookup","unrollLookup","escapable","unrolled","c","fromCharCode","a","charCodeAt","quoted","onUnload","afterUnload","isChromePackagedApp","chrome","app","runtime","ref","triggerUnloadCallbacks","unloadTriggered","errorCallback","unattach","contentWindow","doc","CollectGarbage","write","parentWindow","logObject","level","levelExists","console","prop","_randomStringChars","ret","number","transportsWhitelist","trans","websocket","b","qs","q","addr","_typeof","Symbol","iterator","formatArgs","save","load","useColors","storage","localstorage","colors","__nwjs","documentElement","WebkitAppearance","firebug","exception","table","parseInt","$1","namespace","humanize","diff","color","lastC","_console","namespaces","setItem","removeItem","DEBUG","localStorage","formatters","j","v","setup","createDebug","default","coerce","disable","enable","instances","names","skips","selectColor","prevTime","_len","_key","curr","Number","prev","format","formatter","logFn","destroy","delimiter","len","instance","stack","controlOrWhitespace","CRHTLF","slashes","protocolre","windowsDriveLetter","trimLeft","rules","sanitize","address","isSpecial","NaN","lolcation","globalVar","finaldestination","Url","unescape","scheme","extractProtocol","forwardSlashes","otherSlashes","slashesCount","rest","resolve","relative","base","last","up","extracted","instruction","instructions","lastIndexOf","charAt","password","auth","fn","char","ins","RxStompState","BehaviorSubject","filter","firstValueFrom","Observable","share","Client","_stompClient","_queuedMessages","client","noOp","_beforeConnect","_correlateErrors","_debug","_connectionStatePre$","_connectedPre$","currentState","connectionState$","connected$","_sendQueuedMessages","_serverHeadersBehaviourSubject$","serverHeaders$","stompErrors$","unhandledMessage$","unhandledReceipts$","unhandledFrame$","webSocketErrors$","rxStompConfig","assign","beforeConnect","correlateErrors","_this","_ref","_asyncToGenerator","_changeState","onConnect","onStompError","onWebSocketClose","onUnhandledMessage","onUnhandledReceipt","onUnhandledFrame","onWebSocketError","evt","deactivate","_this2","connected","getValue","active","publish","shouldRetry","retryIfDisconnected","queuedMessages","queuedMessage","defaults","subHeaders","unsubHeaders","subscribeOnlyOnce","destination","coldObservable","messages","stompSubscription","stompConnectedSubscription","connectedPre$","stompErrorsSubscription","correlatedDestination","unsubscribe","watchForReceipt","receiptId","asyncReceipt","augmentWebsocket","webSocket","terminate","onopen","ts","origOnClose","closeEvent","delay","getTime","BYTE","LF","NULL","StompHandler","ActivationState","StompSocketState","Versions","conf","stompVersions","connectionTimeout","reconnectDelay","heartbeatIncoming","heartbeatOutgoing","splitLargeFrames","maxWebSocketChunkSize","forceBinaryWSFrames","appendMissingNULLonIncoming","discardWebsocketOnCommFailure","INACTIVE","onDisconnect","logRawCommunication","onChangeState","connectHeaders","_disconnectHeaders","_stompHandler","_webSocket","disconnectHeaders","connectedVersion","ACTIVE","_activate","DEACTIVATING","then","_connectionWatcher","forceDisconnect","_createWebSocket","_disposeStompHandler","_schedule_reconnect","brokerURL","protocolVersions","binaryType","_reconnector","needToDispose","retPromise","Promise","origOnWebSocketClose","reject","discardWebsocket","dispose","_checkConnection","begin","transactionId","commit","ack","messageId","subscriptionId","nack","FrameImpl","command","binaryBody","escapeHeaderValues","skipContentLengthHeader","_binaryBody","isBinaryBody","_body","TextDecoder","TextEncoder","fromRawFrame","rawFrame","trim","header","hdrValueUnEscape","serializeCmdAndHeaders","serialize","cmdAndHeaders","toUnit8Array","buffer","lines","hdrValueEscape","isBodyEmpty","bodyLength","sizeOfUTF8","uint8CmdAndHeaders","nullTerminator","uint8Frame","marshall","CR","COLON","Parser","onFrame","onIncomingPing","_encoder","_decoder","_token","_initState","parseChunk","segment","chunk","chunkWithNull","byte","_onByte","_collectFrame","_collectCommand","_reinjectByte","_results","_consumeTokenAsUTF8","_collectHeaders","_consumeByte","_setupCollectBody","_collectHeaderKey","_headerKey","_collectHeaderValue","contentLengthHeader","_bodyBytesRemaining","_collectBodyFixedSize","_collectBodyNullTerminated","_retrievedBody","_consumeTokenAsRaw","rawResult","_client","_connected","_serverFrameHandlers","CONNECTED","_connectedVersion","V1_2","_escapeHeaderValues","_setupHeartbeat","MESSAGE","subscription","onReceive","_subscriptions","RECEIPT","_receiptWatchers","ERROR","_counter","_partialData","_lastServerActivityTS","now","serverFrameHandler","rawChunkAsString","ArrayBuffer","_cleanUp","errorEvent","supportedVersions","_transmit","V1_1","serverOutgoing","serverIncoming","ttl","_pinger","setInterval","_ponger","delta","_closeOrDiscardWebsocket","_closeWebsocket","rawChunk","out","receipt","clearInterval","hdrs","txId","transaction","versions","V1_0","arrayEach","array","iteratee","trimmedEndIndex","reTrimStart","baseTrim","identity","castFunction","reWhitespace","baseEach","collection","func","toNumber","INFINITY","MAX_INTEGER","toFinite","sign","remainder","isSymbol","NAN","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","other","valueOf","isBinary","PLATFORM_ID","Injectable","Inject","isPlatformBrowser","DOCUMENT","platformId","documentIsAccessible","getCookieRegExp","escapedName","safeDecodeURIComponent","encodedURIComponent","regExp","cookie","getAll","cookies","currentCookie","cookieName","cookieValue","expiresOrOptions","optionsBody","expires","cookieString","dateExpires","toUTCString","expiresDate","deleteAll","CookieService_Factory","prov","defineInjectable","token","ngDevMode","setClassMetadata","Document","decorators"],"sourceRoot":"webpack:///","x_google_ignoreList":[53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131]}