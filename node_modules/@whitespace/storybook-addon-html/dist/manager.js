import { addons, types, useAddonState, useChannel, useParameter } from '@storybook/manager-api';
import s, { useState, useEffect } from 'react';
import { AddonPanel, ScrollArea, ActionBar } from '@storybook/components';
import _ from 'react-syntax-highlighter/dist/esm/styles/hljs/github';
import { styled } from '@storybook/theming';
import D from 'react-syntax-highlighter';
import { format } from 'prettier/standalone';
import * as k from 'prettier/plugins/html';

var o="storybook/html",h=`${o}/panel`,l="html",P={CODE_UPDATE:`${o}/codeUpdate`};var N=styled("pre",{shouldForwardProp:e=>e!=="padded"})(({theme:e,padded:t})=>({display:"flex !important",justifyContent:"flex-start",margin:0,padding:t?`${e.layoutMargin}px !important`:0,tabSize:"2"})),H=styled.code`
  flex: 1;
  padding-right: 0;
  opacity: 1;
  counter-reset: line;

  .code-line {
    counter-increment: line;
    position: relative;
    display: block;
    margin-left: 1.5rem;
  }

  .code-line:before {
    content: counter(line);
    position: absolute;
    margin-left: -1.5rem;
    color: #000;
  }
`;function u({language:e="jsx",copyable:t=!1,bordered:n=!1,padded:p=!1,children:a,showLineNumbers:m=!1,wrapLines:d=!0,renderer:c,...g}){let[f,i]=useState(!1),r=w=>{w.preventDefault(),(async()=>(await navigator.clipboard.writeText(a),i(!0),window.setTimeout(()=>i(!1),1500)))();};return a?s.createElement(s.Fragment,null,s.createElement(ScrollArea,{vertical:!0},s.createElement(D,{padded:p||n,language:e,useInlineStyles:!0,PreTag:N,CodeTag:H,showLineNumbers:m,wrapLines:d,lineProps:{className:"code-line"},...g},a.trim())),t&&s.createElement(ActionBar,{actionItems:[{title:f?"Copied":"Copy",onClick:r}]})):null}var x=({code:e,showLineNumbers:t=!1,wrapLines:n=!1})=>s.createElement(u,{language:"xml",copyable:!0,padded:!0,style:_,showLineNumbers:t,wrapLines:n},e);var S=e=>{let[{code:t},n]=useAddonState(o,{code:null});useChannel({[P.CODE_UPDATE]:({code:i})=>{n(r=>({...r,code:i}));}});let p=useParameter(l,{highlighter:{showLineNumbers:!1,wrapLines:!0},prettier:{}}),{highlighter:{showLineNumbers:a=!1,wrapLines:m=!0}={},prettier:d={}}=p,c={htmlWhitespaceSensitivity:"ignore",...d,parser:"html",plugins:[k]},[g,f]=useState(null);return useEffect(()=>{(async()=>{let r=t&&await format(t,c);f(r);})().catch(r=>console.error(r));},[t,c]),s.createElement(AddonPanel,{...e},s.createElement(x,{code:g,showLineNumbers:a,wrapLines:m}))};addons.register(o,()=>{addons.add(h,{type:types.PANEL,title:"HTML",match:({viewMode:e})=>e==="story",render:S,paramKey:l});});
//# sourceMappingURL=out.js.map
//# sourceMappingURL=manager.js.map