"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.importFormatter = exports.isCoreFormatter = exports.defaultFormatter = void 0;
const node_fs_1 = require("node:fs");
const node_path_1 = require("node:path");
const node_url_1 = require("node:url");
const stylelint_1 = require("stylelint");
exports.defaultFormatter = 'string';
const formatterKeys = Object.keys(stylelint_1.formatters);
function isCoreFormatter(formatter) {
    if (!formatter || typeof formatter !== 'string')
        return false;
    return formatterKeys.includes(formatter);
}
exports.isCoreFormatter = isCoreFormatter;
async function importFormatter(formatter) {
    if (!formatter || typeof formatter !== 'string')
        throw new Error('Formatter must be a string!');
    if (isCoreFormatter(formatter))
        return formatter;
    let moduleOrFilePath = formatter;
    if ((0, node_fs_1.existsSync)(moduleOrFilePath))
        moduleOrFilePath = (0, node_path_1.resolve)(moduleOrFilePath);
    return await Promise.resolve(`${(0, node_path_1.isAbsolute)(moduleOrFilePath) ? (0, node_url_1.pathToFileURL)(moduleOrFilePath).toString() : moduleOrFilePath}`).then(s => require(s)).then((m) => ('default' in m ? m.default : m));
}
exports.importFormatter = importFormatter;
//# sourceMappingURL=formatter.js.map