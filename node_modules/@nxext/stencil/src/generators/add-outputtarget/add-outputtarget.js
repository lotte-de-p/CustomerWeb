"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.outputtargetSchematic = exports.outputtargetGenerator = void 0;
const tslib_1 = require("tslib");
const devkit_1 = require("@nx/devkit");
const utillities_1 = require("../../utils/utillities");
const generator_1 = require("./add-angular/generator");
const generator_2 = require("./add-react/generator");
//import addVueGenerator from './add-vue/generator';
const generator_3 = require("./add-svelte/generator");
function outputtargetGenerator(host, options) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        const projectConfig = (0, devkit_1.readProjectConfiguration)(host, options.projectName);
        const tasks = [];
        if ((0, utillities_1.isBuildableStencilProject)(projectConfig)) {
            if (options.outputType === 'angular') {
                tasks.push(yield (0, generator_1.default)(host, options));
            }
            if (options.outputType === 'react') {
                tasks.push(yield (0, generator_2.default)(host, options));
            }
            //if (options.outputType === 'vue') {
            //  tasks.push(await addVueGenerator(host, options));
            //}
            if (options.outputType === 'svelte') {
                tasks.push(yield (0, generator_3.default)(host, options));
            }
            if (!options.skipFormat) {
                yield (0, devkit_1.formatFiles)(host);
            }
        }
        else {
            devkit_1.logger.info((0, devkit_1.stripIndents) `
      Please use a buildable library for custom outputtargets

      You could make this library buildable with:

      nx generate @nxext/stencil:make-lib-buildable ${options.projectName}
      or
      ng generate @nxext/stencil:make-lib-buildable ${options.projectName}
    `);
        }
        return (0, devkit_1.runTasksInSerial)(...tasks);
    });
}
exports.outputtargetGenerator = outputtargetGenerator;
exports.default = outputtargetGenerator;
exports.outputtargetSchematic = (0, devkit_1.convertNxGenerator)(outputtargetGenerator);
//# sourceMappingURL=add-outputtarget.js.map