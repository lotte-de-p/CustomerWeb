"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.initSchematic = exports.initGenerator = void 0;
const tslib_1 = require("tslib");
const add_style_module_dependencies_1 = require("./lib/add-style-module-dependencies");
const add_e2e_dependencies_1 = require("./lib/add-e2e-dependencies");
const add_dependencies_for_apptype_1 = require("./lib/add-dependencies-for-apptype");
const devkit_1 = require("@nx/devkit");
const devkit_2 = require("@nx/devkit");
const add_cypress_1 = require("./lib/add-cypress");
const add_jest_1 = require("./lib/add-jest");
function initGenerator(host, options) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        const dependenciesTask = (0, add_dependencies_for_apptype_1.addDependenciesByApptype)(host, options.appType);
        const styleDependenciesTask = (0, add_style_module_dependencies_1.addStyledDependencies)(host, options);
        const addPuppeteerTask = yield (0, add_e2e_dependencies_1.addPuppeteer)(host, options);
        const addCypressTask = yield (0, add_cypress_1.addCypress)(host, options);
        const jestInitTask = yield (0, add_jest_1.addJest)(host, options);
        if (!options.skipFormat) {
            yield (0, devkit_1.formatFiles)(host);
        }
        return (0, devkit_2.runTasksInSerial)(dependenciesTask, styleDependenciesTask, addPuppeteerTask, addCypressTask, jestInitTask);
    });
}
exports.initGenerator = initGenerator;
exports.initSchematic = (0, devkit_1.convertNxGenerator)(initGenerator);
//# sourceMappingURL=init.js.map