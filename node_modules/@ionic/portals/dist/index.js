/*! Ionic Portals: https://ionic.io/portals - Commercial License */
import { registerPlugin, Capacitor, WebPlugin } from '@capacitor/core';

const Portals = registerPlugin('Portals', {
    web: () => Promise.resolve().then(function () { return web; }).then(m => new m.PortalsWeb()),
});
/**
 * Provides access to any initial state provided by the native application.
 * If the web application is running in a Portal, this will always be defined
 * with the name property.
 * */
function getInitialContext() {
    if (Capacitor.getPlatform() === "android") {
        //@ts-ignore
        return JSON.parse(AndroidInitialContext.initialContext());
    }
    else {
        return window.portalInitialContext;
    }
}
function subscribe(topic, callback) {
    return Portals.addListener(topic, callback);
}
function publish(message) {
    return Portals.publishNative(message);
}

class PortalsWeb extends WebPlugin {
    // eslint-disable-next-line
    async publishNative(_message) { }
}

const web = /*#__PURE__*/Object.freeze({
    __proto__: null,
    PortalsWeb: PortalsWeb
});

export { getInitialContext, publish, subscribe };
//# sourceMappingURL=index.js.map
